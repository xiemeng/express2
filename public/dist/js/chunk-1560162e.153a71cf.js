(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1560162e"],{"0235":function(t,e,a){"use strict";a("19a1")},"0528":function(t,e,a){},"0801":function(t,e,a){"use strict";a("9dc1")},13105:function(t,e,a){},"19a1":function(t,e,a){},"22b3":function(t,e,a){},"22cc":function(t,e,a){},2880:function(t,e,a){"use strict";a("592d")},"2a86":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),t.tipText?e("span",{attrs:{name:"tip"}},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" "+t._s(t.tipText)+" ")],1)]):t._e(),t._t("default"),t.footer?e("div",{staticClass:"foot-button"},[e("div",{staticClass:"left"},[t._t("bottomLeft")],2),e("a-space",{attrs:{size:12}},[t._t("footer"),e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v(t._s(t.cancleText))]),e("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("serviceOk")}}},[t._v(t._s(t.okText))])],2)],1):t._e()],2)},i=[],n={name:"CommonModal",props:{title:{type:String,default:"标题"},cancleText:{type:String,default:"取消"},okText:{type:String,default:"确定"},tipText:{type:[String,Boolean],default:!1},footer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}}},o=n,r=(a("2880"),a("2877")),c=Object(r["a"])(o,s,i,!1,null,"c55b780c",null);e["a"]=c.exports},"47b5":function(t,e,a){"use strict";a("f0c4")},"487a":function(t,e,a){(function(e,a){t.exports=a()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var a,s,i,n,o,r=function(){t.apply(n,o),s=a};return function(){if(n=this,o=arguments,a=Date.now(),i&&(clearTimeout(i),i=null),s){var t=e-(a-s);t<0?r():i=setTimeout((function(){r()}),t)}else r()}},a=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},s=document.defaultView.getComputedStyle,i=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var a=s(e).overflowY;if("scroll"===a||"auto"===a)return e;e=e.parentNode}return window},n=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},o=function(t){return t===window?a(window):t.getBoundingClientRect().top+a(window)},r=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,a=t.el,s=a.getAttribute("infinite-scroll-throttle-delay"),n=200;s&&(n=Number(t.vm[s]||s),(isNaN(n)||n<0)&&(n=200)),t.throttleDelay=n,t.scrollEventTarget=i(a),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var o=a.getAttribute("infinite-scroll-disabled"),r=!1;o&&(this.vm.$watch(o,(function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)})),r=Boolean(t.vm[o])),t.disabled=r;var c=a.getAttribute("infinite-scroll-distance"),u=0;c&&(u=Number(t.vm[c]||c),isNaN(u)&&(u=0)),t.distance=u;var d=a.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&l.call(t);var p=a.getAttribute("infinite-scroll-listen-for-event");p&&t.vm.$on(p,(function(){l.call(t)}))}},l=function(t){var e=this.scrollEventTarget,s=this.el,i=this.distance;if(!0===t||!this.disabled){var r=a(e),c=r+n(e),l=!1;if(e===s)l=e.scrollHeight-c<=i;else{var u=o(s)-o(e)+s.offsetHeight+r;l=c+i>=u}l&&this.expression&&this.expression()}},u={bind:function(e,a,s){e[t]={el:e,vm:s.context,expression:a.value};var i=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){r(e)&&c.call(e[t],i),e[t].bindTryCount=0;var a=function a(){e[t].bindTryCount>10||(e[t].bindTryCount++,r(e)?c.call(e[t],i):setTimeout(a,50))};a()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u}))},"4d85":function(t,e,a){"use strict";a("70ba")},"508c":function(t,e,a){},"58c3":function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return o})),a.d(e,"g",(function(){return r})),a.d(e,"c",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"h",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"k",(function(){return p})),a.d(e,"i",(function(){return m})),a.d(e,"j",(function(){return g}));var s=a("b775"),i={Info:"/client_manager/blacklist/rules/Info",update:"/client_manager/blacklist/rules/update",list:"/client_manager/blacklist/list",save:"/client_manager/blacklist/save",Delete:"/client_manager/blacklist/delete",importRecodeList:"/client_manager/blacklist/importRecodeList",importCustomer:"/client_manager/blacklist/importCustomer",deleteImportRecode:"/client_manager/blacklist/deleteImportRecode",importErrorRecodeList:"/client_manager/blacklist/importErrorRecodeList",exportModel:"/client_manager/blacklist/exportModel",exportCustomer:"/client_manager/blacklist/exportCustomer"};function n(t){return Object(s["b"])({url:i.exportCustomer,method:"get",params:t,responseType:"blob"})}function o(t){return Object(s["b"])({url:i.exportModel,method:"get",params:t,responseType:"blob"})}function r(t){return Object(s["b"])({url:i.importErrorRecodeList,method:"get",params:t})}function c(t){return Object(s["b"])({url:i.deleteImportRecode,method:"post",data:t})}function l(t){return Object(s["b"])({url:i.importCustomer,method:"post",data:t})}function u(t){return Object(s["b"])({url:i.importRecodeList,method:"get",params:t})}function d(t){return Object(s["b"])({url:i.Delete,method:"post",data:t})}function f(t){return Object(s["b"])({url:i.Info,method:"get",params:t})}function p(t){return Object(s["b"])({url:i.update,method:"post",data:t})}function m(t){return Object(s["b"])({url:i.list,method:"post",data:t})}function g(t){return Object(s["b"])({url:i.save,method:"post",data:t})}},"592d":function(t,e,a){},"59d1":function(t,e,a){"use strict";a("22cc")},"621b":function(t,e,a){"use strict";a("b518")},"67be":function(t,e,a){},"6bd9":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"use-person"},[e("ul",{staticClass:"a-line-omit",on:{click:function(e){t.visibleUsePerson=!0}}},[t._l(t.usePersionList,(function(a){return e("li",{key:a.key,staticClass:"a-line-omit"},[e("a-tooltip",{attrs:{title:a.title}},[a.icon?e("a-icon",{staticClass:"icon",attrs:{type:a.icon}}):e("a-avatar",{staticClass:"imgs",attrs:{size:23,src:a.source.thumbAvatar||t.defaultThumbAvatar}}),e("span",{staticClass:"title"},[t._v(" "+t._s(a.title)+" ")])],1)],1)})),t.usePersionList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v(t._s(t.placeHolder))]):t._e()],2),t.usePersionList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.usePersionList.length)+"个账号")]):t._e(),e("a-icon",{attrs:{type:"caret-down"}})],1),e("a-modal",{attrs:{footer:null,width:"680px",centered:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",t._b({attrs:{type:t.type,title:t.title,selectList:t.usePersionList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleUsePerson=!1}}},"AddTransfer",t.source,!1))],1)],1)},i=[],n=(a("d81d"),a("1eb1")),o={name:"UsePerson",props:{defaultUsePerson:{type:[Array],default:function(){return[]}},placeHolder:{type:[String],default:""},type:{type:[String],default:""},title:{type:[String],default:"选择成员"},value:{type:[Array],default:function(){return[]}},needControlReturn:{type:Boolean,default:!1},source:{type:Object,default:function(){return{}}}},components:{AddTransfer:n["a"]},data:function(){return{defaultThumbAvatar:a("b5c3"),visibleUsePerson:!1,selectRoleIdList:[],usePersionList:this.value}},watch:{value:function(){this.usePersionList=this.value}},methods:{serviceOk:function(t){var e=this;t.length<1?this.usePersionList=this.defaultUsePerson:this.usePersionList=t,this.usePersionList.map((function(t){t.value=100})),this.needControlReturn||(this.visibleUsePerson=!1),this.$emit("input",this.usePersionList),this.$emit("usePersionInfo",this.usePersionList,(function(){e.visibleUsePerson=!1}))}}},r=o,c=(a("f0b2"),a("2877")),l=Object(c["a"])(r,s,i,!1,null,"de146f5e",null);e["a"]=l.exports},"70ba":function(t,e,a){},7485:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"f",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"e",(function(){return u}));var s=a("b775"),i={info:"/client_manager/fieldCustomRule/info",updateBase:"/client_manager/fieldCustomRule/updateBase",save:"/client_manager/fieldCustomRule/save",update:"/client_manager/fieldCustomRule/update",deleteRule:"/client_manager/fieldCustomRule/delete",move:"/client_manager/fieldCustomRule/move"};function n(t){return Object(s["b"])({url:i.info,method:"get",get:t})}function o(t){return Object(s["b"])({url:i.updateBase,method:"post",data:t})}function r(t){return Object(s["b"])({url:i.save,method:"post",data:t})}function c(t){return Object(s["b"])({url:i.deleteRule,method:"post",params:t})}function l(t){return Object(s["b"])({url:i.move,method:"post",params:t})}function u(t){return Object(s["b"])({url:i.update,method:"post",data:t})}},7620:function(t,e,a){},7627:function(t,e,a){"use strict";a("13105")},"7e11":function(t,e){t.exports="data:image/png;base64,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"},"81dd":function(t,e,a){"use strict";a("0528")},"8e9f":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("CommonModal",t._b({attrs:{loading:t.loading},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.sourceModal,!1),[e("section",{staticClass:"section"},[e("div",[t._v(" 将给客户修改评分,此次 "),e("a-select",{on:{change:t.changeWay},model:{value:t.isAdd,callback:function(e){t.isAdd=e},expression:"isAdd"}},t._l(t.wayList,(function(a,s){return e("a-select-option",{key:s,attrs:{value:a.id}},[t._v(" "+t._s(a.text)+" ")])})),1),e("a-input-number",{staticClass:"score",attrs:{max:1e4,min:0},model:{value:t.score,callback:function(e){t.score=e},expression:"score"}}),t._v(" 分 ")],1),e("FormList",{staticClass:"textarea",attrs:{formInfo:t.textAreaInfo}}),t.isBatch?t._e():e("div",[e("a-button",{staticClass:"history-score",attrs:{type:"link"},on:{click:function(e){t.isOpen=!t.isOpen}}},[t._v(" "+t._s(t.isOpen?"收起":"查看评分修改记录")+" ")]),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"history-list"},[e("h4",[t._v("历史修改评分记录")]),t._l(t.scoreHistoryList,(function(a,s){return e("li",{key:s},[e("p",{staticClass:"time"},[e("a-icon",{attrs:{type:"clock-circle"}}),t._v(t._s(a.updateTime))],1),e("div",{staticClass:"name-info"},[e("a-avatar",{attrs:{size:22,src:a.staffAvatar}}),e("span",{staticClass:"name"},[t._v(t._s(a.contentText))])],1)])}))],2)],1)],1)])},i=[],n=a("5530"),o=(a("d81d"),a("ac1f"),a("5319"),a("d3b7"),a("2a86")),r=a("26f2"),c=a("90a8"),l={name:"ModifySouce",components:{CommonModal:o["a"],FormList:r["a"]},props:{selectedRows:{type:[Array],default:function(){return[]}},isBatch:{type:Boolean,default:!0},customerWxid:{type:String,default:""}},watch:{selectedRows:{handler:function(){this.isBatch&&(this.sourceModal.tipText=this.wayList[0].tip)},immediate:!0,deep:!0},isOpen:function(){this.isOpen&&this.scoreHistoryList.length<1&&this.getHistoryList()}},data:function(){return{isOpen:!1,scoreHistoryList:[],sourceModal:{title:"修改评分",tipText:""},loading:!1,score:1,textAreaInfo:{title:"",type:"textarea",tips:"请输入修改评分批注",maxLength:300,value:""},isAdd:1,wayList:[{text:"添加",tip:"将给满足条件的".concat(this.selectedRows.length,"客户批量添加评分"),id:1},{text:"减少",id:0,tip:"将给满足条件的".concat(this.selectedRows.length,"个客户批量减少评分，若减少的评分大于客户拥有评分，则该客户评分直接减少至0 ")}]}},computed:{getParams:function(){return{customerWxidList:this.selectedRows.map((function(t){return t.customerId})),isAdd:Boolean(this.isAdd),score:this.score,isBatch:this.isBatch,remark:this.textAreaInfo.value}}},methods:{getHistoryList:function(){var t=this,e={currentPage:1,pageSize:200,customerWxid:this.customerWxid};Object(c["w"])(e).then((function(e){var a;t.scoreHistoryList=(null===(a=e.data)||void 0===a?void 0:a.list.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{contentText:t.content.replace(/#staff#​*/g,t.staffName)})})))||[]})).catch((function(e){t.$message.error(e)}))},serviceOk:function(){var t=this;this.score?(this.loading=!0,Object(c["z"])(this.getParams).then((function(e){t.$message.success("修改评分成功"),t.$emit("serviceOk")})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))):this.$message.warning("请输入分数值")},changeWay:function(t){this.sourceModal.tipText=this.wayList[t].tip}}},u=l,d=(a("c29b"),a("2877")),f=Object(d["a"])(u,s,i,!1,null,"78b65b02",null);e["a"]=f.exports},"90a8":function(t,e,a){"use strict";a.d(e,"q",(function(){return n})),a.d(e,"p",(function(){return o})),a.d(e,"x",(function(){return r})),a.d(e,"e",(function(){return c})),a.d(e,"j",(function(){return l})),a.d(e,"A",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"v",(function(){return p})),a.d(e,"w",(function(){return m})),a.d(e,"z",(function(){return g})),a.d(e,"h",(function(){return v})),a.d(e,"i",(function(){return h})),a.d(e,"o",(function(){return b})),a.d(e,"u",(function(){return y})),a.d(e,"m",(function(){return C})),a.d(e,"f",(function(){return k})),a.d(e,"k",(function(){return _})),a.d(e,"l",(function(){return x})),a.d(e,"y",(function(){return L})),a.d(e,"g",(function(){return T})),a.d(e,"d",(function(){return S})),a.d(e,"c",(function(){return I})),a.d(e,"s",(function(){return w})),a.d(e,"r",(function(){return O})),a.d(e,"t",(function(){return E})),a.d(e,"n",(function(){return N}));var s=a("b775"),i={customerList:"/client_manager/client/getCustomerList",dictionaryByCode:"/client_manager/client/getDictionaryByCode",distinctNum:"/client_manager/client/getDistinctNum",syncCustomerData:"/client_manager/client/syncCustomerData",tagGroup:"/client_manager/CustomerTag/getTagGroup ",customerLoss:"/client_manager/customerLoss/page",batchTagging:"/client_manager/CustomerTag/batchTagging",batchTaggingFront:"/client_manager/CustomerTag/batchTaggingFront",batchDelTagFront:"/client_manager/CustomerTag/batchDelTagFront",findByCustomerGroup:"/client_manager/client/findByCustomerGroup",findByCustomerEvent:"/client_manager/client/findByCustomerEvent",findEventByCustomerWxid:"/client_manager/client/findEventByCustomerWxid",findByCustomField:"/client_manager/client/findByCustomField",exportDown:"/client_manager/customerLoss/export",getCustomerListExport:"/client_manager/client/getCustomerListExport",findByCustomFieldExport:"/client_manager/client/findByCustomFieldExport",customerScoreExport:"/client_manager/customerScore/customerScoreExport",customerScore:"/client_manager/customerScore/customerScore",updateScore:"/client_manager/customerScore/updateScore",historyList:"/client_manager/customerScore/list",getTemplateList:"/client_manager/customerEvent/getTemplateList",addTemplateEvent:"/client_manager/customerEvent/addTemplateEvent",addTemplate:"/client_manager/customerEvent/addTemplate",updateTemplate:"/client_manager/customerEvent/updateTemplate",delTemplate:"/client_manager/customerEvent/delTemplate",findByCustomIntegral:"/client_manager/customerIntegral/findByCustomIntegral",findByCustomIntegralExport:"/client_manager/customerIntegral/findByCustomIntegralExport",channelList:"/client_manager/customerIntegral/channelList",integralList:"/client_manager/customerIntegral/integralList"};function n(t){return Object(s["b"])({url:i.findByCustomIntegralExport,method:"post",data:t,responseType:"blob"})}function o(t){return Object(s["b"])({url:i.findByCustomIntegral,method:"post",data:t})}function r(t){return Object(s["b"])({url:i.integralList,method:"post",data:t})}function c(t){return Object(s["b"])({url:i.channelList,method:"get",params:t})}function l(t){return Object(s["b"])({url:i.delTemplate,method:"get",params:t})}function u(t){return Object(s["b"])({url:i.updateTemplate,method:"get",params:t})}function d(t){return Object(s["b"])({url:i.addTemplate,method:"get",params:t})}function f(t){return Object(s["b"])({url:i.addTemplateEvent,method:"get",params:t})}function p(t){return Object(s["b"])({url:i.getTemplateList,method:"get",params:t})}function m(t){return Object(s["b"])({url:i.historyList,method:"get",params:t})}function g(t){return Object(s["b"])({url:i.updateScore,method:"post",data:t})}function v(t){return Object(s["b"])({url:i.customerScore,method:"post",data:t})}function h(t){return Object(s["b"])({url:i.customerScoreExport,method:"post",data:t,responseType:"blob"})}function b(t){return Object(s["b"])({url:i.findByCustomFieldExport,method:"post",data:t,responseType:"blob"})}function y(t){return Object(s["b"])({url:i.getCustomerListExport,method:"get",params:t,responseType:"blob"})}function C(t){return Object(s["b"])({url:i.exportDown,method:"post",data:t,responseType:"blob"})}function k(t){return Object(s["b"])({url:i.customerList,method:"get",params:t})}function _(t){return Object(s["b"])({url:i.dictionaryByCode,method:"get",params:t})}function x(t){return Object(s["b"])({url:i.distinctNum,method:"get",params:t})}function L(){return Object(s["b"])({url:i.tagGroup,method:"post",data:{}})}function T(t){return Object(s["b"])({url:i.customerLoss,method:"post",data:t})}function S(t){return Object(s["b"])({url:i.batchTaggingFront,method:"post",data:t})}function I(t){return Object(s["b"])({url:i.batchDelTagFront,method:"post",data:t})}function w(t){return Object(s["b"])({url:i.findByCustomerGroup,method:"post",data:t})}function O(t){return Object(s["b"])({url:i.findByCustomerEvent,method:"post",data:t})}function E(t){return Object(s["b"])({url:i.findEventByCustomerWxid,method:"post",data:t})}function N(t){return Object(s["b"])({url:i.findByCustomField,method:"post",data:t})}},9694:function(t,e,a){},"986e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var s=a("2b0e"),i=new s["a"]},9942:function(t,e,a){"use strict";a("f6d2")},"9dc1":function(t,e,a){},a2d8:function(t,e,a){"use strict";a("508c")},b321:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v("批量"+t._s("add"===t.status?"打":"移除")+"标签")]),e("div",{staticClass:"tips"},[t._v(" 为选中的"+t._s(t.selectedRows.length)+"个客户批量"+t._s("add"===t.status?"打":"移除")+"标签，请选择标签 ")]),e("section",{staticClass:"main"},[e("ul",t._l(t.DataGroupList,(function(a){return e("li",{key:a.grpTagId},[e("div",{staticClass:"tag-group-name"},[t._v(t._s(a.groupName)+"：")]),e("TagComponents",{attrs:{tagslist:a,selectTagList:a.selectTagList,isEdit:!0},on:{addTag:t.addTag}})],1)})),0)]),e("div",{staticClass:"foot-button"},[e("a-button",{attrs:{type:"link"},on:{click:function(e){t.visible=!0}}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 新建标签组 ")],1),e("a-space",{attrs:{size:12}},[e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary",loading:t.spinning},on:{click:function(e){return t.submitForm()}}},[t._v("确定")])],1)],1),e("a-modal",{attrs:{footer:null,width:"599px",centered:"",destroyOnClose:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("NewLabelgroup",{attrs:{tagDetail:t.tagDetail},on:{cancle:function(e){t.visible=!1},serviceOk:t.serviceOk}})],1)],1)},i=[],n=a("5530"),o=(a("0481"),a("4069"),a("d81d"),a("4de4"),a("d3b7"),a("c758")),r=a("6290"),c=a("90a8"),l=a("7183"),u={name:"MakeTags",data:function(){return{visible:!1,tagDetail:"",DataGroupList:[]}},components:{NewLabelgroup:o["a"],TagComponents:r["a"]},props:{selectedRows:{type:Array,default:function(){return[]}},status:{type:String,default:""},spinning:{type:Boolean,default:!1}},created:function(){this.getGroupList()},computed:{getSelectTag:function(){return this.DataGroupList.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat()}},methods:{addTag:function(t){var e=this,a=t.value,s=t.tagItem,i=t.callBack,n=this.getAddParams(a,s);Object(l["a"])(n).then((function(){e.$message.success("添加标签成功"),i()}))},getAddParams:function(t,e){var a={wxGroupId:e.wxGroupId,tagGroupName:e.groupName,scope:e.depScope?1:0,addOrEditTags:[{tagName:t}],departments:[]};return a},serviceOk:function(){this.visible=!1,this.getGroupList()},getGroupList:function(){var t=this,e={grpName:""};return Object(c["y"])(e).then((function(e){var a,s;t.DataGroupList=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(s=a.tagGroup)||void 0===s?void 0:s.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{selectTagList:[]})}))})).catch((function(e){t.$message.error(e)}))},submitForm:function(){this.getSelectTag.length<1?this.$message.warning("请选择标签"):this.$emit("serviceOk",this.getSelectTag)}}},d=u,f=(a("d302"),a("2877")),p=Object(f["a"])(d,s,i,!1,null,"4cb314d1",null);e["a"]=p.exports},b4f0:function(t,e,a){},b518:function(t,e,a){},b52b:function(t,e,a){"use strict";a.d(e,"j",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"d",(function(){return p})),a.d(e,"f",(function(){return m}));var s=a("b775"),i={labelGroupList:"/client_group/tagBuildGroup/page",labelGroupAdd:"/client_group/tagBuildGroup/add",labelGroupDel:"/client_group/tagBuildGroup/delGroupTagPull",getChat:"/client_group/tagBuildGroup/getChat",getStatistics:"/client_group/tagBuildGroup/getStatistics",queryCustomers:"/client_group/tagBuildGroup/customer/get",customersDetail:"/client_group/tagBuildGroup/staff/get",remind:"/client_group/tagBuildGroup/remind",calculateNum:"/client_group/tagBuildGroup/calculateNum",updateDate:"/client_group/tagBuildGroup/getNewData"};function n(t){return Object(s["b"])({url:i.updateDate,method:"get",params:t})}function o(t){return Object(s["b"])({url:i.getChat,method:"get",params:t})}function r(t){return Object(s["b"])({url:i.calculateNum,method:"post",data:t})}function c(t){return Object(s["b"])({url:i.remind,method:"post",data:t})}function l(t){return Object(s["b"])({url:i.labelGroupList,method:"get",params:t})}function u(t){return Object(s["b"])({url:i.labelGroupAdd,method:"post",data:t})}function d(t){return Object(s["b"])({url:i.queryCustomers,method:"post",data:t})}function f(t){return Object(s["b"])({url:i.customersDetail,method:"post",data:t})}function p(t){return Object(s["b"])({url:i.getStatistics,method:"get",params:t})}function m(t){return Object(s["b"])({url:i.labelGroupDel,method:"post",params:t})}},b5c3:function(t,e,a){t.exports=a.p+"assets/default.c42b7ede.svg"},b5de:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("a-tabs",{staticClass:"background-white",attrs:{"default-active-key":t.$route.meta.seletedTab},on:{change:t.changeTab}},[e("a-tab-pane",{key:0,attrs:{tab:"客户属性筛选"}},[e("SearchForm"),e("div",{staticClass:"bar"}),e("CustomerTable")],1),e("a-tab-pane",{key:1,attrs:{tab:"所在群聊筛选"}},[e("GroupTable")],1),e("a-tab-pane",{key:2,attrs:{tab:"客户动态筛选"}},[e("DynamicTable")],1),e("a-tab-pane",{key:4,attrs:{tab:"客户评分筛选"}},[e("CustomerRating")],1),e("a-tab-pane",{key:3,attrs:{tab:"自定义信息筛选"}},[e("CustomInfo")],1),e("a-tab-pane",{key:5,attrs:{tab:"客户积分筛选"}},[e("CustomerIntegral")],1)],1)],1)},i=[],n=(a("b0c0"),function(){var t=this,e=t._self._c;return e("a-form",{staticClass:"search-form auto-box",attrs:{layout:"inline",labelAlign:"right"}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"搜索客户:"}},[e("a-input-search",{staticStyle:{width:"220px"},attrs:{allowClear:"",placeholder:"请输入要搜索的客户"},on:{search:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"所属客服"}},[e("div",{staticClass:"use-person",on:{click:function(e){t.visibleUsePerson=!0}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.serviceList,(function(a){return e("li",{key:a.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(a.title))])],1)})),t.serviceList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v("请选择客服")]):t._e()],2),t.serviceList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.serviceList.length)+"个账号")]):t._e(),e("div",{staticClass:"icon"},[t.serviceList.length<1?e("a-icon",{attrs:{type:"down"}}):t._e(),t.serviceList.length>0?e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return e.stopPropagation(),t.clean.apply(null,arguments)}}}):t._e()],1)])])],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"企业标签"}},[e("div",{staticClass:"use-person",on:{click:function(e){t.visibleSelectTag=!0}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.customerTagInfo.tagList,(function(a){return e("li",{key:a.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(a.tagName))])],1)})),t.customerTagInfo.tagList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v("请选择标签")]):t._e()],2),t.customerTagInfo.tagList.length>2?e("span",{staticClass:"omit"},[t._v(" 等"+t._s(t.customerTagInfo.tagList.length)+"个标签 ")]):t._e(),e("div",{staticClass:"icon"},[t.customerTagInfo.tagList.length<1?e("a-icon",{attrs:{type:"down"}}):t._e(),t.customerTagInfo.tagList.length>0?e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return e.stopPropagation(),t.cleanTag.apply(null,arguments)}}}):t._e()],1)])])],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"添加时间"}},[e("a-range-picker",{staticStyle:{width:"280px"},on:{change:t.changeDate},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"添加渠道"}},[e("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择渠道",allowClear:"",maxTagCount:10},on:{change:t.emitCustomerList},model:{value:t.selectAddWay,callback:function(e){t.selectAddWay=e},expression:"selectAddWay"}},t._l(t.addWay,(function(a){return e("a-select-option",{key:a.value},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"性别"}},[e("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择性别",allowClear:""},on:{change:t.emitCustomerList},model:{value:t.selectGender,callback:function(e){t.selectGender=e},expression:"selectGender"}},t._l(t.gender,(function(a){return e("a-select-option",{key:a.value},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"流失状态"}},[e("a-select",{staticStyle:{width:"220px"},attrs:{allowClear:"",placeholder:"请选择流失状态"},on:{change:t.emitCustomerList},model:{value:t.selectLossStatus,callback:function(e){t.selectLossStatus=e},expression:"selectLossStatus"}},t._l(t.lossStatus,(function(a){return e("a-select-option",{key:a.value},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1),e("a-col",{staticClass:"r-b-16",staticStyle:{"margin-left":"30px"}},[e("a-button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1),e("SelectTags",{attrs:{tags:t.customerTagInfo.tagList},on:{pitchTag:t.pitchTag},model:{value:t.visibleSelectTag,callback:function(e){t.visibleSelectTag=e},expression:"visibleSelectTag"}}),e("a-modal",{attrs:{footer:null,width:"680px",centered:"",destroyOnClose:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",{attrs:{type:"deptId",title:"请选择客服",selectList:t.serviceList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleUsePerson=!1}}})],1)],1)}),o=[],r=(a("498a"),a("d3b7"),a("3ca3"),a("ddb0"),a("90a8")),c=a("1eb1"),l=(a("caad"),a("2532"),function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{destroyOnClose:"",width:"600px"},on:{ok:t.ok,cancel:t.cancel},model:{value:t.visibleSelectTag,callback:function(e){t.visibleSelectTag=e},expression:"visibleSelectTag"}},[e("h6",{staticClass:"dialog-title"},[t._v("选择标签")]),e("a-radio-group",{staticClass:"condition",attrs:{"button-style":"solid"},model:{value:t.filterType,callback:function(e){t.filterType=e},expression:"filterType"}},[e("a-radio-button",{attrs:{value:2}},[t._v(" 以下标签满足其中之一 ")]),e("a-radio-button",{attrs:{value:1}},[t._v(" 以下标签同时满足 ")])],1),e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入企业标签"}}),e("ul",{staticClass:"tag-wrap"},t._l(t.tagList,(function(a){return e("li",{key:a.groupId},[e("p",[t._v(t._s(a.groupName)+":")]),t._l(a.tags,(function(a){return e("a-tag",{key:a.tagId,attrs:{color:t.selectTagIds.includes(a.tagId)?"blue":""},on:{click:function(e){return t.checkedTag(a)}}},[t._v(t._s(a.tagName))])}))],2)})),0)],1)}),u=[],d=(a("d81d"),a("c740"),a("a434"),{name:"SelectTags",props:["value","tags"],data:function(){return{visibleSelectTag:!1,tagList:[],filterType:2,selectTags:[]}},watch:{value:function(){this.visibleSelectTag=this.value},tags:function(){this.selectTags=JSON.parse(JSON.stringify(this.tags))}},computed:{selectTagIds:function(){return this.selectTags.map((function(t){return t.tagId}))}},created:function(){this.getTags(),this.selectTags=JSON.parse(JSON.stringify(this.tags))},methods:{checkedTag:function(t){var e=this.selectTags.findIndex((function(e){return e.tagId===t.tagId}));e>=0?this.selectTags.splice(e,1):this.selectTags.push(t)},cancel:function(){this.visibleSelectTag=!1,this.$emit("input",this.visibleSelectTag)},ok:function(){this.visibleSelectTag=!1,this.$emit("input",this.visibleSelectTag),this.$emit("pitchTag",{filterType:this.filterType,selectTags:this.selectTags})},getTags:function(){var t=this;Object(r["y"])().then((function(e){var a;t.tagList=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.tagGroup)||[]})).catch((function(e){t.$message.error(e)}))}}}),f=d,p=(a("81dd"),a("2877")),m=Object(p["a"])(f,l,u,!1,null,"47c04ed7",null),g=m.exports,v=a("986e"),h=a("b9cd"),b={name:"SearchForm",data:function(){return{data:[],value:[],selectRoleIdList:[""],startOrEndTime:[],dateString:[],visibleUsePerson:!1,serviceList:[],isOpen:!1,visibleSelectTag:!1,searchName:"",lossStatus:[],selectLossStatus:void 0,addWay:[],selectAddWay:void 0,gender:[],selectGender:void 0,customerTagInfo:{tagList:[],filterType:0}}},components:{SelectTags:g,AddTransfer:c["a"]},watch:{searchName:function(){this.$store.commit("SET_SEARCH_NAME",this.searchName)},selectAddWay:function(){this.$store.commit("SET_ADD_WAY",this.selectAddWay)},selectGender:function(){this.$store.commit("SET_GENDER",this.selectGender)},selectLossStatus:function(){this.$store.commit("SET_LOSS_STATUS",this.selectLossStatus)},startOrEndTime:function(){this.$store.commit("SET_DATE",{endDate:this.dateString[1],startDate:this.dateString[0]})},customerTagInfo:function(){this.$store.commit("SET_CUSTOMER_INFO",this.customerTagInfo)},serviceList:function(){this.$store.commit("SET_STAFF_ID",this.serviceList)}},created:function(){this.clearData(),this.getDictionaryByCode()},methods:{clean:function(){this.serviceList=[],this.emitCustomerList()},cleanTag:function(){this.customerTagInfo={tagList:[],filterType:0},this.emitCustomerList()},emitCustomerList:function(){this.$nextTick((function(){v["a"].$emit("getCustomerList")}))},serviceOk:function(t){this.serviceList=t,this.visibleUsePerson=!1,this.emitCustomerList()},dropdownVisibleChange:function(){this.visibleSelectTag=!0},pitchTag:function(t){this.customerTagInfo={tagList:t.selectTags,filterType:t.filterType},this.emitCustomerList()},clearData:function(){this.startOrEndTime=[],this.dateString=[],this.selectLossStatus=void 0,this.selectAddWay=void 0,this.selectGender=void 0,this.searchName=void 0,this.customerTagInfo={tagList:[],filterType:0},this.serviceList=[]},handleReset:function(){this.clearData(),this.emitCustomerList()},changeDate:function(t,e){this.dateString=e,this.emitCustomerList()},onSearchName:function(){var t;this.searchName=null===(t=this.searchName)||void 0===t?void 0:t.trim(),this.emitCustomerList()},getDictionaryByCode:function(){var t=this,e=Object(r["k"])({code:h["l"]}).then((function(e){t.lossStatus=null===e||void 0===e?void 0:e.data})),a=Object(r["k"])({code:h["b"]}).then((function(e){t.addWay=null===e||void 0===e?void 0:e.data})),s=Object(r["k"])({code:h["g"]}).then((function(e){t.gender=null===e||void 0===e?void 0:e.data}));Promise.all([e,a,s]).then((function(t){v["a"].$emit("getCustomerList")}))}}},y=b,C=(a("7627"),Object(p["a"])(y,n,o,!1,null,"5998c629",null)),k=C.exports,_=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-left"},[e("div",{staticClass:"flex"},[e("h2",[t._v("共"+t._s(t.pagination.total)+"个客户")]),e("span",{staticClass:"choose"},[t._v("已选择"+t._s(t.selectedRowKeys.length)+"个客户")]),e("a-divider",{staticClass:"m-top",attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25 refresh",on:{click:t.refresh}},[e("a-icon",{attrs:{type:"sync"}}),t._v("更新数据")],1)],1),e("p",{staticClass:"font-color-black-25 remove-duple"},[t._v(" 排除重复客户 "),e("a-tooltip",{attrs:{title:"该数据为去重后的客户数，若客户添加了多个员工只会统计为1个客户"}},[e("a-icon",{attrs:{type:"question-circle"}})],1),t.repetition?t._e():e("a-button",{attrs:{type:"link"},on:{click:t.getRepetition}},[t._v("查看")]),t.repetition?e("span",[t._v(" :"+t._s(t.repetition))]):t._e()],1)]),e("Toolbar",{attrs:{keyNum:0,btnLoading:t.btnLoading,selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows},on:{settingChange:t.settingChange,serviceOk:t.serviceOk,exportExcelDown:t.exportExcelDown}})],1),e("a-spin",{attrs:{spinning:t.spinning}},[e("a-table",{attrs:{columns:t.columns,"row-selection":t.rowSelection,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.change},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",[t._v(" "+t._s(a.name)+" "),e("span",{staticClass:"souce-type",class:{firm:2===a.type}},[t._v(" @"+t._s(a.typeText))]),a.black?e("a-tag",{staticStyle:{"margin-left":"5px"},attrs:{color:"red"}},[t._v("黑名单")]):t._e()],1),e("p",{staticClass:"font-color-black-25 remark"},[e("span",{staticClass:"loss-status"},[t._v(t._s(a.lossStatus))]),a.nickName?e("span",[t._v("昵称： "+t._s(a.nickName))]):t._e(),a.remark?e("span",[t._v("备注："+t._s(a.remark))]):t._e()])])],1)}},{key:"staffName",fn:function(a){return a?e("a-tag",{},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),t._v(" "+t._s(a)+" ")],1):t._e()}},{key:"score",fn:function(s){return e("span",{staticClass:"winged-tag integral-tag score-tag"},[e("div",{staticClass:"flex-row full-h"},[e("img",{staticClass:"winged-tag-icon",attrs:{src:a("7e11"),alt:""}}),e("div",{staticClass:"full-h"},[t._v(t._s(s))])])])}},{key:"currentIntegral",fn:function(s){return e("span",{staticClass:"winged-tag integral-tag"},[e("div",{staticClass:"flex-row full-h"},[e("img",{staticClass:"winged-tag-icon",attrs:{src:a("c51b"),alt:""}}),e("div",{staticClass:"full-h"},[t._v(t._s(s))])])])}},{key:"tagNameList",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}]},t._l(a,(function(a,s){return e("a-tag",{key:s},[t._v(" "+t._s(a)+" ")])})),1):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"operation",fn:function(a){return e("div",{staticClass:"align-right",staticStyle:{display:"flex"}},[e("a-button",{attrs:{type:"link",disabled:!a.unionid||a.black},on:{click:function(e){return t.addNameBlack(a)}}},[t._v("加入黑名单")]),"0"==a.hasChat?e("a-tooltip",{attrs:{title:"所属客服未开通消息存档"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"1"==a.hasChat?e("a-tooltip",{attrs:{title:"当前客户与所属客服没有聊天记录"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"2"==a.hasChat?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.jump(a)}}},[t._v("聊天记录")]):t._e(),e("div",{staticClass:"a-vertical"}),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(a)}}},[t._v("详情")])],1)}}],null,!0)},[e("div",{attrs:{slot:"score"},slot:"score"},[t._v(" 客户评分 "),e("a-tooltip",{attrs:{title:"企业内部使用，帮助企业员工了解客户意向，针对不同意向客户进行精准运营"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1),e("div",{attrs:{slot:"integral"},slot:"integral"},[t._v(" 客户积分 "),e("a-tooltip",{attrs:{title:"企业客户使用，客户通过企业设置的规则获得积分，用于抽奖活动和积分商城兑换，帮助企业提高客户活跃度"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])],1),e("a-modal",{attrs:{destroyOnClose:"",centered:"",footer:null},model:{value:t.visibleBlack,callback:function(e){t.visibleBlack=e},expression:"visibleBlack"}},[e("AddBlack",{attrs:{operation:t.operation},on:{cancle:function(e){t.visibleBlack=!1},addNameBlackFunc:t.addNameBlackFunc}})],1)],1)},x=[],L=(a("a15b"),a("2f62")),T=a("ca00"),S=function(){var t=this,e=t._self._c;return e("CommonModal",t._b({attrs:{loading:t.loading},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.sourceModal,!1),[e("FormList",{staticClass:"textarea",attrs:{formInfo:t.textAreaInfo}})],1)},I=[],w=a("2a86"),O=a("26f2"),E=a("58c3"),N={name:"AddBlack",components:{CommonModal:w["a"],FormList:O["a"]},props:{operation:{type:Object,default:function(){return{}}}},data:function(){return{sourceModal:{title:"加入黑名单",tipText:"用户被拉黑后将无法参与营销活动"},textAreaInfo:{title:"",type:"textarea",tips:"请输入加入黑名单原因",maxLength:50,value:""},loading:!1}},methods:{serviceOk:function(){var t=this;if(this.textAreaInfo.value){var e={unionId:this.operation.unionid,reason:this.textAreaInfo.value};Object(E["j"])(e).then((function(e){t.operation.black=!0,t.$emit("addNameBlackFunc"),t.$message.success(" 拉黑成功")})).catch((function(e){t.$message.error(e)})).finally((function(){}))}else this.$message.warning("请输入拉黑原因")}}},R=N,A=(a("9942"),Object(p["a"])(R,S,I,!1,null,"fe28c2d0",null)),j=A.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"title-right"},["0"==t.keyNum?e("a-button",{staticClass:"aks-border-but m-r",attrs:{size:"large"},on:{click:function(e){t.settingShow=!0}}},[t._v(" 页面设置 ")]):t._e(),"0"==t.keyNum?e("a-button",{staticClass:"aks-border-but m-r",attrs:{size:"large"},on:{click:t.modifySouce}},[t._v("批量修改评分")]):t._e(),4!==t.keyNum?e("a-dropdown",[e("a-button",{staticClass:"aks-border-but",attrs:{size:"large"},on:{click:function(e){return t.makeTag("add")}}},[t._v(" 批量打标签 "),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("span",{on:{click:function(e){return t.makeTag("delete")}}},[t._v("批量移除标签")])])],1)],1):t._e(),[0,3,4].includes(t.keyNum)?e("a-button",{staticClass:"aks-border-but m-l",attrs:{size:"large",loading:t.btnLoading},on:{click:function(e){return t.exportExcel(t.keyNum)}}},[t._v(" 导出Excel ")]):t._e(),e("a-modal",{attrs:{footer:null,width:"599px",centered:"",destroyOnClose:""},model:{value:t.visibleMakeTag,callback:function(e){t.visibleMakeTag=e},expression:"visibleMakeTag"}},[e("MakeTags",{attrs:{status:t.status,spinning:t.spinning,selectedRows:t.selectedRowKeys},on:{cancle:function(e){t.visibleMakeTag=!1},serviceOk:t.serviceOk}})],1),e("a-modal",{staticClass:"noBottomBorder",attrs:{centered:"",width:"350px"},on:{ok:t.settingOk},model:{value:t.settingShow,callback:function(e){t.settingShow=e},expression:"settingShow"}},[e("div",[e("div",{staticClass:"setting-title"},[t._v("列表客户显示设置")]),e("div",{staticClass:"setting-iuput-box flex-row"},[e("span",[t._v("当前列表每页显示")]),e("a-dropdown",{attrs:{trigger:["click"]}},[e("a-menu",{attrs:{slot:"overlay"},on:{click:t.handleMenuClick},slot:"overlay"},[e("a-menu-item",{key:"20"},[t._v("20")]),e("a-menu-item",{key:"30"},[t._v("30 ")]),e("a-menu-item",{key:"50"},[t._v("50")])],1),e("a-button",{staticStyle:{"margin-left":"8px"}},[t._v(t._s(t.num)),e("a-icon",{attrs:{type:"down"}})],1)],1),e("span",[t._v("个客户")])],1)])]),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visibleSouce,callback:function(e){t.visibleSouce=e},expression:"visibleSouce"}},[e("ModifySouce",{attrs:{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows},on:{cancle:function(e){t.visibleSouce=!1},serviceOk:t.serviceScore}})],1)],1)},B=[],M=a("2909"),P=(a("a9e3"),a("159b"),a("8e9f")),W=a("b321"),G={name:"Toolbar",components:{MakeTags:W["a"],ModifySouce:P["a"]},props:{keyNum:{type:Number,default:0},btnLoading:{type:Boolean,default:!1},selectedRowKeys:{type:Array,default:function(){return[]}},selectedRows:{type:Array,default:function(){return[]}}},data:function(){return{num:20,loading:!1,settingShow:!1,visibleMakeTag:!1,status:"",visibleSouce:!1,spinning:!1}},methods:{modifySouce:function(){this.selectedRows.length>0?this.visibleSouce=!0:this.$message.warning("请选择客户")},serviceScore:function(){this.visibleSouce=!1,this.$emit("serviceOk")},handleMenuClick:function(t){this.num=Number(t.key)},exportExcel:function(t){this.$emit("exportExcelDown",t)},settingOk:function(){this.settingShow=!1,this.$emit("settingChange",this.num)},makeTag:function(t){this.selectedRows.length>0?(this.status=t,this.visibleMakeTag=!0):this.$message.warning("请选择客户")},getIds:function(t){var e=[];return t.forEach((function(t){var a=t.split(",");e.push.apply(e,Object(M["a"])(a))})),e},serviceOk:function(t){var e,a=this,s={tagids:null===(e=t.map((function(t){return t.bitmap})))||void 0===e?void 0:e.join(","),ids:this.getIds(this.selectedRowKeys)};this.spinning=!0;var i="add"===this.status?this.batchTaggingFront():this.batchDelTagFront();i(s).then((function(t){a.$message.success("批量".concat("add"===a.status?"打":"移除","标签成功")),a.visibleMakeTag=!1,a.$emit("serviceOk")})).catch((function(t){a.$message.error(t)})).finally((function(){a.spinning=!1}))},batchTaggingFront:function(){return r["d"]},batchDelTagFront:function(){return r["c"]}}},Y=G,q=(a("47b5"),Object(p["a"])(Y,D,B,!1,null,"72ef4eaf",null)),U=q.exports,F={name:"CustomerTable",components:{Toolbar:U,AddBlack:j},data:function(){return{clientList:[],tableLoading:!1,visibleBlack:!1,selectedRows:[],selectedRowKeys:[],btnLoading:!1,spinning:!1,repetition:"",pagination:{current:1,pageSize:20,total:0},operation:{},columns:[{title:"客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{title:"所属客服",dataIndex:"staffName",scopedSlots:{customRender:"staffName"},key:"staffName"},{dataIndex:"score",slots:{title:"score"},scopedSlots:{customRender:"score"},key:"score"},{dataIndex:"currentIntegral",slots:{title:"integral"},scopedSlots:{customRender:"currentIntegral"},key:"currentIntegral"},{title:"标签",dataIndex:"tagNameList",scopedSlots:{customRender:"tagNameList"},width:"230px",key:"tagNameList"},{title:"客户状态",dataIndex:"statusName",key:"statusName",customRender:function(t,e,a){return t||"-"}},{title:"添加时间",dataIndex:"addTime",key:"addTime",customRender:function(t,e,a){return t||"-"}},{title:"上次对话时间",dataIndex:"lastCommunicationTime",key:"lastCommunicationTime",customRender:function(t,e,a){return t||"-"}},{title:"添加渠道",dataIndex:"addWayName",key:"addWayName",scopedSlots:{customRender:"addWayName"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}]}},computed:Object(L["c"])({rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedRows=a,t.selectedRowKeys=a.map((function(t){return t.id}))}}},selectLossStatus:function(t){return t.customer.selectLossStatus},selectAddWay:function(t){return t.customer.selectAddWay},selectGender:function(t){return t.customer.selectGender},searchName:function(t){return t.customer.searchName},endDate:function(t){return t.customer.endDate},startDate:function(t){return t.customer.startDate},customerTagInfo:function(t){return t.customer.customerTagInfo},staffId:function(t){return t.customer.staffId}}),created:function(){v["a"].$on("getCustomerList",this.searchChangeList)},destroyed:function(){v["a"].$off("getCustomerList",this.searchChangeList)},methods:{addNameBlack:function(t){this.operation=t,this.visibleBlack=!0,this.getCustomerList()},addNameBlackFunc:function(){this.visibleBlack=!1},getParamsList:function(){var t,e,a,s,i,n,o=void 0;this.staffId&&(o=null===(i=this.staffId)||void 0===i||null===(n=i.map((function(t){return t.source.userid})))||void 0===n?void 0:n.join(","));var r={startDate:this.startDate,endDate:this.endDate,lossStatus:this.selectLossStatus,gender:this.selectGender,staffId:o,name:this.searchName,addWay:this.selectAddWay,filterType:null===(t=this.customerTagInfo)||void 0===t?void 0:t.filterType,tagId:null===(e=this.customerTagInfo)||void 0===e||null===(a=e.tagList)||void 0===a||null===(s=a.map((function(t){return t.bitmap})))||void 0===s?void 0:s.join(",")};return r.tagId||(r.filterType=0),this.startDate||delete r.startDate,this.endDate||delete r.endDate,r.staffId||delete r.staffId,r},exportExcelDown:function(t){var e=this;if("0"==t){this.btnLoading=!0;var a=this.getParamsList();Object(r["u"])(a).then((function(t){e.btnLoading=!1,Object(T["e"])(t,".xlsx","客户属性筛选列表")})).catch((function(t){e.btnLoading=!1,e.$message.error(t)}))}},jump:function(t){var e={avatar:t.staffAvatar||"",name:t.name},a=JSON.stringify(e);sessionStorage.setItem("newsObj",a),this.$router.push({name:"news",query:{staffExtId:t.staffId,designee:0,customerId:t.customerId}})},settingChange:function(t){this.pagination.pageSize=t,this.pagination.current=1,this.getCustomerList()},searchChangeList:function(){this.pagination.current=1,this.getCustomerList()},serviceOk:function(){this.getCustomerList()},lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.staffId}})},refresh:function(){this.getCustomerList()},getRepetition:function(){var t=this,e=this.getParams();Object(r["l"])(e).then((function(e){t.repetition=null===e||void 0===e?void 0:e.data})).catch((function(e){t.$message.error(e)}))},change:function(t){var e=t.current;this.selectedRowKeys=[],this.pagination.current=e,this.getCustomerList()},getCustomerList:function(){var t=this;this.tableLoading=!0;var e=this.getParams();Object(r["f"])(e).then((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.list&&(t.pagination.total=e.data.total,t.repetition=!1,t.clientList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},getParams:function(){var t,e,a,s,i,n,o=void 0;this.staffId&&(o=null===(i=this.staffId)||void 0===i||null===(n=i.map((function(t){return t.source.userid})))||void 0===n?void 0:n.join(","));var r={startDate:this.startDate,endDate:this.endDate,lossStatus:this.selectLossStatus,gender:this.selectGender,staffId:o,name:this.searchName,addWay:this.selectAddWay,currentPage:this.pagination.current,pageSize:this.pagination.pageSize,filterType:null===(t=this.customerTagInfo)||void 0===t?void 0:t.filterType,tagId:null===(e=this.customerTagInfo)||void 0===e||null===(a=e.tagList)||void 0===a||null===(s=a.map((function(t){return t.bitmap})))||void 0===s?void 0:s.join(",")};return r.tagId||(r.filterType=0),this.startDate||delete r.startDate,this.endDate||delete r.endDate,r.staffId||delete r.staffId,r},disposeClientList:function(t){return t.map((function(t){return null!==t&&void 0!==t&&t.tagNames?t.tagNameList=t.tagNames.split(","):t.tagNameList=[],t.addWay=h["c"][t.addWay],t.info={nickName:t.nickName,black:t.black,name:t.name,avatar:t.avatar,type:t.type,remark:t.remark,typeText:1===t.type?"微信":t.corpName,lossStatus:1===t.lossStatus?"已流失":""},t.key=t.id,Object.assign({operation:t},t)}))},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))}}},z=F,K=(a("a2d8"),Object(p["a"])(z,_,x,!1,null,"4da32bec",null)),H=K.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-groupList"},[e("div",{staticClass:"group-header"},[e("div",{staticClass:"title"},[t._v("选择群聊：")]),e("div",{staticClass:"panel"},[e("span",{staticClass:"panel-title"},[t._v("所在群聊为")]),e("UsePerson",{attrs:{title:t.title,type:t.apiType,placeHolder:t.textplaceHolder},model:{value:t.groupList,callback:function(e){t.groupList=e},expression:"groupList"}})],1)]),e("div",{staticClass:"kong"}),e("div",{staticClass:"title"},[e("div",{staticClass:"title-left"},[e("div",{staticClass:"flex"},[e("h2",[t._v("共"+t._s(t.pagination.total)+"个客户")]),e("span",{staticClass:"choose"},[t._v("已选择"+t._s(t.selectedRowKeys.length)+"个客户")]),e("a-divider",{staticClass:"m-top",attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25 refresh",on:{click:t.refresh}},[e("a-icon",{attrs:{type:"sync"}}),t._v("更新数据")],1)],1)]),e("Toolbar",{attrs:{keyNum:1,selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows},on:{serviceOk:t.serviceOk}})],1),e("a-table",{attrs:{"row-selection":t.rowSelection,columns:t.columns,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.tablechange},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("div",{staticClass:"flex-row"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",[t._v(" "+t._s(a.name)+" "),e("span",{staticClass:"souce-type",class:{firm:2===a.type}},[t._v(" @"+t._s(a.typeText))])]),e("p",{staticClass:"font-color-black-25"},[e("span",{staticClass:"loss-status"},[t._v(t._s(a.lossStatus))]),a.nickName?e("span",[t._v("昵称： "+t._s(a.nickName))]):t._e()])])],1),a.staffCount.length>3?e("div",{staticClass:"totalStaff"},[t._v("共 "),e("span",{staticClass:"avatar-list"},t._l(a.staffList,(function(t,a){return e("img",{key:a,staticClass:"staff-avatar",attrs:{src:t.staffAvatar,alt:""}})})),0),t._v(" "+t._s(a.staffList.length)+"个客服 "),e("span",{staticStyle:{"margin-left":"16px",color:"#333",cursor:"pointer"},on:{click:function(e){return t.lookTotalDetail(a)}}},[t._v("查看")])]):t._e()])}},{key:"groupName",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a&&a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}],staticStyle:{width:"120px"}},t._l(a,(function(a,s){return e("p",{key:s},[t._v("【"+t._s(a)+"】")])})),0):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",staticStyle:{"text-indent":"5px"},on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"staffList",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[e("a-tag",[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(a.staffName)+" ")],1)],1)})),0)])}},{key:"staffLoss",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[e("a-tag",{attrs:{color:0===a.lossStatus?"":"red"}},[t._v(" "+t._s(0===a.lossStatus?"未流失":"已流失")+" ")])],1)})),0)])}},{key:"staffMake",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[t._v(" "+t._s(a.remark)+" ")])})),0)])}},{key:"staffTag",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[a.tagNames?e("div",[e("div",{class:[{mheight:a.tagNames.split(",").length>=4}]},t._l(a.tagNames.split(","),(function(a,s){return e("a-tag",{directives:[{name:"show",rawName:"v-show",value:a,expression:"tag"}],key:s},[t._v(" "+t._s(a)+" ")])})),1),a.tagNames.split(",").length>=4?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore2(e)}}},[e("span",[t._v("展开")])]):t._e()]):e("div",[t._v("-")])])})),0)])}},{key:"staffAddTime",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[t._v(" "+t._s(a.addTime)+" ")])})),0)])}},{key:"staffOperation",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId,staticClass:"align-right"},["0"==a.hasChat?e("a-tooltip",{attrs:{title:"所属客服未开通消息存档"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"1"==a.hasChat?e("a-tooltip",{attrs:{title:"当前客户与所属客服没有聊天记录"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"2"==a.hasChat?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.jump(a)}}},[t._v("聊天记录")]):t._e(),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(a)}}},[t._v("详情")])],1)})),0)])}}])})],1)},$=[],J=a("5530"),Q=a("6bd9"),X={data:function(){return{textplaceHolder:"选择群聊",title:"可用群聊",apiType:"custGrpList",groupList:[],tableLoading:!1,pagination:{current:1,pageSize:10,total:0},clientList:[],columns:[{title:"客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{title:"所在群聊",dataIndex:"groupName",scopedSlots:{customRender:"groupName"},key:"groupName"},{title:"所属客服",dataIndex:"staffList",key:"staffList",scopedSlots:{customRender:"staffList"}},{title:"客户备注",dataIndex:"staffMake",key:"staffMake",scopedSlots:{customRender:"staffMake"}},{title:"标签",dataIndex:"staffTag",scopedSlots:{customRender:"staffTag"},width:"230px",key:"staffTag"},{title:"添加时间",dataIndex:"staffAddTime",key:"staffAddTime",scopedSlots:{customRender:"staffAddTime"}},{title:"操作",dataIndex:"staffOperation",align:"right",key:"staffOperation",scopedSlots:{customRender:"staffOperation"}}],selectedRows:[],selectedRowKeys:[]}},components:{UsePerson:Q["a"],Toolbar:U},watch:{groupList:function(){this.pagination.current=1,this.findByCustomerGroup()}},computed:Object(L["c"])({rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedRows=a,t.selectedRowKeys=e}}}}),created:function(){this.findByCustomerGroup()},methods:{jump:function(t){var e={avatar:t.staffAvatar||"",name:t.staffName},a=JSON.stringify(e);sessionStorage.setItem("newsObj",a),this.$router.push({name:"news",query:{staffExtId:t.staffId,designee:0,customerId:t.customerId}})},lookTotalDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId}})},lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.staffId}})},serviceOk:function(){this.findByCustomerGroup()},refresh:function(){this.pagination.current=1,this.findByCustomerGroup()},tablechange:function(t){var e=t.current;this.pagination.current=e,this.findByCustomerGroup()},findByCustomerGroup:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,groupWxIds:this.groupList.map((function(t){return t.source.chatId}))};this.tableLoading=!0,Object(r["s"])(e).then((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.list&&(t.pagination.total=e.data.total,t.repetition=!1,t.clientList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},disposeClientList:function(t){return t.map((function(t){return null!==t&&void 0!==t&&t.tagNames?t.tagNameList=t.tagNames.split(","):t.tagNameList=[],t.addWay=h["c"][t.addWay],t.info={nickName:t.nickName,name:t.name,avatar:t.avatar,type:t.type,typeText:1===t.type?"微信":t.corpName,lossStatus:1===t.lossStatus?"已流失":"",customerId:t.customerId,staffCount:t.staffCount,staffList:t.staffList},t.staffMake=t.staffList,t.staffTag=t.staffList,t.staffAddTime=t.staffList,t.staffLoss=t.staffList,t.staffOperation=t.staffList.map((function(e){return Object(J["a"])(Object(J["a"])({},e),{},{customerId:t.customerId})})),t.key=t.ids,Object.assign({operation:t},t)}))},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))},openMore2:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))}}},Z=X,tt=(a("0235"),Object(p["a"])(Z,V,$,!1,null,"21c6d2ea",null)),et=tt.exports,at=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-groupList"},[e("div",{staticClass:"box"},[e("div",{staticClass:"event-desc"},[t._v("（ 可根据客户在「客户动态」内的行为事件筛选客户）")]),e("div",{staticClass:"group-header"},[e("div",{staticClass:"panel"},[e("span",{staticClass:"panel-title"},[t._v("事件时间:")]),e("a-range-picker",{staticStyle:{width:"280px"},attrs:{allowClear:!1,"disabled-date":t.disabledDate},on:{change:t.changeAddDate},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),e("div",{staticClass:"panel"},[e("span",{staticClass:"panel-title min-w"},[t._v("选择事件:")]),e("a-select",{staticClass:"se-t",on:{change:t.selectEventChange},model:{value:t.eventTypeId,callback:function(e){t.eventTypeId=e},expression:"eventTypeId"}},t._l(t.selectEventList,(function(a,s){return e("a-select-option",{key:s,attrs:{value:a.value}},[t._v(" "+t._s(a.name)+" ")])})),1)],1),e("div",{staticClass:"panel"},[e("span",{staticClass:"panel-title min-w panel-content"},[t._v(t._s(t.getEvent.tip))]),"staff"===t.getEvent.component?e("UsePerson",{key:"1",attrs:{title:"选择员工",type:"deptId",placeHolder:"请选择员工"},on:{usePersionInfo:t.findByCustomerEvent},model:{value:t.staffWxIds,callback:function(e){t.staffWxIds=e},expression:"staffWxIds"}}):t._e(),"group"===t.getEvent.component?e("UsePerson",{key:"2",attrs:{title:"选择群聊",type:"custGrpList",placeHolder:"请选择群聊"},on:{usePersionInfo:t.findByCustomerEvent},model:{value:t.groupWxIds,callback:function(e){t.groupWxIds=e},expression:"groupWxIds"}}):t._e()],1)])]),e("div",{staticClass:"kong"}),e("div",{staticClass:"title"},[e("div",{staticClass:"title-left"},[e("div",{staticClass:"flex"},[e("h2",[t._v("共"+t._s(t.pagination.total)+"个客户")]),e("span",{staticClass:"choose"},[t._v("已选择"+t._s(t.selectedRowKeys.length)+"个客户")]),e("a-divider",{staticClass:"m-top",attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25 refresh",on:{click:t.refresh}},[e("a-icon",{attrs:{type:"sync"}}),t._v("更新数据")],1)],1)]),e("Toolbar",{attrs:{keyNum:2,selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows},on:{serviceOk:t.serviceOk}})],1),e("a-table",{attrs:{"row-selection":t.rowSelection,columns:t.columns,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.tablechange},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",[t._v(" "+t._s(a.name)+" "),e("span",{staticClass:"souce-type",class:{firm:2===a.type}},[t._v(" @"+t._s(a.typeText))])]),e("p",{staticClass:"font-color-black-25"},[e("span",{staticClass:"loss-status"},[t._v(t._s(a.lossStatus))]),a.nickName?e("span",[t._v("昵称： "+t._s(a.nickName))]):t._e()])])],1)}},{key:"operation",fn:function(a){return e("div",{staticClass:"tag-name-list"},[e("div",[t._v(t._s(a.eventContent))]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.searchEvent(a)}}},[t._v("查看")])],1)}},{key:"staffList",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[e("a-tag",[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(a.staffName)+" ")],1)],1)})),0)])}},{key:"staffLoss",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[e("a-tag",{attrs:{color:0===a.lossStatus?"":"red"}},[t._v(" "+t._s(0===a.lossStatus?"未流失":"已流失")+" ")])],1)})),0)])}},{key:"staffMake",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[t._v(" "+t._s(a.remark)+" ")])})),0)])}},{key:"staffTag",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[e("a-tooltip",[e("div",{attrs:{slot:"title"},slot:"title"},t._l(a.tagNames.split(","),(function(a,s){return e("a-tag",{directives:[{name:"show",rawName:"v-show",value:a,expression:"tag"}],key:s},[t._v(" "+t._s(a)+" ")])})),1),t._l(a.tagNames.split(","),(function(a,s){return e("a-tag",{directives:[{name:"show",rawName:"v-show",value:a,expression:"tag"}],key:s},[t._v(" "+t._s(a)+" ")])}))],2)],1)})),0)])}},{key:"staffAddTime",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId},[t._v(" "+t._s(a.addTime)+" ")])})),0)])}},{key:"staffOperation",fn:function(a){return e("div",{},[e("ul",{staticClass:"list-wrap"},t._l(a,(function(a){return e("li",{key:a.staffId,staticClass:"align-right"},["0"==a.hasChat?e("a-tooltip",{attrs:{title:"所属客服未开通消息存档"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"1"==a.hasChat?e("a-tooltip",{attrs:{title:"当前客户与所属客服没有聊天记录"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"2"==a.hasChat?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.jump(a)}}},[t._v("聊天记录")]):t._e(),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(a)}}},[t._v("详情")])],1)})),0)])}}])}),e("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"650px"},model:{value:t.visibleSendContant,callback:function(e){t.visibleSendContant=e},expression:"visibleSendContant"}},[e("EventDetail",{attrs:{source:t.source,operation:t.operation,staffWxIds:t.staffWxIds,groupWxIds:t.groupWxIds,selectEventList:t.selectEventList,params:t.params},on:{cancle:function(e){t.visibleSendContant=!1},serviceOk:t.serviceOk}})],1)],1)},st=[],it=(a("7db0"),a("b7fd")),nt=(a("38cf"),function(){var t=this,e=t._self._c;return e("CommonModal",t._b({on:{cancle:function(e){return t.$emit("cancle")},serviceOk:function(e){return t.$emit("cancle")}}},"CommonModal",t.source,!1),[e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handleInfiniteOnLoad,expression:"handleInfiniteOnLoad"}],staticClass:"scroll-list",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:t.operation.avatar}}),e("div",[e("p",[t._v(" "+t._s(t.operation.name)+" "),e("span",{staticClass:"souce-type",class:{firm:2===t.operation.type}},[t._v(" @"+t._s(t.operation.typeText))])]),e("p",{staticClass:"font-color-black-25"},[e("span",{staticClass:"loss-status"},[t._v(t._s(t.operation.lossStatus))]),t.operation.nickName?e("span",[t._v("昵称： "+t._s(t.operation.nickName))]):t._e()])])],1),e("div",{staticClass:"filter-part"},[e("span",{staticClass:"desc"},[t._v("全部事件")]),e("a-checkbox",{on:{change:t.changeEvent},model:{value:t.isFilter,callback:function(e){t.isFilter=e},expression:"isFilter"}},[t._v(" 查看本次筛选事件 ")])],1),t.isFilter?e("div",{staticClass:"filter-box"},[e("span",[t._v("筛选条件："+t._s(t.filtro))])]):t._e(),t.sortPlanList.length>0?e("ul",{staticClass:"list-wrap"},[t._l(t.sortPlanList,(function(a){return e("li",{key:a.eventTypeId},[a.repeat?t._e():e("div",{staticClass:"date"},[t._v(" "+t._s(t._f("getDate")(a.momentTime))+" ")]),e("div",{staticClass:"rule-head"},[e("div",[e("span",[t._v(t._s(t._f("getTime")(a.momentTime)))]),e("a-icon",{staticClass:"clock",attrs:{type:"clock-circle"}})],1),e("span",[t._v(t._s(a.eventTypeName))])]),e("div",{staticClass:"rule-content-wrap"},[e("div",{staticClass:"rule-content",domProps:{innerHTML:t._s(a.contentHtml)}})])])})),!t.loading&&t.sortPlanList.length>0?e("div",{staticClass:"loading-container"},[t._v("没有更多数据了~")]):t._e()],2):t._e(),t.sortPlanList.length<=0&&!t.loading?e("a-empty"):t._e(),t.loading?e("div",{staticClass:"loading-container"},[e("a-spin",{attrs:{tip:"正在加载中..."}})],1):t._e()],1)])}),ot=[],rt=(a("99af"),a("ac1f"),a("5319"),a("487a")),ct=a.n(rt),lt={name:"EventDetail",components:{CommonModal:w["a"]},directives:{infiniteScroll:ct.a},props:{source:{type:Object,default:function(){return{}}},operation:{type:Object,default:function(){return{}}},params:{type:Object,default:function(){return{}}},selectEventList:{type:Array,default:function(){return[]}},staffWxIds:{type:Array,default:function(){return[]}},groupWxIds:{type:Array,default:function(){return[]}}},filters:{getTime:function(t){var e=t;return t&&(e=t.format("HH:mm")),e},getDate:function(t){var e=t;return t&&(e=t.format("MM-DD")),e}},computed:{filtro:function(){var t=this.$moment(this.params.startDate).format("YYYY-MM-DD"),e=this.$moment(this.params.endDate).format("YYYY-MM-DD"),a="";switch(this.params.eventTypeId){case"101":if(this.staffWxIds.length>0){var s=this.staffWxIds.map((function(t){return[t.name]})).join(",");a="添加的".concat(s)}else a="添加的全部员工";break;case"103":if(this.staffWxIds.length>0){var i=this.staffWxIds.map((function(t){return[t.name]})).join(",");a="删除的".concat(i)}else a="删除的全部员工";break;case"104":if(this.groupWxIds.length>0){var n=this.groupWxIds.map((function(t){return[t.groupName]})).join(",");a="加入的".concat(n)}else a="加入的全部群聊";break;case"104":if(this.groupWxIds.length>0){var o=this.groupWxIds.map((function(t){return[t.groupName]})).join(",");a="退出的".concat(o)}else a="退出的全部群聊";break;default:break}return"".concat(t,"至").concat(e,"之间 ").concat(a)}},data:function(){return{busy:!1,loading:!1,isFilter:!0,pagination:{current:1,pageSize:10,total:0},sortPlanList:[]}},methods:{handleInfiniteOnLoad:function(){!this.busy&&this.findEventByCustomerWxid()},changeEvent:function(){this.busy=!1,this.pagination.current=1,this.pagination.total=0,this.sortPlanList=[],this.findEventByCustomerWxid()},findEventByCustomerWxid:function(){var t=this,e=this.getParams();this.loading=!0,Object(r["t"])(e).then((function(e){var a;(a=t.sortPlanList).push.apply(a,Object(M["a"])(t.disposeList(e.data.list))),t.pagination.total=e.data.total,t.pagination.current++,t.sortPlanList.length>=t.pagination.total&&(t.busy=!0,t.loading=!1)})).catch((function(e){t.loading=!1,t.$message.error(e)}))},disposeList:function(t){var e=this;return t.length>0?t.map((function(t){var a='<img src="'.concat(t.staffAvatar,'"></img> ').concat(t.staffName),s='<img src="'.concat(t.customerAvatar,'"></img> ').concat(t.customerName);return Object(J["a"])(Object(J["a"])({},t),{},{momentTime:e.$moment(t.createTime),contentHtml:t.content.replace("#staff#",a).replace("#customer#",s)})})):[]},getParams:function(){var t={};return t=this.isFilter?Object(J["a"])(Object(J["a"])({},this.params),{},{currentPage:this.pagination.current,pageSize:this.pagination.pageSize,customerWxId:this.operation.customerId}):{currentPage:this.pagination.current,pageSize:this.pagination.pageSize,customerWxId:this.operation.customerId},t}}},ut=lt,dt=(a("59d1"),Object(p["a"])(ut,nt,ot,!1,null,"09e56128",null)),ft=dt.exports,pt={data:function(){return{groupList:[],visibleSendContant:!1,tableLoading:!1,startOrEndTime:void 0,operation:{},source:{title:"查看事件",footer:!1},selectEventList:[{name:"删除员工好友",value:"103",tip:"删除员工为",component:"staff"},{name:"添加员工好友",value:"101",tip:"添加员工为",component:"staff"},{name:"加入群聊",value:"104",tip:"为",component:"group"},{name:"退出群聊",value:"105",tip:"为",component:"group"}],pagination:{current:1,pageSize:10,total:0},isOpenstaff:!1,eventTypeId:"103",clientList:[],selectedRows:[],selectedRowKeys:[],groupWxIds:[],staffWxIds:[],columns:[{title:"客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{title:"事件",dataIndex:"operation",width:"180px",scopedSlots:{customRender:"operation"},key:"operation"},{title:"事件时间",dataIndex:"eventTime",scopedSlots:{customRender:"eventTime"},key:"eventTime"},{title:"所属客服",dataIndex:"staffList",key:"staffList",scopedSlots:{customRender:"staffList"}},{title:"客户备注",dataIndex:"staffMake",key:"staffMake",scopedSlots:{customRender:"staffMake"}},{title:"标签",dataIndex:"staffTag",scopedSlots:{customRender:"staffTag"},width:"230px",key:"staffTag"},{title:"添加时间",dataIndex:"staffAddTime",key:"staffAddTime",scopedSlots:{customRender:"staffAddTime"}},{title:"操作",dataIndex:"staffOperation",key:"staffOperation",align:"right",scopedSlots:{customRender:"staffOperation"}}]}},computed:{getEvent:function(){var t=this;return this.selectEventList.find((function(e){return e.value===t.eventTypeId}))},rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedRows=a,t.selectedRowKeys=e}}},params:function(){var t,e,a,s,i,n,o={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,startDate:(null===(t=this.startOrEndTime)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.format("YYYY-MM-DD"))+" 00:00:00",endDate:(null===(a=this.startOrEndTime)||void 0===a||null===(s=a[1])||void 0===s?void 0:s.format("YYYY-MM-DD"))+" 23:59:59",eventTypeId:this.eventTypeId,staffWxIds:null===(i=this.staffWxIds)||void 0===i?void 0:i.map((function(t){return t.source.userid})),groupWxIds:null===(n=this.groupWxIds)||void 0===n?void 0:n.map((function(t){return t.source.chatId}))};return o}},components:{StaffList:it["a"],Toolbar:U,UsePerson:Q["a"],EventDetail:ft},created:function(){this.startOrEndTime=[this.$moment().subtract(7,"days"),this.$moment()],this.findByCustomerEvent()},methods:{jump:function(t){var e={avatar:t.staffAvatar||"",name:t.staffName},a=JSON.stringify(e);sessionStorage.setItem("newsObj",a),this.$router.push({name:"news",query:{staffExtId:t.staffId,designee:0,customerId:t.customerId}})},serviceOk:function(){this.findByCustomerEvent()},searchEvent:function(t){this.operation=t,this.visibleSendContant=!0},lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.staffId}})},findByCustomerEvent:function(){var t=this;this.tableLoading=!0,Object(r["r"])(this.params).then((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.list&&(t.pagination.total=e.data.total,t.repetition=!1,t.clientList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},refresh:function(){this.pagination.current=1,this.findByCustomerEvent()},tablechange:function(t){var e=t.current;this.pagination.current=e,this.findByCustomerEvent()},selectEventChange:function(){["101","103"].includes(this.eventTypeId)?this.staffWxIds=[]:this.groupWxIds=[],this.findByCustomerEvent()},changeAddDate:function(t,e){this.startOrEndTime=t,this.findByCustomerEvent()},disabledDate:function(t){return t&&t>Date.now()},disposeClientList:function(t){return t.map((function(t){return null!==t&&void 0!==t&&t.tagNames&&(t.tagNameList=t.tagNames.split(",")),t.addWay=h["c"][t.addWay],t.info={nickName:t.nickName,name:t.name,avatar:t.avatar,type:t.type,typeText:1===t.type?"微信":t.corpName,lossStatus:1===t.lossStatus?"已流失":""},t.staffMake=t.staffList,t.staffTag=t.staffList,t.staffAddTime=t.staffList,t.staffLoss=t.staffList,t.staffOperation=t.staffList.map((function(e){return Object(J["a"])(Object(J["a"])({},e),{},{operation:t,customerId:t.customerId})})),t.key=t.ids,Object.assign({operation:t},t)}))}}},mt=pt,gt=(a("c08a"),Object(p["a"])(mt,at,st,!1,null,"17a1fa15",null)),vt=gt.exports,ht=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"header"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.visibleSendContant=!0}}},[t._v("设置筛选条件")]),e("a-button",{attrs:{type:"link",disabled:t.filterRules.length<=0},on:{click:t.result}},[t._v("重置")])],1),e("div",{staticClass:"bar"}),e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-left"},[e("div",{staticClass:"flex"},[e("h2",[t._v("共"+t._s(t.pagination.total)+"个客户")]),e("span",{staticClass:"choose"},[t._v("已选择"+t._s(t.selectedRowKeys.length)+"个客户")])])]),e("Toolbar",{attrs:{keyNum:3,selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows},on:{serviceOk:t.serviceOk,exportExcelDown:t.exportExcelDown}})],1),e("a-spin",{attrs:{spinning:t.spinning}},[e("a-table",{attrs:{columns:t.columns,"row-selection":t.rowSelection,"data-source":t.clientList,pagination:t.pagination,scroll:{x:1500},loading:t.tableLoading},on:{change:t.change},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",{staticClass:"max-wid"},[t._v(" "+t._s(a.name)+" "),e("span",{staticClass:"souce-type",class:{firm:2===a.type}},[t._v(" @"+t._s(a.typeText))])]),e("p",{staticClass:"font-color-black-25"},[e("span",{staticClass:"loss-status"},[t._v(t._s(a.lossStatus))]),a.nickName?e("span",[t._v("昵称： "+t._s(a.nickName))]):t._e()])])],1)}},{key:"staffName",fn:function(a){return a?e("a-tag",{},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"customer-service"}}),t._v(" "+t._s(a)+" ")],1):t._e()}},{key:"score",fn:function(s){return e("span",{staticClass:"winged-tag integral-tag score-tag"},[e("div",{staticClass:"flex-row full-h"},[e("img",{staticClass:"winged-tag-icon",attrs:{src:a("7e11"),alt:""}}),e("div",{staticClass:"full-h"},[t._v(" "+t._s(s))])])])}},{key:"tagNameList",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}]},t._l(a,(function(a,s){return e("a-tag",{key:s},[t._v(" "+t._s(a)+" ")])})),1):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"operation",fn:function(a){return e("div",{staticClass:"align-right",staticStyle:{display:"flex"}},["0"==a.hasChat?e("a-tooltip",{attrs:{title:"所属客服未开通消息存档"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"1"==a.hasChat?e("a-tooltip",{attrs:{title:"当前客户与所属客服没有聊天记录"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"2"==a.hasChat?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.jump(a)}}},[t._v("聊天记录")]):t._e(),e("div",{staticClass:"a-vertical"}),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(a)}}},[t._v("详情")])],1)}}],null,!0)})],1)],1),e("a-modal",{attrs:{footer:null,width:"650px"},model:{value:t.visibleSendContant,callback:function(e){t.visibleSendContant=e},expression:"visibleSendContant"}},[e("CustomFilter",{attrs:{source:t.source},on:{cancle:function(e){t.visibleSendContant=!1},serviceOk:t.serviceEvent}})],1)],1)},bt=[],yt=function(){var t=this,e=t._self._c;return e("CommonModal",t._b({on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.source,!1),[e("div",{staticClass:"filter-part"},[e("span",{staticClass:"desc"},[t._v("自定义筛选")])]),e("div",{staticClass:"content-wrap"},[e("div",{staticClass:"list-wrap"},[e("ul",[t.filterRules.length>=2?e("div",{staticClass:"content-wrap-bar",on:{click:t.changeCondition}},[t._v(" "+t._s("and"===t.condition?"且":"或")+" ")]):t._e(),t._l(t.filterRules,(function(a,s){return e("li",{key:s},[e("a-space",[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择自定义字段"},on:{change:function(e){return t.changeCustom(a)}},model:{value:a.fieldId,callback:function(e){t.$set(a,"fieldId",e)},expression:"rule.fieldId"}},t._l(t.fieldCustomRuleList,(function(a){return e("a-select-option",{key:a.fieldId,attrs:{value:a.fieldId}},[t._v(" "+t._s(a.fieldName)+" ")])})),1),e("a-select",{staticStyle:{width:"100px"},model:{value:a.queryType,callback:function(e){t.$set(a,"queryType",e)},expression:"rule.queryType"}},t._l(t.filterFieldValueList(a.fieldType),(function(a){return e("a-select-option",{key:a.fieldValue,attrs:{value:a.fieldValue}},[t._v(" "+t._s(a.fieldLabel)+" ")])})),1),["empty","not_empty"].includes(a.queryType)?t._e():[2===a.fieldType?e("a-date-picker",{staticStyle:{width:"200px"},attrs:{format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:t.$moment("00:00:00","HH:mm:ss")}},model:{value:a.fieldValue,callback:function(e){t.$set(a,"fieldValue",e)},expression:"rule.fieldValue"}}):t._e(),1===a.fieldType?e("a-input",{attrs:{placeholder:"请输入"},model:{value:a.fieldValue,callback:function(e){t.$set(a,"fieldValue",e)},expression:"rule.fieldValue"}}):t._e(),3===a.fieldType&&a.optionList?e("a-select",{staticStyle:{minWidth:"100px"},model:{value:a.fieldValue,callback:function(e){t.$set(a,"fieldValue",e)},expression:"rule.fieldValue"}},t._l(a.optionList,(function(a){return e("a-select-option",{key:a.optionId,attrs:{value:a.optionValue}},[t._v(" "+t._s(a.optionValue)+" ")])})),1):t._e()],e("a-icon",{staticClass:"delete",attrs:{type:"minus-circle"},on:{click:function(e){return t.delAtherWeekTime(s)}}})],2)],1)}))],2)]),e("div",{staticClass:"bottom"},[e("a-button",{attrs:{type:"link"},on:{click:t.addRule}},[e("a-space",{attrs:{size:12}},[e("a-icon",{attrs:{type:"plus-circle"}}),t._v("添加筛选条件 ")],1)],1),e("span",{staticClass:"font-color-black-25"},[t._v("(最多设置10个筛选条件)")])],1)])])},Ct=[],kt=(a("4de4"),a("7485")),_t={name:"CustomFilter",components:{CommonModal:w["a"]},props:{source:{type:Object,default:function(){return{}}}},data:function(){return{condition:"and",fieldValueList:[{fieldLabel:"为空",fieldValue:"empty",permission:[1,2,3]},{fieldLabel:"不为空",fieldValue:"not_empty",permission:[1,2,3]},{fieldLabel:"等于",fieldValue:"equal",permission:[1,3]},{fieldLabel:"不等于",fieldValue:"not_equal",permission:[1,3]},{fieldLabel:"包含",fieldValue:"contain",permission:[1]},{fieldLabel:"不包含",fieldValue:"not_contain",permission:[1]},{fieldLabel:"开始时间",fieldValue:"start_time",permission:[2]},{fieldLabel:"结束时间",fieldValue:"end_time",permission:[2]}],fieldCustomRuleList:[],filterRules:[{queryType:"empty",fieldValue:"",fieldId:void 0},{queryType:"empty",fieldValue:"",fieldId:void 0}],defaultRuleDetails:function(){return{fieldId:void 0,queryType:"empty",fieldValue:""}}}},created:function(){this.getInfo()},methods:{serviceOk:function(){for(var t=0;t<this.filterRules.length;t++){var e=this.filterRules[t];if(!e.fieldId)return void this.$message.warning("第".concat(t+1,"条筛选条件未选择自定义字段"));if(!["empty","not_empty"].includes(e.queryType)&&!e.fieldValue)return void this.$message.warning("第".concat(t+1,"条筛选条件未填写值"))}this.$emit("serviceOk",this.filterRules,this.condition)},changeCustom:function(t){var e=this.fieldCustomRuleList.find((function(e){return e.fieldId===t.fieldId}));t.fieldType=e.fieldType,t.optionList=e.optionList,t.fieldValue="",t.queryType="empty"},filterFieldValueList:function(t){return t?this.fieldValueList.filter((function(e){return e.permission.includes(t)})):this.fieldValueList},addRule:function(){this.filterRules.length>=8?this.$message.warning("最多设置10个筛选条件"):this.filterRules.push(this.defaultRuleDetails())},getInfo:function(){var t=this;Object(kt["b"])().then((function(e){t.fieldCustomRuleList=e.data.fieldCustomRuleList})).catch((function(e){t.$message.error(e)}))},delAtherWeekTime:function(t){this.filterRules.splice(t,1)},changeCondition:function(){"and"===this.condition?this.condition="or":this.condition="and"}}},xt=_t,Lt=(a("621b"),Object(p["a"])(xt,yt,Ct,!1,null,"a91f45e6",null)),Tt=Lt.exports,St={name:"CustomInfo",components:{Toolbar:U,CustomFilter:Tt},data:function(){return{clientList:[],tableLoading:!1,selectedRows:[],selectedRowKeys:[],source:{title:"筛选客户"},visibleSendContant:!1,spinning:!1,repetition:"",pagination:{current:1,pageSize:10,total:0},filterRules:[],condition:"",fieldCustomValueList:[]}},computed:Object(L["c"])({rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedRows=a,t.selectedRowKeys=e}}},columns:function(){var t=[{title:"客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info",fixed:"left"},{title:"所属客服",dataIndex:"staffName",scopedSlots:{customRender:"staffName"},key:"staffName"},{title:"标签",dataIndex:"tagNameList",scopedSlots:{customRender:"tagNameList"},width:"230px",key:"tagNameList"},{title:"添加时间",dataIndex:"addTime",key:"addTime"},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],e=this.fieldCustomValueList.map((function(t){return{title:t.fieldName,dataIndex:t.fieldId,key:t.fieldId,width:150,customRender:function(t){return t||"-"}}}));return e.length>0&&t.splice.apply(t,[4,0].concat(Object(M["a"])(e))),t}}),created:function(){this.getCustomerList()},methods:{getParamsList:function(){var t={condition:this.condition,filterRules:this.filterRules.map((function(t){return{fieldId:t.fieldId,queryType:t.queryType,fieldValue:t.fieldValue}}))};return t},exportExcelDown:function(t){var e=this;if("3"==t){var a=this.getParamsList();Object(r["o"])(a).then((function(t){Object(T["e"])(t,".xlsx","自定义信息筛选列表")})).catch((function(t){e.$message.error(t)}))}},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))},jump:function(t){var e={avatar:t.staffAvatar||"",name:t.name},a=JSON.stringify(e);sessionStorage.setItem("newsObj",a),this.$router.push({name:"news",query:{staffExtId:t.staffId,designee:0,customerId:t.customerId}})},result:function(){this.fieldCustomValueList=[],this.filterRules=[],this.condition="",this.getCustomerList()},serviceOk:function(){this.getCustomerList()},serviceEvent:function(t,e){this.filterRules=t,this.condition=e,this.visibleSendContant=!1,this.getCustomerList()},lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.staffId}})},change:function(t){var e=t.current;this.pagination.current=e,this.getCustomerList()},getCustomerList:function(){var t=this;this.tableLoading=!0;var e=this.getParams();this.clientList=[],Object(r["n"])(e).then((function(e){var a,s;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.list&&(t.pagination.total=e.data.total,null!==(s=e.data.list[0])&&void 0!==s&&s.fieldCustomValueList&&(t.fieldCustomValueList=e.data.list[0].fieldCustomValueList,e.data.list.forEach((function(t){t.fieldCustomValueList.forEach((function(e){t[e.fieldId]=e.fieldValue}))}))),t.repetition=!1,t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},getParams:function(){var t={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,condition:this.condition,filterRules:this.filterRules.map((function(t){return{fieldId:t.fieldId,queryType:t.queryType,fieldValue:t.fieldValue}}))};return t},disposeClientList:function(t){this.clientList=t.map((function(t){return null!==t&&void 0!==t&&t.tagNames?t.tagNameList=t.tagNames.split(","):t.tagNameList=[],t.addWay=h["c"][t.addWay],t.info={nickName:t.nickName,name:t.name,avatar:t.avatar,type:t.type,typeText:1===t.type?"微信":t.corpName,lossStatus:1===t.lossStatus?"已流失":""},t.key=t.id,Object.assign({operation:t},t)}))}}},It=St,wt=(a("e7d5"),Object(p["a"])(It,ht,bt,!1,null,"59ac58c0",null)),Ot=wt.exports,Et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-groupList"},[e("div",{staticClass:"box"},[e("ul",{staticClass:"group-header"},[e("li",{staticClass:"panel"},[e("span",[t._v("所属客服：")]),e("div",{staticClass:"use-person",on:{click:function(e){t.visibleUsePerson=!0}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.serviceList,(function(a){return e("li",{key:a.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(a.title))])],1)})),t.serviceList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v("请选择客服")]):t._e()],2),t.serviceList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.serviceList.length)+"个账号")]):t._e(),e("div",{staticClass:"icon"},[t.serviceList.length<1?e("a-icon",{attrs:{type:"down"}}):t._e(),t.serviceList.length>0?e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return e.stopPropagation(),t.clean.apply(null,arguments)}}}):t._e()],1)])]),e("li",{staticClass:"panel"},[e("span",{staticClass:"panel-title min-w"},[t._v("排名条件:")]),e("a-select",{staticClass:"se-t",attrs:{placeholder:"请选择排名条件",allowClear:""},on:{change:t.selectEventChange},model:{value:t.orderScoreType,callback:function(e){t.orderScoreType=e},expression:"orderScoreType"}},t._l(t.selectEventList,(function(a,s){return e("a-select-option",{key:s,attrs:{value:a.value}},[t._v(" "+t._s(a.name)+" ")])})),1)],1),e("li",{staticClass:"panel"},[e("span",{staticClass:"panel-title min-w"},[t._v("排序方式:")]),e("a-select",{staticClass:"se-t",attrs:{placeholder:"请选择排序方式",allowClear:""},on:{change:t.selectEventChange},model:{value:t.orderType,callback:function(e){t.orderType=e},expression:"orderType"}},t._l(t.sortWay,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.text)+" ")])})),1)],1),e("li",{staticClass:"panel"},[e("a-space",[e("span",{staticClass:"panel-title min-w"},[t._v("评分分值:")]),e("a-popover",{attrs:{trigger:"click",placement:"bottomLeft"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}},[e("template",{slot:"content"},[e("p",[t._v("请输入评分分值范围")]),e("div",{staticClass:"contant-form"},[e("a-input-number",{attrs:{min:1,max:100,placeholder:"请输入评分"},model:{value:t.scoreStart,callback:function(e){t.scoreStart=e},expression:"scoreStart"}}),t._v("~ "),e("a-input-number",{attrs:{min:1,max:1e5,placeholder:"请输入评分"},model:{value:t.scoreEnd,callback:function(e){t.scoreEnd=e},expression:"scoreEnd"}})],1),e("footer",{staticClass:"contant-foot"},[e("a-button",{attrs:{type:"primary"},on:{click:t.getScore}},[t._v("确定")])],1)]),e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"分值范围",allowClear:""},on:{change:t.changeScore},model:{value:t.scoreRange,callback:function(e){t.scoreRange=e},expression:"scoreRange"}},[e("div",{attrs:{slot:"dropdownRender"},slot:"dropdownRender"})])],2)],1)],1)]),e("a-button",{on:{click:t.handleReset}},[t._v("重置")])],1),e("div",{staticClass:"kong"}),e("div",{staticClass:"title"},[e("div",{staticClass:"title-left"},[e("div",{staticClass:"flex"},[e("h2",[t._v("共"+t._s(t.pagination.total)+"个客户")]),e("span",{staticClass:"choose"},[t._v("已选择"+t._s(t.selectedRowKeys.length)+"个客户")]),e("a-divider",{staticClass:"m-top",attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25 refresh",on:{click:t.refresh}},[e("a-icon",{attrs:{type:"sync"}}),t._v("更新数据")],1)],1)]),e("Toolbar",{attrs:{keyNum:0,selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows,btnLoading:t.btnLoading},on:{serviceOk:t.serviceOk,exportExcelDown:t.exportExcelDown}})],1),e("a-spin",{attrs:{spinning:t.tableLoading}},[e("a-table",{attrs:{columns:t.columns,"row-selection":t.rowSelection,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.tablechange},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",[t._v(" "+t._s(a.name)+" "),e("span",{staticClass:"souce-type",class:{firm:2===a.type}},[t._v(" @"+t._s(a.typeText))]),a.black?e("a-tag",{staticStyle:{"margin-left":"5px"},attrs:{color:"red"}},[t._v("黑名单")]):t._e()],1),e("p",{staticClass:"font-color-black-25"},[e("span",{staticClass:"loss-status"},[t._v(t._s(a.lossStatus))]),a.nickName?e("span",[t._v("昵称： "+t._s(a.nickName))]):t._e()])])],1)}},{key:"staffName",fn:function(a){return a?e("a-tag",{},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),t._v(" "+t._s(a)+" ")],1):t._e()}},{key:"score",fn:function(s){return e("span",{staticClass:"winged-tag integral-tag score-tag"},[e("div",{staticClass:"flex-row full-h"},[e("img",{staticClass:"winged-tag-icon",attrs:{src:a("7e11"),alt:""}}),e("div",{staticClass:"full-h"},[t._v(t._s(s))])])])}},{key:"tagNameList",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}]},t._l(a,(function(a,s){return e("a-tag",{key:s},[t._v(" "+t._s(a)+" ")])})),1):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"operation",fn:function(a){return e("div",{staticClass:"align-right",staticStyle:{display:"flex"}},["0"==a.hasChat?e("a-tooltip",{attrs:{title:"所属客服未开通消息存档"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"1"==a.hasChat?e("a-tooltip",{attrs:{title:"当前客户与所属客服没有聊天记录"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"2"==a.hasChat?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.jump(a)}}},[t._v("聊天记录")]):t._e(),e("div",{staticClass:"a-vertical"}),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(a)}}},[t._v("详情")])],1)}}],null,!0)},[e("div",{attrs:{slot:"score"},slot:"score"},[t._v(" 客户评分 "),e("a-tooltip",{attrs:{title:"企业内部使用，帮助企业员工了解客户意向，针对不同意向客户进行精准运营"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1),e("div",{attrs:{slot:"integral"},slot:"integral"},[t._v(" 客户积分 "),e("a-tooltip",{attrs:{title:"企业客户使用，客户通过企业设置的规则获得积分，用于抽奖活动和积分商城兑换，帮助企业提高客户活跃度"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])],1),e("a-modal",{attrs:{footer:null,width:"680px",centered:"",destroyOnClose:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",{attrs:{type:"deptId",title:"请选择客服",selectList:t.serviceList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceCustom,cancle:function(e){t.visibleUsePerson=!1}}})],1)],1)},Nt=[],Rt={name:"CustomerRating",data:function(){return{groupList:[],visibleSendContant:!1,tableLoading:!1,startOrEndTime:void 0,operation:{},selectRoleIdList:[""],visibleUsePerson:!1,showPopover:!1,serviceList:[],scoreStart:"",scoreEnd:"",btnLoading:!1,scoreRange:void 0,source:{title:"查看事件",footer:!1},orderScoreType:"",selectEventList:[],orderType:void 0,sortWay:[{text:"降序",id:2},{text:"升序",id:1}],pagination:{current:1,pageSize:10,total:0},isOpenstaff:!1,clientList:[],selectedRows:[],selectedRowKeys:[],groupWxIds:[],columns:[{title:"客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{title:"所属客服",dataIndex:"staffName",scopedSlots:{customRender:"staffName"},key:"staffName"},{dataIndex:"score",slots:{title:"score"},scopedSlots:{customRender:"score"},key:"score"},{title:"标签",dataIndex:"tagNameList",scopedSlots:{customRender:"tagNameList"},width:"230px",key:"tagNameList"},{title:"客户状态",dataIndex:"statusName",key:"statusName",customRender:function(t,e,a){return t||"-"}},{title:"添加时间",dataIndex:"addTime",key:"addTime",customRender:function(t,e,a){return t||"-"}},{title:"上次对话时间",dataIndex:"lastCommunicationTime",key:"lastCommunicationTime",customRender:function(t,e,a){return t||"-"}},{title:"添加渠道",dataIndex:"addWayName",key:"addWayName",scopedSlots:{customRender:"addWayName"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}]}},computed:{rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedRows=a,t.selectedRowKeys=a.map((function(t){return t.id}))}}},params:function(){var t,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,orderScoreType:this.orderScoreType,orderType:this.orderType,scoreStart:this.scoreStart,scoreEnd:this.scoreEnd,staffUserId:null===(t=this.serviceList)||void 0===t?void 0:t.map((function(t){return t.source.userid}))};return e}},components:{StaffList:it["a"],Toolbar:U,UsePerson:Q["a"],EventDetail:ft,AddTransfer:c["a"]},created:function(){this.getDictionaryByCode()},methods:{exportExcelDown:function(t){var e=this;"0"==t&&(this.btnLoading=!0,Object(r["i"])(this.params).then((function(t){Object(T["e"])(t,".xlsx","客户评分筛选列表")})).catch((function(t){e.$message.error(t)})).finally((function(){e.btnLoading=!1})))},changeScore:function(t){this.scoreEnd="",this.scoreStart="",this.findByCustomerEvent()},clean:function(){this.serviceList=[],this.findByCustomerEvent()},getDictionaryByCode:function(){var t=this;Object(r["k"])({code:"SCORE"}).then((function(e){t.selectEventList=e.data,t.orderScoreType=t.selectEventList[0].value,t.findByCustomerEvent()})).catch((function(e){t.$message.error(e)}))},getScore:function(){var t=this;this.verifyScore().then((function(){t.showPopover=!1,t.scoreRange="".concat(t.scoreStart,"~").concat(t.scoreEnd),t.findByCustomerEvent()})).catch((function(e){t.$message.warning(e)}))},verifyScore:function(){var t=this;return new Promise((function(e,a){t.scoreStart||0===t.scoreStart||a("请输入起始评分"),t.scoreEnd||0===t.scoreStart||a("请输入结束评分"),t.scoreStart>=t.scoreEnd&&a("结束值必须大于初始值"),e()}))},handleReset:function(){this.scoreEnd="",this.scoreStart="",this.pagination.current=1,this.serviceList=[],this.orderType=void 0,this.orderScoreType=this.selectEventList[0].value,this.scoreRange=void 0,this.findByCustomerEvent()},jump:function(t){var e={avatar:t.staffAvatar||"",name:t.staffName},a=JSON.stringify(e);sessionStorage.setItem("newsObj",a),this.$router.push({name:"news",query:{staffExtId:t.staffId,designee:0,customerId:t.customerId}})},serviceOk:function(){this.findByCustomerEvent()},serviceCustom:function(t){this.serviceList=t,this.visibleUsePerson=!1,this.findByCustomerEvent()},searchEvent:function(t){this.operation=t,this.visibleSendContant=!0},lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.staffId}})},findByCustomerEvent:function(){var t=this;this.tableLoading=!0,Object(r["h"])(this.params).then((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.list&&(t.pagination.total=e.data.total,t.repetition=!1,t.clientList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},refresh:function(){this.pagination.current=1,this.findByCustomerEvent()},tablechange:function(t){var e=t.current;this.selectedRowKeys=[],this.pagination.current=e,this.findByCustomerEvent()},selectEventChange:function(){this.findByCustomerEvent()},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))},disposeClientList:function(t){return t.map((function(t){var e;return null!==t&&void 0!==t&&t.tagNames?t.tagNameList=t.tagNames.split(","):t.tagNameList=[],t.addWay=h["c"][t.addWay],t.info={nickName:t.nickName,black:t.black,name:t.name,avatar:t.avatar,type:t.type,typeText:1===t.type?"微信":t.corpName,lossStatus:1===t.lossStatus?"已流失":""},t.staffMake=t.staffList,t.staffTag=t.staffList,t.staffAddTime=t.staffList,t.staffLoss=t.staffList,t.staffOperation=null===(e=t.staffList)||void 0===e?void 0:e.map((function(e){return Object(J["a"])(Object(J["a"])({},e),{},{operation:t,customerId:t.customerId})})),t.key=t.id,Object.assign({operation:t},t)}))}}},At=Rt,jt=(a("4d85"),Object(p["a"])(At,Et,Nt,!1,null,"e0fa5b6e",null)),Dt=jt.exports,Bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-groupList"},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" 客户积分可以帮助企业建立客户积分体系，以积分激励的方式提高客户活跃度，增强客户粘性。可在「客户积分」中设置企业客户积分规则 ")],1),e("div",{staticClass:"box"},[e("ul",{staticClass:"group-header"},[e("li",{staticClass:"panel"},[e("span",[t._v("所属客服：")]),e("div",{staticClass:"use-person",on:{click:function(e){t.visibleUsePerson=!0}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.serviceList,(function(a){return e("li",{key:a.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(a.title))])],1)})),t.serviceList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v("请选择客服")]):t._e()],2),t.serviceList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.serviceList.length)+"个账号")]):t._e(),e("div",{staticClass:"icon"},[t.serviceList.length<1?e("a-icon",{attrs:{type:"down"}}):t._e(),t.serviceList.length>0?e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return e.stopPropagation(),t.clean.apply(null,arguments)}}}):t._e()],1)])]),e("li",{staticClass:"panel"},[e("span",{staticClass:"panel-title min-w"},[t._v("排名条件:")]),e("a-select",{staticClass:"se-t",attrs:{placeholder:"请选择排名条件",allowClear:""},on:{change:t.selectEventChange},model:{value:t.orderScoreType,callback:function(e){t.orderScoreType=e},expression:"orderScoreType"}},t._l(t.selectEventList,(function(a,s){return e("a-select-option",{key:s,attrs:{value:a.value}},[t._v(" "+t._s(a.name)+" ")])})),1)],1),e("li",{staticClass:"panel"},[e("a-space",[e("span",{staticClass:"panel-title min-w"},[t._v("评分分值:")]),e("a-popover",{attrs:{trigger:"click",placement:"bottomLeft"},model:{value:t.showPopover,callback:function(e){t.showPopover=e},expression:"showPopover"}},[e("template",{slot:"content"},[e("p",[t._v("请输入评分分值范围")]),e("div",{staticClass:"contant-form"},[e("a-input-number",{attrs:{min:1,max:100,placeholder:"请输入评分"},model:{value:t.scoreStart,callback:function(e){t.scoreStart=e},expression:"scoreStart"}}),t._v("~ "),e("a-input-number",{attrs:{min:1,max:1e5,placeholder:"请输入评分"},model:{value:t.scoreEnd,callback:function(e){t.scoreEnd=e},expression:"scoreEnd"}})],1),e("footer",{staticClass:"contant-foot"},[e("a-button",{attrs:{type:"primary"},on:{click:t.getScore}},[t._v("确定")])],1)]),e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"分值范围",allowClear:""},on:{change:t.changeScore},model:{value:t.scoreRange,callback:function(e){t.scoreRange=e},expression:"scoreRange"}},[e("div",{attrs:{slot:"dropdownRender"},slot:"dropdownRender"})])],2)],1)],1)]),e("a-button",{on:{click:t.handleReset}},[t._v("重置")])],1),e("div",{staticClass:"kong"}),e("div",{staticClass:"title"},[e("div",{staticClass:"title-left"},[e("div",{staticClass:"flex"},[e("h2",[t._v("共"+t._s(t.pagination.total)+"个客户")]),e("span",{staticClass:"choose"},[t._v("已选择"+t._s(t.selectedRowKeys.length)+"个客户")]),e("a-divider",{staticClass:"m-top",attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25 refresh",on:{click:t.refresh}},[e("a-icon",{attrs:{type:"sync"}}),t._v("更新数据")],1)],1)]),e("Toolbar",{attrs:{selectedRowKeys:t.selectedRowKeys,selectedRows:t.selectedRows,keyNum:4,btnLoading:t.btnLoading},on:{serviceOk:t.serviceOk,exportExcelDown:t.exportExcelDown}})],1),e("a-spin",{attrs:{spinning:t.tableLoading}},[e("a-table",{attrs:{columns:t.columns,"row-selection":t.rowSelection,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.tablechange},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",[t._v(" "+t._s(a.name)+" "),e("span",{staticClass:"souce-type",class:{firm:2===a.type}},[t._v(" @"+t._s(a.typeText))])]),e("p",{staticClass:"font-color-black-25"},[e("span",{staticClass:"loss-status"},[t._v(t._s(a.lossStatus))]),a.nickName?e("span",[t._v("昵称： "+t._s(a.nickName))]):t._e()])])],1)}},{key:"staffName",fn:function(a){return a?e("a-tag",{},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),t._v(" "+t._s(a)+" ")],1):t._e()}},{key:"currentIntegral",fn:function(s){return e("span",{staticClass:"winged-tag integral-tag"},[e("div",{staticClass:"flex-row full-h"},[e("img",{staticClass:"winged-tag-icon",attrs:{src:a("c51b"),alt:""}}),e("div",{staticClass:"full-h"},[t._v(t._s(s))])])])}},{key:"accumulativeIntegral",fn:function(s){return e("span",{staticClass:"winged-tag integral-tag"},[e("div",{staticClass:"flex-row full-h"},[e("img",{staticClass:"winged-tag-icon",attrs:{src:a("c51b"),alt:""}}),e("div",{staticClass:"full-h"},[t._v(t._s(s))])])])}},{key:"tagNameList",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}]},t._l(a,(function(a,s){return e("a-tag",{key:s},[t._v(" "+t._s(a)+" ")])})),1):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"operation",fn:function(a){return e("div",{staticClass:"align-right"},["0"==a.hasChat?e("a-tooltip",{attrs:{title:"所属客服未开通消息存档"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"1"==a.hasChat?e("a-tooltip",{attrs:{title:"当前客户与所属客服没有聊天记录"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"2"==a.hasChat?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.jump(a)}}},[t._v("聊天记录")]):t._e(),e("div",{staticClass:"a-vertical"}),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookIntegral(a)}}},[t._v("积分记录")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(a)}}},[t._v("详情")])],1)}}],null,!0)},[e("div",{attrs:{slot:"score"},slot:"score"},[t._v(" 客户评分 "),e("a-tooltip",{attrs:{title:"企业内部使用，帮助企业员工了解客户意向，针对不同意向客户进行精准运营"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1),e("div",{attrs:{slot:"integral"},slot:"integral"},[t._v(" 客户积分 "),e("a-tooltip",{attrs:{title:"企业客户使用，客户通过企业设置的规则获得积分，用于抽奖活动和积分商城兑换，帮助企业提高客户活跃度"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])],1),e("a-modal",{attrs:{footer:null,width:"680px",centered:"",destroyOnClose:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",{attrs:{type:"deptId",title:"请选择客服",selectList:t.serviceList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceCustom,cancle:function(e){t.visibleUsePerson=!1}}})],1),e("a-modal",{attrs:{footer:null,width:"680px",centered:"",destroyOnClose:""},model:{value:t.visibleRecord,callback:function(e){t.visibleRecord=e},expression:"visibleRecord"}},[e("IntegralRecord",{attrs:{operation:t.operation}})],1)],1)},Mt=[],Pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("h6",{staticClass:"dialog-title"},[t._v("积分记录")]),e("header",{staticClass:"header"},[e("div",{staticClass:"form-list"},[e("span",{staticClass:"form-lable"},[t._v("选择时间:")]),e("a-range-picker",{staticClass:"form-input",staticStyle:{width:"200px"},attrs:{allowClear:"","show-time":{hideDisabledOptions:!0,defaultValue:[t.$moment("00:00:00"),t.$moment("11:59:59")]},format:"YYYY-MM-DD"},on:{change:t.changeDate},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),e("div",{staticClass:"form-list"},[e("span",{staticClass:"form-lable"},[t._v("积分类型:")]),e("a-select",{staticClass:"form-input",attrs:{allowClear:"",placeholder:"请选择类型"},on:{change:t.changeDate},model:{value:t.channel,callback:function(e){t.channel=e},expression:"channel"}},t._l(t.integralTypeList,(function(a){return e("a-select-option",{key:a.channel,attrs:{value:a.channel}},[t._v(" "+t._s(a.channelName)+" ")])})),1)],1)]),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handleInfiniteOnLoad,expression:"handleInfiniteOnLoad"}],staticClass:"scroll-list",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[e("ul",t._l(t.dataList,(function(a){return e("li",{key:a.integralId},[a.repeat?t._e():e("div",{staticClass:"date"},[t._v(" "+t._s(t._f("getDate")(a.updateTime))+" ")]),e("div",{staticClass:"rule-head"},[e("div",[e("a-icon",{staticClass:"clock",attrs:{type:"clock-circle"}}),e("span",[t._v(t._s(t._f("getTime")(a.updateTime)))])],1)]),e("div",{staticClass:"rule-content"},[e("div",{staticClass:"rule-chilren"},[e("a-avatar",{staticClass:"avatar-img",attrs:{src:a.customerAvatar,size:20,shape:"square"}}),e("div",{domProps:{innerHTML:t._s(a.contentText)}})],1)])])})),0)])])},Wt=[],Gt={name:"IntegralRecord",directives:{infiniteScroll:ct.a},props:{operation:{type:Object,default:function(){return{}}}},filters:{getTime:function(t){var e=t;return t&&(e=t.format("HH:mm")),e},getDate:function(t){var e=["一","二","三","四","五","六","日"],a=t;return t&&(a="星期"+e[t.format("d")]+"  "+t.format("YYYY-MM-DD")),a}},data:function(){return{startOrEndTime:void 0,channel:void 0,integralTypeList:[],dataList:[],busy:!1,pagination:{current:1,pageSize:10,total:0}}},created:function(){this.getChannelList()},methods:{changeDate:function(){this.busy=!1,this.dataList=[],this.pagination.current=1,this.getIntegralList()},handleInfiniteOnLoad:function(){!this.busy&&this.getIntegralList()},getChannelList:function(){var t=this;Object(r["e"])().then((function(e){t.integralTypeList=e.data})).catch((function(e){t.$message.error(e)}))},getIntegralList:function(){var t,e,a,s,i=this,n={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,customerWxid:this.operation.customerId,channel:this.channel,startDate:null===(t=this.startOrEndTime)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.format("YYYY-MM-DD"),endDate:null===(a=this.startOrEndTime)||void 0===a||null===(s=a[1])||void 0===s?void 0:s.format("YYYY-MM-DD")};Object(r["x"])(n).then((function(t){var e;t.data.list.length>0&&((e=i.dataList).push.apply(e,Object(M["a"])(i.dispathList(t.data.list))),i.getRepeat(i.dataList));if(i.pagination.current++,t.data.list.length<i.pagination.pageSize)return i.busy=!0,void(i.loading=!1);i.pagination.total=t.data.total})).catch((function(t){i.$message.error(t)}))},dispathList:function(t){var e=this;if((null===t||void 0===t?void 0:t.length)>0)return t.map((function(t){var a='<img src="'.concat(t.staffAvatar,'" class="avatar-img" />').concat(t.staffName);return Object(J["a"])(Object(J["a"])({},t),{},{updateTime:e.$moment(t.updateTime),contentText:t.content.replace(/#customer#​*/g,t.customerName).replace(/#staff#​*/g,a)})}))},getRepeat:function(t){for(var e={},a=0;a<t.length;a++){var s=t[a],i=s.updateTime.format("MM[月]DD[日]");e[i]?s.repeat=!0:e[i]=!0}}}},Yt=Gt,qt=(a("f5c2"),Object(p["a"])(Yt,Pt,Wt,!1,null,"e7d6f1f8",null)),Ut=qt.exports,Ft={name:"CustomerIntegral",data:function(){return{groupList:[],visibleSendContant:!1,tableLoading:!1,startOrEndTime:void 0,operation:{},selectRoleIdList:[""],visibleUsePerson:!1,showPopover:!1,serviceList:[],scoreStart:"",scoreEnd:"",visibleRecord:!1,btnLoading:!1,scoreRange:void 0,source:{title:"查看事件",footer:!1},orderScoreType:"",selectEventList:[],pagination:{current:1,pageSize:10,total:0},isOpenstaff:!1,clientList:[],selectedRows:[],selectedRowKeys:[],groupWxIds:[],staffWxIds:[],columns:[{title:"客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{dataIndex:"currentIntegral",slots:{title:"integral"},scopedSlots:{customRender:"currentIntegral"},key:"integral"},{title:"客户累计积分",dataIndex:"accumulativeIntegral",scopedSlots:{customRender:"accumulativeIntegral"},key:"accumulativeIntegral"},{title:"所属客服",dataIndex:"staffName",scopedSlots:{customRender:"staffName"},key:"staffName"},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}]}},computed:{getEvent:function(){var t=this;return this.selectEventList.find((function(e){return e.value===t.eventTypeId}))},rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedRows=a,t.selectedRowKeys=a.map((function(t){return t.id}))}}},params:function(){var t,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,orderScoreType:this.orderScoreType,scoreStart:this.scoreStart,scoreEnd:this.scoreEnd,staffUserId:null===(t=this.serviceList)||void 0===t?void 0:t.map((function(t){return t.source.userid}))};return e}},components:{StaffList:it["a"],Toolbar:U,UsePerson:Q["a"],EventDetail:ft,AddTransfer:c["a"],IntegralRecord:Ut},created:function(){this.getDictionaryByCode()},methods:{lookIntegral:function(t){this.operation=t,this.visibleRecord=!0},exportExcelDown:function(t){var e=this;"4"==t&&(this.btnLoading=!0,Object(r["q"])(this.params).then((function(t){Object(T["e"])(t,".xlsx","客户积分筛选列表")})).catch((function(t){e.$message.error(t)})).finally((function(){e.btnLoading=!1})))},clean:function(){this.serviceList=[],this.findByCustomerEvent()},getDictionaryByCode:function(){var t=this;Object(r["k"])({code:"SCORE"}).then((function(e){t.selectEventList=e.data,t.orderScoreType=t.selectEventList[0].value,t.findByCustomerEvent()})).catch((function(e){t.$message.error(e)}))},getScore:function(){var t=this;this.verifyScore().then((function(){t.showPopover=!1,t.scoreRange="".concat(t.scoreStart,"~").concat(t.scoreEnd),t.findByCustomerEvent()})).catch((function(e){t.$message.warning(e)}))},changeScore:function(t){this.scoreEnd="",this.scoreStart="",this.findByCustomerEvent()},verifyScore:function(){var t=this;return new Promise((function(e,a){t.scoreStart||0===t.scoreStart||a("请输入起始评分"),t.scoreEnd||0===t.scoreStart||a("请输入结束评分"),t.scoreStart>=t.scoreEnd&&a("结束值必须大于初始值"),e()}))},serviceCustom:function(t){this.serviceList=t,this.visibleUsePerson=!1,this.findByCustomerEvent()},handleReset:function(){this.scoreEnd="",this.scoreStart="",this.pagination.current=1,this.serviceList=[],this.orderScoreType=this.selectEventList[0].value,this.scoreRange=void 0,this.findByCustomerEvent()},jump:function(t){var e={avatar:t.staffAvatar||"",name:t.staffName},a=JSON.stringify(e);sessionStorage.setItem("newsObj",a),this.$router.push({name:"news",query:{staffExtId:t.staffId,designee:0,customerId:t.customerId}})},serviceOk:function(){this.findByCustomerEvent()},searchEvent:function(t){this.operation=t,this.visibleSendContant=!0},lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.staffId}})},findByCustomerEvent:function(){var t=this;this.tableLoading=!0,Object(r["p"])(this.params).then((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.list&&(t.pagination.total=e.data.total,t.repetition=!1,t.clientList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},refresh:function(){this.pagination.current=1,this.findByCustomerEvent()},tablechange:function(t){var e=t.current;this.pagination.current=e,this.findByCustomerEvent()},selectEventChange:function(){this.findByCustomerEvent()},changeAddDate:function(t,e){this.startOrEndTime=t,this.findByCustomerEvent()},disabledDate:function(t){return t&&t>Date.now()},disposeClientList:function(t){return t.map((function(t){var e;return null!==t&&void 0!==t&&t.tagNames?t.tagNameList=t.tagNames.split(","):t.tagNameList=[],t.addWay=h["c"][t.addWay],t.info={nickName:t.nickName,name:t.name,avatar:t.avatar,type:t.type,typeText:1===t.type?"微信":t.corpName,lossStatus:1===t.lossStatus?"已流失":""},t.staffMake=t.staffList,t.staffTag=t.staffList,t.staffAddTime=t.staffList,t.staffLoss=t.staffList,t.staffOperation=null===(e=t.staffList)||void 0===e?void 0:e.map((function(e){return Object(J["a"])(Object(J["a"])({},e),{},{operation:t,customerId:t.customerId})})),t.key=t.customerId,Object.assign({operation:t},t)}))}}},zt=Ft,Kt=(a("0801"),Object(p["a"])(zt,Bt,Mt,!1,null,"2a02b788",null)),Ht=Kt.exports,Vt={name:"CustomerList",components:{SearchForm:k,CustomerTable:H,GroupTable:et,DynamicTable:vt,CustomInfo:Ot,CustomerRating:Dt,CustomerIntegral:Ht},data:function(){return{}},created:function(){},mounted:function(){},methods:{changeTab:function(t){this.$route.meta.seletedTab=t}}},$t=Vt,Jt=(a("ea25"),Object(p["a"])($t,s,i,!1,null,"59df13a0",null));e["default"]=Jt.exports},b7fd:function(t,e,a){"use strict";a("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"groupbox"},[e("div",{staticClass:"title"},[t._v(" 全部"+t._s(t.title)+" ("+t._s(t.total)+") ")]),e("div",{staticClass:"search-box"},[e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入".concat(t.title,"名称")},on:{search:t.onSearchGroupleader,pressEnter:t.onSearchGroupleader,blur:t.blursearch,focus:t.searchClick},model:{value:t.searchGroupleader,callback:function(e){t.searchGroupleader=e},expression:"searchGroupleader"}})],1),e("div",{staticClass:"list-wrap"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.allemployees,expression:"allemployees"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[t.staffdata.length>0?e("a-list",{attrs:{"data-source":t.staffdata},scopedSlots:t._u([{key:"renderItem",fn:function(a,s){return e("div",{key:s,staticClass:"list-item",on:{click:function(e){return t.choiceGroup(a)}}},[e("div",{staticClass:"item-content"},[e("img",{staticClass:"avatar",attrs:{src:a.thumbAvatar||t.defaultThumbAvatar,alt:""}}),e("span",{staticClass:"name"},[t._v(t._s(a.name||a.groupName||a.staffName))])]),t.defalytStaffIndex==(a.staffId||a.groupId)?e("a-icon",{staticClass:"img",attrs:{type:"check-circle"}}):e("div",{staticClass:"circle"})],1)}}],null,!1,1114407245)}):e("div",{staticClass:"cter"},[t._v("没有更多相关"+t._s(t.title)+"哦~~")])],1)])])},i=[],n=a("2909"),o=(a("d81d"),a("99af"),a("1c9c")),r=a("b52b"),c=a("487a"),l=a.n(c),u={directives:{infiniteScroll:l.a},props:{type:{type:String,default:"Staff"},title:{type:String,default:"员工"},tagPullId:{type:String,default:""}},data:function(){return{defaultThumbAvatar:a("b5c3"),staffdata:[],defalytStaffIndex:"",loading:!1,busy:!1,total:0,page:1,limit:10,searchGroupleader:""}},created:function(){},methods:{searchClick:function(){this.$emit("isSearchNoHide","1")},blursearch:function(){this.$emit("isSearchNoHide","2")},allemployees:function(){var t=this;switch(this.type){case"Staff":var e={currentPage:this.page,pageSize:this.limit,name:this.searchGroupleader||""};if(this.loading=!0,"0"!=this.total&&this.staffdata.length>=this.total)return void(this.busy=!0);Object(o["q"])(e).then((function(e){e.data.list.map((function(t){t.flag=!1}));var a=e.data.list;t.total=e.data.total,t.staffdata.length>=t.total?t.busy=!0:(t.page>1?t.staffdata=[].concat(Object(n["a"])(t.staffdata),Object(n["a"])(a)):t.staffdata=Object(n["a"])(a),t.page=t.page+1,t.loading=!1)}));break;case"customersDetail":var a={tagPullId:this.tagPullId||""};Object(r["b"])(a).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break;case"customer":var s={name:this.searchGroupleader||""};Object(o["n"])(s).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break;case"custGrpList":var i={grpName:this.searchGroupleader||"",filterType:0,grpStatus:0,orderCondition:1,orderWay:1,date:"",currentPage:1,pageSize:9999};Object(o["j"])(i).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break}},onSearchGroupleader:function(){this.$emit("isSearchNoHide","0"),this.page=1,this.staffdata=[],this.allemployees()},choiceGroup:function(t){this.defalytStaffIndex=t.userid||t.groupId||t.staffId,"Staff"==this.type?(this.$emit("closeopenstaff",t),this.$emit("closeopencustomer",t)):"customer"==this.type?this.$emit("closeopencustomer",t):"custGrpList"==this.type?this.$emit("closeopengroup",t):"customersDetail"==this.type&&this.$emit("closeopencustomer",t)}}},d=u,f=(a("be8d"),a("2877")),p=Object(f["a"])(d,s,i,!1,null,"e031d236",null);e["a"]=p.exports},b9cd:function(t,e,a){"use strict";a.d(e,"l",(function(){return s})),a.d(e,"j",(function(){return i})),a.d(e,"o",(function(){return n})),a.d(e,"n",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"g",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"k",(function(){return f})),a.d(e,"i",(function(){return p})),a.d(e,"e",(function(){return m})),a.d(e,"p",(function(){return g})),a.d(e,"c",(function(){return v})),a.d(e,"h",(function(){return h})),a.d(e,"q",(function(){return b})),a.d(e,"m",(function(){return y}));var s="LOSS_STATUS",i="GROUP_STATUS",n="ORDER_WAY",o="ORDER_CONDITION",r="ADD_WAY",c="GENDER",l="CUSTOMER_STATUS",u={0:"待分配",1:"待添加",2:"待通过",3:"已添加",4:"导入中"},d={1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},f=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:1},{text:"已不是好友",color:"#ffd4b6",id:2},{text:"客户接收达上限",color:"#fbe8ae",id:3},{text:"本月消息已经达到上限",color:"",id:4}],p=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:2},{text:"没有群发任务",color:"",id:4}],m={1:"微信",2:"企业微信"},g=[{id:"immediately",value:"立即发送"},{id:"timing",value:"定时发送"}],v={0:"渠道码",1:"区域扫码",2:"自动拉群",3:"一客一码",4:"加好友",5:"通过群码拉群"},h={0:{text:"拉人中",color:"green"},1:{text:"未开始",color:""},2:{text:"已达上限",color:"orange"},3:{text:"已停用",color:"red"}},b={0:{text:"创建失败",color:"green",id:0},1:{text:"待发送",color:"rgba(34,34,34,.85)",id:1},2:{text:"已发送",color:"rgba(34,34,34,.85)",id:2},3:{text:"已取消",color:"rgba(34,34,34,.85)",id:3},4:{text:"提醒发送",color:"#1890ff",id:4}},y=[{text:"文章",id:"0",format:""},{text:"链接",id:"1"},{text:"海报",id:"2",max:2,format:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",tips:"请上传png、jpg格式不超过2M的文件"},{text:"视频",id:"7",max:2e5,format:".MP4",tips:"请上传格式为MP4的视频文件"},{text:"PDF",id:"3",max:20,format:".pdf",icon:"/icons/pdf.png",tips:"请上传PDF格式不超过20M的文件"},{text:"PPT",id:"4",max:20,format:".pptx,.ppt,.pps",icon:"/icons/ppt.svg",tips:"请上传PPT格式不超过20M的文件"},{text:"表格",id:"5",max:20,format:".xlsx,.xls,.csv",icon:"/icons/excel.svg",tips:"请上传csv、xlsx格式不超过20M的文件"},{text:"文档",id:"6",max:20,format:".txt,.doc,.docx",icon:"/icons/word.svg",tips:"请上传doc、txt.docx格式不超过20M的文件"}]},be8d:function(t,e,a){"use strict";a("9694")},c08a:function(t,e,a){"use strict";a("fca9")},c29b:function(t,e,a){"use strict";a("fa23")},c51b:function(t,e){t.exports="data:image/png;base64,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"},d302:function(t,e,a){"use strict";a("67be")},d7d4:function(t,e,a){},e7d5:function(t,e,a){"use strict";a("22b3")},ea25:function(t,e,a){"use strict";a("7620")},f0b2:function(t,e,a){"use strict";a("b4f0")},f0c4:function(t,e,a){},f5c2:function(t,e,a){"use strict";a("d7d4")},f6d2:function(t,e,a){},fa23:function(t,e,a){},fca9:function(t,e,a){}}]);