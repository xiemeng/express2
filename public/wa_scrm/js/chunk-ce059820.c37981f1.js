(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce059820"],{"08e0":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"component-wrap"},[t.visibleSearch?e("AddTemplate",{on:{cancel:function(e){t.visibleSearch=!1},serviceOk:t.serviceOk}}):e("div",{staticClass:"contacts-wrap"},[e("header",{staticClass:"header"},[e("h2",[t._v("Template List")]),e("div",[e("a-button",{attrs:{type:"primary",disabled:t.Actions},on:{click:function(e){t.visibleSearch=!0}}},[t._v("Create Template")])],1)]),e("section",{staticClass:"section"},[e("h3",{staticClass:"total"},[t._v(t._s(t.clientData.length)+" Template")]),e("a-table",{staticClass:"table",attrs:{columns:t.columns,"data-source":t.clientData,loading:t.loading,scroll:{y:500},pagination:!1},scopedSlots:t._u([{key:"components",fn:function(a){return e("div",{},[e("a-tooltip",{attrs:{title:a[0].text}},[e("p",{staticClass:"content"},[t._v(t._s(a[0].text))])])],1)}},{key:"language",fn:function(a){return e("div",{},t._l(a,(function(a,s){return e("a-tag",{key:s,staticClass:"lang-tag"},[t._v(" "+t._s(a)+" ")])})),1)}},{key:"Actions",fn:function(a,s){return e("div",{},[e("a-button",{attrs:{type:"link",disabled:t.Actions},on:{click:function(e){return t.deletePage(s)}}},[t._v("Delete")])],1)}}],null,!1,2398171012)})],1)])],1)},i=[],n=a("5530"),o=(a("d3b7"),a("d81d"),a("b0c0"),a("159b"),a("c24f")),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"create-template"},[e("header",{staticClass:"header"},[e("a-icon",{attrs:{type:"left"},on:{click:function(e){return t.$emit("cancel")}}}),e("span",{staticClass:"title"},[t._v("Create a template")])],1),e("section",{staticClass:"section"},[e("aside",{staticClass:"left-aside"},[e("p",{staticClass:"title"},[t._v("Languages")]),e("a-select",{staticStyle:{width:"200px"},attrs:{size:"large"},model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}},t._l(t.langList,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),1)],1),e("div",{staticClass:"content"},[e("p",{staticClass:"title"},[t._v("Start building your template with text, buttons, or both. You can then automate it with Flow Builder and Inbox.")]),e("a-form-model",{ref:"ruleForm",staticClass:"form-model",attrs:{model:t.form,rules:t.rules}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"Template Name",prop:"name"}},[e("a-input",{attrs:{placeholder:"Template Name",size:"large"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"Category",prop:"category"}},[e("a-select",{attrs:{size:"large"},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}},t._l(t.categoryList,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),1)],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"Message",required:""}},[e("a-textarea",{attrs:{placeholder:"Type message hereâ€¦",autoSize:{minRows:5,maxRows:5}},model:{value:t.form.BODY.text,callback:function(e){t.$set(t.form.BODY,"text",e)},expression:"form.BODY.text"}}),e("div",{staticClass:"message-button"},[e("a-tooltip",{attrs:{title:"Emojis"}},[e("a-icon",{staticClass:"smile",attrs:{type:"smile",theme:"twoTone"},on:{click:function(e){t.visibleEmoji=!0}}})],1),e("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.addVariable}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" Add variable ")],1)],1)],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"Footer"}},[e("a-input",{attrs:{placeholder:"Template Footer",size:"large"},model:{value:t.form.FOOTER.text,callback:function(e){t.$set(t.form.FOOTER,"text",e)},expression:"form.FOOTER.text"}})],1)],1)],1)],1),e("div",{staticStyle:{"text-align":"right"}},[e("a-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("submit")])],1)],1),e("aside",{staticClass:"left-aside css-1tou8jy"},[e("p",{staticClass:"title"},[t._v("Preview (this is a preview only)")]),e("div",{staticClass:"css-uewqys emggyy94"},[t._m(0),e("div",{staticClass:"css-1oxlfih emggyy99",attrs:{"data-testid":"whats-app-content"}},[e("div",{staticClass:"css-1tfixk5"},[t._m(1),e("div",{staticClass:"css-1bofdss emggyy90"},[e("div",{staticStyle:{direction:"ltr"}},[t._v(t._s(this.form.BODY.text||"Message text here..."))]),e("div",{staticClass:"css-1hkjabm emggyy93",staticStyle:{direction:"ltr"}},[t._v(t._s(t.form.FOOTER.text))]),e("div",{staticClass:"css-1n3x2a2"},[t._v("Now")])])])]),e("footer",{staticClass:"css-11wszyz emggyy96"},[e("div",{staticClass:"css-1xjjb7d emggyy98"},[e("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"}},[e("circle",{attrs:{cx:"8",cy:"8",r:"7",stroke:"#9AA8BD","stroke-width":"2"}}),e("circle",{attrs:{cx:"6",cy:"6",r:"1",fill:"#9AA8BD"}}),e("circle",{attrs:{cx:"10",cy:"6",r:"1",fill:"#9AA8BD"}}),e("path",{attrs:{d:"M5 8a3 3 0 006 0",stroke:"#9AA8BD","stroke-width":"2"}})]),e("span",{staticClass:"css-6pef9e emggyy97"},[t._v("message")]),e("svg",{attrs:{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.38.736L5.388 3.178H3.516c-1.623 0-2.93 1.348-2.93 3.024v8.025c0 1.675 1.307 3.024 2.93 3.024h12.88c1.622 0 2.929-1.349 2.929-3.024V6.202c0-1.676-1.307-3.024-2.93-3.024h-1.872L12.532.736H7.38zm2.575 4.358c2.542 0 4.614 2.138 4.614 4.762 0 2.624-2.072 4.762-4.614 4.762-2.541 0-4.612-2.138-4.612-4.762 0-2.624 2.07-4.762 4.612-4.762zM6.298 9.856c0-2.092 1.631-3.776 3.657-3.776 2.027 0 3.659 1.684 3.659 3.776 0 2.092-1.633 3.776-3.659 3.776s-3.657-1.684-3.657-3.776z",fill:"#687992"}})])]),e("span",{staticClass:"css-19ylc6g emggyy910"},[e("svg",{attrs:{width:"14",height:"19",viewBox:"0 0 14 19",fill:"none"}},[e("path",{attrs:{d:"M6.832.45a2.738 2.738 0 012.744 2.745v5.49a2.738 2.738 0 01-2.744 2.744 2.738 2.738 0 01-2.745-2.745V3.195A2.738 2.738 0 016.832.451z",fill:"#fff"}}),e("path",{attrs:{d:"M1.135 8.828A.856.856 0 00.31 9.93c.811 2.83 3.023 4.901 5.664 5.275v3.017c0 .657 1.711.657 1.711 0v-3.017c2.638-.373 4.848-2.438 5.663-5.264.336-1.107-1.34-1.59-1.645-.475-.72 2.5-2.704 4.096-4.875 4.094-2.172-.004-4.157-1.602-4.874-4.102a.856.856 0 00-.82-.631z",fill:"#fff"}})])])])])])]),e("a-modal",{attrs:{width:"600px",footer:null,centered:""},on:{cancel:function(e){t.visibleEmoji=!1}},model:{value:t.visibleEmoji,callback:function(e){t.visibleEmoji=e},expression:"visibleEmoji"}},[e("Emoji",{on:{cancel:function(e){t.visibleEmoji=!1},sendMessage:t.sendEmojiMessage}})],1)],1)},c=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"css-w31qnc emggyy95"},[e("span",[t._v("WhatsApp")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"css-1upilqn"},[e("span",{staticClass:"css-p8ltua eme6cc90",attrs:{color:"blue"}},[t._v("English (US)")])])}],r=(a("ac1f"),a("466d"),a("e326")),u={name:"AddTemplate",components:{Emoji:r["a"]},data:function(){return{visibleEmoji:!1,langList:[{text:"English(US)",value:"en"},{text:"Chinese(CHN)",value:"zh_CN"},{text:"Chinese(HKG)",value:"zh_HK"},{text:"Chinese(TAI)",value:"zh_TW"}],categoryList:[{text:"MARKETING",value:"MARKETING"}],ButtonList:[{text:"Call to action",value:"1"},{text:"Quick reply",value:"2"},{text:"None",value:"0"}],headerList:[{text:"None",value:"0"},{text:"Text",value:"1"},{text:"Image",value:"2"},{text:"Document",value:"3"}],form:{language:"en",name:void 0,category:"MARKETING",BODY:{type:"BODY",text:""},HEADER:{type:"HEADER",format:void 0,example:{header_url:[]}},FOOTER:{type:"FOOTER",text:void 0}},rules:{name:[{required:!0,message:"Please input name"},{validator:this.validator,trigger:["blur","change"]}],"FOOTER.text":[{required:!0,message:"Please input text"}]},submitLoading:!1}},created:function(){},methods:{validator:function(t,e,a){var s=/^[a-z]+[\w]*$/;return s.test(e)?a():a(new Error("You can enter only lowercase letters and underscores (_)"))},uploadpic:function(t){var e=this,a=t.file.name.lastIndexOf("."),s=t.file.name.substring(a+1),i=uuid()+s,n={recordId:this.id,filePath:catelog+i};faultImgAdd(n).then((function(a){"1"===a.code&&client.put(catelog+i,t.file).then((function(t){e.imageListNew.push({id:a.data.id,url:t.url,catelog:catelog+i})})).catch((function(t){}))}))},submit:function(){var t=this;this.submitLoading=!0;var e=[this.form.BODY];this.form.FOOTER.text&&e.push(this.form.FOOTER);var a={templateName:this.form.name,language:this.form.language,components:e};Object(o["b"])(a).then((function(e){t.$message.success("success"),t.$emit("serviceOk")})).catch((function(e){t.$message.error(e)})).finally((function(){t.submitLoading=!1}))},sendEmojiMessage:function(t){this.visibleEmoji=!1,this.form.BODY.text+=t},addVariable:function(){var t=/{{[^}{]*?}}/g,e=this.form.BODY.text.match(t);this.form.BODY.text+=e?"{{".concat(e.length+1,"}}"):"{{1}}",this.$forceUpdate()}}},d=u,m=(a("7304"),a("2877")),f=Object(m["a"])(d,l,c,!1,null,"72cfbcbe",null),g=f.exports,p=a("ffe6"),v={name:"TemplateList",components:{AddTemplate:g},data:function(){return{visibleSearch:!1,columns:[{title:"Template Name",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"Content",dataIndex:"components",key:"components",scopedSlots:{customRender:"components"}},{title:"Languages",dataIndex:"language",key:"language",scopedSlots:{customRender:"language"}},{title:"Status",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"Category",dataIndex:"category",key:"category",scopedSlots:{customRender:"category"}},{title:"Actions",dataIndex:"address",key:"address 4",ellipsis:!0,scopedSlots:{customRender:"Actions"}}],clientData:[],pagination:{current:1,pageSize:10,total:0},loading:!1,editData:{},userRole:this.$store.state.user.info.userRole}},created:function(){this.init()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{serviceOk:function(){this.init(),this.visibleSearch=!1},init:function(){var t=this,e={templatesName:""};this.loading=!0,Object(o["i"])(e).then((function(e){var a=[],s=function(){var s={language:""};e.data[i].forEach((function(e,a){var i="";i=0===a?"".concat(e.language):",".concat(e.language),s=Object(n["a"])(Object(n["a"])({},e),{},{updatedAt:t.$moment(e.updatedAt).calendar(),language:s.language+=i})})),a.push(s)};for(var i in e.data)s();t.clientData=a.map((function(t){var e;return Object(n["a"])(Object(n["a"])({},t),{},{key:t.name,language:null===(e=t.language.split(","))||void 0===e?void 0:e.map((function(t){return p["a"][t]}))})}))})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))},deletePage:function(t){var e=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"After confirming the deletion, the message will be deleted",onOk:function(){e.contactsDeleteFun(t.name)}})},contactsDeleteFun:function(t){var e=this,a={templatesName:t};Object(o["d"])(a).then((function(t){e.$message.success("success"),e.init()})).catch((function(t){e.$message.error(t)}))}}},h=v,y=(a("df70"),Object(m["a"])(h,s,i,!1,null,"6acf2975",null));e["default"]=y.exports},7304:function(t,e,a){"use strict";a("8b2a")},"8b2a":function(t,e,a){},d2ba:function(t,e,a){},df70:function(t,e,a){"use strict";a("d2ba")}}]);