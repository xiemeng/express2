(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66448739"],{"0248":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"h",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"i",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"j",(function(){return f})),n.d(e,"c",(function(){return h})),n.d(e,"k",(function(){return g}));var r=n("b775"),o={pageList:"/client_group/groupAutoPull/page",addPageList:"/client_group/groupAutoPull/add",detailPage:"/client_group/groupAutoPull/detail",updatePageList:"/client_group/groupAutoPull/update",delGroupAutoPull:"/client_group/groupAutoPull/delGroupAutoPull",updatePic:"/client_group/groupAutoPull/updatePic",groupList:"/client_group/groupAutoPullGroup/list",groupSave:"/client_group/groupAutoPullGroup/save",groupUpdate:"/client_group/groupAutoPullGroup/update",groupDelete:"/client_group/groupAutoPullGroup/delete",batchGroup:"/client_group/groupAutoPullGroup/batchGroup"};function a(t){return Object(r["b"])({url:o.batchGroup,method:"post",data:t})}function i(t){return Object(r["b"])({url:o.groupDelete,method:"get",params:t})}function s(t){return Object(r["b"])({url:o.groupUpdate,method:"post",data:t})}function u(t){return Object(r["b"])({url:o.groupSave,method:"post",data:t})}function c(t){return Object(r["b"])({url:o.groupList,method:"get",params:t})}function l(t){return Object(r["b"])({url:o.pageList,method:"get",params:t})}function d(t){return Object(r["b"])({url:o.addPageList,method:"post",data:t})}function p(t){return Object(r["b"])({url:o.detailPage,method:"get",params:t})}function f(t){return Object(r["b"])({url:o.updatePageList,method:"post",data:t})}function h(t){return Object(r["b"])({url:o.delGroupAutoPull,method:"post",params:t})}function g(t){return Object(r["b"])({url:o.updatePic,method:"post",data:t})}},"0a51":function(t,e,n){"use strict";n("b2b8")},"0c7c":function(t,e,n){"use strict";n("5e1e")},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("d3b7");function r(t,e,n,r,o,a,i){try{var s=t[a](i),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function s(t){r(i,o,a,s,u,"next",t)}function u(t){r(i,o,a,s,u,"throw",t)}s(void 0)}))}}},2880:function(t,e,n){"use strict";n("592d")},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("6b75");function o(t){if(Array.isArray(t))return Object(r["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return o(t)||a(t)||Object(i["a"])(t)||s()}},"2a86":function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),t.tipText?e("span",{attrs:{name:"tip"}},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" "+t._s(t.tipText)+" ")],1)]):t._e(),t._t("default"),t.footer?e("div",{staticClass:"foot-button"},[e("div",{staticClass:"left"},[t._t("bottomLeft")],2),e("a-space",{attrs:{size:12}},[t._t("footer"),e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v(t._s(t.cancleText))]),e("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("serviceOk")}}},[t._v(t._s(t.okText))])],2)],1):t._e()],2)},o=[],a={name:"CommonModal",props:{title:{type:String,default:"标题"},cancleText:{type:String,default:"取消"},okText:{type:String,default:"确定"},tipText:{type:[String,Boolean],default:!1},footer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}}},i=a,s=(n("2880"),n("2877")),u=Object(s["a"])(i,r,o,!1,null,"c55b780c",null);e["a"]=u.exports},"4d61":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("ChannelList")],1)},o=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"channel-list"},[e("a-row",{staticClass:"search-hurdle",attrs:{type:"flex",justify:"space-between"}},[e("a-col",[e("a-space",{attrs:{size:12}},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"NewGruoup",query:{state:"add"}})}}},[t._v("新建拉群")]),e("a-button",{staticClass:"defalut-primary",attrs:{type:"primary"},on:{click:t.batchGroup}},[t._v("批量分组")])],1)],1),e("a-col",[e("a-space",{attrs:{size:18}},[e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入名称搜索"},on:{search:t.searchName},model:{value:t.codeName,callback:function(e){t.codeName=e},expression:"codeName"}})],1)],1)],1),e("section",{staticClass:"main"},[e("aside",{staticClass:"aside background-white"},[e("Grouping",{attrs:{groupList:t.groupList},on:{changeSpeechGroupId:t.changeSpeechGroupId,addGroup:t.speechGroup}})],1),e("a-table",{staticClass:"table",attrs:{"data-source":t.channelList,scroll:{x:1550},"row-selection":t.rowSelection,columns:t.columns,loading:t.loading,pagination:t.pagination},on:{change:t.change},scopedSlots:t._u([{key:"urlCodeInfo",fn:function(n){return e("img",{staticClass:"qr-code",attrs:{src:n.urlCode,alt:"二维码"},on:{click:function(e){return t.openCodeDetail(n.info)}}})}},{key:"staffList",fn:function(n){return e("div",{staticClass:"tag-list"},t._l(n,(function(n){return e("a-tag",{key:n.id},[e("a-icon",{staticClass:"user",attrs:{type:"user"}}),t._v(" "+t._s(n.staffName)+" ")],1)})),1)}},{key:"backupStaffList",fn:function(n){return e("div",{staticClass:"tag-list"},[n.length>0?e("div",t._l(n,(function(n,r){return e("a-tag",{key:r},[e("a-icon",{staticClass:"user",attrs:{type:"user"}}),t._v(" "+t._s(n.staffName)+" ")],1)})),1):e("div",[t._v("-")])])}},{key:"tagList",fn:function(n){return e("div",{staticClass:"tag-list"},[t._l(n,(function(n){return e("a-tag",{key:n.tagId},[t._v(" "+t._s(n.tagName)+" ")])})),e("div",{directives:[{name:"show",rawName:"v-show",value:n.length<=0,expression:"tagList.length<=0"}]},[t._v("-")])],2)}},{key:"codeList",fn:function(n){return e("div",{staticClass:"code-wrap"},[e("ul",[t._l(n,(function(n,r){return e("li",{directives:[{name:"show",rawName:"v-show",value:t.isOpen||r<2,expression:"isOpen || index < 2"}],key:r,staticClass:"code-info"},[e("div",{staticClass:"code-info-left"},[e("img",{attrs:{src:n.qrUrl}}),"1"==n.type?e("div",[t._v(" 群活码"+t._s(r+1))]):e("div",[t._v(t._s(n.groupName)),e("span",{staticClass:"sp"},[t._v("("+t._s(n.userCount)+"/"+t._s(n.userLimit)+")")])])]),e("div",{staticClass:"code-tag"},[e("a-tag",{attrs:{color:n.statusObj.color}},[t._v(t._s(n.statusObj.text))])],1)])})),n.length>2?e("span",{staticClass:"aks-tips",on:{click:function(e){t.isOpen=!t.isOpen}}},[t._v(" "+t._s(t.isOpen?"收起":"展开")),e("a-icon",{attrs:{type:t.isOpen?"up":"down"}})],1):t._e()],2)])}},{key:"operation",fn:function(n){return e("div",{staticStyle:{display:"flex"}},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.openCodeDetail(n)}}},[t._v("详情")]),e("div",{staticClass:"a-vertical"}),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.download(n.urlCode)}}},[t._v("下载")]),e("div",{staticClass:"a-vertical"}),e("a-dropdown",[e("a-button",{attrs:{type:"link"}},[t._v("编辑"),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",{on:{click:function(e){return t.$router.push({name:"NewGruoup",query:{autoPullId:n.autoPullId,state:"edit"}})}}},[t._v("修改")]),e("a-menu-item",{on:{click:function(e){return t.deleteGruoup(n.autoPullId)}}},[t._v("删除")])],1)],1)],1)}}])})],1),e("a-modal",{attrs:{visible:t.visibleCodeTetail,footer:null,width:"700px",centered:""},on:{cancel:function(e){t.visibleCodeTetail=!1}}},[e("CodeDetail",{attrs:{groupDetail:t.selectData}})],1),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("BatchGroup",{on:{cancle:function(e){t.visible=!1},serviceOk:t.serviceOk}})],1)],1)},i=[],s=n("5530"),u=n("2909"),c=(n("d3b7"),n("159b"),n("caad"),n("2532"),n("99af"),n("d81d"),n("c740"),n("a434"),n("b0c0"),function(){var t=this,e=t._self._c;return e("div",[e("h4",[t._v("活码详情")]),e("section",{staticClass:"section"},[e("a-space",{staticClass:"section-left",attrs:{direction:"vertical",align:"center",size:16}},[e("img",{staticClass:"qr-code",attrs:{src:t.groupDetail.urlCode,alt:"二维码"}}),e("p",[t._v(t._s(t.groupDetail.name))]),e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.download(t.groupDetail.urlCode,t.groupDetail.name)}}},[t._v("下载活码")]),e("a-button",{on:{click:function(e){return t.$router.push({name:"NewGruoup",query:{autoPullId:t.groupDetail.autoPullId,state:"edit"}})}}},[t._v(" 修改 ")])],1),e("a-space",{staticClass:"section-right",attrs:{direction:"vertical",size:16}},[e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("创建时间:")]),t._v(t._s(t.groupDetail.createTime))]),e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("上线成员:")]),t.groupDetail.onlineList.length>0?e("span",t._l(t.groupDetail.onlineList,(function(n,r){return e("a-tag",{key:r},[t._v(t._s(n.staffName))])})),1):e("span",[t._v("-")])]),e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("下线成员:")]),t.groupDetail.upList.length>0?e("span",t._l(t.groupDetail.upList,(function(n,r){return e("a-tag",{key:r},[t._v(t._s(n.staffName))])})),1):e("span",[t._v("-")])]),e("p",[t._v("员工添加上限："),e("span",{staticClass:"bark-color"},[t._v(t._s(t.groupDetail.openStaffAddLimit?"已开启":"已关闭"))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.groupDetail.openStaffAddLimit,expression:"groupDetail.openStaffAddLimit"}],staticClass:"user-limit-box"},[e("div",{staticClass:"limit-box-header"},[e("div",{staticClass:"left-desc"},[t._v("共"+t._s(t.groupDetail.staffList.length)+"个员工")]),e("div",{staticClass:"brief"},[t._v("今日添加客户数")]),e("div",{staticClass:"right-desc"},[e("div",{staticClass:"brief"},[t._v("每日添加客户上限")])])]),e("ul",{staticClass:"limit-box-content"},t._l(t.groupDetail.staffList,(function(n,r){return e("li",{key:r,staticClass:"limit-content"},[e("div",{staticClass:"left-desc"},[e("img",{attrs:{src:n.thumbAvatar}}),e("span",[t._v(t._s(n.staffName))])]),e("div",{staticClass:"right-desc"},[e("div",[t._v(t._s(n.userCount||0))]),e("div",[t._v(t._s(n.userLimit))])])])})),0)]),e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("备用成员:")]),t.groupDetail.backupStaffList.length>0?e("span",t._l(t.groupDetail.backupStaffList,(function(n,r){return e("a-tag",{key:r},[e("a-icon",{staticClass:"user",attrs:{type:"user"}}),t._v(" "+t._s(n.staffName)+" ")],1)})),1):e("span",[t._v("-")])]),e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("客户标签: ")]),t._l(t.groupDetail.tagList,(function(n,r){return e("a-tag",{key:r},[t._v(t._s(n.tagName))])})),e("span",{directives:[{name:"show",rawName:"v-show",value:t.groupDetail.tagList.length<=0,expression:"groupDetail.tagList.length<=0"}]},[t._v("-")])],2),e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("拉群方式:")]),t._v(" "+t._s(t.groupDetail.typeText))]),e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("入群引导语: ")]),t._v(t._s(t.groupDetail.message))]),e("p",{staticClass:"wrap"},[e("span",{staticClass:"label"},[t._v("群聊详情: ")]),e("ul",t._l(t.groupDetail.codeList,(function(n,r){return e("li",{key:r,staticClass:"code-info"},[e("div",{staticClass:"code-info-left"},[e("img",{attrs:{src:n.qrUrl}}),"1"==t.groupDetail.type?e("div",[t._v(" 群活码"+t._s(r+1))]):e("div",[t._v(t._s(n.groupName)),e("span",{staticClass:"sp"},[t._v("("+t._s(n.userCount)+"/"+t._s(n.userLimit)+")")])])]),e("div",{staticClass:"code-tag"},[e("a-tag",{attrs:{color:n.statusObj.color}},[t._v(t._s(n.statusObj.text))])],1)])})),0)])])],1)])}),l=[],d=n("ca00"),p={name:"CodeDetail",props:{groupDetail:{type:[Object],default:function(){return{}}}},created:function(){},methods:{download:function(t,e){var n=this;Object(d["d"])(t,e).catch((function(t){n.$message.error(t)}))}}},f=p,h=(n("7517"),n("2877")),g=Object(h["a"])(f,c,l,!1,null,"83c8f042",null),v=g.exports,m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"grouping"},[e("div",{staticClass:"plus-botton",on:{click:t.plusGroup}},[e("a-space",{attrs:{size:4}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加分组 ")],1)],1),e("a-menu",{staticClass:"group-list",attrs:{mode:"inline","default-selected-keys":[""]},on:{click:t.handleClick}},t._l(t.groupList,(function(n,r){return e("a-menu-item",{key:n.groupId,on:{mouseenter:function(e){return t.mouseenter(r)},mouseleave:function(e){return t.mouseleave(r)}}},[t._v(" "+t._s(n.groupName)+"（"+t._s(t.defaultNum(n.autoPullCount,r))+"） "),e("div",{directives:[{name:"show",rawName:"v-show",value:0!==r&&t.selectIndex===r&&1!==n.groupId,expression:"index !== 0 && selectIndex === index && item.groupId !== 1"}]},[e("a-icon",{attrs:{type:"edit"},on:{click:function(e){return e.stopPropagation(),t.editGroup(n)}}}),1!==n.isDefault&&n.autoPullCount<=0?e("a-icon",{attrs:{type:"delete"},on:{click:function(e){return e.stopPropagation(),t.deleteGroup(n)}}}):t._e()],1)])})),1),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("BuildGroup",{attrs:{state:t.state,detailData:t.detailData},on:{cancle:function(e){t.visible=!1},serviceOk:t.serviceOk}})],1)],1)},b=[],y=n("0248"),_=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.stateText)+"分组")]),e("section",{staticClass:"section"},[e("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":{span:4},"wrapper-col":{span:18},labelAlign:"right"}},[e("a-form-model-item",{attrs:{label:"分组名称",prop:"groupName"}},[e("a-input",{attrs:{maxLength:10,placeholder:"请输入分组名称",disabled:1===t.detailData.isDefault},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1)],1),e("div",{staticClass:"foot-button"},[e("a-space",{attrs:{size:12}},[e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("修改")])],1)],1)])},x=[],w=n("c7eb"),L=n("1da1"),k={name:"BuildGroup",props:{detailData:{type:[Object],default:function(){return{}}},state:{type:[String],default:"add"}},data:function(){return{selectList:[],form:{groupName:""},rules:{groupName:[{required:!0,message:"请填写分组名称"}]}}},computed:{speechGroupId:function(){return this.detailData.groupId},stateText:function(){return"add"===this.state?"新建":"修改"}},created:function(){var t;(null===(t=this.detailData)||void 0===t?void 0:t.groupId)&&this.getDetailData()},methods:{getDetailData:function(){this.detailData.groupId&&(this.form.groupName=this.detailData.group_name)},selectPerson:function(t){this.selectList=t},submit:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(L["a"])(Object(w["a"])().mark((function e(n){var r,o;return Object(w["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return e.next=3,t.validate();case 3:r=t.getParams(),o=t.speechGroupId?t.groupUpdate(r):t.groupSave(r),o.then((function(){t.$message.success("".concat(t.stateText,"分组成功")),t.$emit("serviceOk")})).catch((function(e){t.$message.error(e)})),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},validate:function(){var t=this;return new Promise((function(e,n){1===t.form.type&&t.selectList.length<1&&(t.$message.warning("请选择部门"),n("请选择部门")),e()}))},getParams:function(){var t={groupName:this.form.groupName};return t},groupUpdate:function(t){return t.groupId=this.speechGroupId,Object(y["h"])(t)},groupSave:function(t){return Object(y["g"])(t)}}},C=k,O=(n("0c7c"),Object(h["a"])(C,_,x,!1,null,"dd20abe8",null)),I=O.exports,P={name:"Grouping",components:{BuildGroup:I},props:{groupList:{type:[Array],default:function(){return[]}}},data:function(){return{visible:!1,state:"",detailData:{},selectIndex:""}},computed:{},methods:{defaultNum:function(t,e){if("0"==e){var n=0;return this.groupList.map((function(t,e){"0"!=e&&(n+=t.autoPullCount)})),n}return t},mouseenter:function(t){this.selectIndex=t},mouseleave:function(){this.selectIndex=""},handleClick:function(t){this.$emit("changeSpeechGroupId",t.key)},plusGroup:function(){this.detailData={},this.state="add",this.visible=!0},editGroup:function(t){this.detailData=t,this.state="edit",this.visible=!0},deleteGroup:function(t){if(!(t.autoPullCount>0)){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"确定要删除此分组吗？",onOk:function(){e.delGroup(t.groupId)}})}},serviceOk:function(){this.visible=!1,this.$emit("addGroup")},delGroup:function(t){var e=this,n=t;Object(y["e"])({groupId:n}).then((function(t){e.visible=!1,e.$message.success("删除成功"),e.$emit("addGroup")})).catch((function(t){$message.error(t)}))}}},S=P,j=(n("80a2"),Object(h["a"])(S,m,b,!1,null,"2b40876e",null)),G=j.exports,D=n("b9cd"),N=function(){var t=this,e=t._self._c;return e("CommonModal",{attrs:{title:"批量分组",okText:"确定"},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:function(e){return t.$emit("serviceOk",t.groupId)}}},[e("section",{staticClass:"section"},[e("a-form-model",{ref:"ruleForm",attrs:{"label-col":{span:4},"wrapper-col":{span:18},labelAlign:"right"}},[e("a-form-model-item",{attrs:{label:"选择分组",required:""}},[e("a-select",{model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groupList,(function(n){return e("a-select-option",{key:n.groupId,attrs:{value:n.groupId}},[t._v(" "+t._s(n.groupName)+" ")])})),1)],1)],1)],1)])},A=[],T=n("2a86"),R={name:"BatchGroup",components:{CommonModal:T["a"]},data:function(){return{groupList:[],groupId:null}},created:function(){this.getGroupList()},methods:{getGroupList:function(){var t=this,e={pageSize:999,currentPage:1};Object(y["f"])(e).then((function(e){t.groupList=e.data,t.groupId=t.groupList[0].groupId})).catch((function(e){t.$message.error(e)}))}}},$=R,E=Object(h["a"])($,N,A,!1,null,"e955b2fe",null),K=E.exports,U=n("2f62"),M=(n("31d2"),{name:"ChannelList",data:function(){return{groupList:[],codeIdList:[],checkAll:!1,visible:!1,groupId:void 0,defaultGroupList:[{groupName:"全部分组",groupId:void 0}],codeName:"",loading:!1,isOpen:!1,pagination:{current:1,pageSize:10,total:0},selectData:"",visibleCodeTetail:!1,channelList:[],selectedRowKeys:[],columns:[{title:"二维码",dataIndex:"urlCodeInfo",key:"urlCodeInfo",scopedSlots:{customRender:"urlCodeInfo"}},{title:"名称",dataIndex:"name",key:"name",width:"140px",scopedSlots:{customRender:"name"},customRender:function(t){return t||"-"}},{title:"创建时间",dataIndex:"createTime",key:"createTime",scopedSlots:{customRender:"createTime"},customRender:function(t){return t||"-"}},{title:"使用成员",dataIndex:"staffList",key:"staffList",scopedSlots:{customRender:"staffList"}},{title:"备用成员",dataIndex:"backupStaffList",key:"backupStaffList",scopedSlots:{customRender:"backupStaffList"}},{title:"添加好友数",dataIndex:"addUserCount",key:"addUserCount",scopedSlots:{customRender:"addUserCount"}},{title:"标签",dataIndex:"tagList",key:"tagList",scopedSlots:{customRender:"tagList"}},{title:"拉群方式",dataIndex:"typeText",key:"typeText",scopedSlots:{customRender:"typeText"}},{title:"群聊",dataIndex:"codeList",width:"260px",key:"codeList",scopedSlots:{customRender:"codeList"}},{title:"操作",dataIndex:"operation",align:"right",width:"220px",key:"operation",scopedSlots:{customRender:"operation"}}]}},components:{CodeDetail:v,Grouping:G,BatchGroup:K},activated:function(){this.getPageList(),this.speechGroup()},methods:{serviceOk:function(t){var e=this;this.grouploading=!0,this.visible=!1;var n={groupId:t,checkAll:this.checkAll,autoPullIdList:this.checkAll?this.codeIdList:this.selectedRowKeys};Object(y["b"])(n).then((function(t){e.$message.success("批量分组修改成功"),e.checkAll=!1,e.selectedRowKeys=[],e.codeIdList=[],e.speechGroup(),e.getPageList()})).catch((function(t){e.$message.error(t)})).finally((function(){e.grouploading=!1}))},batchGroup:function(){this.selectedRowKeys.length>0?this.visible=!0:this.$message.warning("请选择需要分组的列表")},getSelectedRowKeys:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0&&e.forEach((function(e){t.codeIdList.includes(e)||t.selectedRowKeys.includes(e)||t.selectedRowKeys.push(e)}))},speechGroup:function(){var t=this;Object(y["f"])().then((function(e){t.groupList=[].concat(Object(u["a"])(t.defaultGroupList),Object(u["a"])(e.data))})).catch((function(e){t.$message.error(e)}))},changeSpeechGroupId:function(t){this.groupId="item_0"==t?void 0:t,this.checkAll=!1,this.pagination.current=1,this.selectedRowKeys=[],this.getPageList()},searchName:function(){this.getPageList()},change:function(t){var e=t.current;this.pagination.current=e,this.getPageList()},getPageList:function(){var t=this,e={groupId:this.groupId,currentPage:this.pagination.current,pageSize:this.pagination.pageSize,keywords:this.codeName};this.loading=!0,Object(y["i"])(e).then((function(e){e.data&&(t.checkAll&&t.getSelectedRowKeys(e.data.list.map((function(t){return t.groupId}))),t.channelList=e.data.list.map((function(t){var e=Object(s["a"])(Object(s["a"])({},t),{},{key:t.autoPullId,tagList:t.tagList,typeText:0===t.type?"群二维码拉群":"企微活码拉群",codeList:t.codeList.map((function(e){return e.statusObj=D["h"][e.status],e.type=t.type,e}))});return e.operation=e,e.urlCodeInfo={urlCode:t.urlCode,info:e},e})),t.pagination.total=e.data.total)})).finally((function(){return t.loading=!1}))},deleteGruoup:function(t){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"删除后不可恢复，确定删除吗？",onOk:function(){e.delGroupAutoPull(t)}})},delGroupAutoPull:function(t){var e=this;Object(y["c"])({autoPullId:t}).then((function(){var t;e.$message.success("删除成功"),1===(null===(t=e.channelList)||void 0===t?void 0:t.length)&&(e.pagination.current=e.pagination.current-1||1),e.getPageList()})).catch((function(t){e.$message.error(t)}))},openCodeDetail:function(t){var e=[],n=[];t.staffList.map((function(t){"0"==t.onlineStatus?n.push(t):e.push(t)})),t.onlineList=e,t.upList=n,this.selectData=t,this.visibleCodeTetail=!0},download:function(t){var e=this;Object(d["d"])(t).catch((function(t){e.$message.error(t)}))}},computed:Object(U["c"])({rowSelection:function(){var t=this,e=this;return{selectedRowKeys:this.selectedRowKeys,onChange:function(e,n){t.selectedRowKeys=e},onSelectAll:function(t){e.checkAll=t},onSelect:function(t,n,r){if(e.checkAll)if(n){var o,a=null===(o=e.codeIdList)||void 0===o?void 0:o.findIndex((function(e){return e.autoPullId===t.autoPullId}));e.codeIdList.splice(a,1)}else e.codeIdList.push(t.autoPullId)},text:"选择全部二维码",hideDefaultSelections:!0,selections:[{key:"1",text:"全部",onSelect:function(){e.checkAll=!0,t.selectedRowKeys=e.channelList.map((function(t){return t.autoPullId}))}},{key:"2",text:"当前页面",onSelect:function(){e.checkAll=!1,t.selectedRowKeys=e.channelList.map((function(t){return t.autoPullId}))}}]}}})}),z=M,F=(n("0a51"),Object(h["a"])(z,a,i,!1,null,"3032b6a2",null)),q=F.exports,B={name:"AutoPullGroup",components:{ChannelList:q}},Y=B,W=(n("bd3b"),Object(h["a"])(Y,r,o,!1,null,"7b0cbbd1",null));e["default"]=W.exports},"592d":function(t,e,n){},"5e1e":function(t,e,n){},"6a4d":function(t,e,n){},7517:function(t,e,n){"use strict";n("826e")},"80a2":function(t,e,n){"use strict";n("a12a")},"826e":function(t,e,n){},a12a:function(t,e,n){},b2b8:function(t,e,n){},b9cd:function(t,e,n){"use strict";n.d(e,"l",(function(){return r})),n.d(e,"j",(function(){return o})),n.d(e,"o",(function(){return a})),n.d(e,"n",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"k",(function(){return p})),n.d(e,"i",(function(){return f})),n.d(e,"e",(function(){return h})),n.d(e,"p",(function(){return g})),n.d(e,"c",(function(){return v})),n.d(e,"h",(function(){return m})),n.d(e,"q",(function(){return b})),n.d(e,"m",(function(){return y}));var r="LOSS_STATUS",o="GROUP_STATUS",a="ORDER_WAY",i="ORDER_CONDITION",s="ADD_WAY",u="GENDER",c="CUSTOMER_STATUS",l={0:"待分配",1:"待添加",2:"待通过",3:"已添加",4:"导入中"},d={1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},p=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:1},{text:"已不是好友",color:"#ffd4b6",id:2},{text:"客户接收达上限",color:"#fbe8ae",id:3},{text:"本月消息已经达到上限",color:"",id:4}],f=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:2},{text:"没有群发任务",color:"",id:4}],h={1:"微信",2:"企业微信"},g=[{id:"immediately",value:"立即发送"},{id:"timing",value:"定时发送"}],v={0:"渠道码",1:"区域扫码",2:"自动拉群",3:"一客一码",4:"加好友",5:"通过群码拉群"},m={0:{text:"拉人中",color:"green"},1:{text:"未开始",color:""},2:{text:"已达上限",color:"orange"},3:{text:"已停用",color:"red"}},b={0:{text:"创建失败",color:"green",id:0},1:{text:"待发送",color:"rgba(34,34,34,.85)",id:1},2:{text:"已发送",color:"rgba(34,34,34,.85)",id:2},3:{text:"已取消",color:"rgba(34,34,34,.85)",id:3},4:{text:"提醒发送",color:"#1890ff",id:4}},y=[{text:"文章",id:"0",format:""},{text:"链接",id:"1"},{text:"海报",id:"2",max:2,format:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",tips:"请上传png、jpg格式不超过2M的文件"},{text:"视频",id:"7",max:2e5,format:".MP4",tips:"请上传格式为MP4的视频文件"},{text:"PDF",id:"3",max:20,format:".pdf",icon:"/icons/pdf.png",tips:"请上传PDF格式不超过20M的文件"},{text:"PPT",id:"4",max:20,format:".pptx,.ppt,.pps",icon:"/icons/ppt.svg",tips:"请上传PPT格式不超过20M的文件"},{text:"表格",id:"5",max:20,format:".xlsx,.xls,.csv",icon:"/icons/excel.svg",tips:"请上传csv、xlsx格式不超过20M的文件"},{text:"文档",id:"6",max:20,format:".txt,.doc,.docx",icon:"/icons/word.svg",tips:"请上传doc、txt.docx格式不超过20M的文件"}]},bd3b:function(t,e,n){"use strict";n("6a4d")},c7eb:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("159b"),n("b0c0"),n("131a"),n("fb6a");var r=n("53ca");function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
o=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(j){l=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),s=new I(r||[]);return a(i,"_invoke",{value:L(t,n,s)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=d;var f={};function h(){}function g(){}function v(){}var m={};l(m,s,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(P([])));y&&y!==e&&n.call(y,s)&&(m=y);var _=v.prototype=h.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(a,i,s,u){var c=p(t[a],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Object(r["a"])(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,s,u)}),(function(t){o("throw",t,s,u)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return o("throw",t,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function L(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=p(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function P(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return g.prototype=v,a(_,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:g,configurable:!0}),g.displayName=l(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},x(w.prototype),l(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new w(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(_),l(_,c,"Generator"),l(_,s,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}}}]);