(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a1df76c"],{"46c5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"群发详情"},on:{back:function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"mass-send-detail"},[e("div",{staticClass:"left-content background-white"},[e("div",{staticClass:"title bold-bold"},[t._v("群发详情")]),e("div",{staticClass:"mass-send-detail-box"},[e("div",{staticClass:"detail-item-box"},[e("div",{staticClass:"desc"},[t._v("创建者：")]),e("div",{staticClass:"creator flex-row"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),e("p",{staticClass:"name"},[t._v(t._s(t.detailInfo.creatorName))])],1)]),e("div",{staticClass:"detail-item-box"},[e("div",{staticClass:"desc"},[t._v("创建时间：")]),e("div",{staticClass:"creator flex-row"},[t._v(t._s(t.detailInfo.createTime))])]),e("div",{staticClass:"detail-item-box"},[e("div",{staticClass:"desc"},[t._v("群发类型：")]),e("div",{staticClass:"txt"},[e("p",[t._v(t._s("1"==t.detailInfo.sendType?"立即发送":"定时发送"))])])]),e("div",{staticClass:"detail-item-box"},[e("div",{staticClass:"desc"},[t._v("发送时间：")]),e("div",{staticClass:"txt"},[e("p",[t._v(t._s(t.detailInfo.sendTime||"-"))])])]),e("div",{staticClass:"detail-item-box mass-send-object-box"},[e("div",{staticClass:"desc"},[t._v("群发对象：")]),t._v(" "+t._s(t.detailInfo.sendTarget)+" ")]),e("div",{staticClass:"detail-item-box message1-box"},[e("div",{staticClass:"desc"},[t._v("群发内容：")]),e("div",{staticClass:"message1"},[e("div",{staticClass:"all-text"},[t._v("共[1]条")]),e("p",[t._v(t._s(t.detailInfo.context))])])])])]),e("div",{staticClass:"data-statistics-wrap background-white"},[e("p",{staticClass:"title"},[t._v("数据详情")]),e("div",{staticClass:"data-pane"},[e("div",{staticClass:"data-item"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.sendedStaff))]),t._v(" "),e("span",{staticClass:"desc"},[t._v("已发送群主")])]),e("div",{staticClass:"data-item"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.notSendStaff))]),t._v(" "),e("span",{staticClass:"desc"},[t._v("未发送群主")])]),e("div",{staticClass:"data-item"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.receivedChat))]),t._v(" "),e("span",{staticClass:"desc"},[t._v("已送达群聊")])]),e("div",{staticClass:"data-item"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.notReceivedChat))]),t._v(" "),e("span",{staticClass:"desc"},[t._v("未送达群聊")])])])])]),e("a-tabs",{staticClass:"background-white"},[e("a-tab-pane",{key:"1",attrs:{tab:"客户群接收详情"}},[e("GroupOwenDetail")],1),e("a-tab-pane",{key:"2",attrs:{tab:"群主发送详情"}},[e("CustomerGroupDetail")],1)],1)],1)},n=[],i=a("5530"),o=a("b3d3"),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("header",[e("p",[e("strong",[t._v("共"+t._s(t.pagination.total)+"个群聊")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25 refresh",on:{click:t.refresh}},[e("a-icon",{attrs:{type:"sync"}}),t._v("更新数据")],1),e("span",{staticClass:"now-date"},[t._v("更新于："+t._s(t.nowDate))])],1),e("div",{staticClass:"search"},[e("div",{staticClass:"flex-box"},[e("span",[t._v("搜索群聊:")]),e("a-input-search",{staticClass:"input",attrs:{placeholder:"请输入要搜索群聊",allowClear:""},on:{search:t.onSearchName},model:{value:t.chatName,callback:function(e){t.chatName=e},expression:"chatName"}}),e("span",[t._v("群主:")]),e("UsePerson",{staticClass:"input",attrs:{type:"groupOwnId",source:t.source,placeHolder:"请选择群主账号"},on:{usePersionInfo:t.usePersionInfo},model:{value:t.groupOwnerIds,callback:function(e){t.groupOwnerIds=e},expression:"groupOwnerIds"}}),e("span",[t._v("送达状态:")]),e("a-select",{staticClass:"input",attrs:{placeholder:"请选择消息送达状态",allowClear:""},on:{change:t.changeStatus},model:{value:t.chatReceivedStatus,callback:function(e){t.chatReceivedStatus=e},expression:"chatReceivedStatus"}},t._l(t.sendStatus,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),1)],1),e("a-button",{on:{click:t.refresh}},[t._v("重置")])],1)]),e("a-table",{attrs:{columns:t.columns,"data-source":t.tableList,loading:t.tableLoading,pagination:t.pagination},on:{change:t.changePage},scopedSlots:t._u([{key:"groupInfo",fn:function(a){return e("div",{},[e("a-avatar",{attrs:{src:"/icons/groupChat.png",size:40,shape:"square"}}),t._v(" "+t._s(a.groupName)+" ("+t._s(a.count)+") ")],1)}},{key:"ownerName",fn:function(a){return e("div",{},[e("a-tag",[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(a)+" ")],1)],1)}}])})],1)},c=[],u=(a("d81d"),a("7db0"),a("d3b7"),a("6bd9")),d={name:"GroupOwenDetail",components:{UsePerson:u["a"]},data:function(){return{nowDate:this.$moment().format("YYYY-MM-DD hh:mm"),chatReceivedStatus:void 0,sendStatus:[{text:"群主已发送",value:1},{text:"群主未发送",value:0},{text:"发送失败",value:2}],chatName:"",groupOwnerIds:[],source:{maxLength:1},tableLoading:!1,tableList:[],pagination:{current:1,pageSize:10,total:0},columns:[{title:"群聊名称",dataIndex:"groupInfo",key:"groupInfo",scopedSlots:{customRender:"groupInfo"}},{title:"群主",dataIndex:"ownerName",key:"ownerName",scopedSlots:{customRender:"ownerName"}},{title:"群主所属部门",dataIndex:"deptName",key:"deptName",ellipsis:!0},{title:"消息送达状态",dataIndex:"sendStatus",key:"sendStatus",ellipsis:!0},{title:"群聊创建时间",dataIndex:"wxCreateTime",key:"wxCreateTime",ellipsis:!0}]}},computed:{missionId:function(){return this.$route.query.missionId}},created:function(){this.initPage()},methods:{refresh:function(){this.chatName="",this.groupOwnerIds=[],this.chatReceivedStatus=void 0,this.pagination.current=1,this.initPage()},changeStatus:function(){this.initPage()},onSearchName:function(){this.initPage()},usePersionInfo:function(){this.initPage()},changePage:function(t){var e=t.current;this.pagination.current=e,this.initPage()},initPage:function(){var t=this,e={groupSendId:this.missionId,chatName:this.chatName,chatReceivedStatus:this.chatReceivedStatus,groupOwnerIds:this.groupOwnerIds.map((function(t){return t.source.userid})),currentPage:this.pagination.current,pageSize:this.pagination.pageSize};Object(o["b"])(e).then((function(e){t.pagination.total=e.data.total,t.nowDate=t.$moment().format("YYYY-MM-DD hh:mm"),t.tableList=e.data.list.map((function(e){var a;return Object(i["a"])(Object(i["a"])({},e),{},{groupInfo:e,key:e.groupChatId,operation:e,sendStatus:null===(a=t.sendStatus.find((function(t){return e.sendStatus===t.value})))||void 0===a?void 0:a.text})}))})).catch((function(e){t.$message.error(e)}))}}},l=d,p=(a("5837"),a("2877")),f=Object(p["a"])(l,r,c,!1,null,"00be5c56",null),h=f.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("header",[e("p",[e("strong",[t._v("共"+t._s(t.pagination.total)+"个群聊")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25 refresh",on:{click:t.refresh}},[e("a-icon",{attrs:{type:"sync"}}),t._v("更新数据")],1),e("span",{staticClass:"now-date"},[t._v("更新于："+t._s(t.nowDate))])],1),e("div",{staticClass:"search"},[e("div",{staticClass:"flex-box"},[e("span",[t._v("群主:")]),e("UsePerson",{staticClass:"input",attrs:{type:"groupOwnId",source:t.source,placeHolder:"请选择群主账号"},on:{usePersionInfo:t.usePersionInfo},model:{value:t.groupOwnerIds,callback:function(e){t.groupOwnerIds=e},expression:"groupOwnerIds"}}),e("span",[t._v("群主送达状态:")]),e("a-select",{staticClass:"input",attrs:{placeholder:"请选择群发发送状态",allowClear:""},on:{change:t.changeStatus},model:{value:t.chatReceivedStatus,callback:function(e){t.chatReceivedStatus=e},expression:"chatReceivedStatus"}},t._l(t.sendStatus,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),1)],1),e("a-button",{on:{click:t.refresh}},[t._v("重置")])],1)]),e("a-table",{attrs:{columns:t.columns,"data-source":t.tableList,loading:t.tableLoading,pagination:t.pagination},on:{change:t.changePage},scopedSlots:t._u([{key:"groupInfo",fn:function(a){return e("div",{},[e("a-avatar",{attrs:{src:"/icons/groupChat.png",size:40,shape:"square"}}),t._v(" "+t._s(a.groupName)+" ("+t._s(a.count)+") ")],1)}},{key:"ownerName",fn:function(a){return e("div",{},[e("a-tag",[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(a)+" ")],1)],1)}}])})],1)},g=[],m=(a("a15b"),{name:"CustomerGroupDetail",components:{UsePerson:u["a"]},data:function(){return{nowDate:this.$moment().format("YYYY-MM-DD hh:mm"),chatReceivedStatus:void 0,sendStatus:[{text:"已发送",value:2},{text:"未发送",value:0}],chatName:"",groupOwnerIds:[],source:{maxLength:1},tableLoading:!1,tableList:[],pagination:{current:1,pageSize:10,total:0},columns:[{title:"群主",dataIndex:"ownerName",key:"ownerName",scopedSlots:{customRender:"ownerName"}},{title:"群主所属部门",dataIndex:"deptName",key:"deptName",ellipsis:!0},{title:"群发发送状态",dataIndex:"sendStatus",key:"sendStatus",ellipsis:!0},{title:"本次群发群聊总数",dataIndex:"totalChat",key:"totalChat",ellipsis:!0},{title:"已发送群聊数",dataIndex:"sendedChat",key:"sendedChat",ellipsis:!0},{title:"确认发送时间",dataIndex:"sendTime",key:"sendTime",ellipsis:!0}]}},computed:{missionId:function(){return this.$route.query.missionId}},created:function(){this.initPage()},methods:{refresh:function(){this.chatName="",this.groupOwnerIds=[],this.chatReceivedStatus=void 0,this.pagination.current=1,this.initPage()},changeStatus:function(){this.initPage()},onSearchName:function(){this.initPage()},usePersionInfo:function(){this.initPage()},changePage:function(t){var e=t.current;this.pagination.current=e,this.initPage()},initPage:function(){var t=this,e={groupSendId:this.missionId,sendStatus:this.chatReceivedStatus,staffUserId:this.groupOwnerIds.map((function(t){return t.source.userid})).join(","),currentPage:this.pagination.current,pageSize:this.pagination.pageSize};Object(o["g"])(e).then((function(e){t.pagination.total=e.data.total,t.nowDate=t.$moment().format("YYYY-MM-DD hh:mm"),t.tableList=e.data.list.map((function(e){var a;return Object(i["a"])(Object(i["a"])({},e),{},{groupInfo:e,key:e.groupChatId,operation:e,sendStatus:null===(a=t.sendStatus.find((function(t){return e.sendStatus===t.value})))||void 0===a?void 0:a.text})}))})).catch((function(e){t.$message.error(e)}))}}}),b=m,_=(a("5157"),Object(p["a"])(b,v,g,!1,null,"225f274e",null)),C=_.exports,S={name:"GroupSendDetail",components:{GroupOwenDetail:h,CustomerGroupDetail:C},data:function(){return{context:"",memberVal:"1",searchName:"",customerVal:"1",searchCustomer:"",memberThislist:[],memberPagination:{current:1,pageSize:10,total:0},cusThislist:[],cusPagination:{current:1,pageSize:10,total:0},detailInfo:{}}},computed:{missionId:function(){return this.$route.query.missionId}},created:function(){this.getDetails()},methods:{genderText:function(t){return"0"==t?"全部性别":"1"==t?"男性粉丝":"2"==t?"女性粉丝":"3"==t?"未知":"-"},missionStatus:function(t){return"0"==t?"创建失败":"1"==t?"待发送":"2"==t?"已发送":"3"==t?"已取消":"-"},getDetails:function(){var t=this;Object(o["c"])(this.missionId).then((function(e){t.detailInfo=Object(i["a"])(Object(i["a"])({},e.data),{},{notSendStaff:e.data.totalStaff-e.data.sendedStaff,notReceivedChat:e.data.totalChat-e.data.receivedChat,context:e.data.groupSendContent?JSON.parse(e.data.groupSendContent).text.content:""})})).catch((function(e){t.$message.error(e)}))}}},I=S,x=(a("d73c"),Object(p["a"])(I,s,n,!1,null,"15661988",null));e["default"]=x.exports},5157:function(t,e,a){"use strict";a("6fd1")},5837:function(t,e,a){"use strict";a("968e")},"6bd9":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"use-person"},[e("ul",{staticClass:"a-line-omit",on:{click:function(e){t.visibleUsePerson=!0}}},[t._l(t.usePersionList,(function(a){return e("li",{key:a.key,staticClass:"a-line-omit"},[e("a-tooltip",{attrs:{title:a.title}},[a.icon?e("a-icon",{staticClass:"icon",attrs:{type:a.icon}}):e("a-avatar",{staticClass:"imgs",attrs:{size:23,src:a.source.thumbAvatar||t.defaultThumbAvatar}}),e("span",{staticClass:"title"},[t._v(" "+t._s(a.title)+" ")])],1)],1)})),t.usePersionList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v(t._s(t.placeHolder))]):t._e()],2),t.usePersionList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.usePersionList.length)+"个账号")]):t._e(),e("a-icon",{attrs:{type:"caret-down"}})],1),e("a-modal",{attrs:{footer:null,width:"680px",centered:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",t._b({attrs:{type:t.type,title:t.title,selectList:t.usePersionList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleUsePerson=!1}}},"AddTransfer",t.source,!1))],1)],1)},n=[],i=(a("d81d"),a("1eb1")),o={name:"UsePerson",props:{defaultUsePerson:{type:[Array],default:function(){return[]}},placeHolder:{type:[String],default:""},type:{type:[String],default:""},title:{type:[String],default:"选择成员"},value:{type:[Array],default:function(){return[]}},needControlReturn:{type:Boolean,default:!1},source:{type:Object,default:function(){return{}}}},components:{AddTransfer:i["a"]},data:function(){return{defaultThumbAvatar:a("b5c3"),visibleUsePerson:!1,selectRoleIdList:[],usePersionList:this.value}},watch:{value:function(){this.usePersionList=this.value}},methods:{serviceOk:function(t){var e=this;t.length<1?this.usePersionList=this.defaultUsePerson:this.usePersionList=t,this.usePersionList.map((function(t){t.value=100})),this.needControlReturn||(this.visibleUsePerson=!1),this.$emit("input",this.usePersionList),this.$emit("usePersionInfo",this.usePersionList,(function(){e.visibleUsePerson=!1}))}}},r=o,c=(a("f0b2"),a("2877")),u=Object(c["a"])(r,s,n,!1,null,"de146f5e",null);e["a"]=u.exports},"6fd1":function(t,e,a){},8042:function(t,e,a){},"968e":function(t,e,a){},b3d3:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"g",(function(){return l}));var s=a("b775"),n={groupSendList:"/client_group/groupsend/list",groupSendSave:"/client_group/groupsend/save",groupSendInfo:"/client_group/groupsend/info/",groupSendNotify:"/client_group/groupsend/notify",groupSendCancel:"/client_group/groupsend/cancel",groupSendChat:"/client_group/groupsend/chat",groupSendStaff:"/client_group/groupsend/staff"};function i(t){return Object(s["b"])({url:n.groupSendList,method:"post",data:t})}function o(t){return Object(s["b"])({url:n.groupSendSave,method:"post",data:t})}function r(t){return Object(s["b"])({url:n.groupSendInfo+t,method:"get"})}function c(t){return Object(s["b"])({url:n.groupSendCancel,method:"post",data:t})}function u(t){return Object(s["b"])({url:n.groupSendNotify,method:"post",data:t})}function d(t){return Object(s["b"])({url:n.groupSendChat,method:"post",data:t})}function l(t){return Object(s["b"])({url:n.groupSendStaff,method:"post",data:t})}},b4f0:function(t,e,a){},b5c3:function(t,e,a){t.exports=a.p+"assets/default.c42b7ede.svg"},d73c:function(t,e,a){"use strict";a("8042")},f0b2:function(t,e,a){"use strict";a("b4f0")}}]);