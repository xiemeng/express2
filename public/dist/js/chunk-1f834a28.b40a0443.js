(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f834a28"],{"02ff":function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{title:"权限设置",destroyOnClose:""},on:{ok:t.ok,cancel:t.cancel},model:{value:t.visiblePurviewSetting,callback:function(e){t.visiblePurviewSetting=e},expression:"visiblePurviewSetting"}},[e("a-form",{attrs:{layout:"inline"}},[e("a-form-item",{attrs:{label:"设置角色:"}},[e("a-select",{staticStyle:{width:"200px"},model:{value:t.selectRole,callback:function(e){t.selectRole=e},expression:"selectRole"}},t._l(t.roles,(function(n){return e("a-select-option",{key:n.roleId,attrs:{value:n.roleId}},[t._v(" "+t._s(n.roleName)+" ")])})),1)],1)],1),e("div",[t.findSelectRoles&&t.findSelectRoles.desc?e("div",{staticClass:"font-color-black-25"},[t._v(t._s(t.findSelectRoles.desc))]):t._e(),t.findSelectRoles&&t.findSelectRoles.children?e("div",{staticClass:"department-box"},[e("a-tree",{attrs:{checkable:"","auto-expand-parent":t.autoExpandParent,"tree-data":t.treeData},model:{value:t.checkedKeys,callback:function(e){t.checkedKeys=e},expression:"checkedKeys"}},[e("a-icon",{staticClass:"primaryColor",attrs:{slot:"switcherIcon",type:"caret-down"},slot:"switcherIcon"})],1)],1):t._e()])],1)},a=[],i=(n("7db0"),n("d3b7"),n("d81d"),n("a15b"),n("1c9c")),o={name:"PurviewSetting",props:["value","roles","selectRoleId","staffId","roleName"],data:function(){return{visiblePurviewSetting:!1,selectRole:"",autoExpandParent:!0,checkedKeys:[]}},computed:{findSelectRoles:function(){var t,e=this;return null===(t=this.roles)||void 0===t?void 0:t.find((function(t){return t.roleId===e.selectRole}))},treeData:function(){var t,e,n=[];return(null===(t=this.findSelectRoles)||void 0===t||null===(e=t.children)||void 0===e?void 0:e.length)>0&&(n=this.getTreeData(this.findSelectRoles.children)),n}},watch:{value:function(){this.visiblePurviewSetting=this.value},selectRoleId:{handler:function(){this.selectRole=this.selectRoleId},immediate:!0},roleName:{handler:function(){var t,e,n=this;this.selectRole=null===(t=this.roles)||void 0===t||null===(e=t.find((function(t){return t.roleName===n.roleName})))||void 0===e?void 0:e.roleId},immediate:!0}},created:function(){},methods:{getTreeData:function(t){var e=this;if((null===t||void 0===t?void 0:t.length)>0){var n=t.map((function(t){var n={title:t.roleName,key:t.roleId,slots:{icon:"smile"},children:void 0};return t.children&&(n.children=e.getTreeData(t.children)),n}));return n}},cancel:function(){this.visiblePurviewSetting=!1,this.$emit("input",this.visiblePurviewSetting)},ok:function(){var t=this;this.visiblePurviewSetting=!1,this.$emit("input",this.visiblePurviewSetting);var e=this.getParams();Object(i["c"])(e).then((function(e){t.$message.success("切换角色成功"),t.$emit("changeRoleId",t.selectRole)})).catch((function(e){t.$message.error(e||e.message)}))},getParams:function(){var t=this.selectRole;return this.findSelectRoles.children&&(t=this.checkedKeys.join(",")),{staffId:this.staffId,roleIds:t}}}},s=o,c=(n("631c"),n("2877")),u=Object(c["a"])(s,r,a,!1,null,"13883349",null);e["a"]=u.exports},"0566":function(t,e,n){},"1c9c":function(t,e,n){"use strict";n.d(e,"s",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"t",(function(){return s})),n.d(e,"j",(function(){return c})),n.d(e,"n",(function(){return u})),n.d(e,"y",(function(){return l})),n.d(e,"w",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"B",(function(){return m})),n.d(e,"c",(function(){return h})),n.d(e,"h",(function(){return p})),n.d(e,"a",(function(){return g})),n.d(e,"q",(function(){return v})),n.d(e,"i",(function(){return b})),n.d(e,"v",(function(){return y})),n.d(e,"p",(function(){return x})),n.d(e,"b",(function(){return O})),n.d(e,"l",(function(){return C})),n.d(e,"m",(function(){return _})),n.d(e,"z",(function(){return S})),n.d(e,"C",(function(){return I})),n.d(e,"k",(function(){return w})),n.d(e,"A",(function(){return L})),n.d(e,"x",(function(){return R})),n.d(e,"r",(function(){return j})),n.d(e,"o",(function(){return k})),n.d(e,"d",(function(){return P})),n.d(e,"f",(function(){return T})),n.d(e,"u",(function(){return D}));var r=n("b775"),a={staff:"/enterprise/role/staff",roleList:"/enterprise/role",roleResource:"/enterprise/role/getRoleResource",syncAll:"/enterprise/staff/syncAll",getCustGrpList:"/client_group/customerGroup/getCustGrpList",changeRole:"/enterprise/role/change",departmentStaff:"/enterprise/department/staff",addStaffRole:"/enterprise/role/addStaffRole",getQuitStaff:"/client_manager/transfer/getQuitStaff",getStaff:"/enterprise/staff/get",department:"/enterprise/department",getDepartmentStaff:"/enterprise/department/getStaff",loginAdmin:"/enterprise/staff/loginAdmin",getRoleRes:"/enterprise/role/getRoleRes",changeRes:"/enterprise/role/change/res",getPermissionLog:"/enterprise/permissionLog/query",staffInfo:"/enterprise/staff/statistics/get/staffInfo",yesterdayData:"/enterprise/staff/statistics/get/yesterdayData",getDate:"/enterprise/staff/statistics/get/date",editDelConfig:"/client_manager/customerdelremind/editDelConfig",queryDelConfig:"/client_manager/customerdelremind/queryDelConfig",customStage:"/enterprise/staff/statistics/get/stage",idOrUserIdGet:"/enterprise/staff/idOrUserIdGet",staffOKR:"/enterprise/staffOKR/staffOKR",saveOKR:"/enterprise/staffOKR/save",getStaffOKRList:"/enterprise/staffOKR/getStaffOKRList",getRepeatList:"/enterprise/staffOKR/getRepeatList",checkTime:"enterprise/staffOKR/checkTime",delOkr:"/enterprise/staffOKR/del",modify:"/enterprise/staffOKR/modify"};function i(t){return Object(r["b"])({url:a.idOrUserIdGet,method:"get",params:t})}function o(t){return Object(r["b"])({url:a.customStage,method:"get",params:t})}function s(t){return Object(r["b"])({url:a.loginAdmin,method:"get",params:t})}function c(t){return Object(r["b"])({url:a.getCustGrpList,method:"post",data:t})}function u(t){return Object(r["b"])({url:a.getQuitStaff,method:"get",params:t})}function l(t){return Object(r["b"])({url:a.staff,method:"get",params:t})}function d(){return Object(r["b"])({url:a.roleList,method:"get"})}function f(){return Object(r["b"])({url:a.department,method:"get"})}function m(){return Object(r["b"])({url:a.syncAll,method:"get"})}function h(t){return Object(r["b"])({url:a.changeRole,method:"get",params:t})}function p(){return Object(r["b"])({url:a.departmentStaff,method:"get"})}function g(t){return Object(r["b"])({url:a.addStaffRole,method:"post",data:t})}function v(t){return Object(r["b"])({url:a.getStaff,method:"get",params:t})}function b(t){return Object(r["b"])({url:a.editDelConfig,method:"post",data:t})}function y(t){return Object(r["b"])({url:a.queryDelConfig,method:"post",data:t})}function x(t){return Object(r["b"])({url:a.getRoleRes,method:"get",params:t})}function O(t){return Object(r["b"])({url:a.changeRes,method:"post",data:t})}function C(t){return Object(r["b"])({url:a.getDepartmentStaff,method:"get",params:t})}function _(t){return Object(r["b"])({url:a.getPermissionLog,method:"post",data:t})}function S(t){return Object(r["b"])({url:a.staffInfo,method:"get",params:t})}function I(t){return Object(r["b"])({url:a.yesterdayData,method:"get",params:t})}function w(t){return Object(r["b"])({url:a.getDate,method:"get",params:t})}function L(t){return Object(r["b"])({url:a.staffOKR,method:"get",params:t})}function R(t){return Object(r["b"])({url:a.saveOKR,method:"post",data:t})}function j(t){return Object(r["b"])({url:a.getStaffOKRList,method:"get",params:t})}function k(t){return Object(r["b"])({url:a.getRepeatList,method:"get",params:t})}function P(t){return Object(r["b"])({url:a.checkTime,method:"get",params:t})}function T(t){return Object(r["b"])({url:a.delOkr,method:"post",data:t})}function D(t){return Object(r["b"])({url:a.modify,method:"post",data:t})}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("d3b7");function r(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,c,"next",t)}function c(t){r(o,a,i,s,c,"throw",t)}s(void 0)}))}}},"220e":function(t,e,n){},"57ea":function(t,e,n){},6167:function(t,e,n){},"631c":function(t,e,n){"use strict";n("6167")},"806c":function(t,e,n){"use strict";n("ff59")},9026:function(t,e,n){"use strict";n("b19e")},9432:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"member-detail"},[e("a-page-header",{staticClass:"page-header",attrs:{title:"成员详情"},on:{back:function(e){return t.$router.go(-1)}}}),e("BaseInfo",{attrs:{baseInfo:t.baseInfo,roleList:t.roleList},on:{changeRoleId:t.getStaffInfo}}),e("LiaisonCustomerCtatistics",{attrs:{info:t.info}}),e("TendencyChart",{attrs:{info:t.info}}),e("CustomerDetails")],1)},a=[],i=(n("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"base-info"},[e("div",{staticClass:"base-info-name background-white"},[e("a-avatar",{staticClass:"avatar",attrs:{shape:"square",size:64,src:t.baseInfo.avatar}}),e("div",{staticClass:"flex-col-around"},[e("p",[e("span",[t._v(t._s(t.baseInfo.name))]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticClass:"font-color-black-25"},[t._v("别名："+t._s(t.baseInfo.alias))])],1),e("p",[e("a-tag",[t._v(t._s(t.baseInfo.roleName))]),e("a-button",{attrs:{size:"small"},on:{click:function(e){return t.setRole(t.baseInfo)}}},[t._v("管理权限")])],1)])],1),e("ul",{staticClass:"base-info-client background-white flex-box"},[e("li",{staticClass:"flex1"},[e("p",[t._v("客户总数")]),e("p",[e("span",{staticClass:"nums"},[t._v(t._s(t.baseInfo.customerTotal))]),e("small",[t._v("人")])])]),e("a-divider",{staticStyle:{height:"100%"},attrs:{type:"vertical"}}),e("li",{staticClass:"flex1"},[e("p",[t._v("今日新增")]),e("p",[e("span",{staticClass:"nums"},[t._v(t._s(t.baseInfo.todayCustomerIncrease))]),e("small",[t._v("人")])])])],1),e("PurviewSetting",{attrs:{roles:t.roleList,staffId:t.staffId,roleName:t.roleName,selectRoleId:t.selectRoleId},on:{changeRoleId:function(e){return t.$emit("changeRoleId")}},model:{value:t.visiblePurviewSetting,callback:function(e){t.visiblePurviewSetting=e},expression:"visiblePurviewSetting"}})],1)}),o=[],s=n("02ff"),c={name:"BaseInfo",components:{PurviewSetting:s["a"]},props:{baseInfo:{type:Object,default:function(){return{}}},roleList:{type:Array,default:function(){return[]}}},data:function(){return{selectRoleId:"",visiblePurviewSetting:!1,staffId:"",roleName:""}},methods:{setRole:function(t){this.visiblePurviewSetting=!0,this.staffId=t.staffId,this.roleName=t.roleName||""}}},u=c,l=(n("c037d"),n("2877")),d=Object(l["a"])(u,i,o,!1,null,"78d353f6",null),f=d.exports,m=function(){var t=this,e=t._self._c;return e("div",[e("a-tabs",{staticClass:"background-white liaison-customer-ctatistics"},[e("a-tab-pane",{key:"1",attrs:{tab:"联系客户统计"}},[e("div",{staticClass:"flex-box news-summary-wrap"},[e("ul",{staticClass:"flex-box news-summary"},[e("li",{staticClass:"list"},[e("p",[t._v("昨日聊天总数")]),e("p",[e("span",{staticClass:"nums"},[t._v(t._s(t.info.chatCnt||0))]),e("small",[t._v("条")])])]),e("a-divider",{staticStyle:{height:"100%"},attrs:{type:"vertical"}}),e("li",{staticClass:"list"},[e("p",[t._v("昨日发送消息数")]),e("p",[e("span",{staticClass:"nums"},[t._v(t._s(t.info.messageCnt||0))]),e("small",[t._v("条")])])]),e("a-divider",{staticStyle:{height:"100%"},attrs:{type:"vertical"}}),e("li",{staticClass:"list"},[e("p",[t._v("昨日回复聊天占比")]),e("p",{staticClass:"nums"},[e("span",[t._v(t._s(t.info.replyPercentage||0))]),e("small",[t._v("%")])])]),e("a-divider",{staticStyle:{height:"100%"},attrs:{type:"vertical"}}),e("li",{staticClass:"list"},[e("p",[t._v("昨日平均首次回复时长")]),e("p",[e("span",{staticClass:"nums"},[t._v(t._s(t.info.negativeFeedbackCnt||0))]),e("small",[t._v("min")])])])],1),e("div",[e("a-tooltip",[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",[t._v("1、聊天总数：成员有主动发送过消息的单聊总数")]),e("p",[t._v("2、发送消息数：成员在单聊中发送的消息总数")]),e("p",[t._v(" 3、已回复聊天占比：客户主动发起聊天后，成员在一个自然日内有回复过消息的聊天数/客户主动发起的聊天数比例 ")]),e("p",[t._v("4、平均首次回复时长：客户主动发起聊天后，成员在一个自然日内首次回复的时长间隔为首次回复时长")])]),e("a-icon",{attrs:{type:"question-circle"}})],1),t._v(" 统计说明 ")],1)])])],1)],1)},h=[],p={name:"LiaisonCustomerCtatistics",created:function(){},props:{info:{type:Object,default:function(){return{}}}},computed:{userId:function(){return this.$route.query.id}},methods:{}},g=p,v=(n("9026"),Object(l["a"])(g,m,h,!1,null,"17561ea8",null)),b=v.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tendency-chart background-white"},[e("h4",[t._v("趋势图")]),e("a-radio-group",{staticClass:"changeRadio",attrs:{size:"default","button-style":"solid"},on:{change:t.changeGroup},model:{value:t.tabPosition,callback:function(e){t.tabPosition=e},expression:"tabPosition"}},t._l(t.customerStatus,(function(n){return e("a-radio-button",{key:n.value,attrs:{value:n.value}},[t._v(" "+t._s(n.text)+" ")])})),1),e("div",{staticClass:"select-date"},[e("div",[e("a-select",{staticStyle:{width:"100px","margin-right":"10px"},on:{change:t.changePeriodTime},model:{value:t.timeSpace,callback:function(e){t.timeSpace=e},expression:"timeSpace"}},t._l(t.periodTime,(function(n){return e("a-select-option",{key:n.id,attrs:{value:n.id}},[t._v(" "+t._s(n.text)+" ")])})),1),t._v(" 自定义: "),e("a-range-picker",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{disabledDate:t.disabledDate},on:{change:t.changeDate},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),e("a-button",{on:{click:t.result}},[t._v("重置")])],1),e("div",{staticClass:"echarts",attrs:{id:t.chatId}}),e("div",{staticClass:"space-gray"}),e("a-table",{attrs:{columns:t.columns,"data-source":t.dataList,bordered:"",pagination:!1}})],1)},x=[],O=n("ade3"),C=(n("d3b7"),n("d81d"),n("7db0"),n("313e")),_=n("4cb5"),S=n("9394"),I=n("2da7"),w=n("4b2a"),L=n("f95e"),R=n("1c9c"),j=n("c1df"),k=n.n(j);C["b"]([S["a"],I["a"],w["a"],_["a"],L["a"]]);var P={name:"TendencyChart",components:{},props:{chatId:{type:String,default:"echart"}},data:function(){return{tabPosition:"chatCnt",startOrEndTime:void 0,customerStatus:[{value:"chatCnt",text:"聊天总数",name:"条数"},{value:"messageCnt",text:"发送消息数",name:"条数"},{value:"replyPercentage",text:"已回复聊天占比",name:"百分比"},{value:"avgReplyTime",text:"平均首次回复时长",name:"分钟"}],periodTime:[{text:"昨日",id:1},{text:"近一周",id:7},{text:"近一个月",id:30}],timeSpace:7,columns:[{title:"日期",dataIndex:"statTime",key:"statTime",sorter:function(t,e){return k()(e.statTime)-k()(t.statTime)}},{title:"聊天总数",dataIndex:"chatCnt",key:"chatCnt",sorter:function(t,e){return e.chatCnt-t.chatCnt}},{title:"发送消息数",dataIndex:"messageCnt",key:"messageCnt",sorter:function(t,e){return e.messageCnt-t.messageCnt}},{title:"已回复聊天占比",dataIndex:"replyPercentage",key:"replyPercentage",sorter:function(t,e){return e.replyPercentage-t.replyPercentage},customRender:function(t){return"".concat(t,"%")}},{title:"平均回复时长",dataIndex:"avgReplyTime",key:"avgReplyTime",sorter:function(t,e){return e.avgReplyTime-t.avgReplyTime},customRender:function(t){return"".concat(t,"分钟")}}],myChart:"",dataList:[]}},computed:{userId:function(){return this.$route.query.id}},mounted:function(){this.changePeriodTime(this.timeSpace),this.myChart=C["a"](document.getElementById(this.chatId))},methods:{changeDate:function(t){t.length>0&&this.getDate()},disabledDate:function(t){return t&&t>this.$moment().subtract("day")},result:function(){this.timeSpace=7,this.startOrEndTime=void 0,this.searchName="",this.tabPosition="chatCnt",this.changePeriodTime(this.timeSpace)},changeGroup:function(t){this.renderContainer()},changePeriodTime:function(t){this.startOrEndTime=1===t?[this.$moment().subtract(t,"days"),this.$moment().subtract(t,"days")]:[this.$moment().subtract(t-1,"days"),this.$moment()],this.getDate()},getDate:function(){var t,e,n,r,a=this;this.loading=!0;var i={userId:this.userId,dateFrom:(null===(t=this.startOrEndTime)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.format("YYYY-MM-DD"))+" 00:00:00",dateTo:(null===(n=this.startOrEndTime)||void 0===n||null===(r=n[1])||void 0===r?void 0:r.format("YYYY-MM-DD"))+" 23:59:59"};Object(R["k"])(i).then((function(t){var e;a.dataList=(null===(e=t.data)||void 0===e?void 0:e.map((function(t,e){return t.key=e,t.statTime=a.$moment(t.statTime).format("YYYY-MM-DD"),t})))||[],a.renderContainer()})).catch((function(t){a.$message.error(t)})).finally((function(){a.loading=!1}))},onChange:function(){},renderContainer:function(){var t,e=this,n=this.customerStatus.find((function(t){return t.value===e.tabPosition})).text,r=this.customerStatus.find((function(t){return t.value===e.tabPosition})).name;this.myChart.setOption((t={tooltip:{},xAxis:{data:this.dataList.map((function(t){return t.statTime}))}},Object(O["a"])(t,"tooltip",{trigger:"axis"}),Object(O["a"])(t,"yAxis",{name:r,minInterval:1}),Object(O["a"])(t,"grid",{left:"30px",right:"5%",bottom:"30px"}),Object(O["a"])(t,"series",[{name:n,type:"line",data:this.dataList.map((function(t){return t[e.tabPosition]}))}]),t))}}},T=P,D=(n("e9ac"),Object(l["a"])(T,y,x,!1,null,"2a159a5b",null)),N=D.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"CustomerDetails-bottom"},[e("div",{staticClass:"CustomerDetails background-white"},[e("h4",[t._v("客户阶段管理数据")]),e("div",{staticClass:"total"},[t._v("总人数："+t._s(t.totalNumber)+"人")]),e("div",{staticClass:"echarts",attrs:{id:t.chatId}})]),e("div",{staticClass:"CustomerDetails background-white"},[e("h3",[t._v("客户列表")]),e("div",{staticClass:"num"},[t._v("共"+t._s(t.pagination.total)+"个客户")]),e("a-table",{staticClass:"background-white",attrs:{columns:t.columns,"data-source":t.clientList,pagination:t.pagination,loading:t.loading},on:{change:t.changePage},scopedSlots:t._u([{key:"info",fn:function(n){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:n.avatar}}),e("div",[t._v(" "+t._s(n.name)+" ")])],1)}},{key:"tagNameList",fn:function(n){return e("div",{staticClass:"tag-name-list"},[n.length>0&&Array.isArray(n)?e("div",{class:[{mheight:n.length>=4}]},t._l(n,(function(n,r){return e("a-tag",{key:r,staticClass:"max-wd ant-tag"},[t._v(" "+t._s(n)+" ")])})),1):e("div",[t._v("-")]),n.length>=4&&Array.isArray(n)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"operation",fn:function(n){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"CustomerDetail",query:{customerId:n.customerId,staffId:n.staffId}})}}},[t._v("详情")])],1)}}])})],1)])},A=[],$=n("c7eb"),K=n("1da1"),G=n("b9cd"),M=n("e88b");C["b"]([S["a"],I["a"],w["a"],_["a"],L["a"]]);var Y={props:{chatId:{type:String,default:"echartCustomer"}},data:function(){return{myChart:"",columns:[{title:"全部客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{title:"标签",dataIndex:"tagNameList",scopedSlots:{customRender:"tagNameList"},width:"230px",key:"tagNameList"},{title:"添加时间",dataIndex:"addTime",key:"addTime"},{title:"添加渠道",dataIndex:"addWayName",key:"addWayName",scopedSlots:{customRender:"addWayName"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],manageList:[],clientList:[],loading:!1,pagination:{current:1,pageSize:10,total:0},totalNumber:0}},created:function(){this.userId=this.$route.query.id,this.getCustomerList()},mounted:function(){var t=this;return Object(K["a"])(Object($["a"])().mark((function e(){return Object($["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.myChart=C["a"](document.getElementById(t.chatId)),e.next=3,t.getCustomStage();case 3:return e.next=5,t.renderContainer();case 5:case"end":return e.stop()}}),e)})))()},methods:{changePage:function(t){var e=t.current;this.pagination.current=e,this.getCustomerList()},getParams:function(){var t=this.userId,e={staffId:t,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};return e},getCustomerList:function(){var t=this;this.tableLoading=!0;var e=this.getParams();return Object(M["b"])(e).then((function(e){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.list&&(t.pagination.total=e.data.total,t.repetition=!1,t.clientList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},disposeClientList:function(t){var e=this;return t.map((function(t){return null!==t&&void 0!==t&&t.tagNames?t.tagNameList=t.tagNames.split(","):t.tagNameList=[],t.addWay=G["c"][t.addWay],t.info={nickName:t.nickName,name:t.name,avatar:t.avatar,type:t.type,typeText:1===t.type?"微信":t.corpName,lossStatus:1===t.lossStatus?"已流失":""},e.manageList.map((function(e){e.stageId==t.status&&(t.statusName=e.stageName)})),t.key=t.id,Object.assign({operation:t},t)}))},getCustomStage:function(){var t=this,e=this.userId;return Object(R["e"])({userId:e}).then((function(e){null!==e&&void 0!==e&&e.data&&(t.manageList=e.data,e.data.map((function(e){t.totalNumber+=e.num})))})).catch((function(e){t.$message.error(e)}))},renderContainer:function(){var t;return this.myChart.setOption((t={color:"#1890ff",tooltip:{},xAxis:{data:this.manageList.map((function(t){return t.stageName}))}},Object(O["a"])(t,"tooltip",{trigger:"axis"}),Object(O["a"])(t,"yAxis",{type:"value"}),Object(O["a"])(t,"grid",{left:"30px",right:"5%",bottom:"30px"}),Object(O["a"])(t,"series",[{data:this.manageList.map((function(t){return t.num})),type:"bar",barWidth:60,backgroundStyle:{color:"rgb(180, 180, 180)"}}]),t))},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))}}},q=Y,F=(n("a586"),Object(l["a"])(q,E,A,!1,null,"4f7f55aa",null)),z=F.exports,W={name:"MemberDetail",components:{BaseInfo:f,LiaisonCustomerCtatistics:b,TendencyChart:N,CustomerDetails:z},data:function(){return{baseInfo:{},roleList:[],info:{}}},computed:{userId:function(){return this.$route.query.id}},created:function(){this.getRoleList(),this.getStaffInfo(),this.yesterdayData()},methods:{getStaffInfo:function(){var t=this;Object(R["z"])({userId:this.userId}).then((function(e){t.baseInfo=e.data})).catch((function(e){t.$message.success(e)}))},getRoleList:function(){var t=this;Object(R["w"])().then((function(e){t.roleList=(null===e||void 0===e?void 0:e.data)||[]}))},yesterdayData:function(){var t=this;Object(R["C"])({userId:this.userId}).then((function(e){t.info=e.data||{}})).catch((function(e){t.$message.error(e)}))}}},U=W,B=(n("806c"),Object(l["a"])(U,r,a,!1,null,"7932bc8f",null));e["default"]=B.exports},a586:function(t,e,n){"use strict";n("220e")},b19e:function(t,e,n){},b9cd:function(t,e,n){"use strict";n.d(e,"l",(function(){return r})),n.d(e,"j",(function(){return a})),n.d(e,"o",(function(){return i})),n.d(e,"n",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"i",(function(){return m})),n.d(e,"e",(function(){return h})),n.d(e,"p",(function(){return p})),n.d(e,"c",(function(){return g})),n.d(e,"h",(function(){return v})),n.d(e,"q",(function(){return b})),n.d(e,"m",(function(){return y}));var r="LOSS_STATUS",a="GROUP_STATUS",i="ORDER_WAY",o="ORDER_CONDITION",s="ADD_WAY",c="GENDER",u="CUSTOMER_STATUS",l={0:"待分配",1:"待添加",2:"待通过",3:"已添加",4:"导入中"},d={1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},f=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:1},{text:"已不是好友",color:"#ffd4b6",id:2},{text:"客户接收达上限",color:"#fbe8ae",id:3},{text:"本月消息已经达到上限",color:"",id:4}],m=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:2},{text:"没有群发任务",color:"",id:4}],h={1:"微信",2:"企业微信"},p=[{id:"immediately",value:"立即发送"},{id:"timing",value:"定时发送"}],g={0:"渠道码",1:"区域扫码",2:"自动拉群",3:"一客一码",4:"加好友",5:"通过群码拉群"},v={0:{text:"拉人中",color:"green"},1:{text:"未开始",color:""},2:{text:"已达上限",color:"orange"},3:{text:"已停用",color:"red"}},b={0:{text:"创建失败",color:"green",id:0},1:{text:"待发送",color:"rgba(34,34,34,.85)",id:1},2:{text:"已发送",color:"rgba(34,34,34,.85)",id:2},3:{text:"已取消",color:"rgba(34,34,34,.85)",id:3},4:{text:"提醒发送",color:"#1890ff",id:4}},y=[{text:"文章",id:"0",format:""},{text:"链接",id:"1"},{text:"海报",id:"2",max:2,format:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",tips:"请上传png、jpg格式不超过2M的文件"},{text:"视频",id:"7",max:2e5,format:".MP4",tips:"请上传格式为MP4的视频文件"},{text:"PDF",id:"3",max:20,format:".pdf",icon:"/icons/pdf.png",tips:"请上传PDF格式不超过20M的文件"},{text:"PPT",id:"4",max:20,format:".pptx,.ppt,.pps",icon:"/icons/ppt.svg",tips:"请上传PPT格式不超过20M的文件"},{text:"表格",id:"5",max:20,format:".xlsx,.xls,.csv",icon:"/icons/excel.svg",tips:"请上传csv、xlsx格式不超过20M的文件"},{text:"文档",id:"6",max:20,format:".txt,.doc,.docx",icon:"/icons/word.svg",tips:"请上传doc、txt.docx格式不超过20M的文件"}]},c037d:function(t,e,n){"use strict";n("0566")},c7eb:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("159b"),n("b0c0"),n("131a"),n("fb6a");var r=n("53ca");function a(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(k){l=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var a=e&&e.prototype instanceof h?e:h,o=Object.create(a.prototype),s=new L(r||[]);return i(o,"_invoke",{value:_(t,n,s)}),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}t.wrap=d;var m={};function h(){}function p(){}function g(){}var v={};l(v,s,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(R([])));y&&y!==e&&n.call(y,s)&&(v=y);var x=g.prototype=h.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function a(i,o,s,c){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==Object(r["a"])(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){a("next",t,s,c)}),(function(t){a("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return a("throw",t,s,c)}))}c(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){a(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return j()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(r,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,m;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,m):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=g,i(x,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:p,configurable:!0}),p.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},O(C.prototype),l(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new C(d(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(x),l(x,u,"Generator"),l(x,s,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:R(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},t}},e88b:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"h",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"e",(function(){return f}));var r=n("b775"),a={getCustomerList:"/client_manager/client/getCustomerList",setCustomerStage:"/client_manager/client/setCustomerStage",save:"/client_transformation/customerstage/save",update:"/client_transformation/customerstage/update",list:"/client_transformation/customerstage/list",delete:"/client_transformation/customerstage/delete",order:"/client_transformation/customerstage/change/order",getAdmins:"/enterprise/staff/getAdmins"};function i(t){return Object(r["b"])({url:a.getAdmins,method:"get",params:t})}function o(t){return Object(r["b"])({url:a.getCustomerList,method:"get",params:t})}function s(t){return Object(r["b"])({url:a.setCustomerStage,method:"post",data:t})}function c(t){return Object(r["b"])({url:a.save,method:"post",data:t})}function u(t){return Object(r["b"])({url:a.update,method:"post",data:t})}function l(t){return Object(r["b"])({url:a.list,method:"post",data:t})}function d(t){return Object(r["b"])({url:a.delete,method:"post",data:t})}function f(t){return Object(r["b"])({url:a.order,method:"post",params:t})}},e9ac:function(t,e,n){"use strict";n("57ea")},ff59:function(t,e,n){}}]);