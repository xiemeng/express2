(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-713653f4"],{"1c9c":function(t,e,n){"use strict";n.d(e,"s",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"t",(function(){return o})),n.d(e,"j",(function(){return u})),n.d(e,"n",(function(){return c})),n.d(e,"y",(function(){return l})),n.d(e,"w",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"B",(function(){return m})),n.d(e,"c",(function(){return p})),n.d(e,"h",(function(){return h})),n.d(e,"a",(function(){return g})),n.d(e,"q",(function(){return b})),n.d(e,"i",(function(){return v})),n.d(e,"v",(function(){return y})),n.d(e,"p",(function(){return O})),n.d(e,"b",(function(){return S})),n.d(e,"l",(function(){return C})),n.d(e,"m",(function(){return w})),n.d(e,"z",(function(){return _})),n.d(e,"C",(function(){return T})),n.d(e,"k",(function(){return k})),n.d(e,"A",(function(){return x})),n.d(e,"x",(function(){return N})),n.d(e,"r",(function(){return R})),n.d(e,"o",(function(){return j})),n.d(e,"d",(function(){return L})),n.d(e,"f",(function(){return D})),n.d(e,"u",(function(){return I}));var a=n("b775"),r={staff:"/enterprise/role/staff",roleList:"/enterprise/role",roleResource:"/enterprise/role/getRoleResource",syncAll:"/enterprise/staff/syncAll",getCustGrpList:"/client_group/customerGroup/getCustGrpList",changeRole:"/enterprise/role/change",departmentStaff:"/enterprise/department/staff",addStaffRole:"/enterprise/role/addStaffRole",getQuitStaff:"/client_manager/transfer/getQuitStaff",getStaff:"/enterprise/staff/get",department:"/enterprise/department",getDepartmentStaff:"/enterprise/department/getStaff",loginAdmin:"/enterprise/staff/loginAdmin",getRoleRes:"/enterprise/role/getRoleRes",changeRes:"/enterprise/role/change/res",getPermissionLog:"/enterprise/permissionLog/query",staffInfo:"/enterprise/staff/statistics/get/staffInfo",yesterdayData:"/enterprise/staff/statistics/get/yesterdayData",getDate:"/enterprise/staff/statistics/get/date",editDelConfig:"/client_manager/customerdelremind/editDelConfig",queryDelConfig:"/client_manager/customerdelremind/queryDelConfig",customStage:"/enterprise/staff/statistics/get/stage",idOrUserIdGet:"/enterprise/staff/idOrUserIdGet",staffOKR:"/enterprise/staffOKR/staffOKR",saveOKR:"/enterprise/staffOKR/save",getStaffOKRList:"/enterprise/staffOKR/getStaffOKRList",getRepeatList:"/enterprise/staffOKR/getRepeatList",checkTime:"enterprise/staffOKR/checkTime",delOkr:"/enterprise/staffOKR/del",modify:"/enterprise/staffOKR/modify"};function i(t){return Object(a["b"])({url:r.idOrUserIdGet,method:"get",params:t})}function s(t){return Object(a["b"])({url:r.customStage,method:"get",params:t})}function o(t){return Object(a["b"])({url:r.loginAdmin,method:"get",params:t})}function u(t){return Object(a["b"])({url:r.getCustGrpList,method:"post",data:t})}function c(t){return Object(a["b"])({url:r.getQuitStaff,method:"get",params:t})}function l(t){return Object(a["b"])({url:r.staff,method:"get",params:t})}function d(){return Object(a["b"])({url:r.roleList,method:"get"})}function f(){return Object(a["b"])({url:r.department,method:"get"})}function m(){return Object(a["b"])({url:r.syncAll,method:"get"})}function p(t){return Object(a["b"])({url:r.changeRole,method:"get",params:t})}function h(){return Object(a["b"])({url:r.departmentStaff,method:"get"})}function g(t){return Object(a["b"])({url:r.addStaffRole,method:"post",data:t})}function b(t){return Object(a["b"])({url:r.getStaff,method:"get",params:t})}function v(t){return Object(a["b"])({url:r.editDelConfig,method:"post",data:t})}function y(t){return Object(a["b"])({url:r.queryDelConfig,method:"post",data:t})}function O(t){return Object(a["b"])({url:r.getRoleRes,method:"get",params:t})}function S(t){return Object(a["b"])({url:r.changeRes,method:"post",data:t})}function C(t){return Object(a["b"])({url:r.getDepartmentStaff,method:"get",params:t})}function w(t){return Object(a["b"])({url:r.getPermissionLog,method:"post",data:t})}function _(t){return Object(a["b"])({url:r.staffInfo,method:"get",params:t})}function T(t){return Object(a["b"])({url:r.yesterdayData,method:"get",params:t})}function k(t){return Object(a["b"])({url:r.getDate,method:"get",params:t})}function x(t){return Object(a["b"])({url:r.staffOKR,method:"get",params:t})}function N(t){return Object(a["b"])({url:r.saveOKR,method:"post",data:t})}function R(t){return Object(a["b"])({url:r.getStaffOKRList,method:"get",params:t})}function j(t){return Object(a["b"])({url:r.getRepeatList,method:"get",params:t})}function L(t){return Object(a["b"])({url:r.checkTime,method:"get",params:t})}function D(t){return Object(a["b"])({url:r.delOkr,method:"post",data:t})}function I(t){return Object(a["b"])({url:r.modify,method:"post",data:t})}},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("6b75");function r(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=n("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return r(t)||i(t)||Object(s["a"])(t)||o()}},"487a":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var n,a,r,i,s,o=function(){t.apply(i,s),a=n};return function(){if(i=this,s=arguments,n=Date.now(),r&&(clearTimeout(r),r=null),a){var t=e-(n-a);t<0?o():r=setTimeout((function(){o()}),t)}else o()}},n=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},a=document.defaultView.getComputedStyle,r=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var n=a(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window},i=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?n(window):t.getBoundingClientRect().top+n(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},u=function(){if(!this.binded){this.binded=!0;var t=this,n=t.el,a=n.getAttribute("infinite-scroll-throttle-delay"),i=200;a&&(i=Number(t.vm[a]||a),(isNaN(i)||i<0)&&(i=200)),t.throttleDelay=i,t.scrollEventTarget=r(n),t.scrollListener=e(c.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=n.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&c.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var u=n.getAttribute("infinite-scroll-distance"),l=0;u&&(l=Number(t.vm[u]||u),isNaN(l)&&(l=0)),t.distance=l;var d=n.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&c.call(t);var m=n.getAttribute("infinite-scroll-listen-for-event");m&&t.vm.$on(m,(function(){c.call(t)}))}},c=function(t){var e=this.scrollEventTarget,a=this.el,r=this.distance;if(!0===t||!this.disabled){var o=n(e),u=o+i(e),c=!1;if(e===a)c=e.scrollHeight-u<=r;else{var l=s(a)-s(e)+a.offsetHeight+o;c=u+r>=l}c&&this.expression&&this.expression()}},l={bind:function(e,n,a){e[t]={el:e,vm:a.context,expression:n.value};var r=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&u.call(e[t],r),e[t].bindTryCount=0;var n=function n(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?u.call(e[t],r):setTimeout(n,50))};n()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",l)};return window.Vue&&(window.infiniteScroll=l,Vue.use(d)),l.install=d,l}))},"56bb":function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"k",(function(){return h}));var a=n("b775"),r={page:"/client_manager/transfer/page",transferGroupList:"/client_manager/transfer/transferGroupList",getCustomerList:"/client_manager/transfer/onDuty/getCustomerList",assign:"/client_manager/transfer/assign",transfer:"/client_manager/transfer/sync",record:"/client_manager/transfer/record/sync",groupTransfer:"/client_manager/transfer/groupTransfer",nowassign:"/client_manager/transfer/onDuty/assign",getGroupOwner:"/client_manager/transfer/getGroupOwner",ondutyTransferRecord:"/client_manager/transfer/ondutyTransferRecord",quitRecord:"/client_manager/transfer/record",transferGroupRecord:"/client_manager/transfer/transferGroupRecord"};function i(t){return Object(a["b"])({url:r.quitRecord,method:"post",data:t})}function s(t){return Object(a["b"])({url:r.ondutyTransferRecord,method:"post",data:t})}function o(){return Object(a["b"])({url:r.getGroupOwner,method:"get"})}function u(t){return Object(a["b"])({url:r.nowassign,method:"post",data:t})}function c(t){return Object(a["b"])({url:r.groupTransfer,method:"post",data:t})}function l(t){return Object(a["b"])({url:r.assign,method:"post",data:t})}function d(){return Object(a["b"])({url:r.transfer,method:"get"})}function f(t){return Object(a["b"])({url:r.page,method:"post",data:t})}function m(t){return Object(a["b"])({url:r.transferGroupList,method:"post",data:t})}function p(t){return Object(a["b"])({url:r.getCustomerList,method:"get",params:t})}function h(t){return Object(a["b"])({url:r.transferGroupRecord,method:"post",data:t})}},"5e26":function(t,e,n){"use strict";n("f59f")},"65b6":function(t,e,n){},9994:function(t,e,n){"use strict";n("65b6")},a912:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"离职继承/分配记录"},on:{back:function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"select-box"},[e("div",{staticClass:"filter-header"},[e("div",{staticClass:"nav-container"},[e("div",{staticStyle:{"border-left":"1px solid #e8e8e8",display:"flex"}},[e("div",{class:[{active:t.defalutState},"base-tab"],on:{click:function(e){return t.tabState("0")}}},[t._v("待分配客户")]),e("div",{class:[{active:!t.defalutState},"base-tab"],on:{click:function(e){return t.tabState("1")}}},[t._v("待分配群聊")])])])]),e("div",{staticClass:"flex"},[e("div",{staticClass:"filter-box"},[t.defalutState?e("div",[e("span",{staticClass:"label"},[t._v("客户名称：")]),e("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入要搜索客户名称"},on:{search:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1):e("div",[e("span",{staticClass:"label"},[t._v("群名称：")]),e("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入要搜索群名称"},on:{search:t.searchGroupName},model:{value:t.searchGroup,callback:function(e){t.searchGroup=e},expression:"searchGroup"}})],1),e("span",{staticStyle:{"margin-right":"33px"}}),e("span",{staticClass:"label"},[t._v("接替员工：")]),e("SelectMultiple",{attrs:{reactflag:t.reactflag},on:{selectCustom:t.selectCustom}}),e("span",{staticStyle:{"margin-right":"33px"}}),e("span",{staticClass:"label"},[t._v("分配时间：")]),e("a-range-picker",{staticStyle:{width:"212px"},attrs:{"disabled-date":t.disabledDate,value:t.showAddDateTime},on:{change:t.onChange},scopedSlots:t._u([{key:"dateRender",fn:function(n){return[e("div",{staticClass:"ant-calendar-date"},[t._v(" "+t._s(n.date())+" ")])]}}])},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1),e("span",{staticStyle:{"margin-right":"33px"}}),t.defalutState?e("div",[e("span",{staticClass:"label"},[t._v("接替状态：")]),e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择接替状态","option-filter-prop":"children",allowClear:""},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.statusList,(function(n,a){return e("a-select-option",{key:a,attrs:{value:n.value}},[t._v(" "+t._s(n.name)+" ")])})),1)],1):t._e()],1),e("a-button",{on:{click:t.reset}},[t._v("重置")])],1)]),e("div",{staticClass:"record-content-box"},["0"==t.tabStateval?e("div",[e("div",{staticClass:"total-box"},[t._v("共"+t._s(t.pagination.total)+"个已分配"+t._s(t.txt))]),e("a-table",{attrs:{columns:t.columns,"data-source":t.clientList,"table-layout":"fixed",pagination:t.pagination,loading:t.loading},on:{change:t.changeClient},scopedSlots:t._u([{key:"customer",fn:function(n){return e("span",{staticClass:"external-user"},[e("a-avatar",{attrs:{size:36,shape:"square",src:n.customerAvatar}}),t._v(" "+t._s(n.customerName)+" "),n.corpName?e("span",{staticStyle:{color:"#eda150"}},[t._v("@"+t._s(n.corpName))]):e("span",{staticClass:"external-user",staticStyle:{color:"#5ec75d"}},[t._v("@微信")])],1)}},{key:"newStaffname",fn:function(n){return e("span",{},[e("a-button",{attrs:{size:"small"}},[e("a-icon",{staticStyle:{color:"#7da3d1"},attrs:{type:"user"}}),t._v(" "+t._s(n)+" ")],1)],1)}},{key:"operation",fn:function(n){return e("div",{staticClass:"operation"},["0"==n.hasChat?e("a-tooltip",{attrs:{title:"所属客服未开通消息存档"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"1"==n.hasChat?e("a-tooltip",{attrs:{title:"当前客户与所属客服没有聊天记录"}},[e("a-button",{staticClass:"chat",attrs:{type:"link",disabled:""}},[t._v(" 聊天记录 ")])],1):t._e(),"2"==n.hasChat?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.jump(n)}}},[t._v("聊天记录")]):t._e(),e("div",{staticClass:"a-vertical"}),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.clientDetail(n)}}},[t._v("客户详情")])],1)}}],null,!1,2469528604)})],1):e("div",[e("div",{staticClass:"total-box"},[t._v("共"+t._s(t.groupPagination.total)+"个已分配"+t._s(t.txt))]),e("a-table",{attrs:{columns:t.groupColumns,"data-source":t.groupList,"table-layout":"fixed",pagination:t.groupPagination,loading:t.loading},on:{change:t.changeGroup},scopedSlots:t._u([{key:"customer",fn:function(n){return e("span",{staticClass:"external-user"},[e("a-avatar",{attrs:{size:36,shape:"square",src:"/icons/groupChat.png"}}),t._v(" "+t._s(n.chatName)+" ")],1)}},{key:"newStaffname",fn:function(n){return e("span",{},[e("a-button",{attrs:{size:"small"}},[e("a-icon",{staticStyle:{color:"#7da3d1"},attrs:{type:"user"}}),t._v(" "+t._s(n)+" ")],1)],1)}},{key:"operation",fn:function(n){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(n)}}},[t._v("群详情")])],1)}}])})],1)])],1)},r=[],i=n("5530"),s=(n("d81d"),n("eb82")),o=n("56bb"),u={data:function(){return{tabStateval:"0",defalutState:"0"==this.$route.meta.seletedTab,txt:"客户",searchName:"",searchGroup:"",reactflag:!1,value:void 0,showAddDateTime:null,staffUserid:void 0,assignTimeFrom:void 0,assignTimeTo:void 0,status:void 0,statusList:[{name:"接替完毕",value:"1"},{name:"等待接替",value:"2"},{name:"客户拒绝",value:"3"},{name:"接替成员客户达到上限",value:"4"},{name:"无接替记录",value:"5"}],loading:!1,pagination:{current:1,pageSize:10,total:0},columns:[{title:"客户名称",dataIndex:"customer",key:"customer",scopedSlots:{customRender:"customer"}},{title:"接替员工",dataIndex:"newStaffname",key:"newStaffname",scopedSlots:{customRender:"newStaffname"}},{title:"转接状态",dataIndex:"statusText",key:"statusText",scopedSlots:{customRender:"statusText"}},{title:"分配时间",dataIndex:"assignTime",key:"assignTime",scopedSlots:{customRender:"assignTime"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],clientList:[],groupColumns:[{title:"群聊名称",dataIndex:"customer",key:"customer",scopedSlots:{customRender:"customer"}},{title:"接替员工",dataIndex:"staffName",key:"staffName",scopedSlots:{customRender:"newStaffname"}},{title:"群人数",dataIndex:"memberCount",key:"memberCount",scopedSlots:{customRender:"memberCount"}},{title:"分配时间",dataIndex:"transferTime",key:"transferTime",scopedSlots:{customRender:"transferTime"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],groupPagination:{current:1,pageSize:10,total:0},groupList:[]}},created:function(){var t=this.$route.query.type;"0"==t?(this.defalutState=!0,this.txt="客户"):(this.defalutState=!1,this.txt="群聊"),"0"==this.$route.meta.seletedTab?(this.defalutState=!0,this.txt="客户",t="0"):(this.defalutState=!1,this.txt="群聊",t="1"),this.tabStateval=t,this.sendTabs()},methods:{jump:function(t){var e={avatar:t.staffAvatar||"",name:t.staffName},n=JSON.stringify(e);sessionStorage.setItem("newsObj",n),this.$router.push({name:"news",query:{staffExtId:t.staffId,designee:0,customerId:t.customerId}})},clientDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerUserid,staffId:t.newStaffuserid}})},lookDetail:function(t){this.$router.push({name:"groupDetailsName",query:{chatId:t.chatId}})},changeClient:function(t){var e=t.current;this.pagination.current=e,this.getList()},changeGroup:function(t){var e=t.current;this.groupPagination.current=e,this.transferGroupRecord()},tabState:function(t){this.clearData(),"0"==t?(this.defalutState=!0,this.txt="客户",this.clientList.length<=0&&this.getList(),this.$route.meta.seletedTab=0):(this.defalutState=!1,this.txt="群聊",this.groupList.length<=0&&this.transferGroupRecord(),this.$route.meta.seletedTab=1),this.tabStateval=t},onSearchName:function(){this.getList()},searchGroupName:function(){this.transferGroupRecord()},transferGroupRecord:function(){var t=this,e={groupName:this.searchGroup,staffUserid:this.staffUserid,timeFrom:this.assignTimeFrom,timeTo:this.assignTimeTo,currentPage:this.groupPagination.current,pageSize:this.groupPagination.pageSize};Object(o["k"])(e).then((function(e){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.list&&(t.groupPagination.total=e.data.total,t.groupList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)}))},handleChange:function(t){this.status=t,this.sendTabs()},clearData:function(){this.reactflag=!0,this.value=void 0,this.searchGroup=void 0,this.searchName=void 0,this.status=void 0,this.staffUserid=void 0,this.showAddDateTime=null,this.assignTimeFrom=void 0,this.assignTimeTo=void 0},reset:function(){this.clearData(),this.sendTabs()},sendTabs:function(){"0"==this.tabStateval&&this.getList(),"1"==this.tabStateval&&this.transferGroupRecord()},disabledDate:function(t){return t&&t>Date.now()},selectCustom:function(t){"1"==t.empty?this.staffUserid=void 0:(this.reactflag=!1,this.staffUserid=t.userid),this.sendTabs()},onChange:function(t,e){this.showAddDateTime=t,e[0]?(this.assignTimeFrom=e[0]+" 00:00:00",this.assignTimeTo=e[1]+" 23:59:59"):(this.assignTimeFrom=void 0,this.assignTimeTo=void 0),this.sendTabs()},getList:function(){var t=this,e={name:this.searchName,staffUserid:this.staffUserid,status:this.status,assignTimeFrom:this.assignTimeFrom,assignTimeTo:this.assignTimeTo,pageNum:this.pagination.current,pageSize:this.pagination.pageSize};"1"==this.pagination.current&&(this.clientList=[]),Object(o["h"])(e).then((function(e){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.list&&(t.pagination.total=e.data.total,t.clientList=t.disposeClientList(e.data.list))})).catch((function(e){t.$message.error(e)}))},disposeClientList:function(t){return t.map((function(t){return t.key=t.id,t.customer=Object(i["a"])(Object(i["a"])({},t),{},{customerName:t.customerName,customerAvatar:t.customerAvatar,corpName:t.corpName||null}),"1"==(null===t||void 0===t?void 0:t.status)?t.statusText="接替完毕":"2"==(null===t||void 0===t?void 0:t.status)?t.statusText="等待接替":"3"==(null===t||void 0===t?void 0:t.status)?t.statusText="客户拒绝":"4"==(null===t||void 0===t?void 0:t.status)?t.statusText="接替成员客户达到上限":"5"==(null===t||void 0===t?void 0:t.status)&&(t.statusText="无接替记录"),Object.assign({operation:t},t)}))},change:function(t){var e=t.current;this.pagination.current=e,this.getList()}},components:{SelectMultiple:s["a"]}},c=u,l=(n("5e26"),n("2877")),d=Object(l["a"])(c,a,r,!1,null,"52ec32e4",null);e["default"]=d.exports},eb82:function(t,e,n){"use strict";n("498a"),n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("div",{staticClass:"button-name",on:{click:function(e){return e.stopPropagation(),t.selectFocusIsOpen.apply(null,arguments)},mouseenter:t.enter,mouseleave:t.leave}},[t.employeeName?e("span",{staticClass:"hidden"},[e("a-avatar",{attrs:{size:28,shape:"square",src:t.thumbAvatar}}),t._v(" "+t._s(t.employeeName)+" ")],1):e("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"rgba(0, 0, 0, 0.25)"}},[t._v(" "+t._s(t.placeholderStr)+" ")]),t.closeCircle?e("span",{staticStyle:{color:"rgba(0, 0, 0, 0.25)"}},[t.employeeName&&1!=t.styleButton?e("a-icon",{attrs:{type:"close-circle",theme:"filled"},on:{click:function(e){return e.stopPropagation(),t.iconClear.apply(null,arguments)}}}):e("a-icon",{attrs:{type:"down"}})],1):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"},{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],staticClass:"selectBox_list"},[e("div",{staticClass:"group-owner"},[e("header",{staticClass:"header"},[t._v("全部员工 ("+t._s(t.total)+")")]),e("div",{staticClass:"search-name"},[e("a-input-search",{attrs:{placeholder:"请输入员工后回车"},on:{search:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName="string"===typeof e?e.trim():e},expression:"searchName"}})],1),e("ul",{staticClass:"list-wrap"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getDictionaryByCode,expression:"getDictionaryByCode"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},t._l(t.groupOwners,(function(n){return e("li",{key:n.staffId,staticClass:"title-wrap",on:{click:function(e){return t.selectGroupOwner(n)}}},[e("a-space",{attrs:{size:12}},[e("a-avatar",{attrs:{size:30,src:n.thumbAvatar,shape:"square"}}),e("span",[t._v(t._s(n.name))])],1),t.checkShow?e("div",[t.userId==n.userid?e("a-icon",{staticClass:"check-circle",attrs:{type:"check-circle"}}):e("div",{staticClass:"circle"})],1):t._e()],1)})),0)])])])])},r=[],i=n("2909"),s=(n("d81d"),n("4de4"),n("d3b7"),n("25f0"),n("159b"),n("caad"),n("2532"),n("99af"),n("487a")),o=n.n(s),u=n("1c9c"),c={bind:function(t,e){function n(n){if(t.contains(n.target))return!1;e.expression&&e.value(n)}t.__vueClickOutside__=n,document.addEventListener("click",n)},update:function(){},unbind:function(t){document.removeEventListener("click",t.__vueClickOutside__),delete t.__vueClickOutside__}},l={name:"SearchForm",directives:{clickoutside:c,infiniteScroll:o.a},props:{checkShow:{type:Boolean,default:!1},userName:{type:String,default:""},userId:{type:String,default:""},userThumbAvatar:{type:String,default:""},reactflag:{type:Boolean,default:!1},placeholderStr:{type:String,default:"请选择企业员工"},closeCircle:{type:Boolean,default:!0}},data:function(){return{defalytStaffIndex:[],thumbAvatar:"",busy:!0,pagination:{current:1,pageSize:10,total:0},total:0,totalNum:0,selectRoleId:"3",employeeName:"",groupOwners:[],page:1,limit:10,value:[],searchName:"",styleButton:1,owners:[],isOpen:!1,loading:!1,buttonLoding:!1,ownersID:{data:[]}}},created:function(){},methods:{enter:function(){this.styleButton=2},leave:function(){this.styleButton=1},selectGroupOwner:function(t){this.employeeName=t.name,this.thumbAvatar=t.thumbAvatar,this.isOpen=!1,this.$emit("selectCustom",t)},iconClear:function(){this.employeeName="",this.isOpen=!1;var t={empty:"1"};this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode(),this.$emit("selectCustom",t)},handleClose:function(){this.isOpen=!1},selectFocusIsOpen:function(){this.isOpen=!this.isOpen},ok:function(){var t=this.groupOwners.filter((function(t){if(t.defaultChecked)return t.userid})).map((function(t){return t.userid})),e=this.groupOwners.filter((function(t){if(t.defaultChecked)return t})).map((function(t){return{name:t.name,avatar:t.thumbAvatar}}));this.ownersID.data=e;var n=t.toString();this.isOpen=!this.isOpen,this.$store.commit("SET_STAFFIDS",n)},cancel:function(){var t=this;this.isOpen=!this.isOpen,this.groupOwners.forEach((function(e){var n=t.responseData.useridList.includes(e.userid);e.defaultChecked=!!n}));var e=this.groupOwners.filter((function(t){if(t.defaultChecked)return t})).map((function(t){return{name:t.name,avatar:t.thumbAvatar}}));this.ownersID.data=e},handleInfiniteOnLoad:function(){this.pagination.current++,this.loading&&this.getDictionaryByCode()},getDictionaryByCode:function(){var t=this,e={currentPage:this.page,pageSize:this.limit,name:this.searchName||""};this.buttonLoding||(this.buttonLoding=!0,this.loading=!0,"0"!=this.total&&this.groupOwners.length>=this.total?this.busy=!0:Object(u["q"])(e).then((function(e){var n=e.data.list;t.total=e.data.total,t.page>1?t.groupOwners=[].concat(Object(i["a"])(t.groupOwners),Object(i["a"])(n)):t.groupOwners=Object(i["a"])(n),t.groupOwners.length>=t.total?t.busy=!0:(t.page=t.page+1,t.loading=!1)})).catch((function(e){t.$message.error(e||e.message)})).finally((function(){t.buttonLoding=!1})))},onSearchName:function(){this.groupOwners=[],this.page=1,this.getDictionaryByCode()}},watch:{reactflag:{handler:function(t,e){!0===t&&(this.employeeName="",this.isOpen=!1,this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode())}},userName:function(){this.employeeName=this.userName},userThumbAvatar:function(){this.thumbAvatar=this.userThumbAvatar}}},d=l,f=(n("9994"),n("2877")),m=Object(f["a"])(d,a,r,!1,null,"c2d4f660",null);e["a"]=m.exports},f59f:function(t,e,n){}}]);