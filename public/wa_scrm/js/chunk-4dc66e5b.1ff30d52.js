(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dc66e5b"],{"01d5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setting-wrap"},[t("a-tabs",{staticStyle:{width:"1350px"},on:{change:e.change}},[t("a-tab-pane",{key:"1",attrs:{tab:"Tag management"}},[t("tag",{ref:"tag"})],1),t("a-tab-pane",{key:"2",attrs:{tab:"Tag Geoup management"}},[t("tagGroup")],1)],1)],1)},n=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-wrap"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-but"},[t("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:e.form},on:{submit:e.handleSearch}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:4}},[t("a-form-item",{attrs:{label:"Tag Group"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["groupId",{rules:[{required:!1,message:"Input something!"}]}],expression:"[\n                    `groupId`,\n                    {\n                      rules: [\n                        {\n                          required: false,\n                          message: 'Input something!',\n                        },\n                      ],\n                    },\n                  ]"}],staticStyle:{width:"200px"},attrs:{placeholder:"place select"}},e._l(e.tagGroupList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.labelGroupName)+" ")])})),1)],1)],1),t("a-col",{style:{textAlign:"right"},attrs:{span:8}},[t("a-form-item",[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" Search ")]),t("a-button",{style:{marginLeft:"8px"},on:{click:e.handleReset}},[e._v(" Clear ")])],1)],1)],1)],1),t("a-button",{attrs:{type:"primary",size:"large",disabled:e.Actions},on:{click:e.addAgent}},[e._v("Add Tag")])],1)]),t("section",{staticClass:"section"},[t("a-table",{staticClass:"table",attrs:{columns:e.columns,rowKey:"id",loading:e.loading,dataSource:e.userList,pagination:e.pagination},on:{change:e.changeTab},scopedSlots:e._u([{key:"role",fn:function(a){return t("div",{},[e._v(" "+e._s(e.getRoleText(a))+" ")])}},{key:"Edit",fn:function(a,i){return t("div",{},[t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.editPage(i)}}},[e._v("Edit")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.deletePage(i)}}},[e._v("Delete")]),e._v("  ")],1)}}])})],1),t("a-modal",{attrs:{width:"600px",title:e.title,confirmLoading:e.confirmLoading,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleSearch=!1},ok:e.submitKeyword},model:{value:e.visibleSearch,callback:function(t){e.visibleSearch=t},expression:"visibleSearch"}},[t("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.modalForm}},[t("a-form-model-item",{attrs:{label:"Tag Name",prop:"labelName"}},[t("a-input",{attrs:{placeholder:"place input"},model:{value:e.modalForm.labelName,callback:function(t){e.$set(e.modalForm,"labelName",t)},expression:"modalForm.labelName"}})],1),t("a-form-model-item",{attrs:{label:"Tag Group",prop:"groupId"}},[t("a-select",{attrs:{placeholder:"place select"},model:{value:e.modalForm.groupId,callback:function(t){e.$set(e.modalForm,"groupId",t)},expression:"modalForm.groupId"}},e._l(e.tagGroupList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.labelGroupName)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"Remark",prop:"remark"}},[t("a-input",{attrs:{placeholder:"place input"},model:{value:e.modalForm.remark,callback:function(t){e.$set(e.modalForm,"remark",t)},expression:"modalForm.remark"}})],1)],1)],1)],1)},o=[],s=a("5530"),l=(a("d3b7"),a("7db0"),a("b775")),c={pageList:"/label/page",pageCreate:"/label/create",pageDetele:"/label/delete",pageUpdate:"/label/update",labelGroupPage:"/labelGroup/page",labelGroupListAll:"/labelGroup/listAll",labelGroupDelete:"/labelGroup/delete",labelGroupCreate:"/labelGroup/create",labelGroupUpdate:"/labelGroup/update"};function u(e){return Object(l["b"])({url:c.pageList,method:"post",data:e})}function d(e){return Object(l["b"])({url:c.pageCreate,method:"post",data:e})}function m(e){return Object(l["b"])({url:c.pageDetele,method:"post",data:e})}function p(e){return Object(l["b"])({url:c.pageUpdate,method:"post",data:e})}function h(e){return Object(l["b"])({url:c.labelGroupPage,method:"post",data:e})}function g(e){return Object(l["b"])({url:c.labelGroupListAll,method:"post",data:e})}function f(e){return Object(l["b"])({url:c.labelGroupDelete,method:"post",data:e})}function b(e){return Object(l["b"])({url:c.labelGroupCreate,method:"post",data:e})}function v(e){return Object(l["b"])({url:c.labelGroupUpdate,method:"post",data:e})}var k={name:"tag",data:function(){return{form:this.$form.createForm(this,{name:"advanced_search"}),userList:[],visibleSearch:!1,editData:{},columns:[{title:"Tag name",dataIndex:"labelName"},{title:"Owning Label Group",dataIndex:"labelGroupName"},{title:"remark",dataIndex:"remark"},{title:"Tag number ",dataIndex:"hasLabelNum"},{title:"To add people",dataIndex:"creatorName"},{title:"Create Time",dataIndex:"createTime",scopedSlots:{customRender:"createTime"}},{title:"Operation",dataIndex:"Edit",scopedSlots:{customRender:"Edit"}}],userListStatus:[{text:"admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],loading:!1,pagination:{current:1,pageSize:10,total:0},userRole:this.$store.state.user.info.userRole,title:"Add New Tag",newData:{},modalForm:{labelName:void 0,groupId:void 0,remark:void 0},confirmLoading:!1,rules:{labelName:[{required:!0,message:"Please input tag name"}],groupId:[{required:!0,message:"Please select"}]},tagGroupList:[],searchData:{keyword:void 0,hitTotal:void 0}}},created:function(){this.init(),this.labelGroupListAllFn()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{labelGroupListAllFn:function(){var e=this;g().then((function(t){e.tagGroupList=t.data})).catch((function(t){e.$message.error(t)}))},handleSearch:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){t.searchData=a,t.searchList()}))},handleReset:function(){this.form.resetFields(),this.searchData={},this.searchList()},submitKeyword:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a=e.modalForm;e.confirmLoading=!0,e.editData.id?e.editKeywordFn(a):e.addKeywordFn(a)}))},addKeywordFn:function(e){var t=this;d(e).then((function(e){t.visibleSearch=!1,t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))},editKeywordFn:function(e){var t=this;e.id=this.editData.id,p(e).then((function(e){t.visibleSearch=!1,t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))},getRoleText:function(e){var t=this.userListStatus.find((function(t){return t.value==e}));return t.text},editPage:function(e){this.title="Edit Tag",this.visibleSearch=!0,this.editData=e,this.modalForm={labelName:e.labelName,groupId:e.groupId,remark:e.remark}},addAgent:function(){this.title="Add New Tag",this.visibleSearch=!0,this.editData={},this.modalForm={labelName:void 0,groupId:void 0,remark:void 0}},serviceOk:function(){this.pagination.current=1,this.visibleSearch=!1,this.$message.success("success"),this.$emit("editSuccess")},deletePage:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"Please check if you want to delete the tags, all the tags that have been tagged will be deleted after deletion。",onOk:function(){t.contactsDeleteFun(e.id)}})},contactsDeleteFun:function(e){var t=this,a={id:e};m(a).then((function(e){t.$message.success("delete success"),t.init()})).catch((function(e){t.$message.error(e)}))},changeTab:function(e){var t=e.current;this.pagination.current=t,this.init()},searchList:function(){this.pagination.current=1,this.init()},init:function(){var e=this,t=Object(s["a"])({currentPage:this.pagination.current,pageSize:this.pagination.pageSize},this.searchData);this.loading=!0,u(t).then((function(t){e.userList=t.data.records,e.pagination.total=t.data.total,e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))}}},y=k,S=(a("d047"),a("2877")),x=Object(S["a"])(y,r,o,!1,null,"dc9d758c",null),G=x.exports,L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-wrap"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-but"},[t("h2",[e._v(e._s(e.groupName))]),t("a-button",{attrs:{type:"primary",size:"large",disabled:e.Actions},on:{click:e.addAgent}},[e._v("Add Group Name")])],1)]),t("section",{staticClass:"section"},[t("a-table",{staticClass:"table",attrs:{columns:e.columns,rowKey:"id",loading:e.loading,dataSource:e.userList,pagination:e.pagination},on:{change:e.changeTab},scopedSlots:e._u([{key:"role",fn:function(a){return t("div",{},[e._v(" "+e._s(e.getRoleText(a))+" ")])}},{key:"Edit",fn:function(a,i){return t("div",{},[t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.editPage(i)}}},[e._v("Edit")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.deletePage(i)}}},[e._v("Delete")]),e._v("  ")],1)}}])})],1),t("a-modal",{attrs:{width:"600px",title:e.title,confirmLoading:e.confirmLoading,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleSearch=!1},ok:e.submitKeyword},model:{value:e.visibleSearch,callback:function(t){e.visibleSearch=t},expression:"visibleSearch"}},[t("a-form-model",{ref:"ruleForm",attrs:{rules:e.rules,model:e.modalForm}},[t("a-form-model-item",{attrs:{label:"Group Name",prop:"labelGroupName"}},[t("a-input",{attrs:{placeholder:"请输入",maxLength:50},model:{value:e.modalForm.labelGroupName,callback:function(t){e.$set(e.modalForm,"labelGroupName",t)},expression:"modalForm.labelGroupName"}})],1)],1)],1)],1)},F=[],w={name:"tagGroup",props:{groupData:{type:Object,default:function(){return{}}}},data:function(){return{groupName:"",userList:[],visibleSearch:!1,editData:{},columns:[{title:"labelGroupName",dataIndex:"labelGroupName"},{title:"creatorName",dataIndex:"creatorName"},{title:"Tag number",dataIndex:"labelNum"},{title:"createTime",dataIndex:"createTime"},{title:"Operation",dataIndex:"Edit",scopedSlots:{customRender:"Edit"}}],userListStatus:[{text:"admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],loading:!1,pagination:{current:1,pageSize:10,total:0},userRole:this.$store.state.user.info.userRole,title:"Add New Agent",newData:{},confirmLoading:!1,modalForm:{labelGroupName:void 0},rules:{labelGroupName:[{required:!0,message:"Please input name"}]}}},created:function(){this.init()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{getRoleText:function(e){var t=this.userListStatus.find((function(t){return t.value==e}));return t.text},editPage:function(e){this.title="Edit Agent",this.visibleSearch=!0,this.editData=e,this.modalForm={labelGroupName:e.labelGroupName}},addAgent:function(){this.title="Add New Agent",this.visibleSearch=!0,this.editData={},this.modalForm={labelGroupName:void 0}},serviceOk:function(){this.pagination.current=1,this.visibleSearch=!1,this.$message.success("success"),this.$emit("editSuccess")},deletePage:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"Are you sure to delete this tag group? After the tag group is deleted, all tags in the tag group name will be deleted",onOk:function(){t.contactsDeleteFun(e.id)}})},contactsDeleteFun:function(e){var t=this,a={id:e};f(a).then((function(e){t.$message.success("success"),t.init()})).catch((function(e){t.$message.error(e)}))},changeTab:function(e){var t=e.current;this.pagination.current=t,this.init()},searchList:function(){this.pagination.current=1,this.init()},init:function(){var e=this,t={currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,h(t).then((function(t){e.userList=t.data.records,e.pagination.total=t.data.total,e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},submitKeyword:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a=e.modalForm;e.confirmLoading=!0,e.editData.id?e.editKeywordFn(a):e.addKeywordFn(a)}))},addKeywordFn:function(e){var t=this;b(e).then((function(e){t.visibleSearch=!1,t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))},editKeywordFn:function(e){var t=this;e.id=this.editData.id,v(e).then((function(e){t.visibleSearch=!1,t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))}},watch:{groupData:function(e){this.groupName=e.groupName,this.pagination.current=1,this.newData=e,this.init()}}},N=w,_=(a("4557"),Object(S["a"])(N,L,F,!1,null,"e05665e6",null)),A=_.exports,T={name:"TagManagement",components:{tag:G,tagGroup:A},data:function(){return{groupData:{}}},created:function(){},methods:{change:function(){this.$refs.tag.labelGroupListAllFn()}}},D=T,$=(a("ecd0"),Object(S["a"])(D,i,n,!1,null,"6bf159e9",null));t["default"]=$.exports},4557:function(e,t,a){"use strict";a("8fc4")},"68ad":function(e,t,a){},"8fc4":function(e,t,a){},d047:function(e,t,a){"use strict";a("68ad")},ecd0:function(e,t,a){"use strict";a("f03a")},f03a:function(e,t,a){}}]);