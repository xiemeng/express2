(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59c4e4fb"],{"03b4":function(e,t,a){},"04c0":function(e,t,a){"use strict";a("3e04")},"16f2":function(e,t,a){},"23ba":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return l}));var i=a("b775"),o={addGroup:"/staffgroup/addGroup",batchMoveGroupMember:"/staffgroup/batchMoveGroupMember",delGroup:"/staffgroup/delGroup",queryGroupAllAndCount:"/staffgroup/queryGroupAllAndCount"};function n(e){return Object(i["b"])({url:o.batchMoveGroupMember,method:"post",data:e})}function r(e){return Object(i["b"])({url:o.addGroup,method:"get",params:e})}function s(e){return Object(i["b"])({url:o.delGroup,method:"get",params:e})}function l(e){return Object(i["b"])({url:o.queryGroupAllAndCount,method:"get",params:e})}},2584:function(e,t,a){"use strict";a("16f2")},"30e1":function(e,t,a){"use strict";a("d5a7")},"3e04":function(e,t,a){},5681:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"setting-wrap"},[t("a-tabs",{staticStyle:{width:"1350px"},on:{change:e.changeTab}},[t("a-tab-pane",{key:"1",attrs:{tab:"Account management"}},[t("Group")],1),t("a-tab-pane",{key:"2",attrs:{tab:"Account Group Management"}},[t("accountGroup")],1),t("a-tab-pane",{key:"3",attrs:{tab:"Role management "}},[t("role",{ref:"role"})],1),t("a-tab-pane",{key:"4",attrs:{tab:"Access configuration"}},[t("configuration")],1)],1)],1)},o=[],n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-wrap"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-but"},[t("h2",[e._v("Agent "+e._s(e.pagination.total))]),t("a-button",{attrs:{type:"primary",size:"large",disabled:e.Actions},on:{click:e.addAgent}},[e._v("Add Agent")])],1)]),t("section",{staticClass:"section"},[t("h3",{staticClass:"total"},[t("a-form-model",{ref:"ruleForm",staticClass:"ant-advanced-search-form",attrs:{form:e.form,layout:"inline"},on:{submit:e.handleSubmit}},[t("a-form-model-item",{attrs:{label:"Name"}},[t("a-input",{attrs:{placeholder:"place input",size:"large",allowClear:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("a-form-model-item",{attrs:{label:"email",name:"email"}},[t("a-input",{attrs:{placeholder:"place input",size:"large",allowClear:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("a-form-model-item",{attrs:{label:"Group"}},[t("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"place select",size:"large",allowClear:""},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}},e._l(e.groupList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.groupName)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"Role"}},[t("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"place select",size:"large",allowClear:""},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.roleList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.ruleName)+" ")])})),1)],1),t("a-form-model-item",[t("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" Search ")]),t("a-button",{style:{marginLeft:"8px"},on:{click:e.result}},[e._v(" Clear ")])],1)],1)],1),t("a-table",{staticClass:"table",attrs:{columns:e.columns,rowKey:"id",loading:e.loading,dataSource:e.userList,pagination:e.pagination},on:{change:e.changeTab},scopedSlots:e._u([{key:"Edit",fn:function(a,i){return t("div",{},[t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.editPage(i)}}},[e._v("Edit")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.deletePage(i)}}},[e._v("Delete")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.resetPassWord(i)}}},[e._v("Reset Password")])],1)}}])})],1),t("a-modal",{attrs:{width:"600px",footer:null,title:e.title,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleSearch=!1}},model:{value:e.visibleSearch,callback:function(t){e.visibleSearch=t},expression:"visibleSearch"}},[t("AddUser",{attrs:{editData:e.editData},on:{cancel:function(t){e.visibleSearch=!1},serviceOk:e.serviceOk}})],1)],1)},r=[],s=a("5530"),l=(a("d81d"),a("7db0"),a("d3b7"),function(){var e=this,t=e._self._c;return t("CommonModal",e._b({attrs:{loading:e.loading},on:{cancle:function(t){return e.$emit("cancel")},serviceOk:e.serviceOk}},"CommonModal",e.source,!1),[t("a-form-model",{ref:"ruleForm",staticClass:"form-model",attrs:{model:e.form,rules:e.rules}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"First Name",prop:"fistName"}},[t("a-input",{attrs:{placeholder:"First Name",size:"large"},model:{value:e.form.fistName,callback:function(t){e.$set(e.form,"fistName",t)},expression:"form.fistName"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"Last Name",prop:"lastName"}},[t("a-input",{attrs:{placeholder:"Last Name",size:"large"},model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"username",label:"User Name"}},[t("a-input",{attrs:{placeholder:"User Name",size:"large",disabled:e.editData.id>0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"email",label:"Email"}},[t("a-input",{attrs:{placeholder:"Email",size:"large"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"phone",label:"Phone"}},[t("a-input",{attrs:{placeholder:"Phone",size:"large"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),t("a-col",{attrs:{span:12}},[e.editData.id?e._e():t("a-form-model-item",{attrs:{prop:"password",label:"Password"}},[t("a-input",{attrs:{placeholder:"Password",size:"large",type:"password",disabled:Boolean(e.editData.id>0)},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"Region",prop:"region"}},[t("a-select",{attrs:{placeholder:"Country",size:"large"},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}},e._l(e.countryList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.areaName}},[e._v(" "+e._s(a.areaName)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"role",label:"Role"}},[t("a-select",{attrs:{placeholder:"role",size:"large"},on:{change:e.queryGroupAllAndCount},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.userList,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.id}},[e._v(" "+e._s(a.ruleName)+" ")])})),1)],1)],1),e.form.role?t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"groupId",label:"Group"}},[t("a-select",{attrs:{placeholder:"group",size:"large",disabled:Boolean(e.editData.id>0)},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}},e._l(e.groupList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.groupName)+" ")])})),1)],1)],1):e._e()],1)],1)],1)}),c=[],u=(a("498a"),a("a434"),a("2a86")),d=a("dc4c"),m=a("c24f"),p=a("5dbd"),f={name:"AddUser",components:{CommonModal:u["a"]},props:{editData:{type:Object,default:function(){return{}}}},data:function(){return{source:{title:""},groupList:[],userList:[],loading:!1,countryList:[],form:{fistName:void 0,lastName:void 0,phone:void 0,email:void 0,country:void 0,username:void 0,role:void 0,password:void 0,groupId:void 0},extraInfoVo:function(){return{category:"",topic:""}},rules:{fistName:[{required:!0,message:"Please input fistName",whitespace:!0}],lastName:[{required:!0,message:"Please input lastName",whitespace:!0}],username:[{required:!0,message:"Please input username",whitespace:!0}],country:[{required:!0,message:"Please select country"}],phone:[{required:!0,message:"Please input phone",whitespace:!0}],extraInfoVoList:[{required:!0,message:"Please select extraInfoVoList"}],password:[{required:!0,message:"Please input password",whitespace:!0}],role:[{required:!0,message:"Please select role"}],groupId:[{required:!0,message:"Please select groupId"}]},userRole:this.$store.state.user.info.userRole}},created:function(){this.init(),this.pageListFn()},methods:{pageListFn:function(){var e=this;Object(p["a"])().then((function(t){var a;e.userList=null===(a=t.data)||void 0===a?void 0:a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isActivatedtext:e.isActivated?"effective":"invalid",Actions:"",authorization:""})}))})).catch((function(t){e.$message.error(t)}))},init:function(){var e=this;Object(d["a"])().then((function(t){e.countryList=t.data})).catch((function(t){e.$message.error(t)})),this.editData.id&&(this.form={fistName:this.editData.firstname,lastName:this.editData.lastname,phone:this.editData.phone,email:this.editData.email,country:this.editData.region,username:this.editData.username,role:this.editData.role,groupId:this.editData.groupName,password:this.editData.password})},queryGroupAllAndCount:function(){var e=this;Object(m["g"])({role:this.form.role}).then((function(t){e.groupList=t.data})).catch((function(t){e.$message.error(t)}))},contactsCreateFun:function(){var e=this;this.loading=!0;var t=this.getParams();Object(m["a"])(t).then((function(t){e.$emit("serviceOk")})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},contactsUpdateFun:function(){var e=this;this.loading=!0;var t=this.getParams();delete t.groupId,t.id=this.editData.id,Object(m["e"])(t).then((function(t){e.$emit("serviceOk")})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},getParams:function(){var e,t={firstname:this.form.fistName,lastname:this.form.lastName,phone:this.form.phone,email:this.form.email,region:this.form.country,username:null===(e=this.form.username)||void 0===e?void 0:e.trim(),role:this.form.role,groupId:this.form.groupId,password:this.form.password};return t},serviceOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.form.groupId?e.editData.id?e.contactsUpdateFun():e.contactsCreateFun():e.$message.warning("place select group")}))},addAttribute:function(){this.form.extraInfoVoList.push(this.extraInfoVo())},deleteExtra:function(e){this.form.extraInfoVoList.splice(e,1)}}},h=f,g=(a("30e1"),a("2877")),v=Object(g["a"])(h,l,c,!1,null,"32db35ec",null),b=v.exports,y=a("1f72"),x=a("23ba"),k={name:"Group",components:{AddUser:b},props:{groupData:{type:Object,default:function(){return{}}}},data:function(){return{groupName:"",userList:[],visibleSearch:!1,editData:{},columns:[{title:"Name",dataIndex:"username"},{title:"Email",dataIndex:"email"},{title:"Phone",dataIndex:"phone"},{title:"groupName",dataIndex:"groupName"},{title:"Firstname",dataIndex:"firstname"},{title:"Lastname",dataIndex:"lastname"},{title:"Role",dataIndex:"roleName",scopedSlots:{customRender:"role"}},{title:"Region",dataIndex:"region"},{title:"Operation",dataIndex:"Edit",scopedSlots:{customRender:"Edit"}}],userListStatus:[{text:"admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],loading:!1,pagination:{current:1,pageSize:10,total:0},form:{phone:void 0,groupId:void 0,role:void 0,region:void 0,email:void 0,username:void 0},userRole:this.$store.state.user.info.userRole,title:"Add New Agent",newData:{},groupList:[],roleList:[],countryList:[]}},created:function(){this.init(),this.getList()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{getList:function(){var e=this;Object(x["d"])().then((function(t){e.groupList=t.data})).catch((function(t){e.$message.error(t)})),Object(d["a"])().then((function(t){e.countryList=t.data})).catch((function(t){e.$message.error(t)}));var t={currentPage:1,pageSize:1e3};Object(p["f"])(t).then((function(t){var a;e.roleList=null===(a=t.data.records)||void 0===a?void 0:a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isActivatedtext:e.isActivated?"effective":"invalid",Actions:"",authorization:""})}))})).catch((function(t){e.$message.error(t)}))},resetPassWord:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"reset ",content:"Are you sure to reset?",onOk:function(){t.resetPwdFun(e.id)}})},resetPwdFun:function(e){var t=this;Object(m["j"])({id:e}).then((function(e){t.$message.success("Reset success")})).catch((function(e){t.$message.error(e)}))},getRoleText:function(e){var t=this.userListStatus.find((function(t){return t.value==e}));return t.text},editPage:function(e){this.title="Edit Agent",this.visibleSearch=!0,this.editData=e},addAgent:function(){this.title="Add New Agent",this.visibleSearch=!0,this.editData={}},serviceOk:function(){this.pagination.current=1,this.visibleSearch=!1,this.$message.success("success"),this.init()},deletePage:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"Are you sure to delete?",onOk:function(){t.contactsDeleteFun(e.id)}})},contactsDeleteFun:function(e){var t=this,a={id:e};Object(m["c"])(a).then((function(e){t.$message.success("delete success"),t.init()})).catch((function(e){t.$message.error(e)}))},changeTab:function(e){var t=e.current;this.pagination.current=t,this.init()},handleSubmit:function(e){e.preventDefault(),this.searchList()},result:function(){this.form={phone:void 0,notAllot:void 0,groupId:void 0,email:void 0,displayName:void 0},this.searchList()},searchList:function(){this.pagination.current=1,this.init()},init:function(){var e=this,t={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,groupId:this.form.groupId,order:1,phone:this.form.phone,role:this.form.role,region:this.form.region,email:this.form.email,username:this.form.username};this.loading=!0,Object(y["b"])(t).then((function(t){e.userList=t.data.list,e.pagination.total=t.data.total,e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))}},watch:{groupData:function(e){this.groupName=e.groupName,this.pagination.current=1,this.newData=e,this.init()}}},L=k,A=(a("aa48"),Object(g["a"])(L,n,r,!1,null,"7180b486",null)),D=A.exports,w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-wrap"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-but"},[t("h2",[e._v("Group "+e._s(e.tableList.length))]),t("a-button",{attrs:{type:"primary",size:"large",disabled:e.Actions},on:{click:e.addGroup}},[e._v("Add Group")])],1)]),t("section",{staticClass:"section"},[t("a-table",{staticClass:"table",attrs:{columns:e.columns,rowKey:"id",loading:e.loading,dataSource:e.tableList,pagination:e.pagination},on:{change:e.changeTab},scopedSlots:e._u([{key:"role",fn:function(a){return t("div",{},[e._v(" "+e._s(e.getRoleText(a))+" ")])}},{key:"Edit",fn:function(a,i){return t("div",{},[t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.deleteGroup(i.id)}}},[e._v("Delete")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.showBatchMoveGroupMember(i.id)}}},[e._v("Transfer group members")])],1)}}])})],1),t("a-modal",{attrs:{width:"600px",loading:e.loading,footer:null,title:e.title,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleSearch=!1}},model:{value:e.visibleSearch,callback:function(t){e.visibleSearch=t},expression:"visibleSearch"}},[t("a-input",{staticStyle:{width:"80%"},attrs:{disabled:e.loading,placeholder:"GroupName"},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}}),t("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",loading:e.loading},on:{click:e.addGroupNotarize}},[e._v("Save")])],1),t("a-modal",{attrs:{width:"600px",loading:e.loading,title:"Transfer group",centered:"",destroyOnClose:""},on:{cancel:function(t){e.isBatchMoveGroupMember=!1},ok:e.batchMoveGroupMemberFn},model:{value:e.isBatchMoveGroupMember,callback:function(t){e.isBatchMoveGroupMember=t},expression:"isBatchMoveGroupMember"}},[t("div",{staticClass:"select-group"},[t("span",[e._v("Target Group：")]),t("a-select",{staticClass:"aSelect",attrs:{disabled:e.loading,placeholder:"place select"},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.setList,(function(a,i){return t("a-select-option",{key:i,attrs:{value:a.id}},[e._v(e._s(a.groupName)+" ")])})),1)],1),t("div",[t("a-checkbox",{on:{change:e.checkAll}},[e._v(" Check All ")])],1),t("div",{staticClass:"check-content"},[t("a-checkbox-group",{attrs:{disabled:e.loading},model:{value:e.checkMembers,callback:function(t){e.checkMembers=t},expression:"checkMembers"}},e._l(e.userList,(function(a,i){return t("a-row",{key:i},[t("a-col",{attrs:{span:24}},[t("a-checkbox",{attrs:{value:a.id}},[e._v(" "+e._s(a.username)+" ")])],1)],1)})),1)],1)])],1)},$=[],N=function(){var e=this,t=e._self._c;return t("CommonModal",e._b({attrs:{loading:e.loading},on:{cancle:function(t){return e.$emit("cancel")},serviceOk:e.serviceOk}},"CommonModal",e.source,!1),[t("a-form-model",{ref:"ruleForm",staticClass:"form-model",attrs:{model:e.form,rules:e.rules}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"First Name",prop:"fistName"}},[t("a-input",{attrs:{placeholder:"First Name",size:"large"},model:{value:e.form.fistName,callback:function(t){e.$set(e.form,"fistName",t)},expression:"form.fistName"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"Last Name",prop:"lastName"}},[t("a-input",{attrs:{placeholder:"Last Name",size:"large"},model:{value:e.form.lastName,callback:function(t){e.$set(e.form,"lastName",t)},expression:"form.lastName"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"username",label:"User Name"}},[t("a-input",{attrs:{placeholder:"User Name",size:"large",disabled:e.editData.id},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"email",label:"Email"}},[t("a-input",{attrs:{placeholder:"Email",size:"large"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"phone",label:"Phone"}},[t("a-input",{attrs:{placeholder:"Phone",size:"large"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),t("a-col",{attrs:{span:12}},[e.editData.id?e._e():t("a-form-model-item",{attrs:{prop:"password",label:"Password"}},[t("a-input",{attrs:{placeholder:"Password",size:"large",type:"password",disabled:Boolean(e.editData.id)},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"Region",prop:"region"}},[t("a-select",{attrs:{placeholder:"Country",size:"large"},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}},e._l(e.countryList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.areaName}},[e._v(" "+e._s(a.areaName)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"role",label:"Role"}},[t("a-select",{attrs:{placeholder:"role",size:"large"},on:{change:e.queryEnableGroupFun},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},e._l(e.userList,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.text)+" ")])})),1)],1)],1),e.form.role?t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{prop:"groupId",label:"Group"}},[t("a-select",{attrs:{placeholder:"group",size:"large"},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}},e._l(e.groupList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.groupName)+" ")])})),1)],1)],1):e._e()],1)],1)],1)},S=[],F=(a("a9e3"),{name:"AddGroup",components:{CommonModal:u["a"]},props:{editData:{type:Object,default:function(){return{}}}},data:function(){return{source:{title:""},groupList:[],userList:[{text:"Admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],loading:!1,countryList:[],form:{fistName:void 0,lastName:void 0,phone:void 0,email:void 0,country:void 0,username:void 0,role:void 0,password:void 0,groupId:void 0},extraInfoVo:function(){return{category:"",topic:""}},rules:{fistName:[{required:!0,message:"Please input fistName"}],lastName:[{required:!0,message:"Please input lastName"}],username:[{required:!0,message:"Please input username"}],country:[{required:!0,message:"Please select country"}],phone:[{required:!0,message:"Please input phone"}],extraInfoVoList:[{required:!0,message:"Please select extraInfoVoList"}],password:[{required:!0,message:"Please input password"}],role:[{required:!0,message:"Please select role"}],groupId:[{required:!0,message:"Please select group"}]}}},created:function(){2===this.$store.state.user.info.userRole&&(this.userList=[{text:"BM",value:2},{text:"Sales",value:3}]),this.init()},methods:{pageListFn:function(){var e=this,t={currentPage:this.pagination.current,pageSize:1e3};this.loading=!0,Object(p["f"])(t).then((function(t){var a;e.userList=null===(a=t.data.records)||void 0===a?void 0:a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isActivatedtext:e.isActivated?"effective":"invalid",Actions:"",authorization:""})})),e.pagination.total=t.data.total,e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},init:function(){var e=this;Object(d["a"])().then((function(t){e.countryList=t.data})).catch((function(t){e.$message.error(t)})),this.editData.id&&(this.form={fistName:this.editData.firstname,lastName:this.editData.lastname,phone:this.editData.phone,email:this.editData.email,country:this.editData.region,username:this.editData.username,role:this.editData.role,groupId:Number(this.editData.groupId),password:this.editData.password},this.queryEnableGroupFun())},queryEnableGroupFun:function(){var e=this;Object(m["g"])({role:this.form.role}).then((function(t){e.groupList=t.data})).catch((function(t){e.$message.error(t)}))},contactsCreateFun:function(){var e=this;this.loading=!0;var t=this.getParams();Object(m["a"])(t).then((function(t){e.$emit("serviceOk")})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},contactsUpdateFun:function(){var e=this;this.loading=!0;var t=this.getParams();t.id=this.editData.id,Object(m["e"])(t).then((function(t){e.$emit("serviceOk")})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},getParams:function(){var e={firstname:this.form.fistName,lastname:this.form.lastName,phone:this.form.phone,email:this.form.email,region:this.form.country,username:this.form.username,role:this.form.role,groupId:this.form.groupId,password:this.form.password};return e},serviceOk:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;e.editData.id?e.contactsUpdateFun():e.contactsCreateFun()}))},addAttribute:function(){this.form.extraInfoVoList.push(this.extraInfoVo())},deleteExtra:function(e){this.form.extraInfoVoList.splice(e,1)}}}),O=F,_=(a("04c0"),Object(g["a"])(O,N,S,!1,null,"11ce4788",null)),P=_.exports,I={name:"Group",components:{AddGroup:P},props:{groupData:{type:Object,default:function(){return{}}}},data:function(){return{groupName:"",tableList:[],userList:[],visibleSearch:!1,columns:[{title:"Group Name",dataIndex:"groupName"},{title:"Number",dataIndex:"count"},{title:"Leaders",dataIndex:"leader"},{title:"Actions",dataIndex:"Edit",scopedSlots:{customRender:"Edit"}}],userListStatus:[{text:"admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],loading:!1,pagination:{current:1,pageSize:10,total:0},userRole:this.$store.state.user.info.userRole,newData:{},checkMembers:[],title:"",setList:[],selectGroupName:"",isBatchMoveGroupMember:!1,editData:{},select:void 0}},created:function(){this.init()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{resetPassWord:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"reset ",content:"Are you sure to reset?",onOk:function(){t.resetPwdFun(e.id)}})},resetPwdFun:function(e){var t=this;resetPwd({id:e}).then((function(e){t.init()})).catch((function(e){t.$message.error(e)}))},getRoleText:function(e){var t=this.userListStatus.find((function(t){return t.value==e}));return t.text},editPage:function(e){this.title="Edit Agent",this.visibleSearch=!0,this.editData=e},addAgent:function(){this.title="Add New Agent",this.visibleSearch=!0,this.editData={}},deletePage:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"Are you sure to delete?",onOk:function(){t.contactsDeleteFun(e.id)}})},contactsDeleteFun:function(e){var t=this,a={id:e};delAccount(a).then((function(e){t.$emit("editSuccess")})).catch((function(e){t.$message.error(e)}))},changeTab:function(e){var t=e.current;this.pagination.current=t,this.init()},init:function(){var e=this;this.pagination.current,this.pagination.pageSize;this.loading=!0,Object(x["d"])().then((function(t){e.setList=e.tableList=t.data})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},editGroup:function(e){this.groupName=e,this.title="Edit Group",this.visibleSearch=!0,this.groupName=e},deleteGroup:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"Are you sure to delete?",onOk:function(){t.loading=!0,Object(x["c"])({id:e}).then((function(e){t.loading=!1,t.$message.success("Delete Group Success!"),t.init()})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))}})},batchMoveGroupMemberFn:function(){var e=this;if(!this.select||this.checkMembers.length<1)this.$message.warning("Please select");else{var t={groupId:this.select,ids:this.checkMembers};this.loading=!0,Object(x["b"])(t).then((function(t){e.isBatchMoveGroupMember=!1,e.select="",e.$message.success("Move Success!"),e.init()})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))}},checkAll:function(e){if(e.target.checked){var t=[];this.userList.map((function(e){t.push(e.id)})),this.checkMembers=t}else this.checkMembers=[]},showBatchMoveGroupMember:function(e){var t=this,a={currentPage:1,pageSize:9999,groupId:e};this.loading=!0,Object(y["b"])(a).then((function(e){t.userList=e.data.list,t.loading=!1,t.checkMembers=[],t.isBatchMoveGroupMember=!0})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))},cancel:function(){this.isBatchMoveGroupMember=!1,this.checkMembers=[],this.select=""},addGroupNotarize:function(){var e=this;this.groupName?(this.loading=!0,Object(x["a"])({groupName:this.groupName}).then((function(t){e.$message.success("Add Group Success!"),e.visibleSearch=!1,e.init()})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))):this.$message.error("No Group Name!")},changeComponent:function(e){this.selectGroupName=e.groupName,this.$emit("changeComponent",e)},addGroup:function(){this.groupName="",this.title="Add New Group",this.visibleSearch=!0,this.editData={}},serviceOk:function(){this.pagination.current=1,this.visibleSearch=!1,this.$message.success("success"),this.init()}},watch:{groupData:function(e){this.groupName=e.groupName,this.pagination.current=1,this.newData=e,this.init()}}},T=I,z=(a("d8fb"),Object(g["a"])(T,w,$,!1,null,"91091a8c",null)),C=z.exports,j=(a("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-wrap"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-but"},[t("h2",[e._v("role "+e._s(e.pagination.total))])])]),t("section",{staticClass:"section"},[t("a-table",{staticClass:"table",attrs:{columns:e.columns,rowKey:"id",loading:e.loading,dataSource:e.userList,pagination:e.pagination},on:{change:e.changeTab},scopedSlots:e._u([{key:"role",fn:function(a){return t("div",{},[e._v(" "+e._s(e.getRoleText(a))+" ")])}},{key:"authorization",fn:function(a,i){return t("div",{},[t("a-button",{attrs:{type:"link",disabled:e.Actions||!i.isActivated},on:{click:function(t){return e.authSystem(i)}}},[e._v("System authorization")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions||!i.isActivated},on:{click:function(t){return e.dataPage(i)}}},[e._v("data permission")]),e._v("  ")],1)}},{key:"Edit",fn:function(a,i){return t("div",{},[t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.editPage(i)}}},[e._v("Edit")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.deletePage(i)}}},[e._v("Delete")]),e._v("  ")],1)}}])})],1),t("a-modal",{attrs:{width:"600px",title:e.title,okText:"Save",confirmLoading:e.confirmLoading,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleSearch=!1},ok:e.submitKeyword},model:{value:e.visibleSearch,callback:function(t){e.visibleSearch=t},expression:"visibleSearch"}},[t("a-form-model",e._b({ref:"ruleForm",attrs:{rules:e.rules,model:e.modalForm}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{label:"role Name",prop:"ruleName"}},[t("a-input",{attrs:{placeholder:"place input",maxLength:50},model:{value:e.modalForm.ruleName,callback:function(t){e.$set(e.modalForm,"ruleName",t)},expression:"modalForm.ruleName"}})],1),t("a-form-model-item",{attrs:{label:"remark",prop:"ruleDesc"}},[t("a-textarea",{attrs:{placeholder:"place input",maxLength:50,autoSize:{minRows:5,maxRows:5}},model:{value:e.modalForm.ruleDesc,callback:function(t){e.$set(e.modalForm,"ruleDesc",t)},expression:"modalForm.ruleDesc"}})],1),e.editData.id?t("a-form-model-item",{attrs:{label:"state",prop:"isActivated"}},[t("a-radio-group",{on:{change:e.onChange},model:{value:e.modalForm.isActivated,callback:function(t){e.$set(e.modalForm,"isActivated",t)},expression:"modalForm.isActivated"}},[t("a-radio",{style:e.radioStyle,attrs:{value:1}},[e._v(" effective ")]),t("a-radio",{style:e.radioStyle,attrs:{value:0}},[e._v(" invalid ")])],1)],1):e._e()],1)],1),t("a-modal",{attrs:{width:"600px",title:e.authTitle,confirmLoading:e.authLoading,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleAuth=!1},ok:e.submitAuth},model:{value:e.visibleAuth,callback:function(t){e.visibleAuth=t},expression:"visibleAuth"}},[t("a-form-model",e._b({ref:"ruleAuthForm",staticClass:"form-wrap",attrs:{model:e.modalAuthForm}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{label:"System authorization",prop:"permissionIdList"}},[t("a-tree",{attrs:{defaultExpandAll:"",checkable:"",checkStrictly:"","tree-data":e.pageTree},model:{value:e.modalAuthForm.permissionIdList,callback:function(t){e.$set(e.modalAuthForm,"permissionIdList",t)},expression:"modalAuthForm.permissionIdList"}})],1)],1)],1),t("a-modal",{attrs:{width:"600px",title:e.authTitle,confirmLoading:e.dataLoading,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleData=!1},ok:e.submitData},model:{value:e.visibleData,callback:function(t){e.visibleData=t},expression:"visibleData"}},[t("a-form-model",e._b({},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{label:"data List"}},[e._v(" data permission ")]),e._l(e.dataList,(function(a,i){return t("a-form-model-item",{key:i,attrs:{label:a.name,prop:"permissionIdList"}},[t("a-radio-group",{attrs:{name:"radioGroup"},model:{value:a.dataPermissionType,callback:function(t){e.$set(a,"dataPermissionType",t)},expression:"item.dataPermissionType"}},[t("a-radio",{attrs:{value:3}},[e._v(" All ")]),t("a-radio",{attrs:{value:2}},[e._v(" Same department ")]),t("a-radio",{attrs:{value:1}},[e._v(" oneself ")])],1)],1)}))],2)],1)],1)}),G=[],M=a("2909"),R=(a("99af"),a("b775")),q={pageList:"/permission/page",pageCreate:"/permission/addOrUpdate",pageDetele:"/permission/delete",authorizationDataList:"/permission/authorizationDataList",authorizationIdList:"/permission/authorizationIdList",authorizationAllTree:"/permission/tree"};function E(e){return Object(R["b"])({url:q.pageList,method:"post",data:e})}function B(e){return Object(R["b"])({url:q.pageCreate,method:"post",data:e})}function K(e){return Object(R["b"])({url:q.pageDetele,method:"get",params:e})}function U(e){return Object(R["b"])({url:q.authorizationDataList,method:"get",params:e})}function V(e){return Object(R["b"])({url:q.authorizationIdList,method:"get",params:e})}function W(e){return Object(R["b"])({url:q.authorizationAllTree,method:"get",params:e})}var J={name:"tagGroup",components:{},props:{groupData:{type:Object,default:function(){return{}}}},data:function(){return{visibleAuth:!1,authTitle:"",visibleData:!1,groupName:"",userList:[],authLoading:!1,dataLoading:!1,visibleSearch:!1,editData:{},layout:{labelCol:{span:6},wrapperCol:{span:14}},columns:[{title:"Character name",dataIndex:"ruleName",width:"200px"},{title:"note",dataIndex:"ruleDesc",width:"200px"},{title:"state",dataIndex:"isActivatedtext"},{title:"authorization",dataIndex:"authorization",scopedSlots:{customRender:"authorization"}}],userListStatus:[{text:"admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],loading:!1,pagination:{current:1,pageSize:10,total:0},userRole:this.$store.state.user.info.userRole,title:"Add New Agent",newData:{},confirmLoading:!1,modalForm:{ruleName:void 0,ruleDesc:void 0,isActivated:1},modalAuthForm:{permissionIdList:{}},rules:{ruleName:[{required:!0,message:"Please input name"}]},pageTree:[],ruleId:"",dataList:[],checkedKeysResult:[]}},created:function(){this.init(),this.authorizationTreeFn()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{dataPage:function(e){var t=this;this.ruleId=e.id,this.authTitle="Data permission Setting: ".concat(e.ruleName),U({ruleId:e.id}).then((function(e){var a;t.dataList=null===(a=e.data)||void 0===a?void 0:a.map((function(e){return Object(s["a"])({},e)})),t.visibleData=!0})).catch((function(e){t.$message.error(e)}))},authorizationTreeFn:function(){var e=this;W().then((function(t){e.pageTree=e.getTree(t.data)})).catch((function(t){e.$message.error(t)}))},getTree:function(e){var t=this;return null===e||void 0===e?void 0:e.map((function(e){var a,i,o;return{title:null===(a=e.data)||void 0===a?void 0:a.name,value:null===(i=e.data)||void 0===i?void 0:i.id,key:null===(o=e.data)||void 0===o?void 0:o.id,children:t.getTree(e.children)}}))},onCheckFn:function(e,t){this.checkedKeysResult=[].concat(Object(M["a"])(e),Object(M["a"])(t.halfCheckedKeys))},submitAuth:function(){var e=this,t={ruleId:this.ruleId,permissionIdList:this.modalAuthForm.permissionIdList.checked};this.authLoading=!0,Object(p["b"])(t).then((function(t){e.$message.success("success"),e.visibleAuth=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.authLoading=!1}))},submitData:function(){var e,t=this,a=null===(e=this.dataList)||void 0===e?void 0:e.map((function(e){return{ruleId:t.ruleId,dataPermissionType:e.dataPermissionType,id:e.id,permissionId:e.permissionId}}));this.dataLoading=!0,Object(p["c"])(a).then((function(e){t.$message.success("success"),t.visibleData=!1})).catch((function(e){t.$message.error(e)})).finally((function(){t.dataLoading=!1}))},authSystem:function(e){this.authTitle="System authorization: ".concat(e.ruleName),this.ruleId=e.id,this.authorizationDataListFn(e.id)},authorizationDataListFn:function(e){var t=this;V({ruleId:e}).then((function(e){t.modalAuthForm.permissionIdList.checked=e.data,t.visibleAuth=!0})).catch((function(e){t.$message.error(e)}))},getRoleText:function(e){var t=this.userListStatus.find((function(t){return t.value==e}));return t.text},editPage:function(e){this.title="Edit Agent",this.visibleSearch=!0,this.editData=e,this.modalForm={ruleName:e.ruleName,ruleDesc:e.ruleDesc,isActivated:Number(e.isActivated)}},addAgent:function(){this.title="Add New Agent",this.visibleSearch=!0,this.editData={},this.modalForm={ruleName:void 0,ruleDesc:void 0,isActivated:1}},serviceOk:function(){this.pagination.current=1,this.visibleSearch=!1,this.$message.success("success"),this.$emit("editSuccess")},deletePage:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"After deletion, the person associated with the role will not have permission to access the system",onOk:function(){t.contactsDeleteFun(e.id)}})},contactsDeleteFun:function(e){var t=this,a={id:e};Object(p["e"])(a).then((function(e){t.$message.success("success"),t.init()})).catch((function(e){t.$message.error(e)}))},changeTab:function(e){var t=e.current;this.pagination.current=t,this.init()},searchList:function(){this.pagination.current=1,this.init()},init:function(){var e=this,t={currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,Object(p["f"])(t).then((function(t){var a;e.userList=null===(a=t.data.records)||void 0===a?void 0:a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{isActivatedtext:e.isActivated?"effective":"invalid",Actions:"",authorization:""})})),e.pagination.total=t.data.total,e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},submitKeyword:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a=Object(s["a"])(Object(s["a"])({},e.modalForm),{},{isActivated:Boolean(e.modalForm.isActivated)});e.confirmLoading=!0,e.editData.id?e.editKeywordFn(a):e.addKeywordFn(a)}))},addKeywordFn:function(e){var t=this;Object(p["d"])(e).then((function(e){t.visibleSearch=!1,t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))},editKeywordFn:function(e){var t=this;e.id=this.editData.id,Object(p["d"])(e).then((function(e){t.visibleSearch=!1,t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))}},watch:{groupData:function(e){this.groupName=e.groupName,this.pagination.current=1,this.newData=e,this.init()}}},H=J,Q=(a("2584"),Object(g["a"])(H,j,G,!1,null,"0d74255c",null)),X=Q.exports,Y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"team-wrap"},[t("header",{staticClass:"header"},[t("div",{staticClass:"header-but"},[t("h2",[e._v("Permission "+e._s(e.pagination.total))]),t("a-button",{attrs:{type:"primary",size:"large",disabled:e.Actions},on:{click:e.addAgent}},[e._v("Add Permission")])],1)]),t("section",{staticClass:"section"},[t("a-table",{staticClass:"table",attrs:{columns:e.columns,rowKey:"id",loading:e.loading,dataSource:e.userList,pagination:e.pagination},on:{change:e.changeTab},scopedSlots:e._u([{key:"permissionType",fn:function(a){return t("div",{},[e._v(" "+e._s(e.permissionTypeList[a].text)+" ")])}},{key:"Edit",fn:function(a,i){return t("div",{},[t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.editPage(i)}}},[e._v("Edit")]),e._v("  "),t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.deletePage(i)}}},[e._v("Delete")]),e._v("  ")],1)}}])})],1),t("a-modal",{attrs:{width:"600px",okText:"Save",title:e.title,confirmLoading:e.confirmLoading,centered:"",destroyOnClose:""},on:{cancel:function(t){e.visibleSearch=!1},ok:e.submitKeyword},model:{value:e.visibleSearch,callback:function(t){e.visibleSearch=t},expression:"visibleSearch"}},[t("a-form-model",e._b({ref:"ruleForm",attrs:{rules:e.rules,model:e.modalForm}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{label:"system"}},[e._v(" SCRM ")]),t("a-form-model-item",{attrs:{label:"page",prop:"belongPage"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",filterTreeNode:e.filterOption,"allow-clear":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.pageTree,placeholder:"Please select"},model:{value:e.modalForm.belongPage,callback:function(t){e.$set(e.modalForm,"belongPage",t)},expression:"modalForm.belongPage"}})],1),t("a-form-model-item",{attrs:{label:"program name",prop:"name"}},[t("a-input",{attrs:{placeholder:"place input",maxLength:50},model:{value:e.modalForm.name,callback:function(t){e.$set(e.modalForm,"name",t)},expression:"modalForm.name"}})],1),t("a-form-model-item",{attrs:{label:"Permission types",prop:"permissionType"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"place select"},model:{value:e.modalForm.permissionType,callback:function(t){e.$set(e.modalForm,"permissionType",t)},expression:"modalForm.permissionType"}},e._l(e.permissionTypeList,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.text)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"Page address",prop:"pagePath"}},[t("a-input",{attrs:{placeholder:"place input",maxLength:50},model:{value:e.modalForm.pagePath,callback:function(t){e.$set(e.modalForm,"pagePath",t)},expression:"modalForm.pagePath"}})],1),t("a-form-model-item",{attrs:{label:"Menu Order",prop:"pageIndex"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"place input",min:0,max:1e3},model:{value:e.modalForm.pageIndex,callback:function(t){e.$set(e.modalForm,"pageIndex",t)},expression:"modalForm.pageIndex"}})],1),t("a-form-model-item",{attrs:{label:"Using roles",prop:"usersDesc"}},[t("a-input",{attrs:{placeholder:"place input",maxLength:50},model:{value:e.modalForm.usersDesc,callback:function(t){e.$set(e.modalForm,"usersDesc",t)},expression:"modalForm.usersDesc"}})],1),t("a-form-model-item",{attrs:{label:"description",prop:"permissionDesc"}},[t("a-input",{attrs:{placeholder:"place input",maxLength:50},model:{value:e.modalForm.permissionDesc,callback:function(t){e.$set(e.modalForm,"permissionDesc",t)},expression:"modalForm.permissionDesc"}})],1)],1)],1)],1)},Z=[],ee={name:"tagGroup",components:{},props:{groupData:{type:Object,default:function(){return{}}}},data:function(){return{groupName:"",userList:[],visibleSearch:!1,editData:{},layout:{labelCol:{span:6},wrapperCol:{span:14}},columns:[{title:"system",dataIndex:"system"},{title:"program name",dataIndex:"name",width:200},{title:"page",dataIndex:"belongPageName",customRender:function(e,t){return e||"-"}},{title:"Permission types",dataIndex:"permissionType",scopedSlots:{customRender:"permissionType"}},{title:"Permissions described",dataIndex:"permissionDesc",width:200},{title:"Actions",dataIndex:"Edit",scopedSlots:{customRender:"Edit"}}],userListStatus:[{text:"admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],permissionTypeList:[{text:"Ordinary permissions",value:0},{text:"data permission",value:1}],loading:!1,pagination:{current:1,pageSize:10,total:0},userRole:this.$store.state.user.info.userRole,title:"Add Permission",newData:{},confirmLoading:!1,modalForm:{belongPage:void 0,belongSystem:1,name:void 0,pageIndex:void 0,pagePath:void 0,permissionDesc:void 0,permissionType:void 0,usersDesc:void 0},rules:{name:[{required:!0,message:"Please input name",whitespace:!0}],belongPage:[{required:!1,message:"Please select page"}],permissionType:[{required:!0,message:"Please select permission type"}]},pageTree:[]}},created:function(){this.init()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{filterOption:function(e,t){return t.data.props.title.indexOf(e)>-1},authorizationAllTreeFn:function(e){var t=this;W().then((function(a){t.pageTree=t.getTree(a.data),e&&e()})).catch((function(e){t.$message.error(e)}))},getTree:function(e){var t=this;return null===e||void 0===e?void 0:e.map((function(e){var a,i,o;return{title:null===(a=e.data)||void 0===a?void 0:a.name,value:null===(i=e.data)||void 0===i?void 0:i.id,key:null===(o=e.data)||void 0===o?void 0:o.id,children:t.getTree(e.children)}}))},editPage:function(e){var t=this;this.authorizationAllTreeFn((function(){t.title="Edit Permission",t.visibleSearch=!0,t.editData=e,t.modalForm=Object(s["a"])(Object(s["a"])({},t.modalForm),e)}))},addAgent:function(){var e=this;this.authorizationAllTreeFn((function(){e.title="Add Permission",e.visibleSearch=!0,e.editData={},e.modalForm={}}))},serviceOk:function(){this.pagination.current=1,this.visibleSearch=!1,this.$message.success("success"),this.$emit("editSuccess")},deletePage:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"After this permission is deleted, functions corresponding to this permission will not be displayed on the page",onOk:function(){t.contactsDeleteFun(e.id)}})},contactsDeleteFun:function(e){var t=this,a={id:e};K(a).then((function(e){t.$message.success("success "),t.init()})).catch((function(e){t.$message.error(e)}))},changeTab:function(e){var t=e.current;this.pagination.current=t,this.init()},searchList:function(){this.pagination.current=1,this.init()},init:function(){var e=this,t={currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,E(t).then((function(t){var a;e.userList=null===(a=t.data.records)||void 0===a?void 0:a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{system:e.system||"SCRM"})})),e.pagination.total=t.data.total,e.loading=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},submitKeyword:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a={belongPage:e.modalForm.belongPage,belongSystem:1,name:e.modalForm.name,pageIndex:e.modalForm.pageIndex,pagePath:e.modalForm.pagePath,permissionDesc:e.modalForm.permissionDesc,permissionType:e.modalForm.permissionType,usersDesc:e.modalForm.usersDesc};e.confirmLoading=!0,e.editData.id?e.editKeywordFn(a):e.addKeywordFn(a)}))},addKeywordFn:function(e){var t=this;B(e).then((function(e){t.visibleSearch=!1,t.$message.success("success"),t.init()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))},editKeywordFn:function(e){var t=this;e.id=this.editData.id,B(e).then((function(e){t.visibleSearch=!1,t.$message.success("success"),t.init()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))}},watch:{groupData:function(e){this.groupName=e.groupName,this.pagination.current=1,this.newData=e,this.init()}}},te=ee,ae=(a("ae6b"),Object(g["a"])(te,Y,Z,!1,null,"653af842",null)),ie=ae.exports,oe={name:"MemberManagement",components:{Group:D,accountGroup:C,role:X,configuration:ie},data:function(){return{groupData:{}}},created:function(){},methods:{changeTab:function(e){var t;3==e&&(null===(t=this.$refs.role)||void 0===t||t.authorizationTreeFn())}}},ne=oe,re=(a("c24c"),Object(g["a"])(ne,i,o,!1,null,"ea011612",null));t["default"]=re.exports},"5dbd":function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return u}));var i=a("b775"),o={pageList:"/rule/page",activatedRuleList:"/rule/activatedRuleList",pageCreate:"/rule/addOrUpdate",pageDetele:"/rule/delete",authorizationAddOrDelete:"/rule/authorization/addOrDelete",authorizationUpdate:"/rule/authorization/update"};function n(e){return Object(i["b"])({url:o.pageList,method:"post",data:e})}function r(e){return Object(i["b"])({url:o.activatedRuleList,method:"post",data:e})}function s(e){return Object(i["b"])({url:o.pageCreate,method:"post",data:e})}function l(e){return Object(i["b"])({url:o.pageDetele,method:"get",params:e})}function c(e){return Object(i["b"])({url:o.authorizationAddOrDelete,method:"post",data:e})}function u(e){return Object(i["b"])({url:o.authorizationUpdate,method:"post",data:e})}},"86b9":function(e,t,a){},aa48:function(e,t,a){"use strict";a("86b9")},ae6b:function(e,t,a){"use strict";a("03b4")},c1e5:function(e,t,a){},c24c:function(e,t,a){"use strict";a("ca2f")},ca2f:function(e,t,a){},d5a7:function(e,t,a){},d8fb:function(e,t,a){"use strict";a("c1e5")}}]);