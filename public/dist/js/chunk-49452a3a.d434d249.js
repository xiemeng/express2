(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49452a3a"],{"4c64":function(t,e,a){"use strict";a("ddd4")},8122:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("header",{staticClass:"header"},[e("a-space",{attrs:{size:12}},[e("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$router.push({name:"NewGroupWelcome",query:{state:"add"}})}}},[t._v("新建入群欢迎语")])],1),e("a-input-search",{staticClass:"search-name",attrs:{allowClear:"",placeholder:"请输入要搜索的欢迎语"},on:{search:t.searchName},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),e("div",{staticClass:"all-num"},[t._v("共"+t._s(t.pagination.total)+"条素材")]),e("a-table",{staticClass:"background-white",attrs:{columns:t.columns,"data-source":t.fSend,pagination:t.pagination,loading:t.loading},on:{change:t.changePage},scopedSlots:t._u([{key:"templateContent",fn:function(a){return e("div",{},[e("ul",{staticClass:"title-contant"},t._l(a,(function(a,n,o){return e("li",{key:n},["text"===n&&a.content?[e("span",{staticClass:"list-label"},[t._v("消息"+t._s(o+1)+":")]),e("div",{staticClass:"list-contant"},[t._v(t._s(a.content))])]:t._e(),"image"===n?[e("span",{staticClass:"list-label"},[t._v("消息"+t._s(o+1))]),e("div",[e("a-avatar",{attrs:{src:a.pic_url,shape:"square"}})],1)]:t._e(),"link"===n?[e("span",{staticClass:"list-label"},[t._v("消息"+t._s(o+1))]),e("div",[e("span",{staticClass:"green"},[t._v("[图文消息]")]),t._v(" "+t._s(a.desc)+" ")])]:t._e()],2)})),0)])}},{key:"creatorName",fn:function(a){return e("div",{staticClass:"tag-list"},[e("a-tag",[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(a)+" ")],1)],1)}},{key:"operation",fn:function(a){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.openCodeDetail(a)}}},[t._v("详情")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"NewGroupWelcome",query:{state:"edit",welcomeId:a.welcomesId}})}}},[t._v("编辑")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteWelcome(a)}}},[t._v("删除")])],1)}}])}),e("a-modal",{attrs:{visible:t.visibleCodeTetail,footer:null,width:"600px",centered:""},on:{cancel:function(e){t.visibleCodeTetail=!1}}},[e("WelcomeDetail",{attrs:{groupDetail:t.selectData}})],1)],1)},o=[],i=a("5530"),s=(a("d3b7"),a("d81d"),function(){var t=this,e=t._self._c;return e("div",[e("h4",{staticClass:"dialog-title"},[t._v("入群欢迎语素材详情")]),e("a-form-model",{attrs:{"label-col":{span:4},"wrapper-col":{span:12}}},[e("div",{staticClass:"base-info"},[e("div",{staticClass:"bar"}),e("p",[t._v("基本设置")])]),e("a-form-model-item",{attrs:{label:"类型"}},[t._v(" "+t._s(t.groupDetail.type)+" ")]),e("a-form-model-item",{attrs:{label:"创建人"}},[e("a-tag",[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(t.groupDetail.createName)+" ")],1)],1),e("a-form-model-item",{attrs:{label:"创建时间"}},[t._v(" "+t._s(t.groupDetail.createTime)+" ")]),e("div",{staticClass:"base-info"},[e("div",{staticClass:"bar"}),e("p",[t._v("欢迎语设置")])]),e("a-form-model-item",{attrs:{label:"消息1"}},[t._v(" "+t._s(t.groupDetail.firstContent)+" ")])],1)],1)}),r=[],l={name:"WelcomeDetail",props:{groupDetail:{type:[Object],default:function(){return{}}}}},c=l,u=(a("dedc"),a("2877")),d=Object(u["a"])(c,s,r,!1,null,"7259401c",null),p=d.exports,g=a("9ade"),m={name:"GroupWelcome",components:{WelcomeDetail:p},data:function(){return{fSend:[],loading:!1,keywords:"",selectData:"",visibleCodeTetail:!1,pagination:{current:1,pageSize:10,total:0},columns:[{title:"入群欢迎语",key:"templateContent",dataIndex:"templateContent",scopedSlots:{customRender:"templateContent"}},{title:"类型",key:"type",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"创建人",key:"creatorName",dataIndex:"creatorName",scopedSlots:{customRender:"creatorName"}},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"operation",align:"right",dataIndex:"operation",scopedSlots:{customRender:"operation"}}]}},activated:function(){this.getPage()},methods:{openCodeDetail:function(t){this.selectData=t,this.visibleCodeTetail=!0},searchName:function(){this.getPage()},changePage:function(t){var e=t.current;this.pagination.current=e,this.getPage()},deleteWelcome:function(t){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"确定要删除此欢迎语吗？",onOk:function(){e.deletePage(t)}})},deletePage:function(t){var e=this;this.loading=!0,Object(g["b"])({welcomesId:t.welcomesId,templateId:t.templateId}).then((function(t){var a;1===(null===(a=e.fSend)||void 0===a?void 0:a.length)&&(e.pagination.current=e.pagination.current-1||1),e.getPage(),e.$message.success("删除成功")})).catch((function(t){e.$message.error(t)})).finally((function(){return e.loading=!1}))},getPage:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,keyword:this.keywords};this.loading=!0,Object(g["d"])(e).then((function(e){null!==e&&void 0!==e&&e.data&&(t.pagination.total=e.data.total,t.fSend=e.data.list.map((function(t){var e=Object(i["a"])(Object(i["a"])({},t),{},{templateContent:JSON.parse(t.templateContent),key:String(t.welcomesId)});return e.operation=e,e})))})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))}}},f=m,v=(a("4c64"),Object(u["a"])(f,n,o,!1,null,"fafb471a",null));e["default"]=v.exports},"9ade":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return l})),a.d(e,"e",(function(){return c}));var n=a("b775"),o={getPage:"/client_group/group/welcomes/get",deletePage:"/client_group/group/welcomes/delete",addPage:"/client_group/group/welcomes/add",detailPage:"/client_group/group/welcomes/detail",updatePage:"/client_group/group/welcomes/update"};function i(t){return Object(n["b"])({url:o.getPage,method:"get",params:t})}function s(t){return Object(n["b"])({url:o.deletePage,method:"get",params:t})}function r(t){return Object(n["b"])({url:o.addPage,method:"post",data:t})}function l(t){return Object(n["b"])({url:o.detailPage,method:"get",params:t})}function c(t){return Object(n["b"])({url:o.updatePage,method:"post",data:t})}},ac1b:function(t,e,a){},ddd4:function(t,e,a){},dedc:function(t,e,a){"use strict";a("ac1b")}}]);