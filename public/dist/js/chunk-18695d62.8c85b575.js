(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18695d62"],{"1c9c":function(t,e,i){"use strict";i.d(e,"s",(function(){return r})),i.d(e,"e",(function(){return s})),i.d(e,"t",(function(){return o})),i.d(e,"j",(function(){return c})),i.d(e,"n",(function(){return l})),i.d(e,"y",(function(){return u})),i.d(e,"w",(function(){return d})),i.d(e,"g",(function(){return f})),i.d(e,"B",(function(){return p})),i.d(e,"c",(function(){return m})),i.d(e,"h",(function(){return h})),i.d(e,"a",(function(){return g})),i.d(e,"q",(function(){return v})),i.d(e,"i",(function(){return b})),i.d(e,"v",(function(){return y})),i.d(e,"p",(function(){return x})),i.d(e,"b",(function(){return S})),i.d(e,"l",(function(){return C})),i.d(e,"m",(function(){return O})),i.d(e,"z",(function(){return w})),i.d(e,"C",(function(){return k})),i.d(e,"k",(function(){return _})),i.d(e,"A",(function(){return D})),i.d(e,"x",(function(){return j})),i.d(e,"r",(function(){return I})),i.d(e,"o",(function(){return R})),i.d(e,"d",(function(){return L})),i.d(e,"f",(function(){return T})),i.d(e,"u",(function(){return N}));var n=i("b775"),a={staff:"/enterprise/role/staff",roleList:"/enterprise/role",roleResource:"/enterprise/role/getRoleResource",syncAll:"/enterprise/staff/syncAll",getCustGrpList:"/client_group/customerGroup/getCustGrpList",changeRole:"/enterprise/role/change",departmentStaff:"/enterprise/department/staff",addStaffRole:"/enterprise/role/addStaffRole",getQuitStaff:"/client_manager/transfer/getQuitStaff",getStaff:"/enterprise/staff/get",department:"/enterprise/department",getDepartmentStaff:"/enterprise/department/getStaff",loginAdmin:"/enterprise/staff/loginAdmin",getRoleRes:"/enterprise/role/getRoleRes",changeRes:"/enterprise/role/change/res",getPermissionLog:"/enterprise/permissionLog/query",staffInfo:"/enterprise/staff/statistics/get/staffInfo",yesterdayData:"/enterprise/staff/statistics/get/yesterdayData",getDate:"/enterprise/staff/statistics/get/date",editDelConfig:"/client_manager/customerdelremind/editDelConfig",queryDelConfig:"/client_manager/customerdelremind/queryDelConfig",customStage:"/enterprise/staff/statistics/get/stage",idOrUserIdGet:"/enterprise/staff/idOrUserIdGet",staffOKR:"/enterprise/staffOKR/staffOKR",saveOKR:"/enterprise/staffOKR/save",getStaffOKRList:"/enterprise/staffOKR/getStaffOKRList",getRepeatList:"/enterprise/staffOKR/getRepeatList",checkTime:"enterprise/staffOKR/checkTime",delOkr:"/enterprise/staffOKR/del",modify:"/enterprise/staffOKR/modify"};function r(t){return Object(n["b"])({url:a.idOrUserIdGet,method:"get",params:t})}function s(t){return Object(n["b"])({url:a.customStage,method:"get",params:t})}function o(t){return Object(n["b"])({url:a.loginAdmin,method:"get",params:t})}function c(t){return Object(n["b"])({url:a.getCustGrpList,method:"post",data:t})}function l(t){return Object(n["b"])({url:a.getQuitStaff,method:"get",params:t})}function u(t){return Object(n["b"])({url:a.staff,method:"get",params:t})}function d(){return Object(n["b"])({url:a.roleList,method:"get"})}function f(){return Object(n["b"])({url:a.department,method:"get"})}function p(){return Object(n["b"])({url:a.syncAll,method:"get"})}function m(t){return Object(n["b"])({url:a.changeRole,method:"get",params:t})}function h(){return Object(n["b"])({url:a.departmentStaff,method:"get"})}function g(t){return Object(n["b"])({url:a.addStaffRole,method:"post",data:t})}function v(t){return Object(n["b"])({url:a.getStaff,method:"get",params:t})}function b(t){return Object(n["b"])({url:a.editDelConfig,method:"post",data:t})}function y(t){return Object(n["b"])({url:a.queryDelConfig,method:"post",data:t})}function x(t){return Object(n["b"])({url:a.getRoleRes,method:"get",params:t})}function S(t){return Object(n["b"])({url:a.changeRes,method:"post",data:t})}function C(t){return Object(n["b"])({url:a.getDepartmentStaff,method:"get",params:t})}function O(t){return Object(n["b"])({url:a.getPermissionLog,method:"post",data:t})}function w(t){return Object(n["b"])({url:a.staffInfo,method:"get",params:t})}function k(t){return Object(n["b"])({url:a.yesterdayData,method:"get",params:t})}function _(t){return Object(n["b"])({url:a.getDate,method:"get",params:t})}function D(t){return Object(n["b"])({url:a.staffOKR,method:"get",params:t})}function j(t){return Object(n["b"])({url:a.saveOKR,method:"post",data:t})}function I(t){return Object(n["b"])({url:a.getStaffOKRList,method:"get",params:t})}function R(t){return Object(n["b"])({url:a.getRepeatList,method:"get",params:t})}function L(t){return Object(n["b"])({url:a.checkTime,method:"get",params:t})}function T(t){return Object(n["b"])({url:a.delOkr,method:"post",data:t})}function N(t){return Object(n["b"])({url:a.modify,method:"post",data:t})}},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=i("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||r(t)||Object(s["a"])(t)||o()}},"32ef":function(t,e,i){t.exports=i.p+"assets/upload-file.a5a8ceeb.svg"},4658:function(t,e,i){"use strict";i("82d6")},"487a":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var i,n,a,r,s,o=function(){t.apply(r,s),n=i};return function(){if(r=this,s=arguments,i=Date.now(),a&&(clearTimeout(a),a=null),n){var t=e-(i-n);t<0?o():a=setTimeout((function(){o()}),t)}else o()}},i=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},n=document.defaultView.getComputedStyle,a=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var i=n(e).overflowY;if("scroll"===i||"auto"===i)return e;e=e.parentNode}return window},r=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?i(window):t.getBoundingClientRect().top+i(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,i=t.el,n=i.getAttribute("infinite-scroll-throttle-delay"),r=200;n&&(r=Number(t.vm[n]||n),(isNaN(r)||r<0)&&(r=200)),t.throttleDelay=r,t.scrollEventTarget=a(i),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=i.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var c=i.getAttribute("infinite-scroll-distance"),u=0;c&&(u=Number(t.vm[c]||c),isNaN(u)&&(u=0)),t.distance=u;var d=i.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&l.call(t);var p=i.getAttribute("infinite-scroll-listen-for-event");p&&t.vm.$on(p,(function(){l.call(t)}))}},l=function(t){var e=this.scrollEventTarget,n=this.el,a=this.distance;if(!0===t||!this.disabled){var o=i(e),c=o+r(e),l=!1;if(e===n)l=e.scrollHeight-c<=a;else{var u=s(n)-s(e)+n.offsetHeight+o;l=c+a>=u}l&&this.expression&&this.expression()}},u={bind:function(e,i,n){e[t]={el:e,vm:n.context,expression:i.value};var a=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&c.call(e[t],a),e[t].bindTryCount=0;var i=function i(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?c.call(e[t],a):setTimeout(i,50))};i()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u}))},"4cf4":function(t,e,i){},"58c3":function(t,e,i){"use strict";i.d(e,"d",(function(){return r})),i.d(e,"e",(function(){return s})),i.d(e,"g",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"f",(function(){return l})),i.d(e,"h",(function(){return u})),i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return f})),i.d(e,"k",(function(){return p})),i.d(e,"i",(function(){return m})),i.d(e,"j",(function(){return h}));var n=i("b775"),a={Info:"/client_manager/blacklist/rules/Info",update:"/client_manager/blacklist/rules/update",list:"/client_manager/blacklist/list",save:"/client_manager/blacklist/save",Delete:"/client_manager/blacklist/delete",importRecodeList:"/client_manager/blacklist/importRecodeList",importCustomer:"/client_manager/blacklist/importCustomer",deleteImportRecode:"/client_manager/blacklist/deleteImportRecode",importErrorRecodeList:"/client_manager/blacklist/importErrorRecodeList",exportModel:"/client_manager/blacklist/exportModel",exportCustomer:"/client_manager/blacklist/exportCustomer"};function r(t){return Object(n["b"])({url:a.exportCustomer,method:"get",params:t,responseType:"blob"})}function s(t){return Object(n["b"])({url:a.exportModel,method:"get",params:t,responseType:"blob"})}function o(t){return Object(n["b"])({url:a.importErrorRecodeList,method:"get",params:t})}function c(t){return Object(n["b"])({url:a.deleteImportRecode,method:"post",data:t})}function l(t){return Object(n["b"])({url:a.importCustomer,method:"post",data:t})}function u(t){return Object(n["b"])({url:a.importRecodeList,method:"get",params:t})}function d(t){return Object(n["b"])({url:a.Delete,method:"post",data:t})}function f(t){return Object(n["b"])({url:a.Info,method:"get",params:t})}function p(t){return Object(n["b"])({url:a.update,method:"post",data:t})}function m(t){return Object(n["b"])({url:a.list,method:"post",data:t})}function h(t){return Object(n["b"])({url:a.save,method:"post",data:t})}},"602b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("a-tabs",{staticStyle:{background:"#fff"},attrs:{"default-active-key":"1"},on:{change:t.callback}},[e("a-tab-pane",{key:"1",attrs:{tab:"黑名单列表"}},[e("div",{staticStyle:{background:"#f0f2f5",padding:"16px"}},[e("div",{staticStyle:{background:"#fff",display:"flex","justify-content":"space-between",padding:"24px 24px 8px","margin-bottom":"16px"}},[e("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[e("span",{staticClass:"input-box"},[t._v(" 客户名称： "),e("a-input-search",{staticStyle:{width:"200px"},attrs:{allowClear:"",placeholder:"请输入客户名称"},on:{search:t.customerNameSearch},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:"customerName"}})],1),e("span",{staticClass:"input-box",staticStyle:{display:"flex",height:"32px","align-items":"center"}},[t._v(" 操作员工： "),e("SelectMultiple",{ref:"mychild",attrs:{reactflag:t.reactflag,placeholderStr:"请选择操作员工"},on:{selectCustom:t.selectCustomFunc}})],1),e("span",{staticClass:"input-box",staticStyle:{display:"flex",height:"32px","align-items":"center"}},[t._v(" 客户来源： "),e("a-select",{staticStyle:{width:"120px"},style:{width:"200px"},attrs:{allowClear:"",placeholder:"请选择客户来源"},on:{change:t.handleFinishChange},model:{value:t.clickChannelData,callback:function(e){t.clickChannelData=e},expression:"clickChannelData"}},[e("a-select-option",{attrs:{value:1}},[t._v(" 企业客户 ")]),e("a-select-option",{attrs:{value:2}},[t._v(" 未添加企业员工 ")])],1)],1),e("span",{staticClass:"input-box"},[t._v(" Unionid： "),e("a-input-search",{staticStyle:{width:"200px"},attrs:{allowClear:"",placeholder:"请输入Unionid"},on:{search:t.changeCustomInfo},model:{value:t.customerSearchVal,callback:function(e){t.customerSearchVal=e},expression:"customerSearchVal"}})],1)]),e("a-button",{on:{click:t.resetCustomerSearch}},[t._v("重置")])],1),e("div",{staticStyle:{background:"#fff",padding:"16px 24px"}},[e("a-row",{attrs:{type:"flex",justify:"space-between"}},[e("div",{staticStyle:{"align-items":"center","justify-content":"center",display:"flex"}},[e("span",{staticStyle:{"font-size":"14px","font-weight":"600",color:"rgba(18,18,22,.85)","line-height":"22px"}},[t._v("共有"+t._s(t.pagination.total)+"个客户")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticStyle:{cursor:"pointer"},on:{click:t.getCustomerLog}},[e("a-icon",{attrs:{type:"sync"}}),t._v(" 更新数据 ")],1)],1),e("div",[e("a-button",{staticStyle:{"margin-left":"12px"},attrs:{type:""},on:{click:t.getImportCustomer}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 导入客户 ")],1),e("a-button",{staticStyle:{"margin-left":"12px"},attrs:{type:""},on:{click:t.ImportRecord}},[e("a-icon",{attrs:{type:"calendar"}}),t._v(" 导入记录 ")],1),e("a-button",{staticStyle:{"margin-left":"12px"},attrs:{type:""},on:{click:t.downloadExcel}},[t._v(" 导出Excel ")])],1)])],1),e("a-table",{attrs:{columns:t.columnsCustomer,"data-source":t.customerData,pagination:t.pagination,loading:t.loadingTable},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"name",fn:function(i,n){return e("span",{},[n.customerId?e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("a-avatar",{attrs:{size:32,shape:"square",src:n.avatar}}),e("div",{staticStyle:{"margin-left":"10px"}},[e("div",[t._v(t._s(i))]),e("div",{staticStyle:{color:"#5ec75d"}},[t._v("@微信")])])],1):e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("a-avatar",{staticStyle:{background:"#1890ff"},attrs:{size:32,shape:"square"}},[t._v("外")]),e("div",{staticStyle:{"margin-left":"10px"}},[e("div",[t._v("外部联系人")])])],1)])}},{key:"operationPerson",fn:function(i){return e("span",{},[e("a-tag",{staticStyle:{"font-size":"13px","margin-right":"5px","margin-bottom":"5px"}},[e("span",{staticStyle:{color:"#7da3d1"}},[e("a-icon",{attrs:{type:"user"}})],1),t._v(" "+t._s(i)+" ")])],1)}},{key:"operation",fn:function(i,n){return e("span",{},[e("a",{attrs:{disabled:!n.customerId},on:{click:function(e){return t.showCustomerDetail(n)}}},[t._v("客户详情")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(e){return t.removedel(n)}}},[t._v("移除")])],1)}}])})],1)]),e("a-tab-pane",{key:"2",attrs:{tab:"规则设置"}},[e("div",{staticStyle:{background:"#f0f2f5",padding:"16px","min-height":"500px"}},[e("div",{staticStyle:{background:"#eaf2ff","border-radius":"2px",border:"1px solid #4398ff",padding:"10px 18px","font-size":"13px",color:"#074b9a","margin-bottom":"16px"}},[t._v(" 说明：开启下列功能开关后，标记为黑名单的客户将无法参加所选活动 ")]),e("div",{staticStyle:{background:"#fff",padding:"24px"}},[e("div",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"24px"}},[t._v(" 设置联系客服： "),e("SelectMultiple",{ref:"mychild",attrs:{reactflag:t.reactflag,userName:t.userName,userThumbAvatar:t.userThumbAvatar,placeholderStr:"请选择联系客服"},on:{selectCustom:t.selectCustom}}),e("span",{staticStyle:{margin:"0 12px 0 12px"}},[t._v(" 可设置联系客服，提供黑名单用户咨询和申诉入口 ")]),e("a-tooltip",{attrs:{placement:"bottomLeft"}},[e("a",[t._v("预览")]),e("template",{slot:"title"},[e("img",{staticStyle:{width:"170px"},attrs:{src:t.qrCode||"/imgs/customer-black-list_setting-hint.png"}})])],2)],1),e("div",{staticStyle:{"font-weight":"700","font-size":"15px","margin-top":"44px"}},[t._v("营销中心")]),e("a-divider"),e("a-row",{attrs:{type:"flex",justify:"start"}},[e("a-col",{attrs:{span:4}},[e("div",{staticStyle:{padding:"20px",background:"#f7f8fa","border-radius":"3px",width:"238px",height:"88px",display:"flex","align-items":"center","justify-content":"space-between"}},[e("div",[e("a-avatar",{staticStyle:{"margin-right":"12px"},attrs:{size:46,src:"/imgs/customer-black-list_mission.png",shape:"square"}}),e("span",{staticStyle:{"font-size":"16px","font-weight":"700"}},[t._v("企微任务宝")])],1),e("a-switch",{attrs:{size:"small"},on:{change:t.onChange},model:{value:t.rulesData.activityFission,callback:function(e){t.$set(t.rulesData,"activityFission",e)},expression:"rulesData.activityFission"}})],1)]),e("a-col",{attrs:{span:4}},[e("div",{staticStyle:{padding:"20px",background:"#f7f8fa","border-radius":"3px",width:"238px",height:"88px",display:"flex","align-items":"center","justify-content":"space-between"}},[e("div",[e("a-avatar",{staticStyle:{"margin-right":"12px"},attrs:{size:46,src:"/imgs/customer-black-list_lottery.png",shape:"square"}}),e("span",{staticStyle:{"font-size":"16px","font-weight":"700"}},[t._v("抽奖活动")])],1),e("a-switch",{attrs:{size:"small"},on:{change:t.onChange},model:{value:t.rulesData.raffleActivity,callback:function(e){t.$set(t.rulesData,"raffleActivity",e)},expression:"rulesData.raffleActivity"}})],1)])],1)],1)])])],1),e("a-modal",{attrs:{visible:t.visible,footer:null,width:"599px",destroyOnClose:"",centered:""},on:{cancel:function(e){t.visible=!1}}},[e("h2",{staticStyle:{"align-items":"center","justify-content":"center",display:"flex","font-size":"17px","font-weight":"600"}},[t._v(" 导入黑名单客户 ")]),e("section",{staticStyle:{"max-height":"510px",overflow:"auto"}},[e("div",{staticStyle:{background:"#effaff","font-size":"13px",color:"rgba(0, 0, 0, 0.64)","line-height":"18px",padding:"8px 0 8px 13px","margin-bottom":"16px"}},[e("a-icon",{staticStyle:{color:"#1890ff"},attrs:{type:"bell",theme:"filled"}}),t._v(" 若有重复unionid将合并为一条客户信息，点击下载 "),e("a",{on:{click:t.getexportModel}},[t._v("Excel表格模版")])],1),e("UploadFile",{attrs:{selectMaterial:"5",widthData:"447px"},on:{input:t.inputData}})],1),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"24px"}},[e("a-button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("导入")])],1)]),e("a-modal",{attrs:{visible:t.delvisible,footer:null,width:"399px",destroyOnClose:"",centered:""},on:{cancel:function(e){t.delvisible=!1}}},[e("h2",{staticStyle:{"font-size":"17px","font-weight":"600"}},[t._v(" 提示 ")]),e("section",{staticStyle:{"max-height":"510px",overflow:"auto",padding:"0 0 16px 0"}},[t._v(" 是否确认将客户「"+t._s(t.delName||"外部联系人")+"」移除黑名单？ ")]),e("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e("a-button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){t.delvisible=!1}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.removedelData}},[t._v("确定")])],1)])],1)},a=[],r=i("ade3"),s=(i("b0c0"),i("d3b7"),i("d81d"),i("eb82")),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-wrap"},[t.fileList.length<1?e("div",{staticClass:"upload-file",style:{width:t.widthData}},[e("div",[e("img",{staticClass:"upload-icon",attrs:{src:i("32ef"),alt:"上传"}}),e("p",{staticClass:"tips"},[t._v(t._s(t.formatType.tips))]),e("a-upload",{attrs:{"list-type":"picture",accept:t.accept,fileList:t.fileList,showUploadList:!1,"before-upload":t.beforeUpload,customRequest:t.customRequest},on:{change:t.handleChange}},[e("a-button",{attrs:{type:"primary"}},[t._v("选择文件")])],1)],1)]):e("div",{staticClass:"preview"},[e("div",{staticClass:"preview-detail"},["2"===t.selectMaterial?e("div",{staticClass:"uploadImg-wrap"},[e("img",{staticClass:"uploadImg",attrs:{src:t.uploadImg}})]):e("div",{staticClass:"document"},[e("div",{staticClass:"document-left"},[e("a-tooltip",{attrs:{title:t.uploadFile.name}},[e("p",[t._v(t._s(t.uploadFile.name))])]),e("span",[t._v(t._s(t._f("getUnits")(t.uploadFile.size)))])],1),e("img",{staticClass:"icon-img",attrs:{src:t.formatType.icon}})]),e("a-upload",{attrs:{"list-type":"picture",accept:t.accept,fileList:t.fileList,showUploadList:!1,"before-upload":t.beforeUpload,customRequest:t.customRequest},on:{change:t.handleChange}},[e("a-button",{attrs:{type:"link",icon:"sync"}},[t._v(" 重新上传 ")])],1)],1)])])},c=[],l=(i("7db0"),i("b9cd")),u=i("ca00"),d={name:"UploadFile",props:{widthData:{type:String,default:"347px"},value:{type:String,default:""},selectMaterial:{type:String,default:"2"},title:{type:String,default:""},loading:{type:Boolean,default:!1},url:{type:String,default:""},uploadFileDict:{type:Object,default:function(){}}},data:function(){return{visibleUpload:!1,accept:"",visibleTags:!1,uploadImg:"",checked:!1,uploadFile:"",fileList:[]}},filters:{getUnits:function(t){return Object(u["b"])(t)}},computed:{formatType:function(){var t=this;return l["m"].find((function(e){return e.id==t.selectMaterial}))}},created:function(){this.accept=this.formatType.format},watch:{value:function(){this.visibleUpload=this.value},uploadFileDict:{handler:function(){this.uploadFile={name:this.uploadFileDict.name||"2.0版本.pdf",size:this.uploadFileDict.size||0}},deep:!0},url:function(){this.url&&(this.fileList=[{uid:"-1",name:"image.png",status:"done",url:this.url}],this.uploadImg=this.url)}},methods:{customRequest:function(t){this.uploadFile=t.file,t.onSuccess()},beforeUpload:function(t){var e=t.size/1024/1024<this.formatType.max;return e||this.$message.error("文件不能大于".concat(this.formatType.max,"MB!")),e},handleChange:function(t){var e,i,n=this;2==this.selectMaterial&&Object(u["g"])(null===t||void 0===t||null===(e=t.file)||void 0===e?void 0:e.originFileObj).then((function(t){n.uploadImg=t[1]})),"uploading"===t.file.status&&(this.fileList=[t.fileList[t.fileList.length-1]],this.fileList[0].status="done"),this.$emit("input",null===t||void 0===t||null===(i=t.fileList[t.fileList.length-1])||void 0===i?void 0:i.originFileObj)}}},f=d,p=(i("c3bc"),i("2877")),m=Object(p["a"])(f,o,c,!1,null,"421a8a43",null),h=m.exports,g=i("58c3"),v={data:function(){return{qrCode:"",userName:"",userThumbAvatar:"",rulesData:{regionContactWay:!1,activityFission:!1,checkIn:!1,raffleActivity:!1,redPacket:!1},delName:"",delvisible:!1,visible:!1,loadingTable:!1,value:"",reactflag:!1,customerName:"",staffUserid:void 0,clickChannelData:void 0,customerSearchVal:"",columnsCustomer:[{title:"客户",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"Unionid",dataIndex:"unionId",scopedSlots:{customRender:"unionId"}},{title:"客户类型",dataIndex:"type"},{title:"操作时间",dataIndex:"operationTime"},{title:"操作人",dataIndex:"operationPerson",scopedSlots:{customRender:"operationPerson"}},{title:"原因",dataIndex:"reason"},Object(r["a"])({title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center"},"align","right")],customerData:[],pagination:{current:1,pageSize:20,total:0}}},components:{SelectMultiple:s["a"],UploadFile:h},methods:{initData:function(){this.customerName="",this.staffUserid=void 0,this.clickChannelData=void 0,this.customerSearchVal=""},onChange:function(){this.getupdate("设置成功")},removedel:function(t){this.delData=t,this.delName=t.name,this.delvisible=!0},removedelData:function(){var t=this;Object(g["a"])([this.delData.id]).then((function(e){t.$message.success("移除成功"),t.getCustomerLog()})).catch((function(e){t.$message.error(e)})).finally((function(){t.delvisible=!1}))},downloadExcel:function(){var t=this;Object(g["d"])().then((function(t){Object(u["e"])(t,".xlsx","阿卡索-客户黑名单数据导出")})).catch((function(e){t.$message.error(e)}))},inputData:function(t){this.fileData=t},getexportModel:function(){var t=this;Object(g["e"])().then((function(t){Object(u["e"])(t,".xlsx","阿卡索-黑名单导入模板")})).catch((function(e){t.$message.error(e)}))},ImportRecord:function(){this.$router.push({name:"CustomerDetails"})},handleOk:function(){var t=this,e=new FormData;e.append("uploadFile",this.fileData),Object(g["f"])(e).then((function(e){t.$message.success("导入黑名单成功")})).catch((function(e){t.$message.error(e)})),this.visible=!1},getImportCustomer:function(){this.visible=!0},showCustomerDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.unionId}})},handleTableChange:function(t){this.pagination.current=null===t||void 0===t?void 0:t.current,this.getCustomerLog()},getCustomerLog:function(){var t=this,e={name:this.customerName,source:this.clickChannelData,staffExtId:this.staffUserid,unionId:this.customerSearchVal,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loadingTable=!0,Object(g["i"])(e).then((function(e){var i,n,a;t.customerData=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(n=i.list)||void 0===n?void 0:n.map((function(t,e){return t.key=e,t})),t.pagination.total=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.total})).catch((function(e){t.$message.error(e)})).finally((function(){t.loadingTable=!1}))},handleFinishChange:function(t){this.clickChannelData=t,this.getCustomerLog()},customerNameSearch:function(t,e){this.customerName=t,this.getCustomerLog()},changeCustomInfo:function(t){this.customerSearchVal=t,this.getCustomerLog()},callback:function(t){this.reactflag=!0,this.initData(),"1"===t?this.getCustomerLog():(this.userName="",this.userThumbAvatar="",this.getBlacklistRules())},getBlacklistRules:function(){var t=this;Object(g["b"])().then((function(e){var i,n,a,r,s,o,c,l,u,d=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.blackListRule;t.blackId=null===d||void 0===d?void 0:d.id,t.qrCode=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.staffDto)||void 0===a?void 0:a.qrCode,t.extStaffId=null===e||void 0===e||null===(r=e.data)||void 0===r||null===(s=r.staffDto)||void 0===s?void 0:s.userid,t.userName=null===e||void 0===e||null===(o=e.data)||void 0===o||null===(c=o.staffDto)||void 0===c?void 0:c.name,t.userThumbAvatar=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(u=l.staffDto)||void 0===u?void 0:u.avatar,t.rulesData.regionContactWay=null===d||void 0===d?void 0:d.regionContactWay,t.rulesData.activityFission=null===d||void 0===d?void 0:d.activityFission,t.rulesData.checkIn=null===d||void 0===d?void 0:d.checkIn,t.rulesData.raffleActivity=null===d||void 0===d?void 0:d.raffleActivity,t.rulesData.redPacket=null===d||void 0===d?void 0:d.redPacket})).catch((function(e){t.$message.error(e)}))},getupdate:function(t){var e=this,i={id:this.blackId,extStaffId:this.extStaffId,regionContactWay:this.rulesData.regionContactWay,activityFission:this.rulesData.activityFission,checkIn:this.rulesData.checkIn,raffleActivity:this.rulesData.raffleActivity,redPacket:this.rulesData.redPacket};Object(g["k"])(i).then((function(i){e.$message.success(t),e.getBlacklistRules()})).catch((function(t){e.$message.error(t)}))},selectCustomFunc:function(t){"1"==t.empty?this.staffUserid=void 0:(this.reactflag=!1,this.staffUserid=t.staffId),this.getCustomerLog()},selectCustom:function(t){"1"==t.empty?(this.staffUserid=void 0,this.extStaffId="",this.getupdate("删除成功")):(this.reactflag=!1,this.staffUserid=t.userid,this.extStaffId=this.staffUserid,this.getupdate("设置客服成功"))},resetCustomerSearch:function(){this.reactflag=!0,this.initData(),this.getCustomerLog()}},created:function(){this.getCustomerLog()}},b=v,y=(i("4658"),Object(p["a"])(b,n,a,!1,null,"b2752c48",null));e["default"]=y.exports},"65b6":function(t,e,i){},"82d6":function(t,e,i){},9994:function(t,e,i){"use strict";i("65b6")},b9cd:function(t,e,i){"use strict";i.d(e,"l",(function(){return n})),i.d(e,"j",(function(){return a})),i.d(e,"o",(function(){return r})),i.d(e,"n",(function(){return s})),i.d(e,"b",(function(){return o})),i.d(e,"g",(function(){return c})),i.d(e,"d",(function(){return l})),i.d(e,"a",(function(){return u})),i.d(e,"f",(function(){return d})),i.d(e,"k",(function(){return f})),i.d(e,"i",(function(){return p})),i.d(e,"e",(function(){return m})),i.d(e,"p",(function(){return h})),i.d(e,"c",(function(){return g})),i.d(e,"h",(function(){return v})),i.d(e,"q",(function(){return b})),i.d(e,"m",(function(){return y}));var n="LOSS_STATUS",a="GROUP_STATUS",r="ORDER_WAY",s="ORDER_CONDITION",o="ADD_WAY",c="GENDER",l="CUSTOMER_STATUS",u={0:"待分配",1:"待添加",2:"待通过",3:"已添加",4:"导入中"},d={1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},f=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:1},{text:"已不是好友",color:"#ffd4b6",id:2},{text:"客户接收达上限",color:"#fbe8ae",id:3},{text:"本月消息已经达到上限",color:"",id:4}],p=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:2},{text:"没有群发任务",color:"",id:4}],m={1:"微信",2:"企业微信"},h=[{id:"immediately",value:"立即发送"},{id:"timing",value:"定时发送"}],g={0:"渠道码",1:"区域扫码",2:"自动拉群",3:"一客一码",4:"加好友",5:"通过群码拉群"},v={0:{text:"拉人中",color:"green"},1:{text:"未开始",color:""},2:{text:"已达上限",color:"orange"},3:{text:"已停用",color:"red"}},b={0:{text:"创建失败",color:"green",id:0},1:{text:"待发送",color:"rgba(34,34,34,.85)",id:1},2:{text:"已发送",color:"rgba(34,34,34,.85)",id:2},3:{text:"已取消",color:"rgba(34,34,34,.85)",id:3},4:{text:"提醒发送",color:"#1890ff",id:4}},y=[{text:"文章",id:"0",format:""},{text:"链接",id:"1"},{text:"海报",id:"2",max:2,format:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",tips:"请上传png、jpg格式不超过2M的文件"},{text:"视频",id:"7",max:2e5,format:".MP4",tips:"请上传格式为MP4的视频文件"},{text:"PDF",id:"3",max:20,format:".pdf",icon:"/icons/pdf.png",tips:"请上传PDF格式不超过20M的文件"},{text:"PPT",id:"4",max:20,format:".pptx,.ppt,.pps",icon:"/icons/ppt.svg",tips:"请上传PPT格式不超过20M的文件"},{text:"表格",id:"5",max:20,format:".xlsx,.xls,.csv",icon:"/icons/excel.svg",tips:"请上传csv、xlsx格式不超过20M的文件"},{text:"文档",id:"6",max:20,format:".txt,.doc,.docx",icon:"/icons/word.svg",tips:"请上传doc、txt.docx格式不超过20M的文件"}]},c3bc:function(t,e,i){"use strict";i("4cf4")},eb82:function(t,e,i){"use strict";i("498a"),i("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("div",{staticClass:"button-name",on:{click:function(e){return e.stopPropagation(),t.selectFocusIsOpen.apply(null,arguments)},mouseenter:t.enter,mouseleave:t.leave}},[t.employeeName?e("span",{staticClass:"hidden"},[e("a-avatar",{attrs:{size:28,shape:"square",src:t.thumbAvatar}}),t._v(" "+t._s(t.employeeName)+" ")],1):e("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"rgba(0, 0, 0, 0.25)"}},[t._v(" "+t._s(t.placeholderStr)+" ")]),t.closeCircle?e("span",{staticStyle:{color:"rgba(0, 0, 0, 0.25)"}},[t.employeeName&&1!=t.styleButton?e("a-icon",{attrs:{type:"close-circle",theme:"filled"},on:{click:function(e){return e.stopPropagation(),t.iconClear.apply(null,arguments)}}}):e("a-icon",{attrs:{type:"down"}})],1):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"},{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],staticClass:"selectBox_list"},[e("div",{staticClass:"group-owner"},[e("header",{staticClass:"header"},[t._v("全部员工 ("+t._s(t.total)+")")]),e("div",{staticClass:"search-name"},[e("a-input-search",{attrs:{placeholder:"请输入员工后回车"},on:{search:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName="string"===typeof e?e.trim():e},expression:"searchName"}})],1),e("ul",{staticClass:"list-wrap"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getDictionaryByCode,expression:"getDictionaryByCode"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},t._l(t.groupOwners,(function(i){return e("li",{key:i.staffId,staticClass:"title-wrap",on:{click:function(e){return t.selectGroupOwner(i)}}},[e("a-space",{attrs:{size:12}},[e("a-avatar",{attrs:{size:30,src:i.thumbAvatar,shape:"square"}}),e("span",[t._v(t._s(i.name))])],1),t.checkShow?e("div",[t.userId==i.userid?e("a-icon",{staticClass:"check-circle",attrs:{type:"check-circle"}}):e("div",{staticClass:"circle"})],1):t._e()],1)})),0)])])])])},a=[],r=i("2909"),s=(i("d81d"),i("4de4"),i("d3b7"),i("25f0"),i("159b"),i("caad"),i("2532"),i("99af"),i("487a")),o=i.n(s),c=i("1c9c"),l={bind:function(t,e){function i(i){if(t.contains(i.target))return!1;e.expression&&e.value(i)}t.__vueClickOutside__=i,document.addEventListener("click",i)},update:function(){},unbind:function(t){document.removeEventListener("click",t.__vueClickOutside__),delete t.__vueClickOutside__}},u={name:"SearchForm",directives:{clickoutside:l,infiniteScroll:o.a},props:{checkShow:{type:Boolean,default:!1},userName:{type:String,default:""},userId:{type:String,default:""},userThumbAvatar:{type:String,default:""},reactflag:{type:Boolean,default:!1},placeholderStr:{type:String,default:"请选择企业员工"},closeCircle:{type:Boolean,default:!0}},data:function(){return{defalytStaffIndex:[],thumbAvatar:"",busy:!0,pagination:{current:1,pageSize:10,total:0},total:0,totalNum:0,selectRoleId:"3",employeeName:"",groupOwners:[],page:1,limit:10,value:[],searchName:"",styleButton:1,owners:[],isOpen:!1,loading:!1,buttonLoding:!1,ownersID:{data:[]}}},created:function(){},methods:{enter:function(){this.styleButton=2},leave:function(){this.styleButton=1},selectGroupOwner:function(t){this.employeeName=t.name,this.thumbAvatar=t.thumbAvatar,this.isOpen=!1,this.$emit("selectCustom",t)},iconClear:function(){this.employeeName="",this.isOpen=!1;var t={empty:"1"};this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode(),this.$emit("selectCustom",t)},handleClose:function(){this.isOpen=!1},selectFocusIsOpen:function(){this.isOpen=!this.isOpen},ok:function(){var t=this.groupOwners.filter((function(t){if(t.defaultChecked)return t.userid})).map((function(t){return t.userid})),e=this.groupOwners.filter((function(t){if(t.defaultChecked)return t})).map((function(t){return{name:t.name,avatar:t.thumbAvatar}}));this.ownersID.data=e;var i=t.toString();this.isOpen=!this.isOpen,this.$store.commit("SET_STAFFIDS",i)},cancel:function(){var t=this;this.isOpen=!this.isOpen,this.groupOwners.forEach((function(e){var i=t.responseData.useridList.includes(e.userid);e.defaultChecked=!!i}));var e=this.groupOwners.filter((function(t){if(t.defaultChecked)return t})).map((function(t){return{name:t.name,avatar:t.thumbAvatar}}));this.ownersID.data=e},handleInfiniteOnLoad:function(){this.pagination.current++,this.loading&&this.getDictionaryByCode()},getDictionaryByCode:function(){var t=this,e={currentPage:this.page,pageSize:this.limit,name:this.searchName||""};this.buttonLoding||(this.buttonLoding=!0,this.loading=!0,"0"!=this.total&&this.groupOwners.length>=this.total?this.busy=!0:Object(c["q"])(e).then((function(e){var i=e.data.list;t.total=e.data.total,t.page>1?t.groupOwners=[].concat(Object(r["a"])(t.groupOwners),Object(r["a"])(i)):t.groupOwners=Object(r["a"])(i),t.groupOwners.length>=t.total?t.busy=!0:(t.page=t.page+1,t.loading=!1)})).catch((function(e){t.$message.error(e||e.message)})).finally((function(){t.buttonLoding=!1})))},onSearchName:function(){this.groupOwners=[],this.page=1,this.getDictionaryByCode()}},watch:{reactflag:{handler:function(t,e){!0===t&&(this.employeeName="",this.isOpen=!1,this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode())}},userName:function(){this.employeeName=this.userName},userThumbAvatar:function(){this.thumbAvatar=this.userThumbAvatar}}},d=u,f=(i("9994"),i("2877")),p=Object(f["a"])(d,n,a,!1,null,"c2d4f660",null);e["a"]=p.exports}}]);