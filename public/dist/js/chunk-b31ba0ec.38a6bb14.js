(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b31ba0ec"],{4792:function(t,a,e){"use strict";e("6285")},"4c26":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t._self._c;return a("div",[a("a-page-header",{staticClass:"page-header background-white",attrs:{title:"数据统计"},on:{back:function(a){return t.$router.go(-1)}}}),a("div",{staticClass:"page-wrap background-white"},[a("header",{staticClass:"head"},[a("a-space",[t._v(" 渠道码: "+t._s(t.codeName)+" ")]),a("div",{staticClass:"data-wrap"},[a("div",{staticClass:"data"},[a("div",{staticClass:"inner"},[a("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.TodayAdd))]),a("span",[t._v("今日添加客户数(人)")])]),a("div",{staticClass:"inner"},[a("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.TodayLoss))]),a("span",[t._v("今日流失客户数(人)")])])]),a("div",{staticClass:"data"},[a("div",{staticClass:"inner"},[a("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.AddCount))]),a("span",[t._v("总添加客户数(人)")])]),a("div",{staticClass:"inner"},[a("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.LossCount))]),a("span",[t._v("总流失客户数(人)"),a("a-tooltip",{attrs:{title:"未发送的成员所拥有的所有客户数"}},[a("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])])])],1),a("div",{staticClass:"gray-line"}),a("section",[a("ChatData",{attrs:{chatId:"gather"}})],1)])],1)},s=[],n=(e("d3b7"),e("6bd9")),o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"tendency-chart background-white"},[a("h4",[t._v("图表数据")]),a("a-radio-group",{staticClass:"changeRadio",attrs:{size:"default","button-style":"solid"},on:{change:t.changeGroup},model:{value:t.tabPosition,callback:function(a){t.tabPosition=a},expression:"tabPosition"}},t._l(t.customerStatus,(function(e){return a("a-radio-button",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])})),1),a("a-tooltip",[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[t._v("1、客户总数：扫码添加的客户总数，若客户重复添加将不会重复计数")]),a("p",[t._v("2、新增客户数：扫码添加的新增客户数")]),a("p",[t._v("3、流失客户数：扫码添加后将成员删除的客户数")])]),t._v(" 统计说明 "),a("a-icon",{attrs:{type:"question-circle"}})],1),a("div",{staticClass:"select-date"},[a("div",[a("a-select",{staticStyle:{width:"100px","margin-right":"10px"},on:{change:t.changePeriodTime},model:{value:t.timeSpace,callback:function(a){t.timeSpace=a},expression:"timeSpace"}},t._l(t.periodTime,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.text)+" ")])})),1),t._v(" 自定义: "),a("a-range-picker",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{disabledDate:t.disabledDate},on:{change:t.changeDate},model:{value:t.startOrEndTime,callback:function(a){t.startOrEndTime=a},expression:"startOrEndTime"}},[a("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1),t._v(" 请选择员工: "),a("SelectMultiple",{staticStyle:{display:"inline-block"},attrs:{reactflag:t.reactflag},on:{selectCustom:t.selectCustom}})],1),a("a-button",{on:{click:t.result}},[t._v("重置")])],1),a("div",{staticClass:"echarts",attrs:{id:t.chatId}}),a("div",{staticClass:"space-gray"}),"gather"===t.chatId?a("TableData",{attrs:{dataList:t.dataList,chatId:t.chatId,staffId:t.staffId,codeItem:t.codeItem,staffData:t.staffData},on:{onChange:t.onChange,dailyStatisticsExport:t.dailyStatisticsExport}}):t._e()],1)},r=[],c=e("ade3"),d=(e("a9e3"),e("d81d"),e("7db0"),e("f8de")),u=e("eb82"),l=e("313e"),f=e("4cb5"),h=e("9394"),m=e("2da7"),p=e("4b2a"),v=e("f95e"),g=e("032e"),b=e("ca00");l["b"]([h["a"],m["a"],p["a"],f["a"],v["a"]]);var y={name:"ChatData",components:{SelectMultiple:u["a"],TableData:d["a"]},props:{chatId:{type:String,default:""},codeItem:{type:Object,default:function(){return{}}}},computed:{codeId:function(){return this.$route.query.id||this.codeItem.id}},data:function(){return{tabPosition:"todayCount",searchName:"",timeSpace:7,startOrEndTime:void 0,reactflag:!1,dataList:[],staffData:[],staffId:"",customerStatus:[{value:"todayCount",text:"客户总数"},{value:"todayAdd",text:"新增客户数"},{value:"todayLoss",text:"流失客户数"}],periodTime:[{text:"今日",id:0},{text:"近一周",id:7},{text:"近一个月",id:30}],myChart:"",dateOrStaff:"date"}},mounted:function(){this.changePeriodTime(this.timeSpace),this.myChart=l["a"](document.getElementById(this.chatId))},methods:{onChange:function(t){this.dateOrStaff=t},dailyStatisticsExport:function(){var t,a,e,i,s=this,n={list:[Number(this.codeId)],staffId:this.staffId,startTime:(null===(t=this.startOrEndTime)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.format("YYYY-MM-DD"))+" 00:00:00",endTime:(null===(e=this.startOrEndTime)||void 0===e||null===(i=e[1])||void 0===i?void 0:i.format("YYYY-MM-DD"))+" 23:59:59"},o="date"===this.dateOrStaff?this.exportForDate():this.exportForStaff();o(n).then((function(t){Object(b["e"])(t,".xlsx","渠道活码详情列表")})).catch((function(t){s.$message.error(t)}))},exportForStaff:function(){return g["i"]},exportForDate:function(){return g["g"]},selectCustom:function(t){this.staffId=(null===t||void 0===t?void 0:t.userid)||"",this.reactflag=!1,this.getData()},result:function(){this.timeSpace=7,this.startOrEndTime=void 0,this.searchName="",this.reactflag=!0,this.tabPosition="todayCount",this.changePeriodTime(this.timeSpace)},changeGroup:function(t){this.renderContainer()},disabledDate:function(t){return t&&t>this.$moment().subtract("day")},changeDate:function(t){t.length>0&&this.getData()},changePeriodTime:function(t){this.startOrEndTime=0===t?[this.$moment().subtract(t,"days"),this.$moment().subtract(t,"days")]:[this.$moment().subtract(t-1,"days"),this.$moment()],this.getData()},getData:function(){var t,a,e,i,s=this;this.loading=!0;var n={list:[Number(this.codeId)],startTime:(null===(t=this.startOrEndTime)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.format("YYYY-MM-DD"))+" 00:00:00",endTime:(null===(e=this.startOrEndTime)||void 0===e||null===(i=e[1])||void 0===i?void 0:i.format("YYYY-MM-DD"))+" 23:59:59",staffId:this.staffId};Object(g["k"])(n).then((function(t){var a,e;s.dataList=(null===(a=t.data.dateData)||void 0===a?void 0:a.map((function(t,a){return t.operation=t,t.key=a,t})))||[],s.staffData=(null===(e=t.data.staffData)||void 0===e?void 0:e.map((function(t,a){return t.operation=t,t.key=a,t})))||[],s.renderContainer()})).catch((function(t){s.$message.error(t)})).finally((function(){s.loading=!1}))},renderContainer:function(){var t,a=this,e=this.customerStatus.find((function(t){return t.value===a.tabPosition})).text;this.myChart.setOption((t={tooltip:{},xAxis:{data:this.dataList.map((function(t){return t.day}))}},Object(c["a"])(t,"tooltip",{trigger:"axis"}),Object(c["a"])(t,"yAxis",{name:"人数",minInterval:1}),Object(c["a"])(t,"grid",{left:"60px",right:"5%"}),Object(c["a"])(t,"series",[{name:e,type:"line",data:this.dataList.map((function(t){return t[a.tabPosition]}))}]),t))}}},C=y,x=(e("4792"),e("2877")),I=Object(x["a"])(C,o,r,!1,null,"66c4833a",null),_=I.exports,D={name:"Statistics",components:{usePerson:n["a"],ChatData:_},data:function(){return{detailInfo:{}}},computed:{codeId:function(){return this.$route.query.id},codeName:function(){return this.$route.query.codeName}},activated:function(){this.getStaffStatistics()},methods:{getStaffStatistics:function(){var t=this;this.loading=!0;var a=[{codeId:this.codeId,codeName:this.codeName}];Object(g["m"])(a).then((function(a){t.detailInfo=a.data[0]})).catch((function(a){t.$message.error(a)})).finally((function(){t.loading=!1}))}}},S=D,O=(e("823f"),Object(x["a"])(S,i,s,!1,null,"46225d54",null));a["default"]=O.exports},6285:function(t,a,e){},"823f":function(t,a,e){"use strict";e("824c")},"824c":function(t,a,e){}}]);