(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66b83eba"],{"0561":function(t,e,i){},"0a2c":function(t,e,i){"use strict";i("c0e2")},"0c50":function(t,e,i){"use strict";i.r(e);i("b0c0");var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"accountConfig"},[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"配置客服账号"},on:{back:function(e){return t.$router.go(-1)}}}),e("div",{attrs:{id:"page-content"}},[e("div",{staticClass:"wx-customer-page"},[e("div",{staticClass:"guide-page-aside"},[e("p",[t._v("配置客服账号")]),e("div",{class:[{on:t.firstStep},"step-wrap"]},[t._m(0)]),e("div",{class:[{on:!t.firstStep},"step-wrap"]},[t._m(1)])]),t.firstStep?e("div",{staticClass:"guide-page-container"},[e("div",{staticClass:"edit-wx-service-account"},[e("div",{staticClass:"public-title"},[t._v("账号设置")]),e("div",{staticClass:"tip"},[e("span",[e("a-icon",{attrs:{type:"bell"}})],1),t._v("客服账号的头像和名称将会在对话界面展示给客户哦 ")]),e("div",{staticClass:"content"},[e("div",{staticClass:"account-name"},[e("span",{staticClass:"prefix"},[t._v("账号名称：")]),e("a-input",{staticStyle:{width:"250px",height:"32px"},attrs:{placeholder:"请输入账号名称",maxLength:12},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e("div",{staticClass:"account-avatar"},[e("span",{staticClass:"prefix"},[t._v("账号头像：")]),e("div",{staticClass:"imgBox"},[e("UpDateImg",{attrs:{url:t.urlCode2,title:"上传图片"},model:{value:t.urlCode,callback:function(e){t.urlCode=e},expression:"urlCode"}})],1)]),e("div",{staticClass:"account-preview"},[e("span",{staticClass:"prefix"},[t._v("预览：")]),e("div",{staticClass:"tag-wrap"},[e("img",{staticClass:"tag-img",attrs:{src:t.urlCode2||t.uploadImg,alt:""}}),e("div",[e("p",{staticClass:"tag-name"},[t._v(t._s(t.name||"账号名称"))]),e("span",{staticClass:"tag-c-name"},[t._v("@"+t._s(t.corpName))])])])])])]),e("div",{staticClass:"btn-submit-wrap"},[e("a-button",{staticClass:"ant-btn",attrs:{type:"primary",size:"large",loading:t.loading},on:{click:t.firstStepBtn}},[t._v(" 下一步 ")])],1)]):e("div",{staticClass:"guide-page-container"},[e("div",{staticClass:"edit-wx-service-account"},[e("div",{staticClass:"public-title"},[t._v("接待方式")]),e("div",{staticClass:"service-welcome-tab"},[e("div",{staticClass:"welcome-tab-item-wrap",on:{click:function(e){return t.ReceptionBtn(1)}}},[e("div",{class:[{on:1==t.receptionType},"welcome-tab-item"]},[e("img",{staticClass:"bg",attrs:{src:"/imgs/wx-custom-service.png",alt:""}}),e("img",{staticClass:"icon-check",attrs:{src:"/imgs/wx-service_check.png",alt:""}}),e("p",[t._v("人工接待")]),e("div",{staticClass:"info"},[t._v("企业业务量较少，员工可以一一接待处理")])])]),e("div",{staticClass:"welcome-tab-item-wrap",on:{click:function(e){return t.ReceptionBtn(2)}}},[e("div",{class:[{on:2==t.receptionType},"welcome-tab-item"]},[e("img",{staticClass:"bg",attrs:{src:"/imgs/wx-service_robot.png",alt:""}}),e("img",{staticClass:"icon-check",attrs:{src:"/imgs/wx-service_check.png",alt:""}}),e("p",[t._v("优先机器人接待")]),e("div",{staticClass:"info"},[t._v("客户咨询量较大，企业可在后台设置关键词，机器人可匹配关键词自动回复")])])])]),1===t.receptionType?e("ManualReception",{ref:"reception",attrs:{allData:t.allData}}):t._e(),2===t.receptionType?e("ReceptionMachine",{ref:"machine",attrs:{allData:t.allData}}):t._e()],1),e("div",{staticClass:"btn-submit-wrap"},[e("a-button",{staticClass:"ant-btn",on:{click:function(e){t.firstStep=!0}}},[t._v("上一步")]),e("a-button",{staticClass:"ant-btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("完成")])],1)])])])],1)},a=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"step-item"},[e("i",{staticClass:"icon-number"},[t._v("1")]),t._v("账号设置")])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"step-item"},[e("i",{staticClass:"icon-number"},[t._v("2")]),t._v("接待设置")])}],s=i("9ab4"),r=i("1b40"),o=i("e9de"),c=i("1eb1"),l=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"setting-center-contianer"},[e("div",[e("div",{staticClass:"public-title",staticStyle:{width:"600px"}},[t._v("接待客服设置")]),e("div",{staticStyle:{display:"flex"}},[e("div",{staticStyle:{width:"600px"}},["robot"===t.source?e("div",{staticClass:"top-tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" 当客户输入「人工」或「人工客服」时，将会自动转接至人工客服接待，人工客服将会接入 ")],1):t._e(),e("div",{staticClass:"yx-form-item"},[e("a-form",{staticStyle:{width:"600px"},attrs:{"label-col":{span:6},"wrapper-col":{span:18},form:t.form}},["robot"===t.source?e("a-form-item",{attrs:{label:"自动转接人工客服"}},[e("div",[e("a-switch",{model:{value:t.isAutoChangeHuman,callback:function(e){t.isAutoChangeHuman=e},expression:"isAutoChangeHuman"}}),t._v("已开启")],1),e("div",{staticClass:"form-tips"},[t._v("开启后，当机器人无法回答客户消息时，人工客服将会接入")]),t.isAutoChangeHuman?e("FormList",{staticClass:"input",staticStyle:{width:"100%"},attrs:{formInfo:t.textareaOver}}):t._e()],1):t._e(),e("a-form-item",{attrs:{label:"人工值班时间",required:""}},[e("div",[e("a-time-picker",{attrs:{format:"HH:mm",placeholder:"开始时间"},on:{change:function(e){return t.changeStartTimeOne({startTime:t.receptorStartTime,endTime:t.receptorEndTime})}},model:{value:t.receptorStartTime,callback:function(e){t.receptorStartTime=e},expression:"receptorStartTime"}}),t._v(" ~ "),e("a-time-picker",{attrs:{format:"HH:mm",placeholder:"结束时间"},on:{change:function(e){return t.changeEndTimeOne({startTime:t.receptorStartTime,endTime:t.receptorEndTime})}},model:{value:t.receptorEndTime,callback:function(e){t.receptorEndTime=e},expression:"receptorEndTime"}})],1)]),e("a-form-item",{attrs:{label:"非人工时间话术",required:""}},[e("div",{staticClass:"textarea-box"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.noReceptorReply,expression:"noReceptorReply"}],attrs:{maxlength:"200",placeholder:"请输入非人工时间话术"},domProps:{value:t.noReceptorReply},on:{input:function(e){e.target.composing||(t.noReceptorReply=e.target.value)}}}),e("div",{staticClass:"word-count"},[t._v(t._s(t.noReceptorReply.length)+"/200")])])]),e("a-form-item",{attrs:{label:"接待客服设置"}},[e("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.onlineTime,callback:function(e){t.onlineTime=e},expression:"onlineTime"}},[e("a-radio",{attrs:{value:"allDay"}},[t._v("全天在线")]),e("a-radio",{attrs:{value:"freedom"}},[t._v("自动上下线")])],1),"allDay"===t.onlineTime?e("div",[e("div",{staticClass:"account-box"},[e("div",{staticClass:"alert"},[t._v("适用于及时响应企业，员工将24小时在线服务")]),e("a-button",{staticClass:"r-10",attrs:{type:"plus"},on:{click:function(e){t.AddTransfeVisible=!0}}},[t._v("+ 添加成员")]),t.selectList.length>0?e("div",[e("ul",{staticClass:"account-list"},t._l(t.selectList,(function(i,n){return e("li",{key:n},[e("img",{staticClass:"avatar",attrs:{src:i.source.thumbAvatar,alt:""}}),e("a-icon",{staticClass:"close",attrs:{type:"close-circle"},on:{click:function(e){return t.closeDetel(n)}}}),t._v(" "+t._s(i.title)+" ")],1)})),0)]):t._e()],1)]):t._e(),"freedom"===t.onlineTime?e("div",[e("header"),t._l(t.staffAutoOnlineList,(function(i,n){return e("div",{key:n,staticClass:"test-time"},[e("div",{staticClass:"account-box"},[e("div",{staticClass:"alert"},[t._v("适用于早晚班班等排版企业使用（员工仅在上线时间接待客户）")]),e("a-card",{staticClass:"freedom"},[e("a-form-item",{attrs:{label:"员工选择","wrapper-col":{span:21},"label-col":{span:3}}},[e("AddContent",{attrs:{title:"请选择员工",type:"deptId",selectRoleIdList:[],dataList:i.staffIdList},on:{selectPerson:function(e){return t.selectPerson(i,n)}},model:{value:i.staffIdList,callback:function(e){t.$set(i,"staffIdList",e)},expression:"item.staffIdList"}})],1),e("a-form-item",{attrs:{label:"工作周期","wrapper-col":{span:16},"label-col":{span:3}}},[e("a-select",{attrs:{mode:"tags",placeholder:"请选择工作周期",allowClear:""},on:{change:function(e){return t.changeSelect(i,n)}},model:{value:i.workCycle,callback:function(e){t.$set(i,"workCycle",e)},expression:"item.workCycle"}},t._l(t.weekList,(function(i,n){return e("a-select-option",{key:String(n+1)},[t._v(" 周"+t._s(i)+" ")])})),1)],1),e("a-form-item",{attrs:{label:"上线时间","wrapper-col":{span:16},"label-col":{span:3}}},[e("a-time-picker",{attrs:{format:"HH:mm",placeholder:"开始时间"},on:{change:function(e){return t.changeStartTime(i,n)}},model:{value:i.startTime,callback:function(e){t.$set(i,"startTime",e)},expression:"item.startTime"}}),t._v(" ~ "),e("a-time-picker",{attrs:{format:"HH:mm",placeholder:"结束时间"},on:{change:function(e){return t.changeEndTime(i,n)}},model:{value:i.endTime,callback:function(e){t.$set(i,"endTime",e)},expression:"item.endTime"}})],1)],1),t.staffAutoOnlineList.length>1?e("a-icon",{staticClass:"delete",attrs:{type:"delete"},on:{click:function(e){return t.deleteStaff(n)}}}):t._e()],1)])})),e("a-button",{attrs:{type:"link"},on:{click:t.addAtherWeekTime}},[e("a-icon",{attrs:{type:"plus-circle"}}),t._v(" 添加其他工作周期 ")],1)],2):t._e()],1),"freedom"===t.onlineTime?e("a-form-item",{attrs:{label:"备用员工",required:""}},[e("a-button",{staticClass:"r-10",attrs:{type:"plus"},on:{click:t.getMember}},[t._v("+ 添加成员")]),t.spareList.length>0?e("div",[e("ul",{staticClass:"account-list"},t._l(t.spareList,(function(i,n){return e("li",{key:n},[e("img",{staticClass:"avatar",attrs:{src:i.source.thumbAvatar,alt:""}}),e("a-icon",{staticClass:"close",attrs:{type:"close-circle"},on:{click:function(e){return t.closespcieDetel(n)}}}),t._v(" "+t._s(i.title)+" ")],1)})),0)]):t._e()],1):t._e(),"robot"!==t.source?e("a-form-item",{attrs:{label:"商品回复"}},[e("a-switch",{model:{value:t.isAutoProductReply,callback:function(e){t.isAutoProductReply=e},expression:"isAutoProductReply"}})],1):t._e(),"robot"!==t.source?e("a-form-item",{attrs:{label:"客服分类"}},[e("a-switch",{on:{click:t.hasAddLimitStaus},model:{value:t.isOpenServicerProduct,callback:function(e){t.isOpenServicerProduct=e},expression:"isOpenServicerProduct"}}),t.isOpenServicerProduct?e("div",[e("div",{staticClass:"choose-staff-box"},[e("div",{staticClass:"choose-staff-header"},[e("span",[t._v("共"+t._s(t.setCustomer.length)+"个员工")]),e("div",{staticClass:"info-box"},[e("span",[t._v("分类")])])])]),e("ul",{staticClass:"choose-staff-content"},t._l(t.setCustomer,(function(i,n){return e("li",{key:n},[e("div",{staticClass:"basic"},[e("img",{attrs:{src:i.source.thumbAvatar}}),e("span",{staticClass:"name"},[t._v(t._s(i.title))])]),e("div",{staticClass:"info-box"},[e("TagComponents",{attrs:{tagslist:i,selectTagList:i.selectTagList,isEdit:"",closable:""},on:{addTag:t.addTag}})],1)])})),0)]):t._e()],1):t._e(),e("a-form-item",{attrs:{label:"优先接待"}},[e("a-switch",{model:{value:t.isOpenPriorityQueue,callback:function(e){t.isOpenPriorityQueue=e},expression:"isOpenPriorityQueue"}}),t.isOpenPriorityQueue?e("div",[e("div",{staticClass:"flex-box"},[e("span",{staticClass:"queue-text"},[t._v("非人工时间话术:")]),e("div",{staticClass:"textarea-box"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.noReceptorPriorityQueueReply,expression:"noReceptorPriorityQueueReply"}],attrs:{maxlength:"200",placeholder:"请输入非人工时间话术"},domProps:{value:t.noReceptorPriorityQueueReply},on:{input:function(e){e.target.composing||(t.noReceptorPriorityQueueReply=e.target.value)}}}),e("div",{staticClass:"word-count"},[t._v(t._s(t.noReceptorPriorityQueueReply.length)+"/200")])])]),e("div",{staticClass:"flex-box",staticStyle:{"margin-top":"20px"}},[e("label",{staticClass:"label queue-text"},[t._v("优先排队回复:")]),e("div",{staticClass:"content",staticStyle:{flex:"1"}},[e("a-table",{staticClass:"table",attrs:{columns:t.columns,"data-source":t.priorityContentList,bordered:"",rowKey:function(t,e){return e}},scopedSlots:t._u([{key:"keyWord",fn:function(i){return e("div",{},t._l(i,(function(i,n){return e("a-tag",{key:n},[t._v(" "+t._s(i.value)+" ")])})),1)}},{key:"replyContant",fn:function(i){return e("div",{},t._l(i,(function(i,n){return e("p",{key:n,staticClass:"line-clamp"},[t._v(" "+t._s(i.msgContent)+" ")])})),0)}},{key:"operation",fn:function(i){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.editContent(i)}}},[t._v("修改")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.delContent(i)}}},[t._v("删除")])],1)}}],null,!1,4169145416)},[e("template",{slot:"footer"},[e("div",{staticClass:"table-foot",on:{click:t.addContent}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 添加自动回复 ")],1)])],2)],1)])]):t._e()],1)],1)],1),e("div",[e("div",{staticClass:"public-title",staticStyle:{width:"600px"}},[t._v("对话规则设置")]),e("a-form",{staticStyle:{width:"600px"},attrs:{"label-col":{span:4},"wrapper-col":{span:10},form:t.form}},[e("a-form-item",{attrs:{label:"客服排班设置"}},[e("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.assignType,callback:function(e){t.assignType=e},expression:"assignType"}},[e("a-radio",{attrs:{value:0}},[t._v("轮流分配")]),e("a-radio",{attrs:{value:1}},[t._v("空闲分配")])],1),e("div",{staticClass:"form-tips"},[t._v("新咨询消息轮流分配给所有接待人员")])],1),e("a-form-item",{attrs:{label:"优先分配"}},[e("div",[e("a-switch",{model:{value:t.isPriorityAssign,callback:function(e){t.isPriorityAssign=e},expression:"isPriorityAssign"}}),t._v("已开启")],1),e("div",{staticClass:"form-tips"},[t._v("开启后，将优先分配给上次接待人员继续服务")])]),e("a-form-item",{attrs:{label:"接待上限"}},[e("div",{staticStyle:{width:"600px"}},[e("span",[t._v("一个员工同时最多接待")]),e("a-input-number",{staticClass:"kongxi",attrs:{min:1,precision:0,max:50},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}}),e("span",{staticClass:"max-accept-tips"},[t._v("（最多可接待50人）")])],1)]),e("a-form-item",{attrs:{label:"排队话术"}},[e("div",[e("a-switch",{model:{value:t.isQueueSpeech,callback:function(e){t.isQueueSpeech=e},expression:"isQueueSpeech"}}),t._v(t._s(t.isQueueSpeech?"已开启":"已关闭"))],1),e("div",{staticClass:"form-tips"},[t._v("开启后，当员工接待达上限，客户排队时将会自动发送话术")]),t.isQueueSpeech?e("div",{staticClass:"textarea-box"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.speechContent,expression:"speechContent"}],attrs:{maxlength:"200",placeholder:"请输入排队话术"},domProps:{value:t.speechContent},on:{input:function(e){e.target.composing||(t.speechContent=e.target.value)}}}),e("div",{staticClass:"word-count"},[t._v(t._s(t.speechContent.length)+"/200")])]):t._e()]),e("a-form-item",{attrs:{label:"自动结束对话"}},[e("div",{staticStyle:{width:"600px"}},[e("span",[t._v("超过")]),e("a-input-number",{staticClass:"kongxi",attrs:{min:1,precision:0,max:t.maxNum},model:{value:t.autoEnd,callback:function(e){t.autoEnd=e},expression:"autoEnd"}}),e("span",[t._v("分钟，客户未回复消息时，将自动结束对话")])],1)]),e("a-form-item",{attrs:{label:"自动结束排队"}},[e("div",[e("a-switch",{model:{value:t.isQueueDiscard,callback:function(e){t.isQueueDiscard=e},expression:"isQueueDiscard"}}),t._v(t._s(t.isQueueDiscard?"已开启":"已关闭"))],1),t.isQueueDiscard?e("div",{staticStyle:{width:"600px"}},[e("span",[t._v("客户超过")]),e("a-input-number",{staticClass:"kongxi",attrs:{min:1,precision:0,max:6e4},model:{value:t.queueDiscardTime,callback:function(e){t.queueDiscardTime=e},expression:"queueDiscardTime"}}),e("span",[t._v("分钟未被接入，将自动结束排队")])],1):t._e()])],1)],1)]),t.isNeedPhone?e("div",{staticClass:"m-lt"},[e("PhoneModel",{attrs:{textList:t.textList}})],1):t._e()])]),e("a-modal",{attrs:{footer:null,width:"680px",centered:"",destroyOnClose:""},on:{cancle:function(e){t.AddTransfeVisible=!1}},model:{value:t.AddTransfeVisible,callback:function(e){t.AddTransfeVisible=e},expression:"AddTransfeVisible"}},[e("AddTransfer",{attrs:{selectList:t.selectList,selectRoleIdList:[],disabledId:"staffId",type:"deptId"},on:{serviceOk:t.serviceOk,cancle:function(e){t.AddTransfeVisible=!1}}})],1),e("a-modal",{attrs:{footer:null,width:"680px",destroyOnClose:"",centered:""},on:{cancle:function(e){t.AddspareVisible=!1}},model:{value:t.AddspareVisible,callback:function(e){t.AddspareVisible=e},expression:"AddspareVisible"}},[e("AddTransfer",{attrs:{selectList:t.spareList,disabledId:"staffId",selectRoleIdList:t.selectRoleIdList,type:"deptId"},on:{serviceOk:t.servicespareOk,cancle:function(e){t.AddspareVisible=!1}}})],1),e("a-modal",{attrs:{footer:null,destroyOnClose:"",centered:"",width:"599px"},model:{value:t.visibileForm,callback:function(e){t.visibileForm=e},expression:"visibileForm"}},[e("AddReply",{attrs:{editData:t.editData,way:"priority",source:{title:"优先排队回复"}},on:{cancle:function(e){t.visibileForm=!1},serviceOk:t.serviceForm}})],1)],1)},u=[],d=function(){var t=this,e=t._self._c;return e("CommonModal",t._b({on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.source,!1),[e("ul",{staticClass:"main"},["priority"!==t.way?e("li",[e("label",{staticClass:"label"},[t._v("匹配方式:")]),e("div",{staticClass:"content"},[e("a-radio",{attrs:{checked:""}},[t._v("模糊匹配")])],1)]):t._e(),e("li",[e("label",{staticClass:"label"},[t._v("关键词:")]),e("div",{staticClass:"content input"},[t._l(t.tagList,(function(i){return e("div",{key:i.key,staticClass:"input-list"},[e("a-input",{staticStyle:{width:"90%","margin-right":"8px"},attrs:{placeholder:"请输入关键词"},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"domain.value"}}),t.tagList.length>1?e("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===t.tagList.length},on:{click:function(e){return t.removeDomain(i)}}}):t._e()],1)})),e("a-button",{staticStyle:{padding:"0"},attrs:{type:"link"},on:{click:t.addDomain}},[e("a-icon",{attrs:{type:"plus-circle"}}),t._v(" 添加关键词 ")],1)],2)]),e("li",{attrs:{id:"section"}},[e("label",{staticClass:"label"},[t._v("回复内容:")]),e("div",{staticClass:"content"},[e("TypeAccessory",{attrs:{sendContentList:t.sendContentList,msgTypeList:t.msgTypeList,isNeedSelectRadar:!1,isNeedRader:!1,needTitle:!1,source:"person_sop"},on:{delContent:t.delContent}}),"priority"===t.way?e("div",{staticStyle:{color:"red"}},[t._v(" 客户昵称用 %nickname 代替 ，触发的关键词用 %keyword 代替 ")]):t._e(),t.sendContentList.length<2&&"priority"!==t.way?e("a-button",{staticClass:"send-button",attrs:{type:"primary"},on:{click:t.addContent}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 添加发送内容 ")],1):t._e()],1)])])])},p=[],f=(i("a434"),i("d3b7"),i("2a86")),m=i("1011"),v={name:"AddReply",components:{CommonModal:f["a"],TypeAccessory:m["a"]},props:{source:{type:Object,default:function(){return{}}},editData:{type:Object,default:function(){return{}}},way:{type:String,default:""}},computed:{},data:function(){return{msgTypeList:[{id:0,text:"文字",type:"text",maxLength:200}],sendContentList:[{msgType:0,imageObj:{title:"图片",prop:"pic_url",type:"img",tips:"",accept:".jpg,.png",maxLength:2097152,value:{}},maxLength:2e3,msgContent:"",pdfArr:[],formObj:{}}],defaultSendContentList:function(){return{msgType:0,imageObj:{title:"图片",prop:"pic_url",type:"img",tips:"",accept:".jpg,.png",maxLength:2097152,value:{}},msgContent:"",pdfArr:[],formObj:{}}},tagList:[{value:"",key:Date.now()}],key:""}},watch:{editData:{handler:function(){this.editData.tagList&&(this.sendContentList=this.editData.sendContentList||[],this.tagList=this.editData.tagList,this.key=this.editData.key)},deep:!0,immediate:!0}},methods:{removeDomain:function(t){var e=this.tagList.indexOf(t);-1!==e&&this.tagList.splice(e,1)},addDomain:function(){this.tagList.length>=10?this.$message.warning("同一个规则至多只能设置10个关键词"):this.tagList.push({value:"",key:Date.now()})},verify:function(){var t=this;return new Promise((function(e,i){for(var n=0;n<t.tagList.length;n++){var a=t.tagList[n];a.value||i("清填写关键词")}for(var s=0;s<t.sendContentList.length;s++){var r=t.sendContentList[s];r.msgContent||i("清填写回复内容")}e()}))},serviceOk:function(){var t=this;this.verify().then((function(e){t.$emit("serviceOk",{tagList:t.tagList,sendContentList:t.sendContentList,key:t.key})})).catch((function(e){t.$message.warning(e)}))},delContent:function(t){this.sendContentList.splice(t,1)},addContent:function(){this.sendContentList.push(this.defaultSendContentList()),this.$nextTick((function(){var t=document.getElementById("section");t.scrollHeight>t.clientHeight&&setTimeout((function(){t.scrollTop=t.scrollHeight}),300)}))}}},g=v,h=(i("d725"),i("2877")),y=Object(h["a"])(g,d,p,!1,null,"077667cf",null),b=y.exports,C=i("e6b1"),_=i("e1ae"),O=i("b9cd"),x=i("1bee"),k=i("26f2"),L=i("ca00"),T=i("6290"),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textareaOver={type:"textarea",tips:"请输入自动转接人工客服话术",maxLength:200,value:"抱歉，没太听懂呢，正在为您转接人工，请稍后~"},e.isOpenPriorityQueue=!1,e.noReceptorPriorityQueueReply="抱歉，当前不是人工值班时间",e.columns=[{title:"问题关键词",dataIndex:"keyWord",key:"keyWord",scopedSlots:{customRender:"keyWord"}},{title:"回复内容",dataIndex:"replyContant",key:"replyContant",scopedSlots:{customRender:"replyContant"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],e.priorityContentList=[],e.visibileForm=!1,e.editData={},e.receptorStartTime="",e.receptorEndTime="",e.noReceptorReply="抱歉，当前不是人工值班时间",e.isQueueDiscard=!0,e.isAutoProductReply=!1,e.isOpenServicerProduct=!1,e.servicerProductTypeList=[],e.queueDiscardTime=60,e.form={},e.isAutoChangeHuman=!0,e.AddTransfeVisible=!1,e.AddspareVisible=!1,e.conFlictflag=!1,e.onlineTime="allDay",e.conFlictText="",e.weekList=["一","二","三","四","五","六","日"],e.selectList=[],e.spareList=[],e.assignType=0,e.isPriorityAssign=!1,e.limit=20,e.isQueueSpeech=!1,e.speechContent="抱歉，当前所有客服都在接待中，请耐心等待，我们很快就来接待你，谢谢。",e.autoEnd=3,e.stageName="分钟",e.maxNum=60,e.staffAutoOnlineList=[{staffIdList:[],staffName:"",workCycle:["1","2","3","4","5","6","7"],startTime:"",endTime:"",value:1}],e}return Object(s["d"])(e,t),e.prototype.defaultStaffAutoOnlineList=function(){return{value:0,staffIdList:[],staffName:"",workCycle:["1","2","3","4","5","6","7"],startTime:"",endTime:""}},Object.defineProperty(e.prototype,"selectRoleIdList",{get:function(){return this.selectList.map((function(t){return t.source.staffId}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectCustomerIdList",{get:function(){return this.spareList.map((function(t){return t.source.staffId}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setCustomer",{get:function(){var t,e,i,n=[];return"allDay"===this.onlineTime?null===(t=this.selectList)||void 0===t||t.forEach((function(t){n.push(t)})):(console.log(this.staffAutoOnlineList),null===(e=this.staffAutoOnlineList)||void 0===e||e.forEach((function(t){t.staffIdList.forEach((function(t){n.push(t)}))})),null===(i=this.spareList)||void 0===i||i.forEach((function(t){n.push(t)}))),n.forEach((function(t){t.selectTagList=[]})),n=Object(L["k"])(n,"key"),this.servicerProductTypeList.length>0&&this.servicerProductTypeList.forEach((function(t){var e=n.findIndex((function(e){return t.servicerUserid===e.key}));e>=0&&(n[e].tags=[],t.productTypeList.forEach((function(t,i){n[e].tags[i]={tagName:t}}))),console.log(e)})),n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textList",{get:function(){var t=["你好，请问有什么能帮到您的吗"];return this.isQueueSpeech&&t.push(this.speechContent),t},enumerable:!1,configurable:!0}),e.prototype.getDetail=function(){var t,e=this;if(null===(t=this.allData)||void 0===t?void 0:t.kfid){var i=this.allData,n=i.ruleDto,a=i.receptorSetDto,r=i.isAutoChangeHuman,o=i.changeHumenReply,c=i.receptorStartTime,l=i.receptorEndTime,u=i.noReceptorReply,d=i.isAutoProductReply,p=i.isOpenPriorityQueue,f=i.noReceptorPriorityQueueReply,m=i.priorityContentList,v=i.isOpenServicerProduct;if(console.log(n),this.onlineTime=0===this.allData.receptorType?"allDay":"freedom",this.assignType=n.assignType,this.isPriorityAssign=Boolean(n.isPriorityAssign),this.isOpenPriorityQueue=Boolean(p),f&&(this.noReceptorPriorityQueueReply=f),this.priorityContentList=null===m||void 0===m?void 0:m.map((function(t){var e={key:t.contentId,contentId:t.contentId,keyWord:t.keyWords.map((function(t){return{value:t}})),tagList:t.keyWords.map((function(t){return{value:t}})),replyContant:[{msgType:t.contentOneType,msgContent:t.contentOne}],sendContentList:[{msgType:t.contentOneType,msgContent:t.contentOne}]};return Object(s["a"])(Object(s["a"])({},e),{operation:e})})),this.isQueueSpeech=Boolean(n.isQueueSpeech),this.isQueueDiscard=Boolean(n.isQueueDiscard),this.isAutoProductReply=Boolean(d),this.isOpenServicerProduct=Boolean(v),this.queueDiscardTime=n.queueDiscardTime,this.servicerProductTypeList=a.servicerProductTypeList||[],u&&(this.noReceptorReply=u),l&&(this.receptorEndTime=this.$moment(Object(x["c"])(l),"HH:mm")),this.receptorStartTime=this.$moment(Object(x["c"])(c),"HH:mm"),this.limit=n.limit,0!==r&&1!==r||(this.isAutoChangeHuman=Boolean(r)),o&&(this.textareaOver.value=o),this.autoEnd=n.autoEnd,"allDay"===this.onlineTime)this.selectList=a.allDayServicerList.map((function(t){t.title=t.name;var e=Object(s["a"])(Object(s["a"])({},t),{thumbAvatar:t.avatar,userid:t.servicerUserid});return t.key=String(t.servicerUserid),t.source=e,Object.assign({},t)}));else{try{this.staffAutoOnlineList=a.workCycleServicerList.map((function(t){return{workcycleId:t.workcycleId,workCycle:t.weekDays.split(","),startTime:e.$moment(Object(x["c"])(t.start),"HH:mm"),endTime:e.$moment(Object(x["c"])(t.end),"HH:mm"),staffIdList:t.servicer.map((function(t){return{source:Object(s["a"])(Object(s["a"])({},t),{thumbAvatar:t.avatar,userid:t.servicerUserid}),key:String(t.servicerUserid),title:t.name}}))}}))}catch(g){console.log(g)}this.spareList=a.spareServicerList.map((function(t){return{source:Object(s["a"])(Object(s["a"])({},t),{thumbAvatar:t.avatar,userid:t.servicerUserid}),key:String(t.servicerUserid),title:t.name}}))}}},e.prototype.hasAddLimitStaus=function(){if(console.log(this.setCustomer),this.setCustomer.length<=0)return this.$message.warning("未添加客服成员，请先选择客服成员"),void(this.isOpenServicerProduct=!1)},e.prototype.getInfo=function(){var t=this;return new Promise((function(e,i){var n,a,s,r,o;if(t.changeStartTimeOne({startTime:t.receptorStartTime,endTime:t.receptorEndTime}))i();else if(t.changeEndTimeOne({startTime:t.receptorStartTime,endTime:t.receptorEndTime}))i();else{if(t.receptorStartTime&&t.receptorEndTime||(t.$message.warning("请填写人工接待时间"),i()),t.noReceptorReply||(t.$message.warning("请填写非人工时间话术内容"),i()),"allDay"===t.onlineTime&&t.selectList.length<1&&(t.$message.warning("请添加成员"),i()),t.isAutoChangeHuman&&!t.textareaOver.value&&(t.$message.warning("请输入自动接入回复语"),i()),t.isAutoChangeHuman&&!t.textareaOver.value&&(t.$message.warning("请输入自动接入回复语"),i()),console.log(t.isOpenServicerProduct),t.isOpenServicerProduct&&"robot"!==t.source)for(var c=0;c<t.setCustomer.length;c++){var l=t.setCustomer[c];if(!((null===(n=null===l||void 0===l?void 0:l.tags)||void 0===n?void 0:n.length)>0))return t.$message.warning("请给客服分类".concat(c+1,"添加分类")),void i()}if("freedom"===t.onlineTime){for(c=0;c<t.staffAutoOnlineList.length;c++){l=t.staffAutoOnlineList[c];if((null===(a=l.staffIdList)||void 0===a?void 0:a.length)<1)return t.$message.warning("工作周期".concat(c+1,"员工没有选择")),void i("");if((null===(s=l.workCycle)||void 0===s?void 0:s.length)<1)return t.$message.warning("工作周期".concat(c+1,"工作日期没有选择")),void i("");if(!l.startTime||!l.endTime)return t.$message.warning("工作周期".concat(c+1,"上线时间没有选择")),void i("")}t.spareList.length<1&&(t.$message.warning("请添加备用成员"),i())}t.isOpenPriorityQueue&&(t.noReceptorPriorityQueueReply||(t.$message.warning("请填写优先接待的非人工回复话术"),i()),t.priorityContentList.length<1&&(t.$message.warning("开启了优先接待,请至少填写一个关键词"),i())),e({ruleDto:{id:null===(o=null===(r=t.allData)||void 0===r?void 0:r.ruleDto)||void 0===o?void 0:o.id,assignType:t.assignType,isPriorityAssign:Number(t.isPriorityAssign),limit:t.limit,isQueueSpeech:Number(t.isQueueSpeech),speechContent:t.isQueueSpeech?t.speechContent:"",autoEnd:t.autoEnd,isQueueDiscard:Number(t.isQueueDiscard),queueDiscardTime:t.queueDiscardTime},isOpenPriorityQueue:Number(t.isOpenPriorityQueue),noReceptorPriorityQueueReply:t.noReceptorPriorityQueueReply,priorityContentList:t.priorityContentList.map((function(t){return console.log(t),{contentId:t.contentId,contentOneType:t.replyContant[0].msgType,contentOne:t.replyContant[0].msgContent,keyWords:t.keyWord.map((function(t){return t.value}))}})),isAutoProductReply:Number(t.isAutoProductReply),isOpenServicerProduct:Number(t.isOpenServicerProduct),isAutoChangeHuman:Number(t.isAutoChangeHuman),changeHumenReply:t.isAutoChangeHuman?t.textareaOver.value:"",receptorType:"allDay"===t.onlineTime?0:1,noReceptorReply:t.noReceptorReply,receptorStartTime:3600*t.receptorStartTime.format("H")+60*t.receptorStartTime.format("m"),receptorEndTime:3600*t.receptorEndTime.format("H")+60*t.receptorEndTime.format("m"),receptorSetDto:{allDayServicerList:"allDay"===t.onlineTime?t.selectList.map((function(t){return{servicerUserid:t.source.userid,name:t.source.name,avatar:t.source.thumbAvatar}})):[],workCycleServicerList:"freedom"===t.onlineTime?t.staffAutoOnlineList.map((function(t){return{workcycleId:t.workcycleId,weekDays:t.workCycle.join(","),start:3600*t.startTime.format("H")+60*t.startTime.format("m"),end:3600*t.endTime.format("H")+60*t.endTime.format("m"),servicer:t.staffIdList.map((function(t){return{servicerUserid:t.source.userid,name:t.source.name,avatar:t.source.thumbAvatar}}))}})):[],spareServicerList:"freedom"===t.onlineTime?t.spareList.map((function(t){return{servicerUserid:t.source.userid,name:t.source.name,avatar:t.source.thumbAvatar}})):[],servicerProductTypeList:t.isOpenServicerProduct?t.setCustomer.map((function(t){var e;return{servicerUserid:t.key,productTypeList:null===(e=t.tags)||void 0===e?void 0:e.map((function(t){return t.tagName}))}})):[]}})}}))},e.prototype.addContent=function(){this.visibileForm=!0,this.editData={}},e.prototype.findIndexFun=function(t){var e=this.priorityContentList.findIndex((function(e){return e.operation.key===t.key}));return e},e.prototype.serviceForm=function(t){var e=this.findIndexFun(t);e>=0?this.priorityContentList[e]=Object(s["a"])(Object(s["a"])({},this.priorityContentList[e]),{keyWord:t.tagList,replyContant:t.sendContentList,operation:t}):(t.key=Date.now(),this.priorityContentList.push({keyWord:t.tagList,replyContant:t.sendContentList,operation:t})),console.log(this.priorityContentList),this.visibileForm=!1},e.prototype.getmanageUpdate=function(t){this.stageName=t,this.maxNum="分钟"==t?60:24},e.prototype.addTag=function(t){t.value,t.tagItem;var e=t.callBack;e()},e.prototype.selectPerson=function(t,e){var i=this;setTimeout((function(){i.changeStartTime(t,e),i.changeEndTime(t,e)}),200)},e.prototype.getMember=function(){this.AddspareVisible=!0},e.prototype.servicespareOk=function(t){this.AddspareVisible=!1,this.spareList=t,console.log(t)},e.prototype.addAtherWeekTime=function(){this.staffAutoOnlineList.push(this.defaultStaffAutoOnlineList()),this.staffAutoOnlineList.map((function(t,e){return t.value=e,Object.assign({},t)}))},e.prototype.deleteStaff=function(t){this.staffAutoOnlineList.splice(t,1)},e.prototype.editContent=function(t){console.log(t),this.editData=t,this.visibileForm=!0},e.prototype.delContent=function(t){var e=this;this.$confirm({title:"提示",icon:"",content:"确定删除该条自动回复吗",onOk:function(){var i=e.findIndexFun(t);e.priorityContentList.splice(i,1)}})},e.prototype.changeStartTimeOne=function(t){if(console.log(t),t.endTime){var e=Object(x["b"])(t.startTime.format("HH:mm"),t.endTime.format("HH:mm"),"start");if(e)return t.startTime=void 0,this.$message.warning("开始时间不能大于结束时间"),!0}return!1},e.prototype.changeEndTimeOne=function(t){if(t.startTime){var e=Object(x["b"])(t.startTime.format("HH:mm"),t.endTime.format("HH:mm"),"start");if(e)return t.endTime=void 0,this.$message.warning("结束时间不能小于开始时间"),!0}return!1},e.prototype.changeSelect=function(t,e){this.changeStartTime(t,e),this.changeEndTime(t,e)},e.prototype.changeStartTime=function(t,e){if(t.startTime&&!(t.staffIdList.length<=0)&&!(t.workCycle.length<=0)){var i=this,n=t.staffIdList.map((function(t){return t.title})),a=t.workCycle;i.conFlictflag=!1,i.staffAutoOnlineList.length>1?i.staffAutoOnlineList.map((function(s,r){if(s.endTime&&!(s.staffIdList.length<=0)&&!(s.workCycle.length<=0)&&t.value!=s.value){var o=s.staffIdList.map((function(t){return t.title})),c=!1;if(o.every((function(t){var e=n.indexOf(t);c=e<=-1})),!c){var l=new Set(n.concat(o)),u=Array.from(l);if(u.length<=n.length+o.length){var d=s.workCycle,p=new Set(a.concat(d)),f=Array.from(p);if(f.length<a.length+d.length){var m=i.$moment(t.startTime).isBetween(s.startTime,s.endTime);return m?(i.conFlictflag=!0,i.conFlictText="员工「".concat(o[0],"」的【周期").concat(e+1,"】 和【周期").concat(r+1,"】在").concat(O["f"][d[0]],"的时间有冲突"),void i.$message.warning(i.conFlictText)):void 0}i.conFlictflag=!1}else i.conFlictflag=!1}}})):i.conFlictflag=!1}},e.prototype.changeEndTime=function(t,e){if(t.endTime&&!(t.staffIdList.length<=0)&&!(t.workCycle.length<=0)){var i=this;i.conFlictflag=!1;var n=t.staffIdList.map((function(t){return t.title})),a=t.workCycle;i.staffAutoOnlineList.length>1?i.staffAutoOnlineList.map((function(s,r){if(s.endTime&&!(s.staffIdList.length<=0)&&!(s.workCycle.length<=0)&&t.value!=s.value){var o=s.staffIdList.map((function(t){return t.title})),c=!1;if(o.every((function(t){var e=n.indexOf(t);c=e<=-1})),!c){var l=new Set(n.concat(o)),u=Array.from(l);if(u.length<n.length+o.length){var d=s.workCycle,p=new Set(a.concat(d)),f=Array.from(p);if(f.length<a.length+d.length){var m=i.$moment(t.endTime).isBetween(s.startTime,s.endTime);return m?(i.conFlictflag=!0,i.conFlictText="员工「".concat(o[0],"」的【周期").concat(e+1,"】 和【周期").concat(r+1,"】在").concat(O["f"][d[0]],"的时间有冲突"),void i.$message.warning(i.conFlictText)):void 0}i.conFlictflag=!1}else i.conFlictflag=!1}}})):i.conFlictflag=!1}},e.prototype.serviceOk=function(t){this.AddTransfeVisible=!1,t.forEach((function(t){t.value=100})),this.selectList=t},e.prototype.closeDetel=function(t){this.selectList.splice(t,1)},e.prototype.closespcieDetel=function(t){this.spareList.splice(t,1)},Object(s["c"])([Object(r["b"])({default:!0})],e.prototype,"isNeedPhone",void 0),Object(s["c"])([Object(r["b"])({default:function(){return{}}})],e.prototype,"allData",void 0),Object(s["c"])([Object(r["b"])({default:"none"})],e.prototype,"source",void 0),Object(s["c"])([Object(r["d"])("allData",{deep:!0,immediate:!0})],e.prototype,"getDetail",null),e=Object(s["c"])([Object(r["a"])({components:{AddTransfer:c["a"],PhoneModel:C["a"],AddReply:b,AddContent:_["a"],FormList:k["a"],TagComponents:T["a"]}})],e),e}(r["c"]),j=w,D=j,S=(i("be3e"),Object(h["a"])(D,l,u,!1,null,"a8f1dbfc",null)),P=S.exports,A=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("h3",{staticClass:"title"},[t._v("机器人设置")]),e("div",{staticClass:"wrap"},[e("ul",{staticClass:"main",staticStyle:{width:"100%"}},[e("li",[t._m(0),e("div",{staticClass:"content"},[e("p",{staticClass:"tips"},[t._v("可设置关键词，当客户发送包含关键词的内容将自动回复")]),e("a-table",{staticClass:"table",attrs:{columns:t.columns,"data-source":t.data,bordered:"",rowKey:function(t,e){return e}},scopedSlots:t._u([{key:"keyWord",fn:function(i){return e("div",{},t._l(i,(function(i,n){return e("a-tag",{key:n},[t._v(" "+t._s(i.value)+" ")])})),1)}},{key:"replyContant",fn:function(i){return e("div",{},t._l(i,(function(i,n){return e("p",{key:n},[t._v(" "+t._s(i.msgContent)+" ")])})),0)}},{key:"operation",fn:function(i){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.editContent(i)}}},[t._v("修改")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.delContent(i)}}},[t._v("删除")])],1)}}])},[e("template",{slot:"footer"},[e("div",{staticClass:"table-foot",on:{click:t.addContent}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 添加自动回复 ")],1)])],2)],1)]),e("li",[e("label",{staticClass:"label"},[t._v("问题解决反馈:")]),e("div",{staticClass:"content"},[e("a-switch",{model:{value:t.isOpenProFeedBack,callback:function(e){t.isOpenProFeedBack=e},expression:"isOpenProFeedBack"}}),t._v(" "+t._s(t.isOpenProFeedBack?"已打开":"已关闭")+" "),e("p",{staticClass:"tips"},[t._v("开启后，将在机器人回复消息后询问客户问题是否解决")])],1)]),t.isOpenProFeedBack?e("li",[e("label",{staticClass:"label"},[t._v("问题「已解决」:")]),e("div",{staticClass:"content"},[e("FormList",{staticClass:"input",attrs:{formInfo:t.textareaOver}})],1)]):t._e(),t.isOpenProFeedBack?e("li",[e("label",{staticClass:"label"},[t._v("问题「未解决」:")]),e("div",{staticClass:"content"},[e("FormList",{staticClass:"input",attrs:{formInfo:t.textareaNone}})],1)]):t._e(),e("ManualReception",{ref:"reception",attrs:{isNeedPhone:!1,allData:t.allData,source:"robot"}})],1),e("PhoneModel",{attrs:{textList:t.textList}})],1),e("a-modal",{attrs:{footer:null,destroyOnClose:"",centered:"",width:"599px"},model:{value:t.visibileForm,callback:function(e){t.visibileForm=e},expression:"visibileForm"}},[e("AddReply",{attrs:{editData:t.editData,source:{title:"自动回复"}},on:{cancle:function(e){t.visibileForm=!1},serviceOk:t.serviceOk}})],1)],1)},R=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("label",{staticClass:"label"},[t._v("自动回复"),e("span",{staticClass:"red"},[t._v("*")]),t._v(":")])}],F=i("36b4"),I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-model"},[e("img",{staticClass:"bg",attrs:{src:"/imgs/chatBg.png"}}),e("div",{staticClass:"contant"},[e("p",{staticClass:"time"},[t._v(t._s(t.time))]),t.textList.length>0?e("ul",t._l(t.textList,(function(i,n){return e("li",{key:n,staticClass:"contant-list",class:{right:"user"===i.role}},["img"===i.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[e("img",{staticClass:"upload-img",attrs:{src:i.pic_url.compress}})])]:t._e(),"link"===i.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-title"},[e("a-tooltip",{attrs:{title:i.linkTitle}},[e("p",{staticClass:"contant-subtitle"},[t._v(t._s(i.linkTitle))])]),e("div",{staticClass:"contant-contant"},[i.desc?e("a-tooltip",{attrs:{title:i.desc}},[e("span",[t._v(t._s(i.desc))])]):t._e(),e("a-avatar",{attrs:{src:i.coverUrl.compress,size:32,shape:"square"}})],1)],1)]:t._e(),i.type||"customer"!==i.role?t._e():[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main",domProps:{innerHTML:t._s(i.text)}})],i.type||"user"!==i.role?t._e():[e("div",{staticClass:"contant-main blue",domProps:{innerHTML:t._s(i.text)}}),e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}})]],2)})),0):t._e()])])},M=[],$={name:"PhoneModel",data:function(){return{time:this.$moment().format("HH:mm")}},props:{textList:{type:[Array],default:function(){return[]}}},watch:{textList:function(){}}},E=$,B=(i("616d"),Object(h["a"])(E,I,M,!1,null,"74769b53",null)),N=B.exports,H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpenProFeedBack=!0,e.deepCopyData=[],e.textareaOver={type:"textarea",tips:"请输入「已解决」话术",maxLength:200,value:"收到您的反馈，我们会继续加油哦~"},e.textareaNone={type:"textarea",tips:"请输入「未解决」话术",maxLength:200,value:"收到您的反馈，您可以尝试输入其他关键词查询~"},e.columns=[{title:"问题关键词",dataIndex:"keyWord",key:"keyWord",scopedSlots:{customRender:"keyWord"}},{title:"回复内容",dataIndex:"replyContant",key:"replyContant",width:"500px",scopedSlots:{customRender:"replyContant"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],e.data=[],e.visibileForm=!1,e.editData={},e}return Object(s["d"])(e,t),Object.defineProperty(e.prototype,"textList",{get:function(){var t,e,i=[{text:'本次回答是否已解决了您的问题？<p style="color: #6495ed;">已解决</p><p style="color: #6495ed;">未解决</p>',role:"customer"},{text:"已解决",role:"user"},{text:this.textareaOver.value,role:"customer"},{text:"未解决",role:"user"},{text:this.textareaNone.value,role:"customer"},{text:"人工服务",role:"user"},{text:"正在为您转接人工客服请稍后",role:"customer"}];if(this.data.length>0){for(var n=0;n<(null===(e=null===(t=this.data[0])||void 0===t?void 0:t.replyContant)||void 0===e?void 0:e.length);n++){var a=this.data[0].replyContant[n];i.unshift({text:a.msgContent,role:"customer"})}i.unshift({text:this.data[0].keyWord[0].value,role:"user"})}return i},enumerable:!1,configurable:!0}),e.prototype.getInfo=function(){return Object(s["b"])(this,void 0,void 0,(function(){var t,e;return Object(s["e"])(this,(function(i){switch(i.label){case 0:if(console.log(this.data),this.data.length<1)return this.$message.warning("请设置关键词"),[2];if(this.isOpenProFeedBack){if(!this.textareaOver.value)return this.$message.warning("请设置关键词「已解决」回复语"),[2];if(!this.textareaNone.value)return this.$message.warning("请设置关键词「未解决」回复语"),[2]}return t=this.$refs["reception"],[4,t.getInfo()];case 1:return e=i.sent(),[2,Object(s["a"])(Object(s["a"])({},e),{replyContent:this.data.map((function(t){return{id:t.id,keyWords:t.keyWord.map((function(t){return t.value})),replyContent:t.replyContant.map((function(t){return{type:t.msgType,text:t.msgContent}}))}})),contentIds2Delete:this.getDeleteData(),solvedReply:this.textareaOver.value,unsolvedReply:this.textareaNone.value,isOpenProFeedBack:Number(this.isOpenProFeedBack)})]}}))}))},e.prototype.getDeleteData=function(){var t,e=this,i=[];return null===(t=this.deepCopyData)||void 0===t||t.forEach((function(t){var n=e.data.findIndex((function(e){if(t.id===e.id)return t}));n<0&&i.push(t.id)})),i},e.prototype.getDetail=function(){var t;(null===(t=this.allData)||void 0===t?void 0:t.kfid)&&(this.isOpenProFeedBack=Boolean(this.allData.isOpenProFeedBack),this.allData.solvedReply&&(this.textareaOver.value=this.allData.solvedReply),this.allData.unsolvedReply&&(this.textareaNone.value=this.allData.unsolvedReply))},e.prototype.created=function(){this.getkeyword()},e.prototype.findIndexFun=function(t){var e=this.data.findIndex((function(e){return e.operation.key===t.key}));return e},e.prototype.serviceOk=function(t){var e=this.findIndexFun(t);e>=0?this.data[e]=Object(s["a"])(Object(s["a"])({},this.data[e]),{keyWord:t.tagList,replyContant:t.sendContentList,operation:t}):(t.key=Date.now(),this.data.push({keyWord:t.tagList,replyContant:t.sendContentList,operation:t})),console.log(this.data),this.visibileForm=!1},e.prototype.getkeyword=function(){var t=this,e={kfid:this.allData.kfid,currentPage:1,pageSize:999};Object(F["o"])(e).then((function(e){var i,n;t.data=(null===(n=null===(i=null===e||void 0===e?void 0:e.data)||void 0===i?void 0:i.list)||void 0===n?void 0:n.map((function(t){var e=Object(s["a"])(Object(s["a"])({key:t.id},t),{keyWord:t.keyWords.map((function(t){return{value:t}})),tagList:t.keyWords.map((function(t){return{value:t}})),replyContant:t.contents.map((function(t){return{msgType:t.type,msgContent:t.text}})),sendContentList:t.contents.map((function(t){return{msgType:t.type,msgContent:t.text}}))});return Object(s["a"])(Object(s["a"])({},e),{operation:e})})))||[],console.log(t.data),t.deepCopyData=JSON.parse(JSON.stringify(t.data))})).catch((function(e){console.error(e),t.$message.error(e||e.message)}))},e.prototype.editContent=function(t){console.log(t),this.editData=t,this.visibileForm=!0},e.prototype.delContent=function(t){var e=this;this.$confirm({title:"提示",icon:"",content:"确定删除该条自动回复吗",onOk:function(){var i=e.findIndexFun(t);e.data.splice(i,1)}})},e.prototype.addContent=function(){this.visibileForm=!0,this.editData={}},Object(s["c"])([Object(r["b"])({default:function(){return{}}})],e.prototype,"allData",void 0),Object(s["c"])([Object(r["d"])("allData",{deep:!0,immediate:!0})],e.prototype,"getDetail",null),e=Object(s["c"])([Object(r["a"])({components:{AddReply:b,FormList:k["a"],PhoneModel:N,ManualReception:P}})],e),e}(r["c"]),U=H,Q=U,q=(i("391b"),Object(h["a"])(Q,A,R,!1,null,"0a979ed9",null)),W=q.exports,V=i("cf5f"),K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.urlCode="",e.urlCode2="",e.mediaId="",e.uploadImg="/icons/user.png",e.name="",e.addKfid="",e.allData={},e.loading=!1,e.AddTransfeVisible=!1,e.receptionType=1,e.firstStep=!0,e.selectList=[],e}return Object(s["d"])(e,t),Object.defineProperty(e.prototype,"corpName",{get:function(){var t,e,i,n;return(null===(n=null===(i=null===(e=null===(t=this.$store)||void 0===t?void 0:t.state)||void 0===e?void 0:e.user)||void 0===i?void 0:i.corp)||void 0===n?void 0:n.name)||"未获到公司名"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getKfid",{get:function(){return this.$route.query.kfid||this.addKfid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.$route.query.state},enumerable:!1,configurable:!0}),e.prototype.watchKfid=function(){this.getKfid&&this.getInfo(this.getKfid)},e.prototype.handleWatch=function(){var t=this,e="/icons/user.png";this.urlCode2="",this.urlCode?Object(L["i"])(this.urlCode)?Object(L["g"])(this.urlCode).then((function(e){t.uploadImg=e[1]})):this.uploadImg=this.urlCode:this.uploadImg=e},e.prototype.getInfo=function(t){var e=this;Object(F["j"])({kfid:t}).then((function(t){e.allData=t.data,e.name=t.data.name,e.receptionType=t.data.workType,e.urlCode2=t.data.img})).catch((function(t){e.$message.error(t||t.message)}))},e.prototype.firstStepBtn=function(){var t,e;return Object(s["b"])(this,void 0,void 0,(function(){var i,n,a,r=this;return Object(s["e"])(this,(function(s){switch(s.label){case 0:return[4,this.firstNextVerify()];case 1:return s.sent(),this.loading=!0,[4,this.uploadMedia(this.urlCode)];case 2:return i=s.sent(),n={kfid:this.getKfid,name:this.name,img:null===(t=null===i||void 0===i?void 0:i.data)||void 0===t?void 0:t.fileUrl,mediaId:null===(e=null===i||void 0===i?void 0:i.data)||void 0===e?void 0:e.mediaId},a="add"===this.state?F["a"]:F["t"],a(n).then((function(t){r.firstStep=!1,(null===t||void 0===t?void 0:t.data)&&(r.addKfid=t.data.kfid)})).catch((function(t){r.$message.error(t||t.message)})).finally((function(){r.loading=!1})),[2]}}))}))},e.prototype.firstNextVerify=function(){var t=this;return new Promise((function(e,i){return t.name?t.urlCode||t.urlCode2?void e({data:{fileUrl:t.urlCode2,mediaId:t.mediaId}}):(t.$message.warning("请上传头像"),void i("请上传头像")):(t.$message.warning("请填写账号名称"),void i("请填写账号名称"))}))},e.prototype.ReceptionBtn=function(t){this.receptionType=t},e.prototype.submit=function(){return Object(s["b"])(this,void 0,void 0,(function(){var t,e,i,n=this;return Object(s["e"])(this,(function(a){switch(a.label){case 0:return t={},1!==this.receptionType?[3,2]:(e=this.$refs["reception"],[4,e.getInfo()]);case 1:return t=a.sent(),[3,4];case 2:return e=this.$refs["machine"],[4,e.getInfo()];case 3:t=a.sent(),a.label=4;case 4:return t.ruleDto=Object(s["a"])(Object(s["a"])(Object(s["a"])({},this.allData.ruleDto),t.ruleDto),{kfid:this.getKfid}),i=Object(s["a"])({kfid:this.getKfid,workType:this.receptionType},t),console.log(i),Object(F["s"])(i).then((function(t){n.$message.success("保存成功"),n.$router.go(-1)})).catch((function(t){n.$message.error(t||t.message)})),[2]}}))}))},e.prototype.uploadMedia=function(t){var e=this;return new Promise((function(i,n){if(t){var a=new FormData;a.append("file",e.urlCode),a.append("dir","custservice"),a.append("type","image"),Object(V["y"])(a).then((function(t){i(t)})).catch((function(t){e.$message.error(t||t.message),e.loading=!1,n()}))}else i("")}))},Object(s["c"])([Object(r["d"])("getKfid",{deep:!0,immediate:!0})],e.prototype,"watchKfid",null),Object(s["c"])([Object(r["d"])("urlCode",{deep:!0})],e.prototype,"handleWatch",null),e=Object(s["c"])([Object(r["a"])({components:{UpDateImg:o["a"],ManualReception:P,AddTransfer:c["a"],ReceptionMachine:W}})],e),e}(r["c"]),z=K,Y=z,G=(i("1a52"),Object(h["a"])(Y,n,a,!1,null,"3ccc12c0",null));e["default"]=G.exports},1011:function(t,e,i){"use strict";i("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",[e("ul",t._l(t.sendContentList,(function(i,n){return e("li",{key:n,staticClass:"send-content"},[t.needTitle?e("span",[t._v("消息"+t._s(n+1)+"：")]):t._e(),e("div",{staticClass:"flex1"},[e("p",{staticClass:"radio"},[e("a-radio-group",{on:{change:function(e){return t.changeType(n)}},model:{value:i.msgType,callback:function(e){t.$set(i,"msgType",e)},expression:"item.msgType"}},t._l(t.msgTypeList,(function(i,n){return e("a-radio",{key:n,attrs:{value:i.id}},[t._v(" "+t._s(i.text)+" ")])})),1),0!==n?e("a-icon",{attrs:{type:"delete"},on:{click:function(e){return t.$emit("delContent",n)}}}):t._e()],1),0===i.msgType?e("div",{staticClass:"textarea-wrap"},[e("a-textarea",{staticClass:"textarea",attrs:{maxLength:i.maxLength,placeholder:"请输入内容",autoSize:{minRows:4,maxRows:4}},model:{value:i.msgContent,callback:function(e){t.$set(i,"msgContent",e)},expression:"item.msgContent"}}),i.maxLength?e("p",{staticClass:"statistics font-color-black-25"},[t._v(" "+t._s(i.msgContent.length)+"/"+t._s(i.maxLength)+" ")]):t._e()],1):t._e(),1===i.msgType?e("div",[e("FormList",{staticClass:"input",attrs:{formInfo:i.imageObj},model:{value:i.msgContent,callback:function(e){t.$set(i,"msgContent",e)},expression:"item.msgContent"}})],1):t._e(),2===i.msgType?e("div",[e("AddLinkWrap",{attrs:{editData:i.msgContent.form,isNeedSelectRadar:t.isNeedSelectRadar,source:t.source,isNeedRader:t.isNeedRader},model:{value:i.msgContent,callback:function(e){t.$set(i,"msgContent",e)},expression:"item.msgContent"}})],1):t._e(),3===i.msgType?e("div",{staticClass:"flex-pdf"},[i.pdfArr[0]?e("AccessoryList",{attrs:{item:i}}):t._e(),e("div",{staticClass:"flex-pdf"},[e("a-upload",{attrs:{"file-list":i.pdfArr,showUploadList:!1,accept:t.acceptPdf,customRequest:t.customRequest},on:{change:t.handleChange}},[i.pdfArr[0]?e("a-button",{attrs:{type:"link"}},[t._v("重新上传")]):e("div",{staticClass:"ant-upload"},[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(" 添加pdf ")])],1)],1),e("span",{staticClass:"font-color-black-25",staticStyle:{"margin-left":"10px"}},[t._v("请在20M以内")])],1)],1):t._e(),4===i.msgType?e("div",{staticClass:"flex-box"},[i.formObj.name?e("AccessoryList",{attrs:{item:i}}):t._e(),e("div",[i.formObj.name?e("a-button",{attrs:{type:"link"},on:{click:function(e){t.visibileForm=!0}}},[t._v("重新选择")]):e("div",{staticClass:"ant-upload",on:{click:function(e){t.visibileForm=!0}}},[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(" 选择素材 ")])],1)],1)],1):t._e(),5===i.msgType?e("div",{staticClass:"flex-pdf"},[i.videoArr[0]?e("AccessoryList",{attrs:{item:i}}):t._e(),e("div",{staticClass:"flex-pdf"},[e("a-upload",{attrs:{showUploadList:!1,accept:t.acceptVideo,customRequest:t.customRequest},on:{change:t.handleChangeVideo,preview:t.handlePreview}},[i.videoArr[0]?e("a-button",{attrs:{type:"link"}},[t._v("重新上传")]):e("div",{staticClass:"ant-upload"},[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(" 上传视频 ")])],1)],1),e("span",{staticClass:"font-color-black-25",staticStyle:{"margin-left":"10px"}},[t._v("请在10M以内")])],1)],1):t._e()])])})),0),e("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"880px",centered:""},model:{value:t.visibileForm,callback:function(e){t.visibileForm=e},expression:"visibileForm"}},[e("AddForm",{attrs:{editData:t.editData,source:t.source},on:{cancle:function(e){t.visibileForm=!1},serviceOk:t.serviceOk}})],1)],1)},a=[],s=i("5530"),r=i("c7eb"),o=i("1da1"),c=(i("7db0"),i("d3b7"),i("fb6a"),i("d81d"),i("26f2")),l=i("7807"),u=i("7581"),d=i("6536"),p={name:"TypeAccessory",components:{FormList:c["a"],AddLinkWrap:l["a"],AddForm:u["a"],AccessoryList:d["a"]},props:{sendContentList:{type:Array,default:function(){return[]}},needTitle:{type:Boolean,default:function(){return!0}},msgTypeList:{type:Array,default:function(){return[]}},source:{type:String,default:""},isNeedRader:{type:Boolean,default:!0},isNeedSelectRadar:{type:Boolean,default:!0}},data:function(){return{acceptPdf:".pdf",acceptVideo:".MP4",visibileForm:!1,editData:{},formObj:{}}},watch:{sendContentList:function(){}},created:function(){},methods:{changeType:function(t){this.sendContentList[t].msgContent=""},handlePreview:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function i(){var n;return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.url||t.preview){i.next=4;break}return i.next=3,e.getBase64(t.originFileObj);case 3:t.preview=i.sent;case 4:n=e.sendContentList.find((function(t){return 5===t.msgType})),n.videoArr[0].pdfFile=t.url||t.preview;case 6:case"end":return i.stop()}}),i)})))()},getBase64:function(t){return new Promise((function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return i(t)}}))},handleChange:function(t){var e,i=this,n=t.fileList,a=n.slice(-1);(null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.size)>2048e4?this.$message.warning("pdf不能大于20M"):setTimeout((function(){var t=i.sendContentList.find((function(t){return 3===t.msgType}));t.pdfArr=a.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{status:"done",msgType:3})}))}),0)},handleChangeVideo:function(t){var e,i=this,n=t.fileList,a=n.slice(-1);(null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.size)>1024e4?this.$message.warning("视频不能大于10M"):setTimeout((function(){i.getBase64(a[0].originFileObj).then((function(t){var e=i.sendContentList.find((function(t){return 5===t.msgType}));e.videoArr=a.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{status:"done",msgType:5,pdfFile:t})}))}))}),0)},customRequest:function(t){t.onSuccess()},serviceOk:function(t){var e=this.sendContentList.find((function(t){return 4===t.msgType}));e.formObj=Object(s["a"])(Object(s["a"])({},t),{},{msgType:4}),this.visibileForm=!1}}},f=p,m=(i("0a2c"),i("2877")),v=Object(m["a"])(f,n,a,!1,null,"4b56a150",null);e["a"]=v.exports},"146f":function(t,e,i){"use strict";i("7d57")},"14aa":function(t,e,i){"use strict";i("0561")},"1a52":function(t,e,i){"use strict";i("1e32")},"1b40":function(t,e,i){"use strict";i.d(e,"a",(function(){return x})),i.d(e,"c",(function(){return n["a"]})),i.d(e,"b",(function(){return T})),i.d(e,"d",(function(){return w}));var n=i("2b0e");
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){return o(t)||c(t)||l()}function o(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function d(t,e){p(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(i){p(t.prototype,e.prototype,i)})),Object.getOwnPropertyNames(e).forEach((function(i){p(t,e,i)}))}function p(t,e,i){var n=i?Reflect.getOwnMetadataKeys(e,i):Reflect.getOwnMetadataKeys(e);n.forEach((function(n){var a=i?Reflect.getOwnMetadata(n,e,i):Reflect.getOwnMetadata(n,e);i?Reflect.defineMetadata(n,a,t,i):Reflect.defineMetadata(n,a,t)}))}var f={__proto__:[]},m=f instanceof Array;function v(t){return function(e,i,n){var a="function"===typeof e?e:e.constructor;a.__decorators__||(a.__decorators__=[]),"number"!==typeof n&&(n=void 0),a.__decorators__.push((function(e){return t(e,i,n)}))}}function g(t){var e=a(t);return null==t||"object"!==e&&"function"!==e}function h(t,e){var i=e.prototype._init;e.prototype._init=function(){var e=this,i=Object.getOwnPropertyNames(t);if(t.$options.props)for(var n in t.$options.props)t.hasOwnProperty(n)||i.push(n);i.forEach((function(i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},configurable:!0})}))};var n=new e;e.prototype._init=i;var a={};return Object.keys(n).forEach((function(t){void 0!==n[t]&&(a[t]=n[t])})),a}var y=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var i=t.prototype;Object.getOwnPropertyNames(i).forEach((function(t){if("constructor"!==t)if(y.indexOf(t)>-1)e[t]=i[t];else{var n=Object.getOwnPropertyDescriptor(i,t);void 0!==n.value?"function"===typeof n.value?(e.methods||(e.methods={}))[t]=n.value:(e.mixins||(e.mixins=[])).push({data:function(){return s({},t,n.value)}}):(n.get||n.set)&&((e.computed||(e.computed={}))[t]={get:n.get,set:n.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return h(this,t)}});var a=t.__decorators__;a&&(a.forEach((function(t){return t(e)})),delete t.__decorators__);var r=Object.getPrototypeOf(t.prototype),o=r instanceof n["a"]?r.constructor:n["a"],c=o.extend(e);return _(c,t,o),u()&&d(c,t),c}var C={prototype:!0,arguments:!0,callee:!0,caller:!0};function _(t,e,i){Object.getOwnPropertyNames(e).forEach((function(n){if(!C[n]){var a=Object.getOwnPropertyDescriptor(t,n);if(!a||a.configurable){var s=Object.getOwnPropertyDescriptor(e,n);if(!m){if("cid"===n)return;var r=Object.getOwnPropertyDescriptor(i,n);if(!g(s.value)&&r&&r.value===s.value)return}0,Object.defineProperty(t,n,s)}}}))}function O(t){return"function"===typeof t?b(t):function(e){return b(e,t)}}O.registerHooks=function(t){y.push.apply(y,r(t))};var x=O;var k="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function L(t,e,i){if(k&&!Array.isArray(t)&&"function"!==typeof t&&!t.hasOwnProperty("type")&&"undefined"===typeof t.type){var n=Reflect.getMetadata("design:type",e,i);n!==Object&&(t.type=n)}}function T(t){return void 0===t&&(t={}),function(e,i){L(t,e,i),v((function(e,i){(e.props||(e.props={}))[i]=t}))(e,i)}}function w(t,e){void 0===e&&(e={});var i=e.deep,n=void 0!==i&&i,a=e.immediate,s=void 0!==a&&a;return v((function(e,i){"object"!==typeof e.watch&&(e.watch=Object.create(null));var a=e.watch;"object"!==typeof a[t]||Array.isArray(a[t])?"undefined"===typeof a[t]&&(a[t]=[]):a[t]=[a[t]],a[t].push({handler:i,deep:n,immediate:s})}))}},"1bee":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return s}));i("a9e3"),i("ac1f"),i("5319"),i("4d63"),i("25f0");function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss",i=e,n=new Date(Number(t)),a={"M+":n.getMonth()+1,"D+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),"S+":n.getMilliseconds()};for(var s in/(y+)/i.test(i)&&(i=i.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+s+")").test(i)&&(i=i.replace(RegExp.$1,1===RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return i}function a(t){var e=parseInt(t/3600)<10?"0"+parseInt(t/3600):parseInt(t/3600),i=parseInt(t%3600/60)<10?"0"+parseInt(t%3600/60):parseInt(t%3600/60);return e+":"+i}function s(t,e){var i=Date.parse(new Date),n=r(i,t),a=new Date(n),s=a.getTime(),o=r(i,e),c=new Date(o),l=c.getTime();return"start"?s>=l:l<=s}function r(t,e){var i=new Date(t),n=i.getFullYear()+"-",a=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",s=i.getDate()+" ";i.getHours(),i.getMinutes(),i.getSeconds();return n+a+s+e+":00"}},"1e32":function(t,e,i){},2314:function(t,e,i){"use strict";i("afd2")},"299d":function(t,e,i){},"36b4":function(t,e,i){"use strict";i.d(e,"m",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"p",(function(){return o})),i.d(e,"k",(function(){return c})),i.d(e,"l",(function(){return l})),i.d(e,"q",(function(){return u})),i.d(e,"g",(function(){return d})),i.d(e,"h",(function(){return p})),i.d(e,"r",(function(){return f})),i.d(e,"o",(function(){return m})),i.d(e,"c",(function(){return v})),i.d(e,"n",(function(){return g})),i.d(e,"e",(function(){return h})),i.d(e,"d",(function(){return y})),i.d(e,"i",(function(){return b})),i.d(e,"a",(function(){return C})),i.d(e,"t",(function(){return _})),i.d(e,"f",(function(){return O})),i.d(e,"j",(function(){return x})),i.d(e,"s",(function(){return k}));var n=i("b775"),a={list:"/custservice/account/list",uploadMedia:"/client_group/upload/uploadMedia",add:"/custservice/account/add",update:"/custservice/account/update",delete:"/custservice/account/delete",info:"/custservice/account/info",channelSave:"/custservice/customerservicechannel/save",channelUpdate:"/custservice/customerservicechannel/update",getchannelList:"/custservice/customerservicechannel/list",channelDelete:"/custservice/customerservicechannel/delete",getkeyword:"/custservice/account/getkeyword",saveReceptionSet:"/custservice/account/saveReceptionSet",receptionistsList:"/custservice/customerserviceservicer/list",getByMember:"/custservice/data/getByMember",getByChannel:"/custservice/data/getByChannel",overview:"/custservice/data/overview",getListByMember:"/custservice/data/getListByMember",getListByChannel:"/custservice/data/getListByChannel",memberExport:"/custservice/data/memberExport",attendenceExport:"/custservice/data/attendenceExport",getOnLineDetailByMember:"/custservice/data/getOnLineDetailByMember"};function s(t){return Object(n["b"])({url:a.getOnLineDetailByMember,method:"post",data:t})}function r(t){return Object(n["b"])({url:a.attendenceExport,method:"post",data:t,responseType:"blob"})}function o(t){return Object(n["b"])({url:a.memberExport,method:"post",data:t,responseType:"blob"})}function c(t){return Object(n["b"])({url:a.getListByChannel,method:"post",data:t})}function l(t){return Object(n["b"])({url:a.getListByMember,method:"post",data:t})}function u(t){return Object(n["b"])({url:a.overview,method:"post",data:t})}function d(t){return Object(n["b"])({url:a.getByChannel,method:"post",data:t})}function p(t){return Object(n["b"])({url:a.getByMember,method:"post",data:t})}function f(t){return Object(n["b"])({url:a.receptionistsList,method:"post",data:t})}function m(t){return Object(n["b"])({url:a.getkeyword,method:"post",data:t})}function v(t){return Object(n["b"])({url:a.channelDelete,method:"post",data:t})}function g(t){return Object(n["b"])({url:a.getchannelList,method:"post",data:t})}function h(t){return Object(n["b"])({url:a.channelUpdate,method:"post",data:t})}function y(t){return Object(n["b"])({url:a.channelSave,method:"post",data:t})}function b(t){return Object(n["b"])({url:a.list,method:"post",data:t})}function C(t){return Object(n["b"])({url:a.add,method:"post",data:t})}function _(t){return Object(n["b"])({url:a.update,method:"post",data:t})}function O(t){return Object(n["b"])({url:a.delete,method:"post",data:t})}function x(t){return Object(n["b"])({url:a.info,method:"post",data:t})}function k(t){return Object(n["b"])({url:a.saveReceptionSet,method:"post",data:t})}},"391b":function(t,e,i){"use strict";i("f2cf")},"616d":function(t,e,i){"use strict";i("8bec")},6536:function(t,e,i){"use strict";i("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",[0===t.item.msgType?e("div",[t._v(" "+t._s(t.item.msgContent)+" ")]):t._e(),1===t.item.msgType?e("div",[e("img",{staticClass:"image",attrs:{src:t.item.msgContent.compress}})]):t._e(),2===t.item.msgType?e("div",{staticClass:"card-box"},[e("img",{attrs:{src:t.item.msgContent.form.coverUrl.compress||"/imgs/default-cover.png"},on:{error:t.errorImg}}),e("div",{staticClass:"box-right"},[e("h5",[t._v(t._s(t.item.msgContent.form.linkTitle))]),e("p",[t._v(t._s(t.item.msgContent.form.desc))])])]):t._e(),3===t.item.msgType?e("div",{staticClass:"custom-pdf"},[e("a-avatar",{attrs:{size:60,src:"/icons/pdf.png",shape:"square"}}),e("div",{staticClass:"contant"},[e("p",[t._v(t._s(t.item.pdfArr[0].name))]),e("span",[t._v(t._s(t._f("getUnits")(t.item.pdfArr[0].size)))])])],1):t._e(),5===t.item.msgType?e("div",[e("video",{staticClass:"cover-img",attrs:{src:t.item.videoArr[0].pdfFile,controls:"",height:"100%"}})]):t._e(),4===t.item.msgType?e("div",{staticClass:"custom-form"},[e("h4",[t._v(t._s(t.item.formObj.name))]),e("div",{staticClass:"flex-box"},[e("p",{staticClass:"font-color-black-25"},[t._v(t._s(t.item.formObj.desc))]),e("a-avatar",{attrs:{size:40,src:t.item.formObj.cover,shape:"square"}})],1)]):t._e()])},a=[],s=i("ca00"),r={name:"AccessoryList",components:{},props:{item:{type:Object,default:function(){return{}}}},watch:{item:{handler:function(){},deep:!0,immediate:!0}},data:function(){return{}},filters:{getUnits:function(t){return Object(s["b"])(t)}},methods:{errorImg:function(t){t.target.src="/imgs/default-cover.png"}}},o=r,c=(i("146f"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,"7b304a5e",null);e["a"]=l.exports},"732f":function(t,e,i){},7581:function(t,e,i){"use strict";i("b0c0");var n=function(){var t=this,e=t._self._c;return e("CommonModal",t._b({on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.sourceModal,!1),[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handleInfiniteOnLoad,expression:"handleInfiniteOnLoad"}],staticClass:"scroll-list",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[t.pageList.length>0?e("ul",{staticClass:"randar-list-wrap"},t._l(t.pageList,(function(i){return e("li",{key:i.formId,staticClass:"randar-list",on:{click:function(e){t.selectRandarId=i.formId}}},[e("header",{staticClass:"randar-head"},[e("div"),e("a-checkbox",{attrs:{checked:t.selectRandarId===i.formId}})],1),e("section",{staticClass:"randar-main"},[e("div",{staticClass:"randar-main-content"},[e("p",[t._v(t._s(i.name))]),e("p",{staticClass:"aks-tips"},[t._v(t._s(i.describe))])]),e("a-avatar",{attrs:{size:40,src:i.cover,shape:"square"}})],1)])})),0):e("a-empty"),t.loading?e("div",{staticClass:"loading-container"},[e("a-spin",{attrs:{tip:"正在加载中..."}})],1):t._e(),!t.loading&&t.pageList.length>0?e("div",{staticClass:"loading-container"},[t._v("没有更多数据了")]):t._e()],1)])},a=[],s=i("2909"),r=(i("7db0"),i("d3b7"),i("2a86")),o=i("487a"),c=i.n(o),l=i("8f19"),u={name:"AddForm",directives:{infiniteScroll:c.a},components:{CommonModal:r["a"]},props:{editData:{type:Object,default:function(){return{}}},source:{type:String,default:""}},data:function(){return{sourceModal:{title:"自定义表单"},pagination:{current:1,pageSize:10,total:0},form:{typeText:"自定义表单",type:"link",linkTitle:"",desc:"",coverUrl:{compress:""}},type:"",typeText:{1:"链接",2:"PDF",3:"文章",4:"文章"},typeImg:{1:"/imgs/default-cover.png",2:"/icons/pdf.png",3:"/imgs/default-cover.png",4:"/imgs/default-cover.png"},radarName:"",loading:!1,busy:!1,pageList:[],selectRandarId:""}},watch:{editData:{handler:function(){},deep:!0,immediate:!0}},methods:{serviceOk:function(){var t=this;if(this.selectRandarId){var e=this.pageList.find((function(e){return e.formId===t.selectRandarId}));e.typeText="自定义表单",e.linkTitle=e.name,e.desc=e.describe,e.type="link",e.key="visibileForm",e.linktype="form_link",e.coverUrl={compress:e.cover},this.$emit("serviceOk",e)}else this.$message.warning("请选择一个自定义表单")},init:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,source:this.source,status:1};this.loading=!0,Object(l["f"])(e).then((function(e){var i;e.data.list.length>0&&(i=t.pageList).push.apply(i,Object(s["a"])(e.data.list));if(t.pagination.current++,e.data.list.length<t.pagination.pageSize)return t.busy=!0,void(t.loading=!1);t.pagination.total=e.data.total})).catch((function(e){t.$message.error(e||e.message)}))},selectTab:function(t){this.type=t,this.pagination.current=1,this.pageList=[],this.busy=!1,this.init()},search:function(){this.pagination.current=1,this.pageList=[],this.busy=!1,this.init()},handleInfiniteOnLoad:function(){!this.busy&&this.init()}}},d=u,p=(i("2314"),i("2877")),f=Object(p["a"])(d,n,a,!1,null,"66fbf478",null);e["a"]=f.exports},"7d57":function(t,e,i){},"86d2":function(t,e,i){},"8bec":function(t,e,i){},"8e34":function(t,e,i){"use strict";i("299d")},"8f19":function(t,e,i){"use strict";i.d(e,"n",(function(){return s})),i.d(e,"q",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"j",(function(){return c})),i.d(e,"h",(function(){return l})),i.d(e,"f",(function(){return u})),i.d(e,"l",(function(){return d})),i.d(e,"d",(function(){return p})),i.d(e,"e",(function(){return f})),i.d(e,"i",(function(){return m})),i.d(e,"g",(function(){return v})),i.d(e,"b",(function(){return g})),i.d(e,"k",(function(){return h})),i.d(e,"m",(function(){return y})),i.d(e,"c",(function(){return b})),i.d(e,"p",(function(){return C})),i.d(e,"o",(function(){return _}));var n=i("b775"),a={customerFormSave:"/client_transformation/customerForm/save",dateInfoList:"/client_transformation/customerFormData/dateInfoList",customerFormList:"/client_transformation/customerForm/list",customerFormInfo:"/client_transformation/customerForm/info",customerFormUpdate:"/client_transformation/customerForm/update",customerFormPublish:"/client_transformation/customerForm/publish",customerFormDelete:"/client_transformation/customerForm/delete",dataInfo:"/client_transformation/customerFormData/dataInfo",analysis:"/client_transformation/customerFormData/analysis",staffList:"/client_transformation/customerFormData/staffList",infoList:"/client_transformation/customerFormData/infoList",analysisExport:"/client_transformation/customerFormData/analysisExport",dataInfoExport:"/client_transformation/customerFormData/dataInfoExport",infoCityList:"/client_transformation/customerFormData/infoCityList",batchTags:"/client_transformation/customerFormData/batchTags",selectList:"/client_transformation/customerForm/userData/selectList",queryDataList:"/client_transformation/customerFormData/queryDataList"};function s(t){return Object(n["b"])({url:a.infoList,method:"post",data:t})}function r(t){return Object(n["b"])({url:a.staffList,method:"get",params:t})}function o(t){return Object(n["b"])({url:a.analysis,method:"get",params:t})}function c(t){return Object(n["b"])({url:a.dataInfo,method:"get",params:t})}function l(t){return Object(n["b"])({url:a.customerFormSave,method:"post",data:t})}function u(t){return Object(n["b"])({url:a.customerFormList,method:"get",params:t})}function d(t){return Object(n["b"])({url:a.dateInfoList,method:"get",params:t})}function p(t){return Object(n["b"])({url:a.customerFormDelete,method:"post",data:t})}function f(t){return Object(n["b"])({url:a.customerFormInfo,method:"get",params:t})}function m(t){return Object(n["b"])({url:a.customerFormUpdate,method:"post",data:t})}function v(t){return Object(n["b"])({url:a.customerFormPublish,method:"post",data:t})}function g(t){return Object(n["b"])({url:a.analysisExport,method:"get",params:t,responseType:"blob"})}function h(t){return Object(n["b"])({url:a.dataInfoExport,method:"get",params:t,responseType:"blob"})}function y(t){return Object(n["b"])({url:a.infoCityList,method:"get",params:t})}function b(t){return Object(n["b"])({url:a.batchTags,method:"post",data:t})}function C(t){return Object(n["b"])({url:a.selectList,method:"get",params:t})}function _(t){return Object(n["b"])({url:a.queryDataList,method:"post",data:t})}},afd2:function(t,e,i){},b9cd:function(t,e,i){"use strict";i.d(e,"l",(function(){return n})),i.d(e,"j",(function(){return a})),i.d(e,"o",(function(){return s})),i.d(e,"n",(function(){return r})),i.d(e,"b",(function(){return o})),i.d(e,"g",(function(){return c})),i.d(e,"d",(function(){return l})),i.d(e,"a",(function(){return u})),i.d(e,"f",(function(){return d})),i.d(e,"k",(function(){return p})),i.d(e,"i",(function(){return f})),i.d(e,"e",(function(){return m})),i.d(e,"p",(function(){return v})),i.d(e,"c",(function(){return g})),i.d(e,"h",(function(){return h})),i.d(e,"q",(function(){return y})),i.d(e,"m",(function(){return b}));var n="LOSS_STATUS",a="GROUP_STATUS",s="ORDER_WAY",r="ORDER_CONDITION",o="ADD_WAY",c="GENDER",l="CUSTOMER_STATUS",u={0:"待分配",1:"待添加",2:"待通过",3:"已添加",4:"导入中"},d={1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},p=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:1},{text:"已不是好友",color:"#ffd4b6",id:2},{text:"客户接收达上限",color:"#fbe8ae",id:3},{text:"本月消息已经达到上限",color:"",id:4}],f=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:2},{text:"没有群发任务",color:"",id:4}],m={1:"微信",2:"企业微信"},v=[{id:"immediately",value:"立即发送"},{id:"timing",value:"定时发送"}],g={0:"渠道码",1:"区域扫码",2:"自动拉群",3:"一客一码",4:"加好友",5:"通过群码拉群"},h={0:{text:"拉人中",color:"green"},1:{text:"未开始",color:""},2:{text:"已达上限",color:"orange"},3:{text:"已停用",color:"red"}},y={0:{text:"创建失败",color:"green",id:0},1:{text:"待发送",color:"rgba(34,34,34,.85)",id:1},2:{text:"已发送",color:"rgba(34,34,34,.85)",id:2},3:{text:"已取消",color:"rgba(34,34,34,.85)",id:3},4:{text:"提醒发送",color:"#1890ff",id:4}},b=[{text:"文章",id:"0",format:""},{text:"链接",id:"1"},{text:"海报",id:"2",max:2,format:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",tips:"请上传png、jpg格式不超过2M的文件"},{text:"视频",id:"7",max:2e5,format:".MP4",tips:"请上传格式为MP4的视频文件"},{text:"PDF",id:"3",max:20,format:".pdf",icon:"/icons/pdf.png",tips:"请上传PDF格式不超过20M的文件"},{text:"PPT",id:"4",max:20,format:".pptx,.ppt,.pps",icon:"/icons/ppt.svg",tips:"请上传PPT格式不超过20M的文件"},{text:"表格",id:"5",max:20,format:".xlsx,.xls,.csv",icon:"/icons/excel.svg",tips:"请上传csv、xlsx格式不超过20M的文件"},{text:"文档",id:"6",max:20,format:".txt,.doc,.docx",icon:"/icons/word.svg",tips:"请上传doc、txt.docx格式不超过20M的文件"}]},be3e:function(t,e,i){"use strict";i("732f")},c0e2:function(t,e,i){},d725:function(t,e,i){"use strict";i("86d2")},e6b1:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-model"},[e("img",{staticClass:"bg",attrs:{src:"/imgs/chatBg.png"}}),e("div",{staticClass:"contant"},[e("p",{staticClass:"time"},[t._v(t._s(t.time))]),t.textList.length>0?e("ul",t._l(t.textList,(function(i,n){return e("li",{key:n,staticClass:"contant-list"},["img"===i.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[e("img",{staticClass:"upload-img",attrs:{src:i.pic_url.compress}})])]:t._e(),"link"===i.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-title"},[e("a-tooltip",{attrs:{title:i.linkTitle}},[e("p",{staticClass:"contant-subtitle"},[t._v(t._s(i.linkTitle))])]),e("div",{staticClass:"contant-contant"},[i.desc?e("a-tooltip",{attrs:{title:i.desc}},[e("span",[t._v(t._s(i.desc))])]):t._e(),e("a-avatar",{attrs:{src:i.coverUrl.compress,size:32,shape:"square"}})],1)],1)]:t._e(),i.type?t._e():[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[t._v(t._s(i))])]],2)})),0):t._e()])])},a=[],s={name:"PhoneModel",data:function(){return{time:this.$moment().format("HH:mm")}},props:{textList:{type:[Array],default:function(){return[]}}},watch:{textList:function(){}}},r=s,o=(i("8e34"),i("2877")),c=Object(o["a"])(r,n,a,!1,null,"1aa7a172",null);e["a"]=c.exports},e9de:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qrcode-wrap"},[e("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card",accept:t.accept,disabled:t.isDisabled,"file-list":t.fileList,customRequest:t.customRequest},on:{preview:t.handlePreview,change:t.handleChange}},[e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(" "+t._s(t.imageUrl?"重新选择":t.titleName)+" ")])],1)]),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:function(e){t.previewVisible=!1}}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.imageUrl}})])],1)},a=[],s={name:"UpDateImg",props:["value","url","title","isDisabled","articleFile"],data:function(){return{accept:".jpg,.png,",previewVisible:!1,imageUrl:"",titleName:this.title||"上传活码",fileList:[]}},watch:{url:{handler:function(){this.url&&(this.fileList[0]={uid:"-1",name:"image.png",status:"done",url:this.url},this.imageUrl=this.url)},immediate:!0},articleFile:{handler:function(){var t=this;this.articleFile&&this.getBase64(this.articleFile,(function(e){t.fileList[0]={uid:"-1",name:"image.png",status:"done",url:t.imageUrl},t.imageUrl=e}))},immediate:!0}},methods:{customRequest:function(t){t.onSuccess()},handlePreview:function(t){this.previewVisible=!0},getBase64:function(t,e){var i=new FileReader;i.addEventListener("load",(function(){return e(i.result)})),i.readAsDataURL(t)},handleChange:function(t){var e,i=this;"uploading"===t.file.status&&(this.getBase64(t.file.originFileObj,(function(t){i.imageUrl=t})),this.fileList=[t.fileList[t.fileList.length-1]],this.fileList[0].status="done"),"removed"===t.file.status&&(this.fileList=[],this.imageUrl=""),this.$emit("input",null===t||void 0===t||null===(e=t.fileList[t.fileList.length-1])||void 0===e?void 0:e.originFileObj)}}},r=s,o=(i("14aa"),i("2877")),c=Object(o["a"])(r,n,a,!1,null,"05819df1",null);e["a"]=c.exports},f2cf:function(t,e,i){}}]);