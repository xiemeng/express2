(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-741647e4"],{"1c9c":function(e,t,r){"use strict";r.d(t,"s",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"t",(function(){return o})),r.d(t,"j",(function(){return c})),r.d(t,"n",(function(){return u})),r.d(t,"y",(function(){return l})),r.d(t,"w",(function(){return d})),r.d(t,"g",(function(){return f})),r.d(t,"B",(function(){return m})),r.d(t,"c",(function(){return p})),r.d(t,"h",(function(){return h})),r.d(t,"a",(function(){return g})),r.d(t,"q",(function(){return b})),r.d(t,"i",(function(){return v})),r.d(t,"v",(function(){return O})),r.d(t,"p",(function(){return y})),r.d(t,"b",(function(){return w})),r.d(t,"l",(function(){return C})),r.d(t,"m",(function(){return S})),r.d(t,"z",(function(){return j})),r.d(t,"C",(function(){return k})),r.d(t,"k",(function(){return L})),r.d(t,"A",(function(){return T})),r.d(t,"x",(function(){return _})),r.d(t,"r",(function(){return D})),r.d(t,"o",(function(){return R})),r.d(t,"d",(function(){return x})),r.d(t,"f",(function(){return A})),r.d(t,"u",(function(){return N}));var n=r("b775"),i={staff:"/enterprise/role/staff",roleList:"/enterprise/role",roleResource:"/enterprise/role/getRoleResource",syncAll:"/enterprise/staff/syncAll",getCustGrpList:"/client_group/customerGroup/getCustGrpList",changeRole:"/enterprise/role/change",departmentStaff:"/enterprise/department/staff",addStaffRole:"/enterprise/role/addStaffRole",getQuitStaff:"/client_manager/transfer/getQuitStaff",getStaff:"/enterprise/staff/get",department:"/enterprise/department",getDepartmentStaff:"/enterprise/department/getStaff",loginAdmin:"/enterprise/staff/loginAdmin",getRoleRes:"/enterprise/role/getRoleRes",changeRes:"/enterprise/role/change/res",getPermissionLog:"/enterprise/permissionLog/query",staffInfo:"/enterprise/staff/statistics/get/staffInfo",yesterdayData:"/enterprise/staff/statistics/get/yesterdayData",getDate:"/enterprise/staff/statistics/get/date",editDelConfig:"/client_manager/customerdelremind/editDelConfig",queryDelConfig:"/client_manager/customerdelremind/queryDelConfig",customStage:"/enterprise/staff/statistics/get/stage",idOrUserIdGet:"/enterprise/staff/idOrUserIdGet",staffOKR:"/enterprise/staffOKR/staffOKR",saveOKR:"/enterprise/staffOKR/save",getStaffOKRList:"/enterprise/staffOKR/getStaffOKRList",getRepeatList:"/enterprise/staffOKR/getRepeatList",checkTime:"enterprise/staffOKR/checkTime",delOkr:"/enterprise/staffOKR/del",modify:"/enterprise/staffOKR/modify"};function a(e){return Object(n["b"])({url:i.idOrUserIdGet,method:"get",params:e})}function s(e){return Object(n["b"])({url:i.customStage,method:"get",params:e})}function o(e){return Object(n["b"])({url:i.loginAdmin,method:"get",params:e})}function c(e){return Object(n["b"])({url:i.getCustGrpList,method:"post",data:e})}function u(e){return Object(n["b"])({url:i.getQuitStaff,method:"get",params:e})}function l(e){return Object(n["b"])({url:i.staff,method:"get",params:e})}function d(){return Object(n["b"])({url:i.roleList,method:"get"})}function f(){return Object(n["b"])({url:i.department,method:"get"})}function m(){return Object(n["b"])({url:i.syncAll,method:"get"})}function p(e){return Object(n["b"])({url:i.changeRole,method:"get",params:e})}function h(){return Object(n["b"])({url:i.departmentStaff,method:"get"})}function g(e){return Object(n["b"])({url:i.addStaffRole,method:"post",data:e})}function b(e){return Object(n["b"])({url:i.getStaff,method:"get",params:e})}function v(e){return Object(n["b"])({url:i.editDelConfig,method:"post",data:e})}function O(e){return Object(n["b"])({url:i.queryDelConfig,method:"post",data:e})}function y(e){return Object(n["b"])({url:i.getRoleRes,method:"get",params:e})}function w(e){return Object(n["b"])({url:i.changeRes,method:"post",data:e})}function C(e){return Object(n["b"])({url:i.getDepartmentStaff,method:"get",params:e})}function S(e){return Object(n["b"])({url:i.getPermissionLog,method:"post",data:e})}function j(e){return Object(n["b"])({url:i.staffInfo,method:"get",params:e})}function k(e){return Object(n["b"])({url:i.yesterdayData,method:"get",params:e})}function L(e){return Object(n["b"])({url:i.getDate,method:"get",params:e})}function T(e){return Object(n["b"])({url:i.staffOKR,method:"get",params:e})}function _(e){return Object(n["b"])({url:i.saveOKR,method:"post",data:e})}function D(e){return Object(n["b"])({url:i.getStaffOKRList,method:"get",params:e})}function R(e){return Object(n["b"])({url:i.getRepeatList,method:"get",params:e})}function x(e){return Object(n["b"])({url:i.checkTime,method:"get",params:e})}function A(e){return Object(n["b"])({url:i.delOkr,method:"post",data:e})}function N(e){return Object(n["b"])({url:i.modify,method:"post",data:e})}},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("6b75");function i(e){if(Array.isArray(e))return Object(n["a"])(e)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=r("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||a(e)||Object(s["a"])(e)||o()}},"65b6":function(e,t,r){},"6b07":function(e,t,r){},9994:function(e,t,r){"use strict";r("65b6")},aa6e8:function(e,t,r){"use strict";r.r(t);r("498a"),r("a4d3"),r("e01a"),r("4c53");var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"algin-betten"},[t("a-page-header",{staticClass:"page-header background-white",attrs:{title:"".concat(e.isAddText,"直播")},on:{back:function(t){return e.$router.go(-1)}}}),t("section",{staticClass:"section background-white"},[t("a-form",{attrs:{"label-col":{span:2},"wrapper-col":{span:12},form:e.form}},[t("a-form-item",{attrs:{label:"直播标题",required:""}},[t("a-input",{attrs:{placeholder:"请输入直播标题",maxLength:20},model:{value:e.theme,callback:function(t){e.theme="string"===typeof t?t.trim():t},expression:"theme"}})],1),t("a-form-item",{attrs:{label:"直播成员",required:""}},[t("SelectMultiple",{staticStyle:{display:"inline-block"},attrs:{userName:e.userName,userThumbAvatar:e.userThumbAvatar,checkShow:!0,userId:e.anchorUserid},on:{selectCustom:e.selectCustom}})],1),t("a-form-item",{attrs:{label:"直播简介",required:""}},[t("a-textarea",{attrs:{placeholder:"请输入直播简介",maxLength:100,"auto-size":{minRows:3,maxRows:7}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),t("a-form-item",{attrs:{label:"直播开始时间",required:""}},[t("DatePickerTW",{attrs:{dateTimeStr:e.createTime,dateTimePlaceholder:e.dateTimePlaceholder},on:{dateTime:e.createTimeOnChange}})],1),t("a-form-item",{attrs:{label:"直播持续时长",required:""}},[t("div",[t("a-input-number",{ref:"min",staticStyle:{width:"80px"},attrs:{min:1,precision:0,placeholder:"0"},model:{value:e.reserveLivingDuration,callback:function(t){e.reserveLivingDuration=t},expression:"reserveLivingDuration"}}),t("span",{staticClass:"s-l"},[e._v("分钟")])],1)]),t("a-form-item",{attrs:{label:"提醒用户",required:""}},[t("div",[t("span",{staticClass:"s-r"},[e._v("直播开始前")]),t("a-input-number",{ref:"min",staticStyle:{width:"80px"},attrs:{min:0,precision:0,placeholder:"0"},model:{value:e.remindTime,callback:function(t){e.remindTime=t},expression:"remindTime"}}),t("span",{staticClass:"s-l"},[e._v("分钟提醒用户")])],1)]),t("a-form-item",{attrs:{label:"直播类型",required:""}},[t("a-radio-group",{staticStyle:{width:"300px"},attrs:{name:"radioGroup"},on:{change:e.onTypeChange},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.selectList,(function(r){return t("a-radio",{key:r.val,attrs:{value:r.val}},[e._v(e._s(r.text))])})),1)],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:2}}},[t("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.sub}},[e._v(" "+e._s("".concat(e.isAddText,"直播"))+" ")])],1)],1)],1)],1)])},i=[],a=r("c7eb"),s=r("1da1"),o=(r("d3b7"),r("eb82")),c=r("6704"),u=r("e309"),l=r("e9de"),d={name:"NewLive",data:function(){return{id:null,userName:"",userThumbAvatar:"",loading:!1,coverObj:"",shareObj:"",form:{},selectList:[{val:0,text:"通用直播"},{val:3,text:"企业培训"},{val:4,text:"活动直播"}],type:0,remindTime:0,reserveStart:"",reserveLivingDuration:1,theme:"",anchorUserid:"",description:"",createTime:"",dateTimePlaceholder:"请选择直播开始时间"}},created:function(){this.id=this.$route.query.id||"",this.id&&this.getInfo()},methods:{getInfo:function(){var e=this;Object(u["b"])({id:this.id}).then((function(t){var r=t.data;e.theme=r.theme,e.userThumbAvatar=r.anchorUserimg,e.userName=r.anchorUsername,e.description=r.description,e.anchorUserid=r.anchorUserid,e.createTime=r.reserveStart,e.reserveStart=r.reserveStart,e.reserveLivingDuration=r.reserveLivingDuration/60,e.remindTime=r.remindTime/60,e.type=r.type})).catch((function(t){e.$message.error(t.mesaage||t)}))},sub:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var r,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.verify();case 2:r={theme:e.theme,anchorUserid:e.anchorUserid,description:e.description,reserveStart:e.reserveStart,reserveLivingDuration:60*e.reserveLivingDuration,remindTime:60*e.remindTime,type:e.type},e.id&&"edit"==e.state?(r.id=e.id,n=Object(u["h"])(r)):n=Object(u["e"])(r),e.loading=!0,n.then(function(){var t=Object(s["a"])(Object(a["a"])().mark((function t(r){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!1,e.$message.success("".concat(e.isAddText,"直播成功")),e.$router.go(-1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message.error(t)})).finally((function(){}));case 6:case"end":return t.stop()}}),t)})))()},verify:function(){var e=this;return new Promise((function(t,r){if(e.loading&&r(),!e.theme)return e.$message.warning("请输入直播标题"),void r("请输入直播标题");if(!e.anchorUserid)return e.$message.warning("请选择企业员工"),void r("请选择企业员工");if(!e.description)return e.$message.warning("请输入直播简介"),void r("请输入直播简介");if(!e.reserveStart)return e.$message.warning("请选择直播开始时间"),void r("请选择直播开始时间");var n=(new Date).valueOf(),i=e.$moment(e.reserveStart).valueOf();if(i<=n)return e.$message.warning("直播开始时间必须大于当前时间"),void r("直播开始时间必须大于当前时间");t()}))},onTypeChange:function(e){this.type=e.target.value},onChangeTime:function(e,t){},onOkTime:function(e){},selectCustom:function(e){this.anchorUserid=e.userid},createTimeOnChange:function(e){this.reserveStart=e}},components:{SelectMultiple:o["a"],DatePickerTW:c["a"],UpDateImg:l["a"]},computed:{state:function(){return this.$route.query.state},isAddText:function(){var e="";switch(this.$route.query.state){case"add":e="新建";break;case"edit":e="修改";break}return e}}},f=d,m=(r("d132"),r("2877")),p=Object(m["a"])(f,n,i,!1,null,"4354fafc",null);t["default"]=p.exports},d132:function(e,t,r){"use strict";r("6b07")},e309:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"h",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"g",(function(){return f}));var n=r("b775"),i={syncAll:"/custservice/livinginfo/syncAll",getLivingCode:"/custservice/livinginfo/h5/getLivingCode",liveList:"/custservice/livinginfo/list",livePeopleList:"/custservice/livingaudience/list",liveInfo:"/custservice/livinginfo/info",syncOne:"/custservice/livinginfo/syncOne",saveLive:"/custservice/livinginfo/save",updateLive:"/custservice/livinginfo/update",deleteList:"/custservice/livinginfo/cancel"};function a(e){return Object(n["b"])({url:i.deleteList,method:"post",data:e})}function s(e){return Object(n["b"])({url:i.saveLive,method:"post",data:e})}function o(e){return Object(n["b"])({url:i.updateLive,method:"post",data:e})}function c(e){return Object(n["b"])({url:i.livePeopleList,method:"post",data:e})}function u(e){return Object(n["b"])({url:i.syncAll,method:"get",params:e})}function l(e){return Object(n["b"])({url:i.liveList,method:"post",data:e})}function d(e){return Object(n["b"])({url:i.liveInfo,method:"get",params:e})}function f(e){return Object(n["b"])({url:i.syncOne,method:"get",params:e})}},eb82:function(e,t,r){"use strict";r("498a"),r("b0c0");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-wrap"},[t("div",{staticClass:"button-name",on:{click:function(t){return t.stopPropagation(),e.selectFocusIsOpen.apply(null,arguments)},mouseenter:e.enter,mouseleave:e.leave}},[e.employeeName?t("span",{staticClass:"hidden"},[t("a-avatar",{attrs:{size:28,shape:"square",src:e.thumbAvatar}}),e._v(" "+e._s(e.employeeName)+" ")],1):t("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"rgba(0, 0, 0, 0.25)"}},[e._v(" "+e._s(e.placeholderStr)+" ")]),e.closeCircle?t("span",{staticStyle:{color:"rgba(0, 0, 0, 0.25)"}},[e.employeeName&&1!=e.styleButton?t("a-icon",{attrs:{type:"close-circle",theme:"filled"},on:{click:function(t){return t.stopPropagation(),e.iconClear.apply(null,arguments)}}}):t("a-icon",{attrs:{type:"down"}})],1):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"},{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"selectBox_list"},[t("div",{staticClass:"group-owner"},[t("header",{staticClass:"header"},[e._v("全部员工 ("+e._s(e.total)+")")]),t("div",{staticClass:"search-name"},[t("a-input-search",{attrs:{placeholder:"请输入员工后回车"},on:{search:e.onSearchName},model:{value:e.searchName,callback:function(t){e.searchName="string"===typeof t?t.trim():t},expression:"searchName"}})],1),t("ul",{staticClass:"list-wrap"},[t("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.getDictionaryByCode,expression:"getDictionaryByCode"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":e.busy,"infinite-scroll-distance":10}},e._l(e.groupOwners,(function(r){return t("li",{key:r.staffId,staticClass:"title-wrap",on:{click:function(t){return e.selectGroupOwner(r)}}},[t("a-space",{attrs:{size:12}},[t("a-avatar",{attrs:{size:30,src:r.thumbAvatar,shape:"square"}}),t("span",[e._v(e._s(r.name))])],1),e.checkShow?t("div",[e.userId==r.userid?t("a-icon",{staticClass:"check-circle",attrs:{type:"check-circle"}}):t("div",{staticClass:"circle"})],1):e._e()],1)})),0)])])])])},i=[],a=r("2909"),s=(r("d81d"),r("4de4"),r("d3b7"),r("25f0"),r("159b"),r("caad"),r("2532"),r("99af"),r("487a")),o=r.n(s),c=r("1c9c"),u={bind:function(e,t){function r(r){if(e.contains(r.target))return!1;t.expression&&t.value(r)}e.__vueClickOutside__=r,document.addEventListener("click",r)},update:function(){},unbind:function(e){document.removeEventListener("click",e.__vueClickOutside__),delete e.__vueClickOutside__}},l={name:"SearchForm",directives:{clickoutside:u,infiniteScroll:o.a},props:{checkShow:{type:Boolean,default:!1},userName:{type:String,default:""},userId:{type:String,default:""},userThumbAvatar:{type:String,default:""},reactflag:{type:Boolean,default:!1},placeholderStr:{type:String,default:"请选择企业员工"},closeCircle:{type:Boolean,default:!0}},data:function(){return{defalytStaffIndex:[],thumbAvatar:"",busy:!0,pagination:{current:1,pageSize:10,total:0},total:0,totalNum:0,selectRoleId:"3",employeeName:"",groupOwners:[],page:1,limit:10,value:[],searchName:"",styleButton:1,owners:[],isOpen:!1,loading:!1,buttonLoding:!1,ownersID:{data:[]}}},created:function(){},methods:{enter:function(){this.styleButton=2},leave:function(){this.styleButton=1},selectGroupOwner:function(e){this.employeeName=e.name,this.thumbAvatar=e.thumbAvatar,this.isOpen=!1,this.$emit("selectCustom",e)},iconClear:function(){this.employeeName="",this.isOpen=!1;var e={empty:"1"};this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode(),this.$emit("selectCustom",e)},handleClose:function(){this.isOpen=!1},selectFocusIsOpen:function(){this.isOpen=!this.isOpen},ok:function(){var e=this.groupOwners.filter((function(e){if(e.defaultChecked)return e.userid})).map((function(e){return e.userid})),t=this.groupOwners.filter((function(e){if(e.defaultChecked)return e})).map((function(e){return{name:e.name,avatar:e.thumbAvatar}}));this.ownersID.data=t;var r=e.toString();this.isOpen=!this.isOpen,this.$store.commit("SET_STAFFIDS",r)},cancel:function(){var e=this;this.isOpen=!this.isOpen,this.groupOwners.forEach((function(t){var r=e.responseData.useridList.includes(t.userid);t.defaultChecked=!!r}));var t=this.groupOwners.filter((function(e){if(e.defaultChecked)return e})).map((function(e){return{name:e.name,avatar:e.thumbAvatar}}));this.ownersID.data=t},handleInfiniteOnLoad:function(){this.pagination.current++,this.loading&&this.getDictionaryByCode()},getDictionaryByCode:function(){var e=this,t={currentPage:this.page,pageSize:this.limit,name:this.searchName||""};this.buttonLoding||(this.buttonLoding=!0,this.loading=!0,"0"!=this.total&&this.groupOwners.length>=this.total?this.busy=!0:Object(c["q"])(t).then((function(t){var r=t.data.list;e.total=t.data.total,e.page>1?e.groupOwners=[].concat(Object(a["a"])(e.groupOwners),Object(a["a"])(r)):e.groupOwners=Object(a["a"])(r),e.groupOwners.length>=e.total?e.busy=!0:(e.page=e.page+1,e.loading=!1)})).catch((function(t){e.$message.error(t||t.message)})).finally((function(){e.buttonLoding=!1})))},onSearchName:function(){this.groupOwners=[],this.page=1,this.getDictionaryByCode()}},watch:{reactflag:{handler:function(e,t){!0===e&&(this.employeeName="",this.isOpen=!1,this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode())}},userName:function(){this.employeeName=this.userName},userThumbAvatar:function(){this.thumbAvatar=this.userThumbAvatar}}},d=l,f=(r("9994"),r("2877")),m=Object(f["a"])(d,n,i,!1,null,"c2d4f660",null);t["a"]=m.exports}}]);