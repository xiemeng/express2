(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26ffaf10"],{"0aaa":function(t,e,a){"use strict";a("7ffc")},"160a":function(t,e,a){},"6a97":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("a-tabs",{attrs:{animated:!1}},[e("a-tab-pane",{key:"1",attrs:{tab:"关键词打标签"}},[e("keyWord",{ref:"keyword",attrs:{type:1}})],1),e("a-tab-pane",{key:"2",attrs:{tab:"客户入群行为打标签"}},[e("keyWord",{ref:"addGroup",attrs:{type:2}})],1),e("a-tab-pane",{key:"3",attrs:{tab:"分时段打标签"}},[e("keyWord",{ref:"timeMake",attrs:{type:3}})],1)],1)],1)},i=[],r=(a("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"channel-list page-box"},[e("a-row",{staticClass:"search-hurdle",attrs:{type:"flex",justify:"space-between"}},[e("a-col",[e("a-space",{attrs:{size:12}}),e("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$router.push({name:t.routeNmae,query:{user:123}})}}},[t._v("添加规则")])],1),e("a-col",[e("a-space",{attrs:{size:18}},[e("span",[t._v("客户标签:")]),e("a-select",{staticStyle:{width:"220px"},attrs:{mode:"multiple",placeholder:"请选择标签","option-label-prop":"label"},on:{change:t.changeTag,dropdownVisibleChange:function(e){t.visibleSelectTag=!0}},model:{value:t.tagNames,callback:function(e){t.tagNames=e},expression:"tagNames"}},[e("div",{attrs:{slot:"dropdownRender"},slot:"dropdownRender"})]),e("span",[t._v("搜索规则:")]),e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入规则名称搜索"},on:{search:t.onSearchName},model:{value:t.ruleName,callback:function(e){t.ruleName=e},expression:"ruleName"}})],1)],1)],1),e("a-table",{staticClass:"background-white",attrs:{"data-source":t.pageList,columns:t.columns,pagination:t.pagination,loading:t.loading},on:{change:t.changePageination},scopedSlots:t._u([{key:"ruleName",fn:function(a){return e("div",{},[t._v(t._s(a))])}},{key:"obscureKeyword",fn:function(a){return e("div",{},t._l(a.split(","),(function(a){return e("a-tag",{key:a},[t._v(" "+t._s(a)+" ")])})),1)}},{key:"preciseKeyword",fn:function(a){return e("div",{},t._l(a.split(","),(function(a){return e("a-tag",{key:a},[t._v(" "+t._s(a)+" ")])})),1)}},{key:"tagNames",fn:function(a){return e("div",{},t._l(a.split(","),(function(a){return e("a-tag",{key:a},[t._v(" "+t._s(a)+" ")])})),1)}},{key:"isActiveObj",fn:function(a){var n=a.status,i=a.sopId;return e("div",{},[e("a-switch",{attrs:{defaultChecked:n},on:{change:function(e){return t.changeActive(i,e)}}})],1)}},{key:"operation",fn:function(a){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:t.detailName,query:{autoTaggingId:a.taggingId}})}}},[t._v("详情")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteData(a.taggingId)}}},[t._v("删除")])],1)}}])}),e("SelectTags",{attrs:{tags:t.tagList},on:{pitchTag:t.pitchTag},model:{value:t.visibleSelectTag,callback:function(e){t.visibleSelectTag=e},expression:"visibleSelectTag"}})],1)}),s=[],o=(a("a9e3"),a("d81d"),a("a15b"),a("4de4"),a("d3b7"),a("caad"),a("2532"),function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{destroyOnClose:""},on:{ok:t.ok,cancel:t.cancel},model:{value:t.visibleSelectTag,callback:function(e){t.visibleSelectTag=e},expression:"visibleSelectTag"}},[e("h6",{staticClass:"dialog-title"},[t._v("选择标签")]),e("a-input-search",{attrs:{allowClear:"",placeholder:"请选择标签"},on:{search:t.onSearchName},model:{value:t.grpName,callback:function(e){t.grpName=e},expression:"grpName"}}),e("ul",{staticClass:"tag-wrap"},t._l(t.tagList,(function(a){return e("li",{key:a.tagId},[e("p",[t._v(t._s(a.groupName)+":")]),t._l(a.tags,(function(a){return e("a-tag",{key:a.tagId,attrs:{color:t.selectTagIdList.includes(a.tagId)?"blue":""},on:{click:function(e){return t.checkedTag(a)}}},[t._v(t._s(a.tagName))])}))],2)})),0)],1)}),c=[],u=(a("c740"),a("a434"),a("7183")),l={name:"SelectTags",props:["value","tags"],data:function(){return{visibleSelectTag:!1,tagList:[],grpName:"",filterType:2,selectTags:[]}},watch:{value:function(){this.visibleSelectTag=this.value},tags:function(){this.selectTags=JSON.parse(JSON.stringify(this.tags))}},computed:{selectTagIdList:function(){return this.selectTags.map((function(t){return t.tagId}))}},activated:function(){this.getTags(),this.selectTags=JSON.parse(JSON.stringify(this.tags))},created:function(){this.getTags(),this.selectTags=JSON.parse(JSON.stringify(this.tags))},methods:{onSearchName:function(){this.getTags()},checkedTag:function(t){var e=this.selectTags.findIndex((function(e){return e.tagId===t.tagId}));e>=0?this.selectTags.splice(e,1):this.selectTags.push(t)},cancel:function(){this.visibleSelectTag=!1,this.$emit("input",this.visibleSelectTag)},ok:function(){this.selectTags.length>0?(this.visibleSelectTag=!1,this.$emit("input",this.visibleSelectTag),this.$emit("pitchTag",{filterType:this.filterType,selectTags:this.selectTags})):this.$message.error("请选择标签")},getTags:function(){var t=this;Object(u["c"])({grpName:this.grpName}).then((function(e){var a;t.tagList=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.tagGroup)||[]}))}}},d=l,g=(a("91d5"),a("2877")),p=Object(g["a"])(d,o,c,!1,null,"eb612c8a",null),m=p.exports,f=a("7ba4"),h={name:"KeyWord",components:{SelectTags:m},props:{type:{type:[String,Number],default:function(){return""}}},data:function(){return{visibleSelectTag:!1,loading:!1,tagList:[],tagNames:[],ruleName:"",tagIds:"",pagination:{current:1,pageSize:8,total:0},visibleCodeTetail:!1,pageList:[],columnsAddGroup:[{title:"规则名称",dataIndex:"ruleName",key:"ruleName",scopedSlots:{customRender:"ruleName"}},{title:"已打标签数",dataIndex:"taggedCount",key:"taggedCount",scopedSlots:{customRender:"taggedCount"}},{title:"添加的标签",dataIndex:"tagNames",key:"tagNames",scopedSlots:{customRender:"tagNames"}},{title:"创建人",dataIndex:"creatorName",key:"creatorName",scopedSlots:{customRender:"creatorName"}},{title:"创建时间",dataIndex:"createTime",key:"createTime",scopedSlots:{customRender:"createTime"}},{title:"规则状态",dataIndex:"isActiveObj",key:"isActiveObj",scopedSlots:{customRender:"isActiveObj"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],columnsKey:[{title:"规则名称",dataIndex:"ruleName",key:"ruleName",scopedSlots:{customRender:"ruleName"}},{title:"已打标签数",dataIndex:"taggedCount",key:"taggedCount",scopedSlots:{customRender:"taggedCount"}},{title:"模糊匹配",dataIndex:"obscureKeyword",key:"obscureKeyword",scopedSlots:{customRender:"obscureKeyword"}},{title:"精准匹配",dataIndex:"preciseKeyword",key:"preciseKeyword",scopedSlots:{customRender:"preciseKeyword"}},{title:"添加的标签",dataIndex:"tagNames",key:"tagNames",width:"300px",scopedSlots:{customRender:"tagNames"}},{title:"创建时间",dataIndex:"createTime",key:"createTime",scopedSlots:{customRender:"createTime"}},{title:"规则状态",dataIndex:"isActiveObj",key:"isActiveObj",scopedSlots:{customRender:"isActiveObj"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}]}},computed:{columns:function(){var t=this.columnsKey;switch(this.type){case 1:t=this.columnsKey;break;case 2:t=this.columnsAddGroup;break;case 3:t=this.columnsAddGroup;break}return t},routeNmae:function(){var t="";switch(this.type){case 1:t="AddKeywordRules";break;case 2:t="AddGroupBehaviorRules";break;case 3:t="AddTimeRules";break}return t},detailName:function(){var t="";switch(this.type){case 1:t="keywordDetails";break;case 2:t="AddGroupWayDetail";break;case 3:t="TimeMakeDetails";break}return t}},created:function(){this.getPageList()},methods:{handleMenuClick:function(t){},openCodeDetail:function(){this.visibleCodeTetail=!0},onSearchName:function(){this.getPageList()},changeActive:function(t,e){var a=this,n=e?"开启":"关闭",i={ruleId:t,status:e?0:1};Object(f["g"])(i).then((function(){a.$message.success("开关已".concat(n))}))},deleteData:function(t){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"确定要删除此标签吗？",onOk:function(){e.delRule(t)}})},delRule:function(t){var e=this;Object(f["f"])({ruleId:t}).then((function(){var t;1===(null===(t=e.pageList)||void 0===t?void 0:t.length)&&(e.pagination.current=e.pagination.current-1||1),e.$message.success("删除成功"),e.getPageList()})).catch((function(t){e.$message.error(t)}))},pitchTag:function(t){var e=t.selectTags;this.tagNames=e.map((function(t){return t.tagName})),this.tagList=e,this.tagIds=e.map((function(t){return t.bitmap})).join(","),this.getPageList()},changeTag:function(t){var e;this.tagList=this.tagList.filter((function(e){return null===t||void 0===t?void 0:t.includes(e.tagName)})),this.tagIds=null===(e=this.tagList)||void 0===e?void 0:e.map((function(t){return t.bitmap})).join(","),this.getPageList()},changePageination:function(t){var e=t.current;this.pagination.current=e,this.getPageList()},getPageList:function(){var t=this,e={tagIds:this.tagIds,type:this.type,ruleName:this.ruleName,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,Object(f["a"])(e).then((function(e){var a;null!==e&&void 0!==e&&e.data?(t.pagination.total=e.data.total,t.pageList=(null===(a=e.data.list)||void 0===a?void 0:a.map((function(t,e){return t.key=e,t.obscureKeyword=t.obscureKeyword||"",t.preciseKeyword=t.preciseKeyword||"",t.tagNames=t.tagNames||"",t.isActiveObj={status:0===t.status,sopId:t.taggingId},t.operation=t,t})))||[]):(t.pageList=[],t.pagination.total=0)})).finally((function(){return t.loading=!1}))}}},b=h,T=(a("0aaa"),Object(g["a"])(b,r,s,!1,null,"16f0730f",null)),v=T.exports,y={name:"AutomaticMakeTag",components:{keyWord:v},beforeRouteEnter:function(t,e,a){var n="keyword";switch(e.name){case"AddKeywordRules":n="keyword";break;case"AddGroupBehaviorRules":n="addGroup";break;case"AddTimeRules":n="timeMake";break}a((function(t){t.activeKey=n}))},data:function(){return{activeKey:"keyword"}},activated:function(){var t=this;this.$nextTick((function(){var e;null===(e=t.$refs[t.activeKey])||void 0===e||e.getPageList()}))}},k=y,N=(a("9387"),Object(g["a"])(k,n,i,!1,null,"1c8d69d0",null));e["default"]=N.exports},7183:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return c}));var n=a("b775"),i={getTagGroup:"/client_manager/CustomerTag/getTagGroup",syncTagGroup:"/client_manager/CustomerTag/syncTagGroup",addOrEditTagGroup:"/client_manager/CustomerTag/addOrEditTagGroup",delTagGroup:"/client_manager/CustomerTag/delTagGroup"};function r(t){return Object(n["b"])({url:i.getTagGroup,method:"post",data:t})}function s(t){return Object(n["b"])({url:i.syncTagGroup,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.addOrEditTagGroup,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.delTagGroup,method:"post",data:t})}},"7ba4":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"g",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return u})),a.d(e,"d",(function(){return l})),a.d(e,"i",(function(){return d})),a.d(e,"j",(function(){return g})),a.d(e,"e",(function(){return p})),a.d(e,"h",(function(){return m}));var n=a("b775"),i={autoTaggingQueryList:"/client_transformation/autoTagging/autoTaggingQueryList",openRule:"/client_transformation/autoTagging/openRule",delRule:"/client_transformation/autoTagging/delRule",createAutoTaggingKeyWord:"/client_transformation/autoTagging/createAutoTaggingKeyWord",createAutoTaggingGrp:"/client_transformation/autoTagging/createAutoTaggingGrp",createAutoTaggingTime:"/client_transformation/autoTagging/createAutoTaggingTime",ruleDetail:"/client_transformation/autoTagging/ruleDetail",statistics:"/client_transformation/autoTaggingStatistics/statistics",customerList:"/client_transformation/autoTaggingStatistics/customerList",remindList:"/client_manager/customerdelremind/remindList"};function r(t){return Object(n["b"])({url:i.autoTaggingQueryList,method:"post",data:t})}function s(t){return Object(n["b"])({url:i.openRule,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.delRule,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.createAutoTaggingKeyWord,method:"post",data:t})}function u(t){return Object(n["b"])({url:i.createAutoTaggingGrp,method:"post",data:t})}function l(t){return Object(n["b"])({url:i.createAutoTaggingTime,method:"post",data:t})}function d(t){return Object(n["b"])({url:i.ruleDetail,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.statistics,method:"post",data:t})}function p(t){return Object(n["b"])({url:i.customerList,method:"post",data:t})}function m(t){return Object(n["b"])({url:i.remindList,method:"post",data:t})}},"7ffc":function(t,e,a){},"8a5f":function(t,e,a){},"91d5":function(t,e,a){"use strict";a("8a5f")},9387:function(t,e,a){"use strict";a("160a")}}]);