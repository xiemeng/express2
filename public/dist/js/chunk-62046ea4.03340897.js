(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62046ea4"],{"0b6a":function(t,e,a){},"0b8e":function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aks-person",on:{click:function(e){return t.$emit("open")}}},[e("div",{staticClass:"flex-row"},[t._l(t.usePersionList,(function(a,n){return e("a-tag",{key:a.key},[t._v(t._s(a.tagName)+" "),e("a-icon",{attrs:{type:"close"},on:{click:function(e){return e.stopPropagation(),function(){return t.closeTag(n)}.apply(null,arguments)}}})],1)})),t.usePersionList.length<1?e("p",[t._v(t._s(t.placeHolder))]):t._e()],2),e("a-icon",{attrs:{type:"caret-down"}})],1)},r=[],i=(a("a434"),{name:"SelectInput",model:{prop:"usePersionList",event:"change"},props:{usePersionList:{type:[Array],default:function(){return[]}},placeHolder:{type:[String],default:""}},methods:{closeTag:function(t){this.usePersionList.splice(t,1),this.$emit("change",this.usePersionList)}}}),o=i,c=(a("90aa"),a("2877")),s=Object(c["a"])(o,n,r,!1,null,"2242a2f7",null);e["a"]=s.exports},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7");function n(t,e,a,n,r,i,o){try{var c=t[i](o),s=c.value}catch(l){return void a(l)}c.done?e(s):Promise.resolve(s).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var o=t.apply(e,a);function c(t){n(o,r,i,c,s,"next",t)}function s(t){n(o,r,i,c,s,"throw",t)}c(void 0)}))}}},2035:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));a("c7eb"),a("1da1"),a("ac1f"),a("466d"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("99af"),a("b680");var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",a=t.split(","),n=a[0].match(/:(.*?);/)[1],r=n.split("/")[1],i=atob(a[1]),o=i.length,c=new Uint8Array(o);while(o--)c[o]=i.charCodeAt(o);return new File([c],"".concat(e,".").concat(r),{type:n})},r=function(t){if(null==t||""==t)return"0 Bytes";var e=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),a=0,n=parseFloat(t);a=Math.floor(Math.log(n)/Math.log(1024));var r=n/Math.pow(1024,a);return r=r.toFixed(2),r+e[a]}},"2ecb":function(t,e,a){"use strict";a("b313")},"33f0":function(t,e,a){"use strict";a("49e0")},3476:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"新建雷达链接"},on:{back:function(e){return t.$router.go(-1)}}}),e("div",{staticStyle:{padding:"16px"}},[e("div",{staticClass:"page-content"},[e("h2",{staticStyle:{"font-size":"15px"}},[t._v("基本信息")]),e("a-divider",{staticStyle:{margin:"12px 0"}}),e("div",{staticClass:"yellow-tips"},[e("a-icon",{staticStyle:{color:"#faad14","margin-right":"6px"},attrs:{type:"bell"}}),e("span",[t._v("提示：上传文件后将自动转换成网页链接，员工发送给客户后可记录客户打开数据")])],1),e("a-form-model",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{label:"雷达标题",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{maxLength:15,disabled:t.isSuccet,placeholder:"名称不会展示给用户，用于企业记录渠道名称或使用场景"},model:{value:t.activityTitle,callback:function(e){t.activityTitle=e},expression:"activityTitle"}})],1),e("a-form-model-item",{attrs:{label:"雷达链接",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{placeholder:"请在此输入链接"},model:{value:t.activityUrl,callback:function(e){t.activityUrl=e},expression:"activityUrl"}})],1),e("a-form-model-item",{attrs:{label:"链接标题",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{maxLength:30,placeholder:"请在此输入链接标题"},model:{value:t.linkTitle,callback:function(e){t.linkTitle=e},expression:"linkTitle"}})],1),e("a-form-model-item",{attrs:{label:"链接摘要",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{maxLength:30,placeholder:"请在此输入链接摘要"},model:{value:t.linkSummary,callback:function(e){t.linkSummary=e},expression:"linkSummary"}})],1),e("a-form-model-item",{attrs:{label:"链接封面"}},[e("div",{staticStyle:{display:"flex"}},[e("span",{staticClass:"box-img"},[e("a-avatar",{staticStyle:{left:"2px",top:"2px"},attrs:{src:t.defaultImage,size:100,shape:"square"}}),e("span",{staticClass:"box-close-icon"},["/imgs/default-cover.png"!==t.defaultImage?e("a-icon",{attrs:{type:"close-circle",theme:"filled"},on:{click:t.iconClose}}):t._e()],1)],1),e("UploadImages",{on:{imageUrlData:t.imageUrlData,input:t.uploadFile}},[e("a-button",{staticStyle:{position:"relative","margin-top":"80px"},attrs:{type:"link",icon:"sync"}},[t._v(" 重新上传 ")])],1)],1)])],1),e("h2",{staticStyle:{"font-size":"15px"}},[t._v("链接追踪设置")]),e("a-divider",{staticStyle:{margin:"12px 0"}}),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.actionNotice,callback:function(e){t.actionNotice=e},expression:"actionNotice"}},[t._v(" 行为通知 "),e("span",{staticStyle:{color:"#909090"}},[t._v(" （当客户点击雷达链接时，发送雷达链接的员工将会收到消息提醒） ")])])],1),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.dynamicNotification,callback:function(e){t.dynamicNotification=e},expression:"dynamicNotification"}},[t._v(" 动态通知 "),e("span",{staticStyle:{color:"#909090"}},[t._v(" （当客户点击雷达链接时，会将客户的打开行为记录在客户动态里） ")])])],1),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.customerLabel,callback:function(e){t.customerLabel=e},expression:"customerLabel"}},[t._v(" 客户标签 "),e("span",{staticStyle:{color:"#909090"}},[t._v(" （给点击雷达链接的客户打上选中的标签） ")])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.customerLabel,expression:"customerLabel"}],staticStyle:{"margin-bottom":"15px"}},[e("a-button",{staticClass:"tagbox",attrs:{type:""},on:{click:function(e){t.visibleTag=!0}}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加标签 ")],1),t._l(t.form.selectTagList,(function(a,n){return e("a-tag",{key:a.tagId,staticClass:"tagList",attrs:{closable:""},on:{close:function(e){return t.closeTag(n)}}},[t._v(" "+t._s(a.tagName)+" ")])}))],2),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.setCustomerRatings,callback:function(e){t.setCustomerRatings=e},expression:"setCustomerRatings"}},[t._v(" 设置客户评分 ")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.setCustomerRatings,expression:"setCustomerRatings"}],staticStyle:{"margin-bottom":"15px"}},[e("TableAddlink",{attrs:{dataSourceList:t.formDataDataSource},on:{funcData:t.dataSourceListData}})],1),e("a-button",{attrs:{type:"primary",size:"large",loading:t.activityLoading},on:{click:t.addData}},[t._v(" "+t._s(t.buttonData)+" ")])],1)]),e("a-modal",{attrs:{footer:null,centered:""},model:{value:t.visibleTag,callback:function(e){t.visibleTag=e},expression:"visibleTag"}},[e("SelectTags",{attrs:{selectTagList:t.form.selectTagList},on:{cancle:function(e){t.visibleTag=!1},serviceOk:t.serviceOk}})],1)],1)},r=[],i=a("c7eb"),o=a("53ca"),c=a("1da1"),s=(a("9911"),a("0481"),a("4069"),a("d81d"),a("7db0"),a("d3b7"),a("a434"),a("4de4"),a("ac1f"),a("a15b"),a("b64b"),a("c844")),l=a("8c2e"),u=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"rule-list"},[t._l(t.dataSource,(function(a,n){return e("div",{key:n,staticClass:"rule-list-item"},[e("a-row",{staticStyle:{"align-items":"center",cursor:"pointer"},attrs:{type:"flex"}},[e("a-button",{attrs:{type:"link",disabled:0===n},on:{click:function(e){return t.onDelete(n)}}},[e("a-icon",{staticStyle:{"margin-right":"9px"},attrs:{type:"minus-circle"}})],1),e("span",[t._v(" 规则"+t._s(n+1)+" :")]),t._v(" 用户 "),e("a-select",{staticStyle:{width:"150px",margin:"0 8px"},model:{value:a.defaultValue,callback:function(e){t.$set(a,"defaultValue",e)},expression:"item.defaultValue"}},[e("a-select-option",{attrs:{value:"1",disabled:a.disabledData}},[t._v(" 每打开一次 ")]),e("a-select-option",{attrs:{value:"2"}},[t._v(" 累计打开次数 ")])],1),"2"===a.defaultValue?e("div",[t._v(" 达到 "),e("a-input-number",{staticStyle:{width:"60px","margin-left":"8px"},attrs:{max:9999999,min:0},model:{value:a.grade,callback:function(e){t.$set(a,"grade",e)},expression:"item.grade"}}),e("a-button",{staticStyle:{"margin-right":"8px"},attrs:{type:""}},[t._v("次")])],1):t._e(),t._v(" 时，可评 "),e("a-input-number",{staticStyle:{width:"60px","margin-left":"8px"},attrs:{max:9999999,min:0},model:{value:a.fraction,callback:function(e){t.$set(a,"fraction",e)},expression:"item.fraction"}}),e("a-button",{staticStyle:{"margin-right":"8px"},attrs:{type:""}},[t._v("分")]),t._v(" 并打上标签： "),e("a-switch",{staticStyle:{margin:"0 8px"},attrs:{size:"small"},model:{value:a.switchData,callback:function(e){t.$set(a,"switchData",e)},expression:"item.switchData"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:a.switchData,expression:"item.switchData"}]},[e("SelectInputTag",{attrs:{placeHolder:"请选择标签"},on:{open:function(e){return t.openSelectTags(a,n)}},model:{value:a.selectTagList,callback:function(e){t.$set(a,"selectTagList",e)},expression:"item.selectTagList"}})],1)],1)],1)})),e("a-divider",{staticStyle:{margin:"0"}}),e("a-button",{staticStyle:{color:"#1990ff"},attrs:{type:"link",disabled:t.stateType},on:{click:t.handleAdd}},[e("a-icon",{attrs:{type:"plus-circle"}}),t._v("添加规则"),e("span",{staticStyle:{"font-size":"12px",color:"rgba(0,0,0,.45)"}},[t._v("（添加的多条规则，可同时生效 ）")])],1)],2),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visibleTag,callback:function(e){t.visibleTag=e},expression:"visibleTag"}},[e("SelectTags",{attrs:{selectTagList:t.form.selectTagList},on:{cancle:function(e){t.visibleTag=!1},serviceOk:t.serviceOk}})],1)],1)},d=[],f=a("2909"),m=(a("99af"),a("0b8e")),p={data:function(){return{visibleTag:!1,switchData:!1,tagDetail:{},visible:!1,index:0,form:{selectTagList:[]},newDataSource:[],dataSource:[{id:void 0,defaultValue:"1",grade:"",fraction:"",switchData:!1,selectTagList:[],disabledData:!1}]}},props:{dataSourceList:{type:Array,default:function(){return[]}},stateType:{type:Boolean,default:!1}},components:{SelectInputTag:m["a"],SelectTags:s["a"]},watch:{dataSourceList:{handler:function(t,e){this.dataSource=this.dataSourceList.length<1?this.dataSource:this.dataSourceList},deep:!0},dataSource:{handler:function(t,e){this.$emit("funcData",this.dataSource)},deep:!0}},methods:{openSelectTags:function(t,e){this.index=e,this.newDataSource=t,this.form.selectTagList=t.selectTagList,this.visibleTag=!0},serviceOk:function(t){this.form.selectTagList=t.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat(),this.newDataSource.selectTagList=this.form.selectTagList,this.dataSource.splice(this.index,1,this.newDataSource),this.visibleTag=!1},onDelete:function(t){this.dataSource.splice(t,1)},handleAdd:function(){var t=this.dataSource,e=null===t||void 0===t?void 0:t.find((function(t){return"1"===t.defaultValue})),a={defaultValue:e?"2":"1",grade:"",fraction:"",switchData:!1,selectTagList:[],disabledData:!!e};this.dataSource=[].concat(Object(f["a"])(t),[a])}}},g=p,h=(a("2ecb"),a("2877")),v=Object(h["a"])(g,u,d,!1,null,"00e57289",null),b=v.exports,y=a("cf5f"),w=a("d885"),S=a("2035"),A={data:function(){return{paramDict:{},buttonData:"",formDataDataSource:[],activityLoading:!1,formData:{},defaultImage:"/imgs/default-cover.png",changeImage:"",form:{selectTagList:[]},visibleTag:!1,actionNotice:!0,dynamicNotification:!0,customerLabel:!1,setCustomerRatings:!1,isSuccet:!1,activityTitle:"",activityUrl:"",linkTitle:"",linkSummary:"",labelCol:{span:2},wrapperCol:{span:7}}},components:{SelectTags:s["a"],UploadImages:l["a"],TableAddlink:b},created:function(){this.init()},methods:{init:function(){"add"===this.$route.query.state?(this.iconClose(),this.buttonData="创建雷达链接"):"edit"===this.$route.query.state&&(this.editFunc(),this.isSuccet=!0,this.buttonData="保存")},editFunc:function(){var t=this;Object(w["h"])(this.$route.query.id).then((function(e){var a,n,r,i,o,c,s,l,u,d,f,m,p,g,h,v,b,y;t.paramDict=null===e||void 0===e?void 0:e.data,t.activityTitle=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.radarName,t.activityUrl=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.link,t.linkTitle=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.title,t.linkSummary=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.radarName,t.defaultImage=null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.coverUrl,t.changeImage=null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.coverUrl,t.actionNotice=1===(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.behaviorNotify),t.dynamicNotification=1===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.activityNotify),t.customerLabel=1===(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.hasCustomerTag),t.form.selectTagList=null===e||void 0===e||null===(d=e.data)||void 0===d||null===(f=d.tagRules)||void 0===f?void 0:f.map((function(t){return t.customerTags||[]})).flat(),Array.isArray(null===e||void 0===e||null===(m=e.data)||void 0===m?void 0:m.scoreRules)&&(null===e||void 0===e||null===(p=e.data)||void 0===p||null===(g=p.scoreRules)||void 0===g?void 0:g.length)>0&&(t.setCustomerRatings=!0);var w=null===e||void 0===e||null===(h=e.data)||void 0===h||null===(v=h.scoreRules)||void 0===v?void 0:v.find((function(t){return 0===t.ruleKind}));t.formDataDataSource=null===e||void 0===e||null===(b=e.data)||void 0===b||null===(y=b.scoreRules)||void 0===y?void 0:y.map((function(t){return{id:t.id,defaultValue:{0:"1",1:"2"}[t.ruleKind],grade:t.count||0,fraction:t.score||0,switchData:1===t.hasTag,selectTagList:t.customerTags||[],disabledData:!!w}})),t.formData.dataSource=t.formDataDataSource})).catch((function(e){t.$message.warning(e)}))},closeTag:function(t){this.form.selectTagList.splice(t,1)},serviceOk:function(t){this.form.selectTagList=t.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat(),this.visibleTag=!1},imageUrlData:function(t){this.defaultImage=t},uploadFile:function(t){this.formData.NewCustomerFile=t},dataSourceListData:function(t){this.formData.dataSource=t},iconClose:function(){this.defaultImage="/imgs/default-cover.png";var t="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABYAFgDASIAAhEBAxEB/8QAGgABAAMBAQEAAAAAAAAAAAAAAAQFBwYDAv/EACwQAAEEAQIFAgYDAQAAAAAAAAEAAgMEBQYREiExQVEHgRMWIkJhcRRicpH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A3/TuDx+ncPWxmIrRVqldgY1sbQN9h1PknqSeZKskRAREQEREBERAREQVuosHj9RYezjMvWis1LDCxzZGg7bjqPBHUEcwUVkiAiIgIiICIsw1pqu5mcl8t6RJkneeGezGdgB3Ad2A7u9gg7q1qPC1LJr2crRimB2LHTNBB/PPl7qzikZNG2SF7ZI3DdrmncEfgrP8b6VYSKg2O+6xZtEfXK2QsAP9R4/e6qdJm3ozX3y3LYdPjbjeOHi+0kEh23Y7gtO3Xqg1hERAREQEREBEWbar1lkL2cjwOjPruNftNYDQ5o26gbgjYdz7BBI9V85drso4PEktuZJ3AXNOxDSQ0AHtuT18Ar5xrsF6aso0bglfcvc5bgYOEbEDmSdw0b9Bv5Kieq1G9Tnwuo4GiaTHuaJ+EbDcODgf8k7j3Cm+oVqhnfTM5R8ZZxBktf4g2e15cAQPbf25oO3yORqY7HyXbk7I6sbeIvJ5bdtvO/ZZjpT+TrP1AdqN8LocZSHBDxfcQCGt/f1Fx8dFc4bT8WrPTvBQZaWxH8IB4MbgCQC5rd9wft2Xb4+nXx9OKpSibDXibwsY3oAgkIiICIiAiIgqdW2Jqml8rYrEiaOtI5hHVp4Tz9uq5T0VoVYdLG7E1ptWJXCV/cBp2Df1391300TJoXxStD43tLXNPQg8iFlXy9qrRd+w/SwZfxkzuL4L9iW+N27g79t2nn3QadlL1XHUJrWQlZFWjbu9zum3jbvv4WURR5D1NzLXOa+npqo/ZrRy4vx4LiPZoP8A2T8u6r1pehdqkihjIncXwI9gXfpu55/l3TstQx9Kvj6cVSlE2GvE3hYxo5AIPStBHWrxQQMDIYmhjGDo1oGwC9ERAREQEREBERAREQEREBERAREQEREFbp3OY/UWHrZPEWYrNSwwPa6NwO246HwR0IPMFWSIgIiICIiAiIgIiIK3UWcx+ncPZyeXsxVqldhe50jgN9h0HknoAOZKIiD/2Q==",e=Object(S["a"])(t);this.formData.NewCustomerFile=e},addImageFile:function(){var t=this,e=new FormData;return e.append("file",this.formData.NewCustomerFile),e.append("dir","clientTransformation"),this.activityLoading=!0,Object(y["m"])(e).then((function(t){var e=(null===t||void 0===t?void 0:t.data)||"";return e})).catch((function(e){t.$message.warning(e)})).finally((function(){t.activityLoading=!1}))},addData:function(){var t=this;return Object(c["a"])(Object(i["a"])().mark((function e(){var a,n,r,c,s,l,u,d,f,m,p,g,h,v,b,y,S;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.activityTitle){e.next=3;break}return t.$message.warning("请填写雷达名称"),e.abrupt("return");case 3:if(t.activityUrl){e.next=6;break}return t.$message.warning("请填写雷达链接"),e.abrupt("return");case 6:if(!t.activityUrl){e.next=11;break}if(c=/(https|http):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g,c.test(t.activityUrl)){e.next=11;break}return t.$message.warning("输入的雷达链接有误"),e.abrupt("return");case 11:if(t.linkTitle){e.next=14;break}return t.$message.warning("请输入链接标题"),e.abrupt("return");case 14:if(t.linkSummary){e.next=17;break}return t.$message.warning("请输入链接描述"),e.abrupt("return");case 17:if(!t.customerLabel){e.next=22;break}if(0!==t.form.selectTagList.length){e.next=21;break}return t.$message.warning("请选择客户标签"),e.abrupt("return");case 21:l=null===(s=t.form.selectTagList)||void 0===s?void 0:s.map((function(t){return t.bitmap||t.tagBitmap})).join(",");case 22:if(u=null===(a=t.formData)||void 0===a?void 0:a.dataSource,!t.setCustomerRatings){e.next=33;break}if(u&&!((null===u||void 0===u?void 0:u.length)<1)){e.next=27;break}return t.$message.warning("请填写评分"),e.abrupt("return",!1);case 27:if(d=[],f=null===u||void 0===u?void 0:u.every((function(e,a){if("1"===e.defaultValue){if(!e.fraction)return t.$message.warning("请填写评分"),!1}else if("2"===e.defaultValue){if(!e.fraction)return t.$message.warning("请填写评分"),!1;if(!e.grade)return t.$message.warning("次数不可小于0"),!1;if(0===d.indexOf(e.grade))return t.$message.warning("次数不能相同"),!1;var n;if(d.push(e.grade),e.switchData)if((null===(n=e.selectTagList)||void 0===n?void 0:n.length)<1)return t.$message.warning("请选择标签"),!1}return!0})),f){e.next=31;break}return e.abrupt("return");case 31:e.next=34;break;case 33:t.formData.dataSource=[];case 34:if(m=null===(n=t.formData)||void 0===n||null===(r=n.dataSource)||void 0===r?void 0:r.map((function(e){var a,n=null===e||void 0===e||null===(a=e.selectTagList)||void 0===a?void 0:a.map((function(t){return t.bitmap||t.tagBitmap})).join(",");return{id:e.id,type:2,count:e.grade||void 0,ruleKind:"1"===e.defaultValue?0:1,score:e.fraction,hasTag:e.switchData?1:0,autoMarkTagBitmaps:t.setCustomerRatings?n:""}})),p=t.defaultImage,t.defaultImage===t.changeImage){e.next=43;break}return e.next=39,t.addImageFile();case 39:if(p=e.sent,p){e.next=43;break}return t.$message.warning("未获取到图片链接"),e.abrupt("return");case 43:g={radarName:t.activityTitle,type:"1",businessCard:0,author:"",content:"",channelId:"",isRadar:"",title:t.linkTitle,desc:t.linkSummary,coverUrl:p,link:t.activityUrl,behaviorNotify:void 0===t.actionNotice||t.actionNotice?1:0,activityNotify:void 0===t.dynamicNotification||t.dynamicNotification?1:0,hasCustomerTag:t.customerLabel?1:0,tagRule:t.customerLabel?[{autoMarkTagBitmaps:l,type:1}]:[],scoreRule:t.setCustomerRatings?m:[]},t.activityLoading=!0,"add"===t.$route.query.state?(h=new FormData,v=Object.keys(g),null===v||void 0===v||v.map((function(t){"object"===Object(o["a"])(g[t])?h.append(t,JSON.stringify(g[t])):h.append(t,g[t])})),Object(w["f"])(h).then((function(e){0===(null===e||void 0===e?void 0:e.statusCode)?(t.$message.success("雷达创建成功"),t.$router.go(-1)):t.$message.warning(null===e||void 0===e?void 0:e.msg)})).catch((function(e){t.$message.warning(e)})).finally((function(){t.activityLoading=!1}))):"edit"===t.$route.query.state&&(g=Object.assign(t.paramDict,g),b=new FormData,y=Object.keys(g),S=["createTime","creatorName","creatorId","scoreRules","tagRules","autoMarkTagNames","errMsg","isShowSenderInfo","fileId","fileName","fileSize","fileType","fileUrl"],null===y||void 0===y||y.map((function(t){-1!==S.indexOf(t)||("object"===Object(o["a"])(g[t])?b.append(t,JSON.stringify(g[t])):b.append(t,g[t]))})),Object(w["k"])(b).then((function(e){0===(null===e||void 0===e?void 0:e.statusCode)?(t.$message.success("雷达修改成功"),t.$router.go(-1)):t.$message.warning(null===e||void 0===e?void 0:e.msg)})).catch((function(e){t.$message.warning(e)})).finally((function(){t.activityLoading=!1})));case 46:case"end":return e.stop()}}),e)})))()}}},x=A,L=(a("33f0"),Object(h["a"])(x,n,r,!1,null,"a3f85a96",null));e["default"]=L.exports},"49e0":function(t,e,a){},"5a43":function(t,e,a){"use strict";a("0b6a")},"5e1d":function(t,e,a){},"8c2e":function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[e("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture","show-upload-list":!1,"before-upload":t.beforeUpload,accept:t.accept,customRequest:t.customRequest},on:{change:t.handleChange}},[t._t("default",(function(){return[e("a-button",{staticStyle:{position:"relative","margin-top":"80px"},attrs:{type:"link",icon:"sync"}},[t._v(" 重新上传 ")])]}))],2)],1)},r=[],i={data:function(){return{loading:!1,accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",imageUrl:"",iconStart:0,uploadFile:""}},created:function(){this.imageUrl=this.defaultImage},watch:{imageUrl:function(){this.$emit("imageUrlData",this.imageUrl)}},props:{defaultImage:{type:String,default:""}},methods:{customRequest:function(t){this.uploadFile=t.file,t.onSuccess()},beforeUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("文件不能大于2MB!"),e},getBase64:function(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)},handleChange:function(t){var e,a=this;"uploading"===t.file.status&&(this.getBase64(t.file.originFileObj,(function(t){a.imageUrl=t})),this.fileList=[t.fileList[t.fileList.length-1]],this.fileList[0].status="done"),"removed"===t.file.status&&(this.fileList=[],this.imageUrl=""),this.$emit("input",null===t||void 0===t||null===(e=t.fileList[t.fileList.length-1])||void 0===e?void 0:e.originFileObj)}}},o=i,c=(a("5a43"),a("2877")),s=Object(c["a"])(o,n,r,!1,null,"b8a55c42",null);e["a"]=s.exports},"90aa":function(t,e,a){"use strict";a("5e1d")},b313:function(t,e,a){},c7eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("b636"),a("944a"),a("0c47"),a("23dc"),a("3410"),a("159b"),a("b0c0"),a("131a"),a("fb6a");var n=a("53ca");function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
r=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,i=Object.defineProperty||function(t,e,a){t[e]=a.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(D){u=function(t,e,a){return t[e]=a}}function d(t,e,a,n){var r=e&&e.prototype instanceof p?e:p,o=Object.create(r.prototype),c=new _(n||[]);return i(o,"_invoke",{value:x(t,a,c)}),o}function f(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(D){return{type:"throw",arg:D}}}t.wrap=d;var m={};function p(){}function g(){}function h(){}var v={};u(v,c,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(O([])));y&&y!==e&&a.call(y,c)&&(v=y);var w=h.prototype=p.prototype=Object.create(v);function S(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(i,o,c,s){var l=f(t[i],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Object(n["a"])(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,c,s)}),(function(t){r("throw",t,c,s)})):e.resolve(d).then((function(t){u.value=t,c(u)}),(function(t){return r("throw",t,c,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,a){function n(){return new e((function(e,n){r(t,a,e,n)}))}return o=o?o.then(n,n):n()}})}function x(t,e,a){var n="suspendedStart";return function(r,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw i;return j()}for(a.method=r,a.arg=i;;){var o=a.delegate;if(o){var c=L(o,a);if(c){if(c===m)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=f(t,e,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===m)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function L(t,e){var a=e.method,n=t.iterator[a];if(void 0===n)return e.delegate=null,"throw"===a&&t.iterator["return"]&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==a&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,m;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,m):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function O(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return g.prototype=h,i(w,"constructor",{value:h,configurable:!0}),i(h,"constructor",{value:g,configurable:!0}),g.displayName=u(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,a,n,r,i){void 0===i&&(i=Promise);var o=new A(d(e,a,n,r),i);return t.isGeneratorFunction(a)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(w),u(w,l,"Generator"),u(w,c,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),a=[];for(var n in e)a.push(n);return a.reverse(),function t(){for(;a.length;){var n=a.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(a,n){return o.type="throw",o.arg=t,e.next=a,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var r=n.arg;T(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:O(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},t}},cf5f:function(t,e,a){"use strict";a.d(e,"k",(function(){return i})),a.d(e,"r",(function(){return o})),a.d(e,"l",(function(){return c})),a.d(e,"m",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"p",(function(){return f})),a.d(e,"q",(function(){return m})),a.d(e,"u",(function(){return p})),a.d(e,"v",(function(){return g})),a.d(e,"x",(function(){return h})),a.d(e,"t",(function(){return v})),a.d(e,"o",(function(){return b})),a.d(e,"g",(function(){return y})),a.d(e,"b",(function(){return w})),a.d(e,"h",(function(){return S})),a.d(e,"s",(function(){return A})),a.d(e,"c",(function(){return x})),a.d(e,"n",(function(){return L})),a.d(e,"f",(function(){return k})),a.d(e,"w",(function(){return T})),a.d(e,"j",(function(){return _})),a.d(e,"y",(function(){return O})),a.d(e,"d",(function(){return j}));var n=a("b775"),r={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function i(t){return Object(n["b"])({url:r.getLastSyncTime,method:"get",params:t})}function o(t){return Object(n["b"])({url:r.syncUpdate,method:"get",params:t})}function c(t){return Object(n["b"])({url:r.getOfficialAccount,method:"get",params:t})}function s(t){return Object(n["b"])({url:r.interactiveRadarUploadFile,method:"post",data:t})}function l(t){return Object(n["b"])({url:r.addSersonSop,method:"post",data:t})}function u(t){return Object(n["b"])({url:r.delGroupSop,method:"post",params:t})}function d(t){return Object(n["b"])({url:r.detailPersonSop,method:"get",params:t})}function f(t){return Object(n["b"])({url:r.pagePersonSop,method:"get",params:t})}function m(t){return Object(n["b"])({url:r.setPersonSopStaff,method:"post",data:t})}function p(t){return Object(n["b"])({url:r.updatePersonSop,method:"post",data:t})}function g(t){return Object(n["b"])({url:r.updateStatus,method:"post",params:t})}function h(t){return Object(n["b"])({url:r.upload,method:"post",data:t})}function v(t){return Object(n["b"])({url:r.update,method:"post",data:t})}function b(t){return Object(n["b"])({url:r.materialList,method:"get",params:t})}function y(t){return Object(n["b"])({url:r.deleteMaterial,method:"get",params:t})}function w(t){return Object(n["b"])({url:r.addTag,method:"post",data:t})}function S(t){return Object(n["b"])({url:r.deleteTag,method:"get",params:t})}function A(t){return Object(n["b"])({url:r.tagList,method:"get",params:t})}function x(t){return Object(n["b"])({url:r.addWelcome,method:"post",data:t})}function L(t){return Object(n["b"])({url:r.listWelcome,method:"get",params:t})}function k(t){return Object(n["b"])({url:r.delWelcome,method:"post",params:t})}function T(t){return Object(n["b"])({url:r.updateWelcome,method:"post",data:t})}function _(t){return Object(n["b"])({url:r.detailWelcome,method:"get",params:t})}function O(t){return Object(n["b"])({url:r.uploadMedia,method:"post",data:t})}function j(t){return Object(n["b"])({url:r.channelCodeUploadFile,method:"post",data:t})}},d885:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"n",(function(){return s})),a.d(e,"o",(function(){return l})),a.d(e,"m",(function(){return u})),a.d(e,"l",(function(){return d})),a.d(e,"d",(function(){return f})),a.d(e,"a",(function(){return m})),a.d(e,"j",(function(){return p})),a.d(e,"h",(function(){return g})),a.d(e,"k",(function(){return h})),a.d(e,"g",(function(){return v})),a.d(e,"f",(function(){return b})),a.d(e,"i",(function(){return y}));var n=a("b775"),r={interactiveRadarAdd:"/client_transformation/interactradar/add",interactiveRadarList:"/client_transformation/interactradar/list",interactiveRadarDelete:"/client_transformation/interactradar/delete",interactiveRadarupdate:"/client_transformation/interactradar/update",interactiveRadarInfo:"/client_transformation/interactradar/info",interactiveRadarSave:"/client_transformation/interactradar/channel/save",channelLinks:"/client_transformation/interactradar/getChannelLinks",generateChannelLink:"/client_transformation/interactradar/generateChannelLink",interactradarList:"/client_transformation/interactradar/channel/list",interactradarUpdate:"/client_transformation/interactradar/channel/update",statisticOverview:"/client_transformation/interactradar/statisticOverview",statisticDetail:"/client_transformation/interactradar/statisticDetail",customerLog:"/client_transformation/interactradar/customerLog",getCustomerLogDetail:"/client_transformation/interactradar/customerLogDetail",channelLog:"/client_transformation/interactradar/channelLog"};function i(t){return Object(n["b"])({url:r.channelLog,method:"post",data:t})}function o(t){return Object(n["b"])({url:r.getCustomerLogDetail,method:"get",params:t})}function c(t){return Object(n["b"])({url:r.customerLog,method:"post",data:t})}function s(t){return Object(n["b"])({url:r.statisticDetail,method:"get",params:t})}function l(t){return Object(n["b"])({url:r.statisticOverview,method:"get",params:t})}function u(t){return Object(n["b"])({url:r.interactradarUpdate,method:"post",data:t})}function d(t){return Object(n["b"])({url:r.interactradarList,method:"get",params:t})}function f(t){return Object(n["b"])({url:r.generateChannelLink,method:"get",params:t})}function m(t){return Object(n["b"])({url:r.channelLinks,method:"get",params:t})}function p(t){return Object(n["b"])({url:r.interactiveRadarSave,method:"post",data:t})}function g(t){return Object(n["b"])({url:r.interactiveRadarInfo+"/"+t,method:"get"})}function h(t){return Object(n["b"])({url:r.interactiveRadarupdate,method:"post",data:t})}function v(t){return Object(n["b"])({url:r.interactiveRadarDelete,method:"post",data:t})}function b(t){return Object(n["b"])({url:r.interactiveRadarAdd,method:"post",data:t})}function y(t){return Object(n["b"])({url:r.interactiveRadarList,method:"post",data:t})}}}]);