(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76eb27ac"],{"02dd":function(t,e,n){"use strict";n("8b2f")},3820:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("header",{staticClass:"header"},[e("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$router.push({name:"GroupSendNewGroup",query:{state:"add"}})}}},[t._v("新建群发")]),e("a-input-search",{staticStyle:{width:"220px"},attrs:{allowClear:"",placeholder:"请输入群发名称"},on:{search:t.searchName},model:{value:t.groupSendName,callback:function(e){t.groupSendName=e},expression:"groupSendName"}})],1),e("a-table",{staticClass:"background-white",attrs:{pagination:t.pagination,columns:t.columns,"data-source":t.channelList},on:{change:t.change},scopedSlots:t._u([{key:"massContent",fn:function(n,o,r){return e("div",{attrs:{index:r}},[e("p",{staticStyle:{color:"#139A32","margin-bottom":"8px"}},[t._v("[共1条]")]),e("p",[t._v(t._s(o.context))])])}},{key:"operation",fn:function(n){return e("div",{},["0"==n.missionStatus?e("span",{staticClass:"create-error",attrs:{data:n.missionId}},[t._v(" 创建失败 "),e("a-tooltip",{attrs:{title:"在所选范围内没有满足条件的客户"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1):e("div",[e("a-tooltip",{attrs:{title:n.notSendStaff?"":"没有未发送的成员，无法发送提醒"}},[e("a-button",{attrs:{disabled:!n.notSendStaff,type:"link"},on:{click:function(e){return t.remindGruoup(n.groupSendId,n.notSendStaff>0&&n.isLate)}}},[n.notSendStaff>0&&n.isLate&&2===n.status?e("span",[t._v(" 提醒发送 ")]):e("span",{style:{color:n.taskStatus.color}},[t._v(" "+t._s(n.taskStatus.text)+" ")])])],1),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"GroupSendDetail",query:{missionId:n.groupSendId}})}}},[t._v(" 详情 ")]),1===n.taskStatus.id?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.cancleSend(n)}}},[t._v(" 取消发送 ")]):t._e()],1)])}}])})],1)},r=[],a=n("5530"),i=(n("d3b7"),n("d81d"),n("b3d3")),d=n("b9cd"),c={name:"GroupSend",data:function(){return{groupSendName:"",channelList:[],columns:[{title:"群发名称",key:"groupSendName",dataIndex:"groupSendName"},{title:"群发内容",key:"massContent",dataIndex:"massContent",scopedSlots:{customRender:"massContent"}},{title:"发送时间",key:"sendTime",dataIndex:"sendTime"},{title:"已发送群主",key:"sendedStaff",dataIndex:"sendedStaff"},{title:"送达群聊",key:"receivedChat",dataIndex:"receivedChat"},{title:"未发送群主",key:"notSendStaff",dataIndex:"notSendStaff"},{title:"未送达群聊",key:"notReceivedChat",dataIndex:"notReceivedChat"},{title:"操作",key:"operation",align:"right",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],pagination:{current:1,pageSize:10,total:0}}},created:function(){this.getPageList()},methods:{searchName:function(){this.channelList=[],this.pagination.page=1,this.getPageList()},change:function(t){var e=t.current;this.pagination.current=e,this.getPageList()},cancleSend:function(t){var e=this;Object(i["a"])([t.groupSendId]).then((function(t){e.$message.success("取消成功"),e.getPageList()})).catch((function(t){e.$message.error(t)}))},getPageList:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,groupSendName:this.groupSendName};this.loading=!0,Object(i["d"])(e).then((function(e){e.data&&(t.channelList=e.data.list.map((function(e){var n,o;"1"==(null===e||void 0===e?void 0:e.sendType)?(e.sendTypeText="立即发送",e.isLate=!0):(e.sendTypeText="定时发送",e.isLate=t.$moment(e.sendTime)<t.$moment()),e.context=null===(n=JSON.parse(e.groupSendContent))||void 0===n||null===(o=n.text)||void 0===o?void 0:o.content,e.notSendStaff=e.totalStaff-e.sendedStaff,e.notReceivedChat=e.totalChat-e.receivedChat,e.taskStatus=d["q"][e.status];var r=Object(a["a"])(Object(a["a"])({},e),{},{key:e.groupSendId});return r.operation=r,r})),t.pagination.total=e.data.total)})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))},remindGruoup:function(t,e){if(e){var n=this;this.$confirm({title:"提示",icon:"",content:"确认后将会给所有未发送成员发送提醒通知，是否发送？",onOk:function(){n.groupSendNotify(t)}})}},groupSendNotify:function(t){var e=this,n={groupSendId:t};Object(i["e"])(n).then((function(t){e.$message.success("提醒成功")})).catch((function(t){e.$message.error(t)}))}}},u=c,s=(n("02dd"),n("2877")),p=Object(s["a"])(u,o,r,!1,null,"07847e2b",null);e["default"]=p.exports},"8b2f":function(t,e,n){},b3d3:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return i})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"g",(function(){return p}));var o=n("b775"),r={groupSendList:"/client_group/groupsend/list",groupSendSave:"/client_group/groupsend/save",groupSendInfo:"/client_group/groupsend/info/",groupSendNotify:"/client_group/groupsend/notify",groupSendCancel:"/client_group/groupsend/cancel",groupSendChat:"/client_group/groupsend/chat",groupSendStaff:"/client_group/groupsend/staff"};function a(t){return Object(o["b"])({url:r.groupSendList,method:"post",data:t})}function i(t){return Object(o["b"])({url:r.groupSendSave,method:"post",data:t})}function d(t){return Object(o["b"])({url:r.groupSendInfo+t,method:"get"})}function c(t){return Object(o["b"])({url:r.groupSendCancel,method:"post",data:t})}function u(t){return Object(o["b"])({url:r.groupSendNotify,method:"post",data:t})}function s(t){return Object(o["b"])({url:r.groupSendChat,method:"post",data:t})}function p(t){return Object(o["b"])({url:r.groupSendStaff,method:"post",data:t})}},b9cd:function(t,e,n){"use strict";n.d(e,"l",(function(){return o})),n.d(e,"j",(function(){return r})),n.d(e,"o",(function(){return a})),n.d(e,"n",(function(){return i})),n.d(e,"b",(function(){return d})),n.d(e,"g",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return p})),n.d(e,"k",(function(){return f})),n.d(e,"i",(function(){return l})),n.d(e,"e",(function(){return g})),n.d(e,"p",(function(){return S})),n.d(e,"c",(function(){return m})),n.d(e,"h",(function(){return x})),n.d(e,"q",(function(){return h})),n.d(e,"m",(function(){return b}));var o="LOSS_STATUS",r="GROUP_STATUS",a="ORDER_WAY",i="ORDER_CONDITION",d="ADD_WAY",c="GENDER",u="CUSTOMER_STATUS",s={0:"待分配",1:"待添加",2:"待通过",3:"已添加",4:"导入中"},p={1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",7:"周日"},f=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:1},{text:"已不是好友",color:"#ffd4b6",id:2},{text:"客户接收达上限",color:"#fbe8ae",id:3},{text:"本月消息已经达到上限",color:"",id:4}],l=[{text:"未发送",color:"#ffc2c2",id:0},{text:"已发送",color:"",id:2},{text:"没有群发任务",color:"",id:4}],g={1:"微信",2:"企业微信"},S=[{id:"immediately",value:"立即发送"},{id:"timing",value:"定时发送"}],m={0:"渠道码",1:"区域扫码",2:"自动拉群",3:"一客一码",4:"加好友",5:"通过群码拉群"},x={0:{text:"拉人中",color:"green"},1:{text:"未开始",color:""},2:{text:"已达上限",color:"orange"},3:{text:"已停用",color:"red"}},h={0:{text:"创建失败",color:"green",id:0},1:{text:"待发送",color:"rgba(34,34,34,.85)",id:1},2:{text:"已发送",color:"rgba(34,34,34,.85)",id:2},3:{text:"已取消",color:"rgba(34,34,34,.85)",id:3},4:{text:"提醒发送",color:"#1890ff",id:4}},b=[{text:"文章",id:"0",format:""},{text:"链接",id:"1"},{text:"海报",id:"2",max:2,format:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",tips:"请上传png、jpg格式不超过2M的文件"},{text:"视频",id:"7",max:2e5,format:".MP4",tips:"请上传格式为MP4的视频文件"},{text:"PDF",id:"3",max:20,format:".pdf",icon:"/icons/pdf.png",tips:"请上传PDF格式不超过20M的文件"},{text:"PPT",id:"4",max:20,format:".pptx,.ppt,.pps",icon:"/icons/ppt.svg",tips:"请上传PPT格式不超过20M的文件"},{text:"表格",id:"5",max:20,format:".xlsx,.xls,.csv",icon:"/icons/excel.svg",tips:"请上传csv、xlsx格式不超过20M的文件"},{text:"文档",id:"6",max:20,format:".txt,.doc,.docx",icon:"/icons/word.svg",tips:"请上传doc、txt.docx格式不超过20M的文件"}]}}]);