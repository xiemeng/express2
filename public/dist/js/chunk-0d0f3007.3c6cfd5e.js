(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d0f3007"],{"146f":function(t,e,n){"use strict";n("7d57")},"1f3e":function(t,e,n){"use strict";n("49c9")},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("6b75");function a(t){if(Array.isArray(t))return Object(r["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||i(t)||Object(o["a"])(t)||s()}},"3b90":function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"group-part"},[e("p",{staticClass:"intro-title"},[t._v("处于该状态的群聊：")]),e("ul",{staticClass:"groups"},t._l(t.plansList.chatList,(function(n,r){return e("li",{key:r},[e("a-avatar",{staticStyle:{"margin-right":"10px"},attrs:{size:36,src:"/icons/groupChat.png",shape:"square"}}),e("div",{staticClass:"group-info"},[e("div",{staticClass:"name-info"},[e("span",{staticClass:"group-name"},[t._v(t._s(n.groupChatName))]),e("span",{staticClass:"count"},[t._v("("+t._s(n.chatCount)+")")])]),e("p",{staticClass:"group-owner"},[e("span",[t._v("群主：")]),t._v(" "),e("span",{staticClass:"owner"},[t._v(t._s(n.chatOwnerName))])])])],1)})),0)]),e("div",{staticClass:"msg-part"},[e("p",{staticClass:"intro-title"},[t._v("推送消息数：共"+t._s(t.plansList.messageList.length)+"条")]),e("div",{staticClass:"msgs"},t._l(t.plansList.messageList,(function(t,n){return e("div",{key:n,staticClass:"text-content"},[e("AccessoryList",{attrs:{item:t}})],1)})),0)])])])},a=[],i=n("6536"),o={components:{AccessoryList:i["a"]},props:["plansList"],created:function(){}},s=o,c=(n("5d81"),n("2877")),u=Object(c["a"])(s,r,a,!1,null,"58570c16",null);e["a"]=u.exports},"487a":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var n,r,a,i,o,s=function(){t.apply(i,o),r=n};return function(){if(i=this,o=arguments,n=Date.now(),a&&(clearTimeout(a),a=null),r){var t=e-(n-r);t<0?s():a=setTimeout((function(){s()}),t)}else s()}},n=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},r=document.defaultView.getComputedStyle,a=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var n=r(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window},i=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},o=function(t){return t===window?n(window):t.getBoundingClientRect().top+n(window)},s=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,n=t.el,r=n.getAttribute("infinite-scroll-throttle-delay"),i=200;r&&(i=Number(t.vm[r]||r),(isNaN(i)||i<0)&&(i=200)),t.throttleDelay=i,t.scrollEventTarget=a(n),t.scrollListener=e(u.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var o=n.getAttribute("infinite-scroll-disabled"),s=!1;o&&(this.vm.$watch(o,(function(e){t.disabled=e,!e&&t.immediateCheck&&u.call(t)})),s=Boolean(t.vm[o])),t.disabled=s;var c=n.getAttribute("infinite-scroll-distance"),l=0;c&&(l=Number(t.vm[c]||c),isNaN(l)&&(l=0)),t.distance=l;var d=n.getAttribute("infinite-scroll-immediate-check"),p=!0;d&&(p=Boolean(t.vm[d])),t.immediateCheck=p,p&&u.call(t);var f=n.getAttribute("infinite-scroll-listen-for-event");f&&t.vm.$on(f,(function(){u.call(t)}))}},u=function(t){var e=this.scrollEventTarget,r=this.el,a=this.distance;if(!0===t||!this.disabled){var s=n(e),c=s+i(e),u=!1;if(e===r)u=e.scrollHeight-c<=a;else{var l=o(r)-o(e)+r.offsetHeight+s;u=c+a>=l}u&&this.expression&&this.expression()}},l={bind:function(e,n,r){e[t]={el:e,vm:r.context,expression:n.value};var a=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){s(e)&&c.call(e[t],a),e[t].bindTryCount=0;var n=function n(){e[t].bindTryCount>10||(e[t].bindTryCount++,s(e)?c.call(e[t],a):setTimeout(n,50))};n()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",l)};return window.Vue&&(window.infiniteScroll=l,Vue.use(d)),l.install=d,l}))},"49c9":function(t,e,n){},"4f1a":function(t,e,n){"use strict";n("d3b7"),n("ddb0"),n("caad"),n("2532");var r=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v("选择群聊")]),e("section",[e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入群名称"},on:{search:t.onSearchName},model:{value:t.searchNmae,callback:function(e){t.searchNmae=e},expression:"searchNmae"}}),e("div",{staticClass:"tree"},[e("p",{staticClass:"tree-head"},[t._v(" 全部群聊("+t._s(t.pagination.total)+") "),e("a-checkbox",{on:{change:t.changeAllCheckbox},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}},[t._v(" 全选 ")])],1),e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handleInfiniteOnLoad,expression:"handleInfiniteOnLoad"}],staticClass:"scroll-list",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[t._l(t.groupList,(function(n,r){return e("li",{key:n.groupId,staticClass:"title-wrap"},[e("div",{staticClass:"title-chilred"},[e("a-avatar",{attrs:{size:40,src:"/icons/groupChat.svg",shape:"square"}}),e("div",{staticClass:"info-wrap"},[e("p",[t._v(t._s(n.chatName)+" "),e("a-tag",{attrs:{color:"blue"}},[t._v("外部")])],1),t.isShowNumber?e("p",{staticClass:"aks-tips"},[t._v(t._s(n.count)+"/200")]):e("p",{staticClass:"aks-tips"},[t._v(" 群主："+t._s(n.chatOwnerName))])])],1),e("div",[0!==n[t.keys]&&t.isSetRule?e("p",{staticClass:"aks-tips"},[t._v(t._s(t.tipText))]):e("a-checkbox",{attrs:{disabled:t.selectGroupIdIdList.includes(n.groupId)},on:{change:function(e){return t.changeChilren(r,e)}},model:{value:n.isSelect,callback:function(e){t.$set(n,"isSelect",e)},expression:"item.isSelect"}})],1)])})),t.loading?e("div",{staticClass:"loading-container"},[e("a-spin",{attrs:{tip:"正在加载中..."}})],1):t._e()],2)])],1),e("div",{staticClass:"foot-button"},[e("a-space",{attrs:{size:12}},[e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$emit("serviceOk",t.addGruoupChat)}}},[t._v("确定")])],1)],1)])},a=[],i=n("2909"),o=(n("d81d"),n("4de4"),n("159b"),n("ccdf")),s=n("487a"),c=n.n(s),u={name:"SelectGroupChat",directives:{infiniteScroll:c.a},props:{selectGroupList:{type:[Array],default:function(){return[]}},selectedList:{type:[Array],default:function(){return[]}},isSetRule:{type:Boolean,default:function(){return!0}},isShowNumber:{type:Boolean,default:function(){return!1}},notifyType:{type:String,default:function(){return"groupSop"}}},data:function(){return{searchNmae:"",busy:!1,loading:!1,groupList:[],isSelectAll:!1,pagination:{current:1,pageSize:10,total:0},tipText:"",keys:"",isEnter:!1,isOtherAll:!1}},computed:{selectGroupIdIdList:function(){return this.selectedList.map((function(t){return t.groupId}))},addGruoupChat:function(){var t={};return this.isOtherAll?t.excludeIdList=this.groupList.filter((function(t){return!t.isSelect})).map((function(t){return t.groupId})):t.groupChatIdList=this.groupList.filter((function(t){return t.isSelect})).map((function(t){return t.groupId})),t.groupList=this.groupList.filter((function(t){return t.isSelect})),t}},created:function(){this.getInfo()},methods:{getInfo:function(){switch(this.notifyType){case"groupSop":this.tipText="该群聊已设置规则",this.keys="sopStatus";break;case"groupCalendar":this.tipText="该群聊已设置日历",this.keys="calendarStatus";break;default:break}},changeChilren:function(t,e){if(this.groupList[t].isSelect=e.target.checked,e.target.checked){var n=this.groupList.filter((function(t){return!t.isSelect}));n.length<1&&(this.isSelectAll=!0)}else this.isSelectAll=!1},changeAllCheckbox:function(t){this.isOtherAll=t.target.checked,t.target.checked?this.groupList.forEach((function(t){t.isSelect=!0})):this.groupList.forEach((function(t){t.isSelect=!1}))},onSearchName:function(){this.pagination.current=1,this.groupList=[],this.busy=!1,this.isEnter=!0,this.queryGroupPageByGroupSop()},queryGroupPageByGroupSop:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,keywords:this.searchNmae,notifyType:this.notifyType};this.loading=!0,Object(o["k"])(e).then((function(e){if(null!==e&&void 0!==e&&e.data){var n,r,a=t.selectGroupList.map((function(t){return t.groupId}));if(null===(n=e.data.list)||void 0===n||n.forEach((function(t){a.includes(t.groupId)?t.isSelect=!0:t.isSelect=!1})),(r=t.groupList).push.apply(r,Object(i["a"])(e.data.list)),t.pagination.current++,t.pagination.total=e.data.total,e.data.list.length<t.pagination.pageSize)return t.busy=!0,void(t.loading=!1);t.$nextTick((function(){t.isEnter=!1}))}})).catch((function(e){t.$message.error(e),t.loading=!1}))},handleInfiniteOnLoad:function(){!this.busy&&!this.isEnter&&this.queryGroupPageByGroupSop()}}},l=u,d=(n("1f3e"),n("2877")),p=Object(d["a"])(l,r,a,!1,null,"94e9cec6",null);e["a"]=p.exports},"5d81":function(t,e,n){"use strict";n("a17a")},6536:function(t,e,n){"use strict";n("b0c0");var r=function(){var t=this,e=t._self._c;return e("div",[0===t.item.msgType?e("div",[t._v(" "+t._s(t.item.msgContent)+" ")]):t._e(),1===t.item.msgType?e("div",[e("img",{staticClass:"image",attrs:{src:t.item.msgContent.compress}})]):t._e(),2===t.item.msgType?e("div",{staticClass:"card-box"},[e("img",{attrs:{src:t.item.msgContent.form.coverUrl.compress||"/imgs/default-cover.png"},on:{error:t.errorImg}}),e("div",{staticClass:"box-right"},[e("h5",[t._v(t._s(t.item.msgContent.form.linkTitle))]),e("p",[t._v(t._s(t.item.msgContent.form.desc))])])]):t._e(),3===t.item.msgType?e("div",{staticClass:"custom-pdf"},[e("a-avatar",{attrs:{size:60,src:"/icons/pdf.png",shape:"square"}}),e("div",{staticClass:"contant"},[e("p",[t._v(t._s(t.item.pdfArr[0].name))]),e("span",[t._v(t._s(t._f("getUnits")(t.item.pdfArr[0].size)))])])],1):t._e(),5===t.item.msgType?e("div",[e("video",{staticClass:"cover-img",attrs:{src:t.item.videoArr[0].pdfFile,controls:"",height:"100%"}})]):t._e(),4===t.item.msgType?e("div",{staticClass:"custom-form"},[e("h4",[t._v(t._s(t.item.formObj.name))]),e("div",{staticClass:"flex-box"},[e("p",{staticClass:"font-color-black-25"},[t._v(t._s(t.item.formObj.desc))]),e("a-avatar",{attrs:{size:40,src:t.item.formObj.cover,shape:"square"}})],1)]):t._e()])},a=[],i=n("ca00"),o={name:"AccessoryList",components:{},props:{item:{type:Object,default:function(){return{}}}},watch:{item:{handler:function(){},deep:!0,immediate:!0}},data:function(){return{}},filters:{getUnits:function(t){return Object(i["b"])(t)}},methods:{errorImg:function(t){t.target.src="/imgs/default-cover.png"}}},s=o,c=(n("146f"),n("2877")),u=Object(c["a"])(s,r,a,!1,null,"7b304a5e",null);e["a"]=u.exports},"7d57":function(t,e,n){},"842b":function(t,e,n){"use strict";var r=n("5530"),a=(n("d3b7"),n("d81d"),n("3ca3"),n("ddb0"),n("a15b"),n("a9e3"),n("b0c0"),n("9911"),n("d885")),i=n("cf5f");e["a"]={methods:{interactiveRadarUploadFile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.uploadFilePath;return new Promise((function(n,r){var a=new FormData;a.append("file",t),a.append("dir",e),Object(i["m"])(a).then((function(t){n(t.data)})).catch((function(t){r(t)}))}))},uploadMedia:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attachments;return new Promise((function(n,r){var a=(null===e||void 0===e?void 0:e.map((function(e){return new Promise((function(n,r){if("link"===e.type&&e.isRadar&&!e.isMaterial)t.interactiveRadarAdd(e).then((function(t){n(t)})).catch((function(t){r(t)}));else if("img"===e.type){var a=new FormData;a.append("file",e.pic_url.file),a.append("dir","clientTransformation"),a.append("type","image"),Object(i["y"])(a).then((function(t){e.pic_url.fileUrl=t.data.fileUrl,e.pic_url.mediaId=t.data.mediaId,n(t.data)}))}else n()}))})))||[];Promise.all(a).then((function(t){n()})).catch((function(e){t.$message.error(e||e.message),t.loading=!1,r(e)}))}))},interactiveRadarAdd:function(t){var e=this;return new Promise((function(n,r){e.getParamsLink(t).then((function(e){Object(a["f"])(e).then((function(e){t.radarId=e.data.radarId,t.url=e.data.radarLink+t.source,n(e)})).catch((function(t){r(t)}))}))}))},getParamsLink:function(t){return new Promise((function(e,n){var r=new FormData,a=t.isCustomerTag?[{autoMarkTagBitmaps:t.selectCustomerTagList.map((function(t){return t.bitmap})).join(",")}]:[];if(r.append("type",1),r.append("radarName",t.linkTitle),r.append("link",t.url),r.append("activityNotify",Number(t.activityNotify)),r.append("behaviorNotify",Number(t.behaviorNotify)),r.append("tagRule",JSON.stringify(a)),r.append("title",t.radarTitle),r.append("desc",t.desc),r.append("hasCustomerTag",Number(t.isCustomerTag)),t.isScoreRule){var o=JSON.stringify(t.ruleDetails.map((function(t){var e,n;return{autoMarkTagBitmaps:null===(e=t.selectTagList)||void 0===e||null===(n=e.map((function(t){return t.bitmap})))||void 0===n?void 0:n.join(","),hasTag:Number(t.hasTag),score:t.score,ruleKind:t.ruleKind,count:t.count||0}})));r.append("scoreRule",o)}if(t.coverUrl.file){var s=new FormData;s.append("file",t.coverUrl.file),s.append("dir","clientTransformation"),Object(i["m"])(s).then((function(n){r.append("coverUrl",n.data),t.picurl=n.data,e(r)})).catch((function(t){n(t)}))}else e(r)}))},getMessageList:function(t){return t.map((function(t){var e="";if(0===t.msgType&&(e=t.msgContent,t.formObj={},t.pdfArr=[],t.videoArr=[]),1===t.msgType&&(e={compress:t.msgContent},t.imageObj={title:"图片",prop:"pic_url",type:"img",tips:"",accept:".jpg,.png",maxLength:2097152,value:{compress:t.msgContent}},t.formObj={},t.pdfArr=[],t.videoArr=[]),2===t.msgType){t.pdfArr=[],t.videoArr=[];var n,a,i,o,s=JSON.parse(t.msgContent);if(e={form:{linkTitle:s.title,desc:s.desc,coverUrl:{compress:s.picUrl},type:"link",url:s.url}},t.interactRadar)e.form.isRadar=!0,e.form.behaviorNotify=Boolean(t.interactRadar.behaviorNotify),e.form.activityNotify=Boolean(t.interactRadar.activityNotify),e.form.isCustomerTag=(null===(n=t.interactRadar.tagRules)||void 0===n?void 0:n.length)>0,e.form.radarTitle=t.interactRadar.radarName,e.form.radarId=t.interactRadar.radarId,e.form.selectCustomerTagList=null===(a=t.interactRadar.tagRules[0])||void 0===a||null===(i=a.customerTags)||void 0===i?void 0:i.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{key:t.tagId})})),e.form.isScoreRule=(null===(o=t.interactRadar.scoreRules)||void 0===o?void 0:o.length)>0,e.form.ruleDetails=t.interactRadar.scoreRules.map((function(t){var e;return Object(r["a"])(Object(r["a"])({},t),{},{autoMarkTagBitmaps:t.autoMarkTagBitmaps,selectTagList:null===(e=t.customerTags)||void 0===e?void 0:e.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{key:t.tagId})})),hasTag:Boolean(t.hasTag),score:t.score,ruleKind:t.ruleKind,count:t.count})}))}if(3===t.msgType){var c=JSON.parse(t.msgContent);t.pdfArr=[Object(r["a"])(Object(r["a"])({},c),{},{uid:"1",status:"done"})],t.formObj={},t.videoArr=[]}if(4===t.msgType){var u=JSON.parse(t.msgContent);t.formObj=Object(r["a"])(Object(r["a"])({},u),{},{name:u.title}),t.pdfArr=[]}if(5===t.msgType){var l=JSON.parse(t.msgContent);t.videoArr=[Object(r["a"])({},l)],t.formObj={},t.pdfArr=[]}return Object(r["a"])(Object(r["a"])({},t),{},{msgContent:e})}))},getPlanList:function(t){var e=this;return t.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{messageList:e.getAddMessageList(t.messageList)})}))},getAddMessageList:function(t){return t.map((function(t){var e="";if(0===t.msgType&&(e=t.msgContent),1===t.msgType&&(e=t.fileUrl||t.msgContent.compress),2===t.msgType){var n,r,a="";t.fileUrl?a=t.fileUrl:t.msgContent.form.picurl?a=t.msgContent.form.picurl:t.msgContent.form.coverUrl.compress&&(a=t.msgContent.form.coverUrl.compress);var i=t.msgContent.form.radarId||(null===(n=t.msgContent.form.interactRadar)||void 0===n?void 0:n.radarId);i&&(i=String(i)),e=JSON.stringify({desc:t.msgContent.form.desc,picUrl:a,url:t.msgContent.form.url,title:t.msgContent.form.linkTitle,radarId:i,type:t.msgContent.form.radarId||null!==(r=t.msgContent.form.interactRadar)&&void 0!==r&&r.radarId?"radar_link":"normal_link"})}return 3===t.msgType&&(e=JSON.stringify({pdfFile:t.pdfArr[0].fileUrl||t.pdfArr[0].pdfFile,name:t.pdfArr[0].name,size:t.pdfArr[0].size,cover:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/pdf.png"})),4===t.msgType&&(e=JSON.stringify({cover:t.formObj.cover,desc:t.formObj.desc,title:t.formObj.name,url:t.formObj.link})),{messageId:t.messageId,msgType:t.msgType,msgContent:e}}))},getPlanFileList:function(t){var e=this,n=[];return t.length>0&&(n=t.map((function(t){return new Promise((function(n,r){var a,i,o,s;2===t.msgType?t.msgContent.form.isRadar&&t.msgContent.form.randerIsEdit?e.interactiveRadarAdd(t.msgContent.form).then((function(e){t.radarId=e.data,n(e)})).catch((function(t){r(t)})):t.msgContent.form.coverUrl.file?e.interactiveRadarUploadFile(t.msgContent.form.coverUrl.file).then((function(e){t.fileUrl=e,n(e)})).catch((function(t){r(t)})):n():1===t.msgType&&t.msgContent.file?e.interactiveRadarUploadFile(t.msgContent.file).then((function(e){t.fileUrl=e,n(e)})).catch((function(t){r(t)})):3===t.msgType&&null!==(a=t.pdfArr)&&void 0!==a&&null!==(i=a[0])&&void 0!==i&&i.originFileObj?e.interactiveRadarUploadFile(t.pdfArr[0].originFileObj).then((function(e){t.pdfArr[0].fileUrl=e,n(e)})).catch((function(t){r(t)})):5===t.msgType&&null!==(o=t.videoArr)&&void 0!==o&&null!==(s=o[0])&&void 0!==s&&s.originFileObj?e.interactiveRadarUploadFile(t.videoArr[0].originFileObj).then((function(e){t.videoArr[0].fileUrl=e,n(e)})).catch((function(t){r(t)})):n()}))}))),n}}}},"8e51":function(t,e,n){"use strict";n("ac1f"),n("841c");var r=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("div",[e("h2",{staticClass:"dialog-title"},[t._v("执行群聊")]),e("div",{staticClass:"inner"},[e("div",{staticClass:"head-wrap"},[e("div",{staticClass:"intro"},[t._v("共"+t._s(t.groupOwners.length)+"个群主的"+t._s(t.rule.group_chats.length)+"个群聊执行该规则")]),e("TreeSelect",{attrs:{treeData:t.groupOwners},on:{search:t.search}})],1),e("ul",{staticClass:"group-list"},t._l(t.rule.group_chats,(function(n,r){return e("li",{directives:[{name:"show",rawName:"v-show",value:n.chatOwnerId===t.chatOwnerId||!t.chatOwnerId,expression:"(item.chatOwnerId === chatOwnerId) || !chatOwnerId"}],key:r},[e("div",{staticClass:"group-info"},[e("a-avatar",{staticStyle:{"margin-right":"10px"},attrs:{size:46,src:"/icons/groupChat.png",shape:"square"}}),e("div",{staticClass:"group-info-inner"},[e("p",{staticClass:"name"},[t._v(t._s(n.groupChatName))]),e("p",{staticClass:"owner"},[t._v(" 群主："),e("span",{staticClass:"owner-name"},[t._v(t._s(n.chatOwnerName))]),0!==n.joinDays?e("span",{staticClass:"join-time"},[t._v("加入规则第"+t._s(n.joinDays)+"天")]):e("span",{staticClass:"join-time"},[t._v("加入规则小于1天")])])])],1),e("div",{staticClass:"remove-btn clickable",on:{click:function(e){return t.showConfirm(n)}}},[t._v("将群聊移除规则")])])})),0)])])])])},a=[],i=(n("d81d"),n("d3b7"),n("159b"),n("7db0"),n("b0c0"),function(){var t=this,e=t._self._c;return e("div",[e("a-col",[e("a-tree-select",{staticStyle:{width:"192px"},attrs:{"dropdown-style":{maxHeight:"150px",overflow:"auto"},"tree-data":t.treeData,"tree-default-expand-all":"",allowClear:t.allowClear},on:{change:t.search},scopedSlots:t._u([{key:"title",fn:function(n){return e("span",{staticStyle:{color:"#08c"}},[t._v(" "+t._s(n.name)+" ")])}}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1)}),o=[],s={props:{treeData:{type:Array,default:function(){return[]}}},data:function(){return{value:"全部群主",allowClear:!1}},methods:{search:function(t){this.$emit("search",t)}},watch:{value:function(t){void 0===t?this.value="全部群主":this.allowClear="全部群主"!==t}}},c=s,u=n("2877"),l=Object(u["a"])(c,i,o,!1,null,null,null),d=l.exports,p={components:{TreeSelect:d},props:["rule"],data:function(){return{chatOwnerId:""}},computed:{groupOwners:function(){var t=this,e=this.rule.group_chats.map((function(t){return t.chatOwnerId})),n=[],r={};return e.forEach((function(e){var a,i;r[e]||(r[e]=1,n.push({title:null===(a=t.rule.group_chats)||void 0===a||null===(i=a.find((function(t){return t.chatOwnerId===e})))||void 0===i?void 0:i.chatOwnerName,value:e,key:e}))})),n}},methods:{search:function(t){this.chatOwnerId=t},showConfirm:function(t){this.$createElement;var e=this;this.$confirm({cancelText:"取消",okText:"确认",title:"提醒",content:function(t){return t("div",["移出后群聊将不会收到推送，是否确认移出？"])},onOk:function(){e.delGroupChat(t)}})},delGroupChat:function(t){this.$emit("deleteGroupChat",t)}}},f=p,m=(n("b0ce"),Object(u["a"])(f,r,a,!1,null,"671f8eb4",null));e["a"]=m.exports},"9b2f":function(t,e,n){"use strict";n.r(e);n("b0c0");var r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"group-page-content"}},[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"规则详情"},on:{back:function(e){return t.$router.go(-1)}}}),e("a-row",{staticClass:"page-box",attrs:{type:"flex",justify:"space-between"}},[e("div",{staticClass:"left"},[e("a-col",{staticClass:"left-col"},[e("div",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("创建者：")]),e("div",{staticClass:"content"},[e("span",{staticClass:"people"},[e("span",{staticClass:"icon-wrap"},[e("a-icon",{attrs:{type:"user"}})],1),e("span",[t._v(t._s(t.rule.staff.alias))])])])]),e("div",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("创建时间：")]),e("span",{staticClass:"content"},[t._v(t._s(t.rule.created_at))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("任务名称：")]),e("div",{staticClass:"content"},[t._v(t._s(t.rule.name))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("执行群聊：")]),e("span",{staticClass:"content"},[t._v(t._s(t.groupChat))]),t.groupChat?e("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){t.visible=!0}}},[t._v("查看")]):t._e()],1)])],1),e("div",{staticClass:"right"},[e("p",{staticClass:"title right-col"},[t._v("数据统计")]),e("div",{staticClass:"data-wrap"},[e("div",{staticClass:"data"},[e("div",{staticClass:"li"},[e("span",{staticClass:"num"},[t._v(t._s(t.rule.groupChatCount))]),e("span",[t._v("执行群聊数")])]),e("div",{staticClass:"li"},[e("span",{staticClass:"num"},[t._v(t._s(t.rule.todayNotifyChatCount))]),e("span",[t._v("今日提醒群聊")])]),e("div",{staticClass:"li"},[e("span",{staticClass:"num"},[t._v(t._s(t.rule.todayNotifyOwnerCount))]),e("span",[t._v("今日提醒群主数")])])])])])]),e("section",{staticClass:"container"},[e("a-row",{attrs:{type:"flex",justify:"space-between"}},[e("p",{staticClass:"sum"},[t._v("共"+t._s(t.rule.plans.length)+"条推送计划")]),e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.visibleTree=!0}}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加群聊至该规则")],1)],1),e("div",{staticClass:"plan-list"},t._l(t.rule.plans,(function(n,r){return e("div",{key:r,staticClass:"plan"},[e("div",{staticClass:"name-part"},[e("span",{staticClass:"clock"},[e("a-avatar",{attrs:{size:16,src:"/icons/clock.svg"}})],1),e("span",{staticClass:"name"},[t._v(" "+t._s(n.planNewName)+" "),n.planName?e("span",[t._v("（"+t._s(n.planName)+"）")]):t._e()])]),e("a-collapse",{attrs:{"default-active-key":"1",bordered:!1},scopedSlots:t._u([{key:"expandIcon",fn:function(r){return[e("div",{staticClass:"action"},[e("span",[t._v("共"+t._s(n.messageList.length)+"条消息")]),e("span",{staticClass:"expaned clickable"},[t._v(" "+t._s(r.isActive?"收起":"展开")+" "),e("a-icon",{attrs:{type:"up",rotate:r.isActive?180:0}})],1)])]}}],null,!0)},[e("a-collapse-panel",{key:"1",style:{borderRadius:"4px",border:0,overflow:"hidden"}},[e("GroupChat",{attrs:{plansList:n}})],1)],1)],1)})),0)],1),e("a-modal",{attrs:{width:"653px",bodyStyle:t.bodyStyle,footer:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("GroupExecute",{attrs:{rule:t.rule},on:{deleteGroupChat:t.deleteGroupChat}})],1),e("a-modal",{attrs:{footer:null,centered:"",width:"600px",destroyOnClose:""},model:{value:t.visibleTree,callback:function(e){t.visibleTree=e},expression:"visibleTree"}},[e("SelectGroupChat",{on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleTree=!1}}})],1)],1)},a=[],i=n("5530"),o=(n("d81d"),n("99af"),n("3b90")),s=n("8e51"),c=n("4f1a"),u=n("b918"),l=n("842b"),d={name:"GroupDetail",mixins:[l["a"]],data:function(){return{props:!0,confirmLoading:!1,visible:!1,bodyStyle:{height:"599px"},visibleTree:!1,rule:{created_at:"",groupChatCount:"",name:"熟悉业务",staff:{alias:"张艺强"},group_chats:[],plans:[]}}},computed:{sopId:function(){return this.$route.query.sopId},groupChat:function(){var t,e=[],n="";if((null===(t=this.rule)||void 0===t?void 0:t.group_chats.length)>0){e=this.rule.group_chats.map((function(t){return t.groupChatName}));for(var r=0;r<e.length;r++){var a=e[r];n+="【".concat(a,"】、")}n="".concat(n,"等").concat(this.rule.group_chats.length,"个群聊")}return n}},components:{GroupChat:o["a"],GroupExecute:s["a"],SelectGroupChat:c["a"]},activated:function(){this.getDetailPersonSop()},methods:{deleteGroupChat:function(t){var e=this,n=t.sopId,r=t.groupChatId,a={groupChatIdList:[r],sopId:n};Object(u["c"])(a).then((function(){e.$message.success("删除成功"),e.getDetailPersonSop()})).catch((function(t){e.$message.error(t)}))},serviceOk:function(t){var e=this,n=Object(i["a"])({sopId:this.sopId},t);Object(u["a"])(n).then((function(t){e.visibleTree=!1,e.getDetailPersonSop(),e.$message.success("添加群聊成功")})).catch((function(t){e.$message.error(t)}))},getDetailPersonSop:function(){var t=this;Object(u["e"])({sopId:this.sopId}).then((function(e){if(null!==e&&void 0!==e&&e.data){var n=e.data;t.rule={staff:{alias:n.creatorName},groupChatCount:n.groupChatCount,created_at:n.createTime,todayNotifyChatCount:n.todayNotifyChatCount,todayNotifyOwnerCount:n.todayNotifyOwnerCount,name:n.name,group_chats:n.chatList,plans:n.planList.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{messageList:t.getMessageList(e.messageList)})}))}}})).catch((function(e){t.$message.error(e)}))}}},p=d,f=(n("eaec"),n("2877")),m=Object(f["a"])(p,r,a,!1,null,"3f9a58b9",null);e["default"]=m.exports},a17a:function(t,e,n){},b0ce:function(t,e,n){"use strict";n("f4ce")},b918:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return p}));var r=n("b775"),a={addSersonSop:"/client_group/groupSop/add",delGroupSop:"/client_group/groupSop/delGroupSop",detailPersonSop:"/client_group/groupSop/detail",pagePersonSop:"/client_group/groupSop/page",addGroupChat:"/client_group/groupSop/addGroupChat",delGroupChat:"/client_group/groupSop/delGroupChat",updatePersonSop:"/client_group/groupSop/update",updateStatus:"/client_group/groupSop/updateStatus"};function i(t){return Object(r["b"])({url:a.addSersonSop,method:"post",data:t})}function o(t){return Object(r["b"])({url:a.delGroupSop,method:"post",params:t})}function s(t){return Object(r["b"])({url:a.detailPersonSop,method:"get",params:t})}function c(t){return Object(r["b"])({url:a.pagePersonSop,method:"get",params:t})}function u(t){return Object(r["b"])({url:a.addGroupChat,method:"post",data:t})}function l(t){return Object(r["b"])({url:a.delGroupChat,method:"post",data:t})}function d(t){return Object(r["b"])({url:a.updatePersonSop,method:"post",data:t})}function p(t){return Object(r["b"])({url:a.updateStatus,method:"post",params:t})}},ccdf:function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"k",(function(){return s})),n.d(e,"h",(function(){return c})),n.d(e,"l",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"m",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"n",(function(){return m})),n.d(e,"o",(function(){return g})),n.d(e,"d",(function(){return h})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return b})),n.d(e,"e",(function(){return C}));var r=n("b775"),a={queryGroupPageByGroupSop:"/client_group/customerGroup/queryGroupPageByGroupSop",getCustGrpOwner:"/client_group/customerGroup/getCustGrpOwner",queryGroupTag:"/client_group/groupTagController/queryGroupTag",getCustGrpList:"/client_group/customerGroup/getCustGrpList",syncCustomerGroup:"/client_group/customerGroup/syncCustomerGroup",batchGroupTagging:"/client_group/customerGroup/batchGroupTagging",getCustGrpListExport:"/client_group/customerGroup/getCustGrpListExport",customerGroupDetail:"/client_group/customerGroup/detail",syncCustomerGroupByChatId:"/client_group/customerGroup/syncCustomerGroupByChatId",updateNotice:"/client_group/customerGroup/updateNotice",dailyStatistics:"/client_group/customerGroup/dailyStatistics",dailyStatisticsExport:"/client_group/customerGroup/dailyStatisticsExport",memberList:"/client_group/customerGroup/memberList",memberListExport:"/client_group/customerGroup/memberListExport",batchCustomerTagging:"/client_group/customerGroup/batchCustomerTagging"};function i(t){return Object(r["b"])({url:a.getCustGrpListExport,method:"post",data:t,responseType:"blob"})}function o(t){return Object(r["b"])({url:a.batchCustomerTagging,method:"post",data:t})}function s(t){return Object(r["b"])({url:a.queryGroupPageByGroupSop,method:"get",params:t})}function c(t){return Object(r["b"])({url:a.getCustGrpOwner,method:"post",data:t})}function u(t){return Object(r["b"])({url:a.queryGroupTag,method:"post",data:t})}function l(t){return Object(r["b"])({url:a.getCustGrpList,method:"post",data:t})}function d(t){return Object(r["b"])({url:a.syncCustomerGroup,method:"post",data:t})}function p(t){return Object(r["b"])({url:a.batchGroupTagging,method:"post",data:t})}function f(t){return Object(r["b"])({url:a.customerGroupDetail,method:"get",params:t})}function m(t){return Object(r["b"])({url:a.syncCustomerGroupByChatId,method:"post",data:t})}function g(t){return Object(r["b"])({url:a.updateNotice,method:"post",data:t})}function h(t){return Object(r["b"])({url:a.dailyStatistics,method:"post",data:t})}function v(t){return Object(r["b"])({url:a.memberList,method:"get",params:t})}function b(t){return Object(r["b"])({url:a.memberListExport,method:"get",params:t,responseType:"blob"})}function C(t){return Object(r["b"])({url:a.dailyStatisticsExport,method:"post",data:t,responseType:"blob"})}},cf5f:function(t,e,n){"use strict";n.d(e,"k",(function(){return i})),n.d(e,"r",(function(){return o})),n.d(e,"l",(function(){return s})),n.d(e,"m",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return f})),n.d(e,"u",(function(){return m})),n.d(e,"v",(function(){return g})),n.d(e,"x",(function(){return h})),n.d(e,"t",(function(){return v})),n.d(e,"o",(function(){return b})),n.d(e,"g",(function(){return C})),n.d(e,"b",(function(){return _})),n.d(e,"h",(function(){return y})),n.d(e,"s",(function(){return O})),n.d(e,"c",(function(){return S})),n.d(e,"n",(function(){return j})),n.d(e,"f",(function(){return T})),n.d(e,"w",(function(){return w})),n.d(e,"j",(function(){return L})),n.d(e,"y",(function(){return k})),n.d(e,"d",(function(){return G}));var r=n("b775"),a={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function i(t){return Object(r["b"])({url:a.getLastSyncTime,method:"get",params:t})}function o(t){return Object(r["b"])({url:a.syncUpdate,method:"get",params:t})}function s(t){return Object(r["b"])({url:a.getOfficialAccount,method:"get",params:t})}function c(t){return Object(r["b"])({url:a.interactiveRadarUploadFile,method:"post",data:t})}function u(t){return Object(r["b"])({url:a.addSersonSop,method:"post",data:t})}function l(t){return Object(r["b"])({url:a.delGroupSop,method:"post",params:t})}function d(t){return Object(r["b"])({url:a.detailPersonSop,method:"get",params:t})}function p(t){return Object(r["b"])({url:a.pagePersonSop,method:"get",params:t})}function f(t){return Object(r["b"])({url:a.setPersonSopStaff,method:"post",data:t})}function m(t){return Object(r["b"])({url:a.updatePersonSop,method:"post",data:t})}function g(t){return Object(r["b"])({url:a.updateStatus,method:"post",params:t})}function h(t){return Object(r["b"])({url:a.upload,method:"post",data:t})}function v(t){return Object(r["b"])({url:a.update,method:"post",data:t})}function b(t){return Object(r["b"])({url:a.materialList,method:"get",params:t})}function C(t){return Object(r["b"])({url:a.deleteMaterial,method:"get",params:t})}function _(t){return Object(r["b"])({url:a.addTag,method:"post",data:t})}function y(t){return Object(r["b"])({url:a.deleteTag,method:"get",params:t})}function O(t){return Object(r["b"])({url:a.tagList,method:"get",params:t})}function S(t){return Object(r["b"])({url:a.addWelcome,method:"post",data:t})}function j(t){return Object(r["b"])({url:a.listWelcome,method:"get",params:t})}function T(t){return Object(r["b"])({url:a.delWelcome,method:"post",params:t})}function w(t){return Object(r["b"])({url:a.updateWelcome,method:"post",data:t})}function L(t){return Object(r["b"])({url:a.detailWelcome,method:"get",params:t})}function k(t){return Object(r["b"])({url:a.uploadMedia,method:"post",data:t})}function G(t){return Object(r["b"])({url:a.channelCodeUploadFile,method:"post",data:t})}},d885:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"n",(function(){return c})),n.d(e,"o",(function(){return u})),n.d(e,"m",(function(){return l})),n.d(e,"l",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"h",(function(){return g})),n.d(e,"k",(function(){return h})),n.d(e,"g",(function(){return v})),n.d(e,"f",(function(){return b})),n.d(e,"i",(function(){return C}));var r=n("b775"),a={interactiveRadarAdd:"/client_transformation/interactradar/add",interactiveRadarList:"/client_transformation/interactradar/list",interactiveRadarDelete:"/client_transformation/interactradar/delete",interactiveRadarupdate:"/client_transformation/interactradar/update",interactiveRadarInfo:"/client_transformation/interactradar/info",interactiveRadarSave:"/client_transformation/interactradar/channel/save",channelLinks:"/client_transformation/interactradar/getChannelLinks",generateChannelLink:"/client_transformation/interactradar/generateChannelLink",interactradarList:"/client_transformation/interactradar/channel/list",interactradarUpdate:"/client_transformation/interactradar/channel/update",statisticOverview:"/client_transformation/interactradar/statisticOverview",statisticDetail:"/client_transformation/interactradar/statisticDetail",customerLog:"/client_transformation/interactradar/customerLog",getCustomerLogDetail:"/client_transformation/interactradar/customerLogDetail",channelLog:"/client_transformation/interactradar/channelLog"};function i(t){return Object(r["b"])({url:a.channelLog,method:"post",data:t})}function o(t){return Object(r["b"])({url:a.getCustomerLogDetail,method:"get",params:t})}function s(t){return Object(r["b"])({url:a.customerLog,method:"post",data:t})}function c(t){return Object(r["b"])({url:a.statisticDetail,method:"get",params:t})}function u(t){return Object(r["b"])({url:a.statisticOverview,method:"get",params:t})}function l(t){return Object(r["b"])({url:a.interactradarUpdate,method:"post",data:t})}function d(t){return Object(r["b"])({url:a.interactradarList,method:"get",params:t})}function p(t){return Object(r["b"])({url:a.generateChannelLink,method:"get",params:t})}function f(t){return Object(r["b"])({url:a.channelLinks,method:"get",params:t})}function m(t){return Object(r["b"])({url:a.interactiveRadarSave,method:"post",data:t})}function g(t){return Object(r["b"])({url:a.interactiveRadarInfo+"/"+t,method:"get"})}function h(t){return Object(r["b"])({url:a.interactiveRadarupdate,method:"post",data:t})}function v(t){return Object(r["b"])({url:a.interactiveRadarDelete,method:"post",data:t})}function b(t){return Object(r["b"])({url:a.interactiveRadarAdd,method:"post",data:t})}function C(t){return Object(r["b"])({url:a.interactiveRadarList,method:"post",data:t})}},eae1:function(t,e,n){},eaec:function(t,e,n){"use strict";n("eae1")},f4ce:function(t,e,n){}}]);