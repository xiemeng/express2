(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74322eb6"],{"25cb":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"customerDetails page-box"},[e("div",{staticClass:"header"},[e("div",{staticClass:"flex justify-start"},["analysis"==t.source?e("div",{staticClass:"col-1 info"},[e("div",{staticClass:"title"},[t._v("数据统计")]),e("div",{staticClass:"data-wrap"},[e("div",{staticClass:"data"},[e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.numberObj.totalBrowsePeopleCount||0))]),e("span",[t._v("总浏览人数")])]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.numberObj.totalPartInPeopleCount||0))]),e("span",[t._v("总参与人数")])]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.numberObj.totalWinPeopleCount||0))]),e("span",[t._v("总获奖人数")])])])]),e("div",{staticClass:"data-wrap"},[e("div",{staticClass:"data"},[e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.numberObj.todayBrowsePeopleCount||0))]),e("span",[t._v("今日浏览人数")])]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.numberObj.todayPartInPeopleCount||0))]),e("span",[t._v("今日参与人数")])]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.numberObj.todayWinPeopleCount||0))]),e("span",[t._v("今日获奖人数")])])])])]):e("div",{staticClass:"col-1 info"},[e("div",{staticClass:"title"},[t._v("抽奖活动信息")]),e("div",{staticStyle:{display:"flex"}},[e("div",[e("div",{staticClass:"flex-row"},[e("label",[t._v("抽奖活动名称：")]),e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.activityName))])]),e("div",{staticClass:"flex-row"},[e("label",[t._v("抽奖活动说明：")]),e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.activityExplain))])]),e("div",{staticClass:"flex-row"},[e("label",[t._v("活动结束时间：")]),1==t.detailInfo.permanentValidity?e("div",{staticClass:"col-1"},[t._v("永久有效")]):e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.startTime)+"-"+t._s(t.detailInfo.endTime))])]),e("div",{staticClass:"flex-row"},[e("label",[t._v("创建人：")]),e("div",{staticClass:"col-1"},[e("a-tag",{staticClass:"ant-tag"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),t._v(t._s(t.detailInfo.creator))],1)],1)]),e("div",{staticClass:"flex-row"},[e("label",[t._v("创建时间：")]),e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.createTime))])]),e("div",{staticClass:"flex-row justify-start"},[e("label",[t._v("客服二维码：")]),e("div",{staticClass:"col-1"},[e("img",{attrs:{src:t.detailInfo.staffQrCode}})])])]),e("div",{staticStyle:{"margin-left":"180px"}},[e("div",{staticClass:"flex-row justify-start"},[e("label",[t._v("总抽奖次数：")]),e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.allLuckyTimes||"不限"))])]),e("div",{staticClass:"flex-row justify-start"},[e("label",[t._v(" 每日抽奖次数：")]),e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.eveDayLuckyTimes))])]),e("div",{staticClass:"flex-row justify-start"},[e("label",[t._v(" 每人总中奖次数：")]),e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.evePeopleWinTimes))])]),e("div",{staticClass:"flex-row justify-start"},[e("label",{staticStyle:{width:"128px"}},[t._v("每人每天中奖次数：")]),e("div",{staticClass:"col-1"},[t._v(t._s(t.detailInfo.evePeopleDayWinTimes||"不限"))])])])])]),e("div",{staticClass:"dashboard col-1"},[e("div",{staticClass:"title"},[t._v("奖品信息")]),e("table",[t._m(0),t.prizeInfoList.length>0?e("tbody",t._l(t.prizeInfoList,(function(i,a){return e("tr",{key:a},[e("td",[t._v(t._s(i.prizeName))]),e("td",[t._v(t._s(i.prizeCount||0))]),e("td",[t._v(t._s(i.winCount))]),e("td",[t._v(t._s(i.surplusCount||0))])])})),0):e("tbody",[e("tr",[e("td",{attrs:{colspan:"4"}},[e("a-empty",{staticClass:"empty"})],1)])])])])])]),e("div",{staticClass:"data-panel"},[e("div",{staticClass:"title"},[t._v("客户数据详情")]),e("div",{staticClass:"box"},[e("div",{staticClass:"flex flex-row align-content"},[e("div",[t._v(" 筛选： "),e("a-radio-group",{on:{change:t.onChangeType},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[e("a-radio",{attrs:{value:3}},[t._v("全部")]),e("a-radio",{attrs:{value:1}},[t._v("已获奖")]),e("a-radio",{attrs:{value:2}},[t._v("已参与")]),e("a-radio",{attrs:{value:0}},[t._v("仅浏览")])],1)],1)]),e("p",[t._v("共"+t._s(t.clientList.length)+"个客户")]),e("div",{staticClass:"flex flex-row searchBox"},[t._v(" 搜索用户："),e("a-input-search",{staticClass:"search-name",staticStyle:{width:"200px"},attrs:{placeholder:"搜索客户名称",allowClear:""},on:{search:t.onSearchName},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:"customerName"}})],1),e("a-table",{attrs:{columns:t.columns,"row-selection":t.rowSelection,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.change},scopedSlots:t._u([{key:"info",fn:function(i){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:i.customerAvatar}}),e("div",[e("p",[t._v(t._s(i.customerName))])])],1)}},{key:"staff",fn:function(i){return i?e("a-tag",{},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"customer-service"}}),t._v(" "+t._s(i)+" ")],1):e("div",[t._v("-")])}},{key:"tagNameList",fn:function(i){return e("div",{staticClass:"tag-name-list"},[i.length>0&&Array.isArray(i)?e("div",{class:[{mheight:i.length>=4}]},t._l(i,(function(i,a){return e("a-tag",{key:a,staticStyle:{"margin-bottom":"3px"}},[t._v(" "+t._s(i)+" ")])})),1):e("div",[t._v("-")]),i.length>=4&&Array.isArray(i)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"score",fn:function(a){return e("span",{staticClass:"winged-tag integral-tag score-tag"},[e("div",{staticClass:"flex-row full-h"},[e("img",{staticClass:"winged-tag-icon",attrs:{src:i("7e11"),alt:""}}),e("div",{staticClass:"full-h"},[t._v(" "+t._s(a))])])])}},{key:"winRecord",fn:function(i){return e("div",{staticClass:"name-list"},[i.length>0?e("div",t._l(i,(function(i,a){return e("div",{key:a},[e("div",[t._v(t._s(i.prizeName)+" "),"0"==i.cancelAfterVerification?e("span",{staticClass:"spBg"},[t._v("未核销")]):e("span",{staticClass:"spNoBg"},[t._v("已核销")])]),e("div",[t._v("("+t._s(i.winDate)+")")])])})),0):e("div",[t._v("-")])])}},{key:"operation",fn:function(i){return e("div",{},[e("a-button",{attrs:{type:"link",disabled:!i.isWriteOff},on:{click:function(e){return t.changeStaff(i)}}},[t._v("核销")])],1)}}],null,!0)})],1)]),e("a-modal",{staticClass:"noBottomBorder",attrs:{centered:"",width:"500px",height:"300px"},on:{ok:t.toCancelAfterVerification},model:{value:t.WriteOffShow,callback:function(e){t.WriteOffShow=e},expression:"WriteOffShow"}},[e("div",{staticClass:"writeOff"},[e("h2",{staticClass:"dialog-title"},[t._v("核销")]),e("p",[t._v("是否对客户"+t._s(t.winkInfo.customerName)+"已获取的奖品进行核销？")]),e("div",{staticClass:"box"},t._l(t.winkInfo.record,(function(i,a){return e("div",{key:a,staticClass:"flex"},[e("a-checkbox",{attrs:{disabled:"1"==i.cancelAfterVerification},on:{change:function(e){return t.onChange(e,a)}},model:{value:i.checkedFlag,callback:function(e){t.$set(i,"checkedFlag",e)},expression:"item.checkedFlag"}}),e("span",[t._v("获得"+t._s(i.prizeName)+"（"+t._s(i.winDate)+"）")])],1)})),0)])])],1)},s=[function(){var t=this,e=t._self._c;return e("thead",[e("th",[t._v("奖项名称")]),e("th",[t._v("奖项数量")]),e("th",[t._v("抽中数量")]),e("th",[t._v("剩余数量")])])}],n=(i("a9e3"),i("d81d"),i("d3b7"),i("8bac")),r=i("2f62"),c={props:{source:{type:String,default:""},prizeInfoList:{type:Array,default:function(){return[]}},detailInfo:{type:Object,default:function(){}},numberObj:{type:Object,default:function(){}},activityId:{type:Number,default:null}},created:function(){this.value=3,this.isWinPrize=null,this.activityId&&this.getCustomerInfo()},data:function(){return{WriteOffShow:!1,winkInfo:{},customerName:"",isWinPrize:null,value:3,clientList:[],tableLoading:!1,columns:[{title:"全部客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{title:"客户类型",dataIndex:"customerTxt",key:"customerTxt"},{title:"来源",dataIndex:"source",key:"source"},{title:"城市",dataIndex:"city",key:"city"},{title:"所属员工",dataIndex:"staff",scopedSlots:{customRender:"staff"},key:"staff"},{title:"客户评分",dataIndex:"score",key:"score",scopedSlots:{customRender:"score"}},{title:"标签",width:"200px",dataIndex:"tagNameList",scopedSlots:{customRender:"tagNameList"},key:"tagNameList"},{title:"已抽奖次数",dataIndex:"luckyTimes",key:"luckyTimes"},{title:"参与程度",dataIndex:"partInDegree",key:"partInDegree"},{title:"获奖记录",dataIndex:"winRecord",scopedSlots:{customRender:"winRecord"},key:"winRecord"},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],pagination:{current:1,pageSize:8,total:0}}},methods:{toCancelAfterVerification:function(){var t=this,e=[];if(this.winkInfo.record.map((function(t){t.checkedFlag&&"0"==t.cancelAfterVerification&&e.push(t.recordId)})),e.length<=0)return this.$message.warning("请选择需要核销的奖品"),void(this.WriteOffShow=!1);Object(n["b"])({idList:e}).then((function(e){t.$message.success("核销成功"),t.getCustomerInfo()})).catch((function(e){t.$message.error(e)})).finally((function(){t.WriteOffShow=!1}))},onChange:function(t,e){this.$set(this.winkInfo.record[e],"checkedFlag",t.target.checked),this.$forceUpdate()},changeStaff:function(t){this.winkInfo=t;var e=t.winRecord.map((function(t){return t.checkedFlag=!0,t}));this.winkInfo.record=e,this.WriteOffShow=!0},onChangeType:function(t){"3"==t.target.value?this.isWinPrize=null:this.isWinPrize=t.target.value,this.pagination.current=1,this.clientList=[],this.getCustomerInfo()},onSearchName:function(){this.pagination.current=1,this.clientList=[],this.getCustomerInfo()},getCustomerInfo:function(){var t=this,e={customerName:this.customerName,isWinPrize:this.isWinPrize,activityId:this.activityId,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};Object(n["c"])(e).then((function(e){t.disposeClientList(e.data.list)})).catch((function(e){t.$message.error(e)}))},disposeClientList:function(t){this.clientList=t.map((function(t,e){return t.tag?t.tagNameList=t.tag:t.tagNameList=[],"1"==t.customerType?t.customerTxt="已参与活动":"2"==t.customerType&&(t.customerTxt="已抽中活动"),t.info={customerAvatar:t.customerAvatar,customerName:t.customerName},t.isWriteOff=!1,t.winRecord=t.winRecord||[],t.winRecord.length>0&&t.winRecord.map((function(e){if("0"==e.cancelAfterVerification)return t.isWriteOff=!0})),t.key=e,Object.assign({operation:t},t)}))},change:function(t){var e=t.current;this.pagination.current=e},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))}},watch:{activityId:{handler:function(){this.isWinPrize=null,this.value=3,this.pagination.current=1,this.getCustomerInfo()}}},computed:Object(r["c"])({rowSelection:function(){var t=this;return{onChange:function(e,i){t.selectedRows=i,t.selectedRowKeys=e}}}})},o=c,l=(i("2b4d"),i("2877")),u=Object(l["a"])(o,a,s,!1,null,"78fc328b",null);e["a"]=u.exports},"2b4d":function(t,e,i){"use strict";i("b1fb")},"7e11":function(t,e){t.exports="data:image/png;base64,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"},"8bac":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"g",(function(){return c})),i.d(e,"h",(function(){return o})),i.d(e,"j",(function(){return l})),i.d(e,"e",(function(){return u})),i.d(e,"f",(function(){return d})),i.d(e,"a",(function(){return f})),i.d(e,"d",(function(){return v})),i.d(e,"i",(function(){return m}));var a=i("b775"),s={getList:"/marketing/luckyActivity/list",addSave:"/marketing/luckyActivity/save",updateList:"/marketing/luckyActivity/update",deleteList:"/marketing/luckyActivity/delete",getInfo:"/marketing/luckyActivity/info",uploadFile:"/marketing/luckActivityPrize/uploadFile",prizeInfo:"/marketing/luckActivityPrize/prizeInfo",numberOfPeopleInfo:"/marketing/luckyActivity/numberOfPeopleInfo",customerInfo:"/marketing/luckyActivity/customerInfo",cancelAfterVerification:"/marketing/luckyActivity/cancelAfterVerification"};function n(t){return Object(a["b"])({url:s.cancelAfterVerification,method:"post",data:t})}function r(t){return Object(a["b"])({url:s.customerInfo,method:"get",params:t})}function c(t){return Object(a["b"])({url:s.numberOfPeopleInfo,method:"get",params:t})}function o(t){return Object(a["b"])({url:s.prizeInfo,method:"get",params:t})}function l(t){return Object(a["b"])({url:s.uploadFile,method:"post",data:t})}function u(t){return Object(a["b"])({url:s.getInfo,method:"get",params:t})}function d(t){return Object(a["b"])({url:s.getList,method:"get",params:t})}function f(t){return Object(a["b"])({url:s.addSave,method:"post",data:t})}function v(t){return Object(a["b"])({url:s.deleteList,method:"post",data:t})}function m(t){return Object(a["b"])({url:s.updateList,method:"post",data:t})}},b1fb:function(t,e,i){}}]);