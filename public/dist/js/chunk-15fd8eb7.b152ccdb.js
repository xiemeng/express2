(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15fd8eb7"],{2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n("6b75");function o(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return o(t)||r(t)||Object(i["a"])(t)||s()}},"299d":function(t,e,n){},"29ec":function(t,e,n){"use strict";n.r(e);n("9911"),n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("header",{staticClass:"header"},[e("a-space",{attrs:{size:12}},[e("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$router.push({name:"NewWelcome",query:{state:"add"}})}}},[t._v(" 新建好友欢迎语 ")])],1)],1),e("a-table",{staticClass:"background-white",attrs:{columns:t.columns,"data-source":t.fSend,pagination:t.pagination,loading:t.loading},on:{change:t.changePage},scopedSlots:t._u([{key:"massContent",fn:function(n,a,o){return e("div",{attrs:{index:o}},[e("div",{staticClass:"contant-wrap"},[e("p",{staticStyle:{color:"#139A32","margin-bottom":"8px"}},[t._v("[共"+t._s(t.getContantLength(a.context))+"条]")]),t._l(a.context,(function(n,a){return e("div",{key:a},[n.content?e("span",[t._v(t._s(n.content))]):t._l(n,(function(n,a){return e("div",{directives:[{name:"show",rawName:"v-show",value:a<=1,expression:"index <= 1"}],key:a},["image"===n.msgtype?[e("a-avatar",{attrs:{src:n.image.pic_url,shape:"square",size:40}})]:t._e(),"link"===n.msgtype?[e("div",{staticClass:"link-box"},[e("a-avatar",{attrs:{src:n.link.picurl,shape:"square",size:40}}),e("div",{staticClass:"link-right",staticStyle:{"margin-left":"10px"}},[e("h5",[t._v(t._s(n.link.title))]),e("p",[t._v(t._s(n.link.desc))])])],1)]:t._e()],2)}))],2)}))],2),t.getContantLength(a.context)>3?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookAll(a.context)}}},[t._v(" 查看全部 ")]):t._e()],1)}},{key:"welcomeUseRefList",fn:function(n){return e("div",{},[n?e("div",t._l(n,(function(n,a){return e("a-tag",{key:a},[e("a-icon",{attrs:{type:"folder-open"}}),t._v(" "+t._s(n.name)+" ")],1)})),1):e("div",[t._v("全部成员")])])}},{key:"operation",fn:function(n){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteWelcome(n)}}},[t._v("删除")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"NewWelcome",query:{state:"edit",welcomeId:n}})}}},[t._v(" 编辑 ")])],1)}}])}),e("AlertPhone",{directives:[{name:"show",rawName:"v-show",value:t.isAlertPhone,expression:"isAlertPhone"}],attrs:{textList:t.textList},on:{cancle:function(e){t.isAlertPhone=!1}}})],1)},o=[],r=n("2909"),i=(n("d81d"),n("99af"),n("d3b7"),n("cf5f")),s=n("a68f"),c={name:"WelcomeFriend",components:{AlertPhone:s["a"]},data:function(){return{fSend:[],loading:!1,textList:[],isAlertPhone:!1,pagination:{current:1,pageSize:10,total:0},columns:[{title:"消息内容",key:"massContent",dataIndex:"massContent",width:"300px",scopedSlots:{customRender:"massContent"}},{title:"使用成员",key:"welcomeUseRefList",dataIndex:"welcomeUseRefList",width:"400px",scopedSlots:{customRender:"welcomeUseRefList"}},{title:"修改时间",key:"updateTime",dataIndex:"updateTime",scopedSlots:{customRender:"updateTime"}},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"welcomeId",align:"right",dataIndex:"welcomeId",scopedSlots:{customRender:"operation"}}]}},activated:function(){this.getlistWelcome()},methods:{lookAll:function(t){var e=t.attachments.map((function(t){return"link"===t.msgtype?{type:"link",linkTitle:t.link.title,desc:t.link.desc,coverUrl:{compress:t.link.picurl}}:"image"===t.msgtype?{type:"img",pic_url:{compress:t.image.pic_url}}:void 0}));this.textList=[t.text.content].concat(Object(r["a"])(e)),this.isAlertPhone=!0},getContantLength:function(t){var e;if(t){var n=0;return t.text&&(n=1),(null===(e=t.attachments)||void 0===e?void 0:e.length)>0&&(n+=t.attachments.length),"string"==typeof t&&(n=1),n}},changePage:function(t){var e=t.current;this.pagination.current=e,this.getlistWelcome()},deleteWelcome:function(t){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"确定要删除此欢迎语吗？",onOk:function(){e.delWelcome(t)}})},delWelcome:function(t){var e=this;this.loading=!0,Object(i["f"])({welcomeId:t}).then((function(t){var n;1===(null===(n=e.fSend)||void 0===n?void 0:n.length)&&(e.pagination.current=e.pagination.current-1||1),e.getlistWelcome(),e.$message.success("删除成功")})).finally((function(){return e.loading=!1}))},getlistWelcome:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,Object(i["n"])(e).then((function(e){null!==e&&void 0!==e&&e.data&&(t.pagination.total=e.data.total,t.fSend=e.data.list.map((function(t){t.key=String(t.welcomeId);try{t.context=JSON.parse(t.content)}catch(e){t.context=t.content}return t})))})).finally((function(){return t.loading=!1}))}}},l=c,u=(n("f776"),n("2877")),d=Object(u["a"])(l,a,o,!1,null,"7026bf69",null);e["default"]=d.exports},"54bc":function(t,e,n){},"8e34":function(t,e,n){"use strict";n("299d")},a68f:function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("div",[e("p",{staticStyle:{"text-align":"right"}},[e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return t.$emit("cancle")}}})],1),e("PhoneModel",{attrs:{textList:t.textList}})],1)])},o=[],r=n("e6b1"),i={name:"AlertPhone",components:{PhoneModel:r["a"]},props:{textList:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{}},s=i,c=(n("b04e"),n("2877")),l=Object(c["a"])(s,a,o,!1,null,"28c760da",null);e["a"]=l.exports},b04e:function(t,e,n){"use strict";n("f597")},cf5f:function(t,e,n){"use strict";n.d(e,"k",(function(){return r})),n.d(e,"r",(function(){return i})),n.d(e,"l",(function(){return s})),n.d(e,"m",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return m})),n.d(e,"u",(function(){return f})),n.d(e,"v",(function(){return g})),n.d(e,"x",(function(){return h})),n.d(e,"t",(function(){return b})),n.d(e,"o",(function(){return _})),n.d(e,"g",(function(){return v})),n.d(e,"b",(function(){return S})),n.d(e,"h",(function(){return y})),n.d(e,"s",(function(){return k})),n.d(e,"c",(function(){return x})),n.d(e,"n",(function(){return w})),n.d(e,"f",(function(){return O})),n.d(e,"w",(function(){return C})),n.d(e,"j",(function(){return j})),n.d(e,"y",(function(){return L})),n.d(e,"d",(function(){return P}));var a=n("b775"),o={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function r(t){return Object(a["b"])({url:o.getLastSyncTime,method:"get",params:t})}function i(t){return Object(a["b"])({url:o.syncUpdate,method:"get",params:t})}function s(t){return Object(a["b"])({url:o.getOfficialAccount,method:"get",params:t})}function c(t){return Object(a["b"])({url:o.interactiveRadarUploadFile,method:"post",data:t})}function l(t){return Object(a["b"])({url:o.addSersonSop,method:"post",data:t})}function u(t){return Object(a["b"])({url:o.delGroupSop,method:"post",params:t})}function d(t){return Object(a["b"])({url:o.detailPersonSop,method:"get",params:t})}function p(t){return Object(a["b"])({url:o.pagePersonSop,method:"get",params:t})}function m(t){return Object(a["b"])({url:o.setPersonSopStaff,method:"post",data:t})}function f(t){return Object(a["b"])({url:o.updatePersonSop,method:"post",data:t})}function g(t){return Object(a["b"])({url:o.updateStatus,method:"post",params:t})}function h(t){return Object(a["b"])({url:o.upload,method:"post",data:t})}function b(t){return Object(a["b"])({url:o.update,method:"post",data:t})}function _(t){return Object(a["b"])({url:o.materialList,method:"get",params:t})}function v(t){return Object(a["b"])({url:o.deleteMaterial,method:"get",params:t})}function S(t){return Object(a["b"])({url:o.addTag,method:"post",data:t})}function y(t){return Object(a["b"])({url:o.deleteTag,method:"get",params:t})}function k(t){return Object(a["b"])({url:o.tagList,method:"get",params:t})}function x(t){return Object(a["b"])({url:o.addWelcome,method:"post",data:t})}function w(t){return Object(a["b"])({url:o.listWelcome,method:"get",params:t})}function O(t){return Object(a["b"])({url:o.delWelcome,method:"post",params:t})}function C(t){return Object(a["b"])({url:o.updateWelcome,method:"post",data:t})}function j(t){return Object(a["b"])({url:o.detailWelcome,method:"get",params:t})}function L(t){return Object(a["b"])({url:o.uploadMedia,method:"post",data:t})}function P(t){return Object(a["b"])({url:o.channelCodeUploadFile,method:"post",data:t})}},e6b1:function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-model"},[e("img",{staticClass:"bg",attrs:{src:"/imgs/chatBg.png"}}),e("div",{staticClass:"contant"},[e("p",{staticClass:"time"},[t._v(t._s(t.time))]),t.textList.length>0?e("ul",t._l(t.textList,(function(n,a){return e("li",{key:a,staticClass:"contant-list"},["img"===n.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[e("img",{staticClass:"upload-img",attrs:{src:n.pic_url.compress}})])]:t._e(),"link"===n.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-title"},[e("a-tooltip",{attrs:{title:n.linkTitle}},[e("p",{staticClass:"contant-subtitle"},[t._v(t._s(n.linkTitle))])]),e("div",{staticClass:"contant-contant"},[n.desc?e("a-tooltip",{attrs:{title:n.desc}},[e("span",[t._v(t._s(n.desc))])]):t._e(),e("a-avatar",{attrs:{src:n.coverUrl.compress,size:32,shape:"square"}})],1)],1)]:t._e(),n.type?t._e():[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[t._v(t._s(n))])]],2)})),0):t._e()])])},o=[],r={name:"PhoneModel",data:function(){return{time:this.$moment().format("HH:mm")}},props:{textList:{type:[Array],default:function(){return[]}}},watch:{textList:function(){}}},i=r,s=(n("8e34"),n("2877")),c=Object(s["a"])(i,a,o,!1,null,"1aa7a172",null);e["a"]=c.exports},f597:function(t,e,n){},f776:function(t,e,n){"use strict";n("54bc")}}]);