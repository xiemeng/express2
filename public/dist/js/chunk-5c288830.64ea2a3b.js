(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c288830"],{"01a9":function(t,e,a){"use strict";a("76c1")},"0395":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aks-person",on:{click:function(e){return t.$emit("open")}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.usePersionList,(function(a){return e("li",{key:a.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(a.tagName))])],1)})),t.usePersionList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v(t._s(t.placeHolder))]):t._e()],2),t.usePersionList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.usePersionList.length)+"个账号")]):t._e(),e("a-icon",{attrs:{type:"caret-down"}})],1)},n=[],r={name:"SelectInput",props:{usePersionList:{type:[Array],default:function(){return[]}},placeHolder:{type:[String],default:""}}},s=r,o=(a("af8f"),a("2877")),c=Object(o["a"])(s,i,n,!1,null,"7ad15fc6",null);e["a"]=c.exports},2880:function(t,e,a){"use strict";a("592d")},"2a86":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),t.tipText?e("span",{attrs:{name:"tip"}},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" "+t._s(t.tipText)+" ")],1)]):t._e(),t._t("default"),t.footer?e("div",{staticClass:"foot-button"},[e("div",{staticClass:"left"},[t._t("bottomLeft")],2),e("a-space",{attrs:{size:12}},[t._t("footer"),e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v(t._s(t.cancleText))]),e("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("serviceOk")}}},[t._v(t._s(t.okText))])],2)],1):t._e()],2)},n=[],r={name:"CommonModal",props:{title:{type:String,default:"标题"},cancleText:{type:String,default:"取消"},okText:{type:String,default:"确定"},tipText:{type:[String,Boolean],default:!1},footer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}}},s=r,o=(a("2880"),a("2877")),c=Object(o["a"])(s,i,n,!1,null,"c55b780c",null);e["a"]=c.exports},"487a":function(t,e,a){(function(e,a){t.exports=a()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var a,i,n,r,s,o=function(){t.apply(r,s),i=a};return function(){if(r=this,s=arguments,a=Date.now(),n&&(clearTimeout(n),n=null),i){var t=e-(a-i);t<0?o():n=setTimeout((function(){o()}),t)}else o()}},a=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},i=document.defaultView.getComputedStyle,n=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var a=i(e).overflowY;if("scroll"===a||"auto"===a)return e;e=e.parentNode}return window},r=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?a(window):t.getBoundingClientRect().top+a(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,a=t.el,i=a.getAttribute("infinite-scroll-throttle-delay"),r=200;i&&(r=Number(t.vm[i]||i),(isNaN(r)||r<0)&&(r=200)),t.throttleDelay=r,t.scrollEventTarget=n(a),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=a.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var c=a.getAttribute("infinite-scroll-distance"),u=0;c&&(u=Number(t.vm[c]||c),isNaN(u)&&(u=0)),t.distance=u;var d=a.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&l.call(t);var m=a.getAttribute("infinite-scroll-listen-for-event");m&&t.vm.$on(m,(function(){l.call(t)}))}},l=function(t){var e=this.scrollEventTarget,i=this.el,n=this.distance;if(!0===t||!this.disabled){var o=a(e),c=o+r(e),l=!1;if(e===i)l=e.scrollHeight-c<=n;else{var u=s(i)-s(e)+i.offsetHeight+o;l=c+n>=u}l&&this.expression&&this.expression()}},u={bind:function(e,a,i){e[t]={el:e,vm:i.context,expression:a.value};var n=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&c.call(e[t],n),e[t].bindTryCount=0;var a=function a(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?c.call(e[t],n):setTimeout(a,50))};a()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u}))},"592d":function(t,e,a){},"5eed7":function(t,e,a){"use strict";a("caad"),a("2532");var i=function(){var t=this,e=t._self._c;return e("div",[e("h4",{staticClass:"title"},[t._v("选择素材标签")]),e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入要搜索的标签"},on:{search:t.searchTag},model:{value:t.searchNmae,callback:function(e){t.searchNmae=e},expression:"searchNmae"}}),e("div",{staticClass:"add-tags-wrap"},[e("a-button",{directives:[{name:"show",rawName:"v-show",value:!t.visibleInput,expression:"!visibleInput"}],staticClass:"add",attrs:{icon:"plus",size:"small"},on:{click:t.addTagClick}},[t._v("添加标签")]),e("a-input",{directives:[{name:"show",rawName:"v-show",value:t.visibleInput,expression:"visibleInput"}],ref:"tagsInput",staticClass:"tags-input add",attrs:{allowClear:"",size:"small",maxLength:6,placeholder:"输入后回车"},on:{blur:t.pressEnter,pressEnter:t.pressEnter},model:{value:t.inputTag,callback:function(e){t.inputTag=e},expression:"inputTag"}}),t._l(t.tagList,(function(a){return e("a-tag",{key:a.tagId,attrs:{color:t.tagIdList.includes(a.tagId)?"blue":""},on:{click:function(e){return t.checkedTag(a)}}},[t._v(" "+t._s(a.tagName)+" ")])}))],2)],1)},n=[],r=(a("d81d"),a("c740"),a("a434"),a("cf5f")),s={name:"SelectMaterialTags",data:function(){return{searchNmae:"",tagList:[],selectTagList:[],visibleInput:!1,inputTag:""}},props:{selectTagWrap:{type:[Array],default:function(){return[]}}},watch:{selectTagWrap:{handler:function(){this.selectTagList=this.selectTagWrap},immediate:!0}},computed:{tagIdList:function(){return this.selectTagList.map((function(t){return t.tagId}))}},created:function(){this.getTagList()},methods:{addTagClick:function(){var t=this;this.visibleInput=!0,this.$nextTick((function(){t.$refs.tagsInput.focus()}))},searchTag:function(){this.getTagList()},pressEnter:function(t){var e=this;this.inputTag&&Object(r["b"])({tagName:this.inputTag}).then((function(t){e.visibleInput=!1,e.getTagList(),e.$message.success("新增标签成功"),e.inputTag=""})).catch((function(t){e.$message.error(t)}))},checkedTag:function(t){var e=this.selectTagList.findIndex((function(e){if(e.tagId===t.tagId)return e}));e>=0?this.selectTagList.splice(e,1):this.selectTagList.push(t)},getTagList:function(){var t=this,e={tagName:this.searchNmae||null};Object(r["s"])(e).then((function(e){t.tagList=e.data})).catch((function(e){t.$message.error(e)}))}}},o=s,c=(a("94d5"),a("2877")),l=Object(c["a"])(o,i,n,!1,null,"63d87718",null);e["a"]=l.exports},"6d26":function(t,e,a){},"76c1":function(t,e,a){},7807:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"model-wrap"},[e("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol}},[t.isNeedSelectRadar?e("a-button",{staticClass:"choose-radar",attrs:{type:"primary"},on:{click:function(e){t.visibleRadar=!0}}},[t._v(" 选择互动雷达 ")]):t._e(),t._l(t.formInfoList,(function(t){return e("a-form-model-item",{key:t.prop,attrs:{label:t.title,prop:t.prop}},[e("FormList",{staticClass:"input",attrs:{formInfo:t}})],1)}))],2),e("ul",{staticClass:"form-list"},[t.isNeedTag?e("li",[e("a-checkbox",{on:{change:t.changeTag},model:{value:t.form.isTag,callback:function(e){t.$set(t.form,"isTag",e)},expression:"form.isTag"}},[t._v(" 选择素材标签 ")]),t.form.isTag?e("div",{staticClass:"checkout-box"},[e("a-button",{attrs:{icon:"plus",size:"small"},on:{click:function(e){t.visibleTags=!0}}},[t._v("选择标签")]),t._l(t.selectTagList,(function(a,i){return e("a-tag",{key:a.tagId,staticClass:"checkout-tag",attrs:{closable:""},on:{close:function(e){return t.deleteTag(i)}}},[t._v(" "+t._s(a.tagName)+" ")])}))],2):t._e()],1):t._e(),t.isNeedRader?e("li",{class:{exhibition:!t.randerIsEdit}},[e("a-checkbox",{attrs:{disabled:!t.randerIsEdit||t.isMaterial},model:{value:t.form.isRadar,callback:function(e){t.$set(t.form,"isRadar",e)},expression:"form.isRadar"}},[t._v(" 同步到雷达链接 ")]),e("p",{staticClass:"aks-tips"},[t._v("使用雷达链接发送，可追踪链接打开记录，设置客户标签和客户评分")]),t.form.isRadar&&!t.isMaterial?e("div",{staticClass:"checkout-box"},[e("div",{staticStyle:{"margin-top":"10px"}},[e("span",[t._v("雷达标题:")]),e("a-input",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{maxLength:30,placeholder:"必填，输入标题后即可保存该条链接为雷达链接"},model:{value:t.form.radarTitle,callback:function(e){t.$set(t.form,"radarTitle",e)},expression:"form.radarTitle"}})],1),e("h4",[t._v("链接追踪设置")]),e("div",{staticClass:"checkout-list"},[e("a-checkbox",{attrs:{disabled:!t.randerIsEdit},model:{value:t.form.behaviorNotify,callback:function(e){t.$set(t.form,"behaviorNotify",e)},expression:"form.behaviorNotify"}},[e("span",[t._v("行为通知")]),e("small",{staticClass:"aks-tips"},[t._v("（当客户点击雷达链接时，发送雷达链接的员工将会收到消息提醒）")])])],1),e("div",{staticClass:"checkout-list"},[e("a-checkbox",{attrs:{disabled:!t.randerIsEdit},model:{value:t.form.activityNotify,callback:function(e){t.$set(t.form,"activityNotify",e)},expression:"form.activityNotify"}},[e("span",[t._v("动态通知")]),e("small",{staticClass:"aks-tips"},[t._v("（当客户点击雷达链接时，会将客户的打开行为记录在客户动态里）")])])],1),e("div",{staticClass:"checkout-list"},[e("a-checkbox",{attrs:{disabled:!t.randerIsEdit},model:{value:t.form.isCustomerTag,callback:function(e){t.$set(t.form,"isCustomerTag",e)},expression:"form.isCustomerTag"}},[e("span",[t._v("客户标签")]),e("small",{staticClass:"aks-tips"},[t._v("（给点击雷达链接的客户打上选中的标签）")])]),t.form.isCustomerTag?e("div",{staticClass:"checkout-box"},[e("a-button",{attrs:{icon:"plus",size:"small"},on:{click:function(e){t.visibleCustomerTag=!0}}},[t._v("选择标签")]),t._l(t.form.selectCustomerTagList,(function(a,i){return e("a-tag",{key:a.tagId,staticClass:"checkout-tag",attrs:{closable:""},on:{close:function(e){return t.deleteCustomerTag(i)}}},[t._v(" "+t._s(a.tagName)+" ")])}))],2):t._e()],1),e("div",{staticClass:"checkout-list"},[e("a-checkbox",{attrs:{disabled:!t.randerIsEdit},model:{value:t.form.isScoreRule,callback:function(e){t.$set(t.form,"isScoreRule",e)},expression:"form.isScoreRule"}},[e("span",[t._v("设置客户评分")])]),t.form.isScoreRule?e("CustomerRating",{attrs:{ruleDetails:t.form.ruleDetails,randerIsEdit:t.randerIsEdit}}):t._e()],1)]):t._e()],1):t._e()]),e("a-modal",{attrs:{centered:"",destroyOnClose:""},on:{ok:t.selectTag},model:{value:t.visibleTags,callback:function(e){t.visibleTags=e},expression:"visibleTags"}},[e("SelectMaterialTags",{ref:"SelectMaterialTags",attrs:{selectTagWrap:t.selectTagList}})],1),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visibleCustomerTag,callback:function(e){t.visibleCustomerTag=e},expression:"visibleCustomerTag"}},[e("SelectTags",{attrs:{selectTagList:t.form.selectCustomerTagList},on:{cancle:function(e){t.visibleCustomerTag=!1},serviceOk:t.serviceTagCustomer}})],1),e("a-modal",{attrs:{centered:"",footer:null,width:"880px",destroyOnClose:""},model:{value:t.visibleRadar,callback:function(e){t.visibleRadar=e},expression:"visibleRadar"}},[e("SelectRadar",{attrs:{source:t.source},on:{cancle:function(e){t.visibleRadar=!1},serviceOk:t.serviceRadar}})],1)],1)},n=[],r=a("5530"),s=(a("d81d"),a("0481"),a("4069"),a("4de4"),a("d3b7"),a("a434"),a("159b"),a("a15b"),a("c844")),o=(a("ac1f"),a("841c"),function(){var t=this,e=t._self._c;return e("CommonModal",t._b({on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.sourceModal,!1),[e("a-input-search",{attrs:{placeholder:"请输入雷达名称",allowClear:""},on:{search:t.search},model:{value:t.radarName,callback:function(e){t.radarName=e},expression:"radarName"}}),e("div",{staticClass:"tab-wrap"},[e("span",{staticClass:"tab",class:{active:""===t.type},on:{click:function(e){return t.selectTab("")}}},[t._v("全部")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticClass:"tab",class:{active:1===t.type},on:{click:function(e){return t.selectTab(1)}}},[t._v("雷达链接")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticClass:"tab",class:{active:2===t.type},on:{click:function(e){return t.selectTab(2)}}},[t._v("雷达PDF")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticClass:"tab",class:{active:3===t.type},on:{click:function(e){return t.selectTab(3)}}},[t._v("雷达文章")])],1),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handleInfiniteOnLoad,expression:"handleInfiniteOnLoad"}],staticClass:"scroll-list",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[t.pageList.length>0?e("ul",{staticClass:"randar-list-wrap"},t._l(t.pageList,(function(a){return e("li",{key:a.radarId,staticClass:"randar-list",on:{click:function(e){t.selectRandarId=a.radarId}}},[e("header",{staticClass:"randar-head"},[e("div",[e("a-tag",{attrs:{color:"blue"}},[t._v(" "+t._s(t.typeText[a.type])+" ")]),t._v(" "+t._s(a.radarName)+" ")],1),e("a-checkbox",{attrs:{checked:t.selectRandarId===a.radarId}})],1),e("section",{staticClass:"randar-main"},[e("div",{staticClass:"randar-main-content"},[e("p",[t._v(t._s(a.title))]),e("p",{staticClass:"aks-tips"},[t._v(t._s(a.desc))])]),e("img",{staticClass:"cover-img",attrs:{src:t.getSrc(a)}})])])})),0):e("a-empty"),t.loading?e("div",{staticClass:"loading-container"},[e("a-spin",{attrs:{tip:"正在加载中..."}})],1):t._e(),!t.loading&&t.pageList.length>0?e("div",{staticClass:"loading-container"},[t._v("没有更多数据了")]):t._e()],1)],1)}),c=[],l=a("2909"),u=(a("7db0"),a("2a86")),d=a("d885"),f=a("487a"),m=a.n(f),p={name:"SelectRadar",directives:{infiniteScroll:m.a},components:{CommonModal:u["a"]},props:{source:{type:String,default:""}},data:function(){return{sourceModal:{title:"添加链接"},pagination:{current:1,pageSize:10,total:0},type:"",typeText:{1:"链接",2:"PDF",3:"文章",4:"文章"},typeImg:{1:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/default-cover.png",2:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/pdf.png",3:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/default-cover.png",4:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/default-cover.png"},radarName:"",loading:!1,busy:!1,pageList:[],selectRandarId:""}},methods:{serviceOk:function(){var t=this;if(this.selectRandarId){var e=this.pageList.find((function(e){return e.radarId===t.selectRandarId}));this.$emit("serviceOk",e)}else this.$message.warning("请选择一个雷达链接")},init:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,radarName:this.radarName,source:this.source,type:this.type};this.loading=!0,Object(d["i"])(e).then((function(e){var a;e.data.list.length>0&&(a=t.pageList).push.apply(a,Object(l["a"])(e.data.list));if(t.pagination.current++,e.data.list.length<t.pagination.pageSize)return t.busy=!0,void(t.loading=!1);t.pagination.total=e.data.total})).catch((function(e){t.$message.error(e||e.message)}))},selectTab:function(t){this.type=t,this.pagination.current=1,this.pageList=[],this.busy=!1,this.init()},search:function(){this.pagination.current=1,this.pageList=[],this.busy=!1,this.init()},handleInfiniteOnLoad:function(){!this.busy&&this.init()},getSrc:function(t){return t.coverUrl?t.coverUrl:(t.coverUrl=this.typeImg[t.type],this.typeImg[t.type])}}},g=p,h=(a("7f67"),a("2877")),v=Object(h["a"])(g,o,c,!1,null,"14013c51",null),b=v.exports,T=a("26f2"),_=a("5eed7"),y=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"add-rule"},[t._l(t.ruleDetails,(function(a,i){return e("li",{key:i,staticClass:"rule-list"},[e("a-icon",{attrs:{type:"minus-circle"},on:{click:function(e){return t.delRule(i)}}}),e("span",{class:0===i?"first":""},[t._v("规则"+t._s(i+1)+"：用户")]),e("a-select",{staticStyle:{width:"120px"},model:{value:a.ruleKind,callback:function(e){t.$set(a,"ruleKind",e)},expression:"item.ruleKind"}},t._l(t.ruleKindList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.text)+" ")])})),1),a.ruleKind!==t.ruleKindList[0].id?e("span",[t._v(" 达到 "),e("a-input-number",{staticClass:"time",attrs:{min:1},model:{value:a.count,callback:function(e){t.$set(a,"count",e)},expression:"item.count"}})],1):t._e(),t._v(" 次时，可评 "),e("a-input-number",{staticClass:"time",attrs:{min:1},model:{value:a.score,callback:function(e){t.$set(a,"score",e)},expression:"item.score"}}),t._v("分 "),e("br"),e("a-space",[t._v(" 并打上标签："),e("a-switch",{attrs:{disabled:!t.randerIsEdit},model:{value:a.hasTag,callback:function(e){t.$set(a,"hasTag",e)},expression:"item.hasTag"}}),a.hasTag?e("SelectInput",{attrs:{placeHolder:"请选择标签",usePersionList:a.selectTagList},on:{open:function(e){return t.openTag(a)}}}):t._e()],1)],1)})),e("a-button",{attrs:{type:"link"},on:{click:t.addRule}},[e("a-space",{attrs:{size:12}},[e("a-icon",{attrs:{type:"plus-circle"}}),t._v("添加规则 "),e("span",{staticClass:"font-color-black-25"},[t._v("(添加的多条规则，可同时生效,最多设置8个规则)")])],1)],1),e("a-modal",{attrs:{footer:null,width:"600px",centered:""},model:{value:t.visibleTag,callback:function(e){t.visibleTag=e},expression:"visibleTag"}},[e("SelectTags",{attrs:{selectTagList:t.item.selectTagList},on:{cancle:function(e){t.visibleTag=!1},serviceOk:t.serviceTagOk}})],1)],2)},k=[],L=a("0395"),C={name:"CustomerRating",components:{SelectInput:L["a"],SelectTags:s["a"]},props:{ruleDetails:{type:Array,default:function(){return[]}},randerIsEdit:{type:Boolean,default:!0}},data:function(){return{ruleKindList:[{id:0,text:"每打开一次"},{id:1,text:"累计打开次数"}],defaultRuleDetails:function(){return{autoMarkTagBitmaps:"",hasTag:!1,selectTagList:[],score:"",ruleKind:0,count:""}},visibleTag:!1,item:{selectTagList:[]}}},methods:{openTag:function(t){this.item=t,this.visibleTag=!0},delRule:function(t){this.ruleDetails.splice(t,1)},addRule:function(){this.ruleDetails.length>=8?this.$message.warning("最多设置8个规则"):this.ruleDetails.push(this.defaultRuleDetails())},serviceTagOk:function(t){this.item.selectTagList=t.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat(),this.visibleTag=!1}}},S=C,O=(a("d6fb"),Object(h["a"])(S,y,k,!1,null,"a49545da",null)),x=O.exports,I=a("ca00"),R={name:"AddLinkWrap",components:{FormList:T["a"],SelectMaterialTags:_["a"],SelectRadar:b,SelectTags:s["a"],CustomerRating:x},props:{editData:{type:Object,default:function(){return{}}},isNeedTag:{type:Boolean,default:!1},isNeedRader:{type:Boolean,default:!0},isNeedSelectRadar:{type:Boolean,default:!0},source:{type:String,default:""}},data:function(){return{labelCol:{span:5},visibleTags:!1,selectTagList:[],visibleRadar:!1,visibleCustomerTag:!1,formInfoList:[{title:"链接地址",prop:"url",type:"input",tips:"链接地址请以http 或https开头",maxLength:300,value:"http://"},{title:"链接标题",prop:"linkTitle",type:"input",tips:"请输入链接标题",maxLength:30,value:""},{title:"链接描述",prop:"desc",type:"textarea",tips:"请输入链接描述",maxLength:400,value:""},{title:"封面图",prop:"coverUrl",type:"img",tips:"",accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",maxLength:2097152,value:{}}],form:{url:"",type:"link",typeText:"链接",coverUrl:{},linkTitle:"",radarTitle:"",desc:"",tag:"",isTag:!1,selectCustomerTagList:[],isRadar:!1,isCustomerTag:!1,behaviorNotify:!1,activityNotify:!1,isScoreRule:!1,tagRule:"",key:"visibileAddLink",ruleDetails:[{autoMarkTagBitmaps:"",selectTagList:[],hasTag:!1,score:"",ruleKind:0,count:""}],scoreRule:""},rules:{url:[{required:!0,message:"未填写链接地址"},{message:"请输入正确的网络链接",validator:function(t,e,a){Object(I["o"])(e)?a():a(!0)}}],linkTitle:[{required:!0,message:"未填写链接标题"}],desc:[{required:!0,message:"未填写链接描述"}]},copyUrl:"",copyUrlIsRadar:"",randar:{}}},computed:{randerIsEdit:function(){return!("edit"===this.state&&this.form.radarId&&this.form.isRadar&&this.copyUrl&&this.copyUrl===this.formInfoList[0].value||this.randar.radarLink&&this.copyUrl===this.formInfoList[0].value)},state:function(){return this.$route.query.state},isMaterial:function(){var t;return!!(null!==(t=this.editData)&&void 0!==t&&t.type&&this.isNeedTag&&this.copyUrlIsRadar)}},watch:{editData:{handler:function(){var t,e;null!==(t=this.editData)&&void 0!==t&&t.type&&(this.isNeedTag&&(this.formInfoList[0].disabled=!0),this.form=this.editData,Object(I["f"])(this.editData.url,"radarId")&&(this.form.isRadar=!0,this.form.radarTitle=123),!this.copyUrl&&this.form.url&&(this.copyUrl=JSON.parse(JSON.stringify(this.form.url)),this.copyUrlIsRadar=this.form.isRadar),null!==(e=this.editData)&&void 0!==e&&e.tags&&(this.selectTagList=this.editData.tags.map((function(t){return t})),this.form.isTag=!0),this.getlistValue())},immediate:!0},formInfoList:{handler:function(){this.form.randerIsEdit=this.randerIsEdit,this.form.isMaterial=this.isMaterial,this.form.source=this.source,this.$emit("input",{form:this.form,serviceOk:this.serviceOk.bind(this)})},deep:!0,immediate:!0}},methods:{changeTag:function(t){this.$forceUpdate()},serviceOk:function(){var t=!1;return this.getFormValue()&&this.$refs.ruleForm.validate((function(e){return!!e&&(t=!0,!0)})),t},serviceTagCustomer:function(t){this.form.selectCustomerTagList=t.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat(),this.visibleCustomerTag=!1},selectTag:function(){this.selectTagList=this.$refs.SelectMaterialTags.selectTagList,this.visibleTags=!1},deleteTag:function(t){this.selectTagList.splice(t,1)},deleteCustomerTag:function(t){this.form.selectCustomerTagList.splice(t,1)},getlistValue:function(){var t=this;this.formInfoList.forEach((function(e,a){e.value=t.form[e.prop],3===a&&t.$set(t.formInfoList[a].value,"value",t.form[e.prop].compress)}))},getFormValue:function(){var t=this;if(this.formInfoList.forEach((function(e){t.form[e.prop]=e.value})),this.form.isTag){if(this.selectTagList.length<1)return this.$message.warning("请选择标签"),!1;this.form.tag=this.selectTagList.map((function(t){return t.tagId})).join(",")}else this.form.tag="";if(this.form.isRadar&&!this.form.radarTitle)return this.$message.warning("雷达链接标题没有填写"),!1;if(this.form.isRadar&&this.form.isScoreRule)for(var e=0;e<this.form.ruleDetails.length;e++){var a=this.form.ruleDetails[e];if(!a.score&&0!==a.score)return this.$message.warning("规则".concat(e+1,"的评分没有写")),!1;if(1===a.ruleKind&&!a.count&&0!==a.count)return this.$message.warning("规则".concat(e+1,"的次数没有写")),!1;if(a.hasTag&&a.selectTagList.length<1)return this.$message.warning("规则".concat(e+1,"的标签没有填")),!1}return!0},serviceRadar:function(t){var e,a,i,n,s,o;this.randar=t,this.form.isRadar=!0,this.form.radarId=t.radarId,this.form.behaviorNotify=Boolean(this.randar.behaviorNotify),this.form.activityNotify=Boolean(this.randar.activityNotify),this.form.isCustomerTag=(null===(e=this.randar.tagRules)||void 0===e?void 0:e.length)>0,this.form.selectCustomerTagList=null===(a=this.randar.tagRules)||void 0===a||null===(i=a[0])||void 0===i||null===(n=i.customerTags)||void 0===n?void 0:n.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{key:t.tagId})})),this.form.isScoreRule=(null===(s=this.randar.scoreRules)||void 0===s?void 0:s.length)>0,this.form.ruleDetails=null===(o=this.randar.scoreRules)||void 0===o?void 0:o.map((function(t){var e;return Object(r["a"])(Object(r["a"])({},t),{},{autoMarkTagBitmaps:t.autoMarkTagBitmaps,selectTagList:null===(e=t.customerTags)||void 0===e?void 0:e.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{key:t.tagId})})),hasTag:Boolean(t.hasTag),score:t.score,ruleKind:t.ruleKind,count:t.count})})),this.form.url=this.randar.radarLink,this.form.coverUrl.compress=this.randar.coverUrl,this.form.radarTitle=this.randar.radarName,this.form.linkTitle=this.randar.title,this.form.desc=this.randar.desc,this.getlistValue(),this.visibleRadar=!1,this.copyUrl=JSON.parse(JSON.stringify(this.form.url))}}},w=R,j=(a("01a9"),Object(h["a"])(w,i,n,!1,null,"14091114",null));e["a"]=j.exports},"7af2":function(t,e,a){},"7f67":function(t,e,a){"use strict";a("6d26")},"94d5":function(t,e,a){"use strict";a("9b1f")},"9b1f":function(t,e,a){},af8f:function(t,e,a){"use strict";a("7af2")},cf5f:function(t,e,a){"use strict";a.d(e,"k",(function(){return r})),a.d(e,"r",(function(){return s})),a.d(e,"l",(function(){return o})),a.d(e,"m",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"p",(function(){return f})),a.d(e,"q",(function(){return m})),a.d(e,"u",(function(){return p})),a.d(e,"v",(function(){return g})),a.d(e,"x",(function(){return h})),a.d(e,"t",(function(){return v})),a.d(e,"o",(function(){return b})),a.d(e,"g",(function(){return T})),a.d(e,"b",(function(){return _})),a.d(e,"h",(function(){return y})),a.d(e,"s",(function(){return k})),a.d(e,"c",(function(){return L})),a.d(e,"n",(function(){return C})),a.d(e,"f",(function(){return S})),a.d(e,"w",(function(){return O})),a.d(e,"j",(function(){return x})),a.d(e,"y",(function(){return I})),a.d(e,"d",(function(){return R}));var i=a("b775"),n={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function r(t){return Object(i["b"])({url:n.getLastSyncTime,method:"get",params:t})}function s(t){return Object(i["b"])({url:n.syncUpdate,method:"get",params:t})}function o(t){return Object(i["b"])({url:n.getOfficialAccount,method:"get",params:t})}function c(t){return Object(i["b"])({url:n.interactiveRadarUploadFile,method:"post",data:t})}function l(t){return Object(i["b"])({url:n.addSersonSop,method:"post",data:t})}function u(t){return Object(i["b"])({url:n.delGroupSop,method:"post",params:t})}function d(t){return Object(i["b"])({url:n.detailPersonSop,method:"get",params:t})}function f(t){return Object(i["b"])({url:n.pagePersonSop,method:"get",params:t})}function m(t){return Object(i["b"])({url:n.setPersonSopStaff,method:"post",data:t})}function p(t){return Object(i["b"])({url:n.updatePersonSop,method:"post",data:t})}function g(t){return Object(i["b"])({url:n.updateStatus,method:"post",params:t})}function h(t){return Object(i["b"])({url:n.upload,method:"post",data:t})}function v(t){return Object(i["b"])({url:n.update,method:"post",data:t})}function b(t){return Object(i["b"])({url:n.materialList,method:"get",params:t})}function T(t){return Object(i["b"])({url:n.deleteMaterial,method:"get",params:t})}function _(t){return Object(i["b"])({url:n.addTag,method:"post",data:t})}function y(t){return Object(i["b"])({url:n.deleteTag,method:"get",params:t})}function k(t){return Object(i["b"])({url:n.tagList,method:"get",params:t})}function L(t){return Object(i["b"])({url:n.addWelcome,method:"post",data:t})}function C(t){return Object(i["b"])({url:n.listWelcome,method:"get",params:t})}function S(t){return Object(i["b"])({url:n.delWelcome,method:"post",params:t})}function O(t){return Object(i["b"])({url:n.updateWelcome,method:"post",data:t})}function x(t){return Object(i["b"])({url:n.detailWelcome,method:"get",params:t})}function I(t){return Object(i["b"])({url:n.uploadMedia,method:"post",data:t})}function R(t){return Object(i["b"])({url:n.channelCodeUploadFile,method:"post",data:t})}},d6fb:function(t,e,a){"use strict";a("d7ba")},d7ba:function(t,e,a){},d885:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"n",(function(){return c})),a.d(e,"o",(function(){return l})),a.d(e,"m",(function(){return u})),a.d(e,"l",(function(){return d})),a.d(e,"d",(function(){return f})),a.d(e,"a",(function(){return m})),a.d(e,"j",(function(){return p})),a.d(e,"h",(function(){return g})),a.d(e,"k",(function(){return h})),a.d(e,"g",(function(){return v})),a.d(e,"f",(function(){return b})),a.d(e,"i",(function(){return T}));var i=a("b775"),n={interactiveRadarAdd:"/client_transformation/interactradar/add",interactiveRadarList:"/client_transformation/interactradar/list",interactiveRadarDelete:"/client_transformation/interactradar/delete",interactiveRadarupdate:"/client_transformation/interactradar/update",interactiveRadarInfo:"/client_transformation/interactradar/info",interactiveRadarSave:"/client_transformation/interactradar/channel/save",channelLinks:"/client_transformation/interactradar/getChannelLinks",generateChannelLink:"/client_transformation/interactradar/generateChannelLink",interactradarList:"/client_transformation/interactradar/channel/list",interactradarUpdate:"/client_transformation/interactradar/channel/update",statisticOverview:"/client_transformation/interactradar/statisticOverview",statisticDetail:"/client_transformation/interactradar/statisticDetail",customerLog:"/client_transformation/interactradar/customerLog",getCustomerLogDetail:"/client_transformation/interactradar/customerLogDetail",channelLog:"/client_transformation/interactradar/channelLog"};function r(t){return Object(i["b"])({url:n.channelLog,method:"post",data:t})}function s(t){return Object(i["b"])({url:n.getCustomerLogDetail,method:"get",params:t})}function o(t){return Object(i["b"])({url:n.customerLog,method:"post",data:t})}function c(t){return Object(i["b"])({url:n.statisticDetail,method:"get",params:t})}function l(t){return Object(i["b"])({url:n.statisticOverview,method:"get",params:t})}function u(t){return Object(i["b"])({url:n.interactradarUpdate,method:"post",data:t})}function d(t){return Object(i["b"])({url:n.interactradarList,method:"get",params:t})}function f(t){return Object(i["b"])({url:n.generateChannelLink,method:"get",params:t})}function m(t){return Object(i["b"])({url:n.channelLinks,method:"get",params:t})}function p(t){return Object(i["b"])({url:n.interactiveRadarSave,method:"post",data:t})}function g(t){return Object(i["b"])({url:n.interactiveRadarInfo+"/"+t,method:"get"})}function h(t){return Object(i["b"])({url:n.interactiveRadarupdate,method:"post",data:t})}function v(t){return Object(i["b"])({url:n.interactiveRadarDelete,method:"post",data:t})}function b(t){return Object(i["b"])({url:n.interactiveRadarAdd,method:"post",data:t})}function T(t){return Object(i["b"])({url:n.interactiveRadarList,method:"post",data:t})}}}]);