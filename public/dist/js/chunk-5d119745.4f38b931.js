(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d119745"],{aebf:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("header",{staticClass:"header"},[e("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$router.push({name:"NewRule",query:{state:"add"}})}}},[t._v("新建规则")]),e("a-input-search",{staticClass:"search-name",attrs:{allowClear:"",placeholder:"请输入要搜索的规则名称"},on:{change:t.changeInput,search:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),e("a-table",{staticClass:"background-white",attrs:{columns:t.columns,"data-source":t.fSend,pagination:t.pagination,loading:t.loading},on:{change:t.changePage},scopedSlots:t._u([{key:"grps",fn:function(n){return[e("ul",[t._l(n,(function(n,o){return e("li",{directives:[{name:"show",rawName:"v-show",value:t.isOpen||o<2,expression:"isOpen || index < 2"}],key:n.groupId,staticClass:"grps-list"},[e("div",[e("a-avatar",{attrs:{src:"/icons/groupChat.svg",size:20,shape:"square"}}),t._v(" "+t._s(n.chatName)+" ")],1),e("span",[t._v(t._s(n.count))])])})),n.length>2?e("span",{staticClass:"aks-tips",on:{click:function(e){t.isOpen=!t.isOpen}}},[t._v(" "+t._s(t.isOpen?"收起":"展开")),e("a-icon",{attrs:{type:t.isOpen?"up":"down"}})],1):t._e()],2)]}},{key:"creatorName",fn:function(n){return e("div",{},[e("a-tag",[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),t._v(" "+t._s(n)+" ")],1)],1)}},{key:"isActiveObj",fn:function(n){var o=n.isActiveBoolean,r=n.sopId;return e("div",{},[e("a-switch",{attrs:{defaultChecked:o},on:{change:function(e){return t.changeActive(r,e)}}})],1)}},{key:"operation",fn:function(n){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"GroupChatDetail",query:{state:"look",sopId:n}})}}},[t._v("详情")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteWelcome(n)}}},[t._v("删除")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"NewRule",query:{state:"edit",welcomeId:n}})}}},[t._v("编辑")])],1)}}])})],1)},r=[],a=(n("99af"),n("498a"),n("d3b7"),n("d81d"),n("e619")),i={name:"GroupChatInspection",data:function(){return{fSend:[],loading:!1,isOpen:!1,searchName:"",pagination:{current:1,pageSize:10,total:0},columns:[{title:"规则名称",key:"ruleName",dataIndex:"ruleName"},{title:"使用群聊",key:"grps",dataIndex:"grps",width:"200px",scopedSlots:{customRender:"grps"}},{title:"创建人",key:"creatorName",dataIndex:"creatorName",scopedSlots:{customRender:"creatorName"}},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"开关",key:"isActiveObj",dataIndex:"isActiveObj",scopedSlots:{customRender:"isActiveObj"}},{title:"操作",key:"ruleId",align:"right",dataIndex:"ruleId",scopedSlots:{customRender:"operation"}}]}},activated:function(){this.getlistControl()},methods:{changeActive:function(t,e){var n=this,o=e?"开启":"关闭",r="/".concat(t,"/").concat(e?0:1);Object(a["i"])(r).then((function(){n.$message.success("开关已".concat(o))})).catch((function(t){n.$message.error(t)}))},changeInput:function(t){var e;this.searchName=null===(e=t.target.value)||void 0===e?void 0:e.trim()},onSearchName:function(){this.pagination.current=1,this.getlistControl()},changePage:function(t){var e=t.current;this.pagination.current=e,this.getlistControl()},deleteWelcome:function(t){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"确定要删除此群聊质检吗？",onOk:function(){e.deleteControl(t)}})},deleteControl:function(t){var e=this;this.loading=!0,Object(a["b"])([t]).then((function(t){var n;e.$message.success("删除成功"),1===(null===(n=e.fSend)||void 0===n?void 0:n.length)&&(e.pagination.current=e.pagination.current-1||1),e.getlistControl()})).catch((function(t){e.$message.error(t)})).finally((function(){return e.loading=!1}))},getlistControl:function(){var t=this,e={page:this.pagination.current,limit:this.pagination.pageSize,searchCtx:this.searchName};this.loading=!0,Object(a["g"])(e).then((function(e){null!==e&&void 0!==e&&e.data&&(t.pagination.total=e.data.total,t.fSend=e.data.list.map((function(t){return t.key=t.ruleId,t.isActiveObj={isActiveBoolean:0===t.inUse,sopId:t.ruleId,isActive:t.inUse},t})))})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))}}},c=i,u=(n("f395"),n("2877")),s=Object(u["a"])(c,o,r,!1,null,"2e4627f1",null);e["default"]=s.exports},e619:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"k",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"i",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"j",(function(){return f})),n.d(e,"h",(function(){return g})),n.d(e,"c",(function(){return h}));var o=n("b775"),r={listControl:"/client_group/quanlity/control/list",switchControl:"/client_group/quanlity/control/switch",deleteControl:"/client_group/quanlity/control/delete",addControl:"/client_group/quanlity/control/save",infoControl:"/client_group/quanlity/control/info",updateControl:"/client_group/quanlity/control/update",statistic:"/client_group/quanlity/control/statistic",exportGrpInfo:"/client_group/quanlity/control/exportGrpInfo",updateGroupInRule:"/client_group/customerGroup/updateGroupInRule",getRelationRuleDetail:"/client_group/customerGroup/getRelationRuleDetail",getgrpInfo:"/client_group/quanlity/control/grpInfo"};function a(t){return Object(o["b"])({url:r.getgrpInfo,method:"get",params:t})}function i(t){return Object(o["b"])({url:r.getRelationRuleDetail,method:"get",params:t})}function c(t){return Object(o["b"])({url:r.updateGroupInRule,method:"post",data:t})}function u(t){return Object(o["b"])({url:r.listControl,method:"post",data:t})}function s(t){return Object(o["b"])({url:r.switchControl+t,method:"get"})}function l(t){return Object(o["b"])({url:r.deleteControl,method:"post",data:t})}function d(t){return Object(o["b"])({url:r.addControl,method:"post",data:t})}function p(t){return Object(o["b"])({url:r.infoControl+"/"+t,method:"get"})}function f(t){return Object(o["b"])({url:r.updateControl,method:"post",data:t})}function g(t){return Object(o["b"])({url:r.statistic,method:"get",params:t})}function h(t){return Object(o["b"])({url:r.exportGrpInfo,method:"post",data:t,responseType:"blob"})}},f395:function(t,e,n){"use strict";n("fbe2")},fbe2:function(t,e,n){}}]);