(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dcc66a8"],{"1c9c":function(t,e,a){"use strict";a.d(e,"s",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"t",(function(){return o})),a.d(e,"j",(function(){return c})),a.d(e,"n",(function(){return l})),a.d(e,"y",(function(){return u})),a.d(e,"w",(function(){return d})),a.d(e,"g",(function(){return f})),a.d(e,"B",(function(){return g})),a.d(e,"c",(function(){return p})),a.d(e,"h",(function(){return m})),a.d(e,"a",(function(){return h})),a.d(e,"q",(function(){return b})),a.d(e,"i",(function(){return v})),a.d(e,"v",(function(){return y})),a.d(e,"p",(function(){return O})),a.d(e,"b",(function(){return T})),a.d(e,"l",(function(){return _})),a.d(e,"m",(function(){return C})),a.d(e,"z",(function(){return j})),a.d(e,"C",(function(){return S})),a.d(e,"k",(function(){return w})),a.d(e,"A",(function(){return x})),a.d(e,"x",(function(){return D})),a.d(e,"r",(function(){return L})),a.d(e,"o",(function(){return k})),a.d(e,"d",(function(){return N})),a.d(e,"f",(function(){return R})),a.d(e,"u",(function(){return I}));var n=a("b775"),i={staff:"/enterprise/role/staff",roleList:"/enterprise/role",roleResource:"/enterprise/role/getRoleResource",syncAll:"/enterprise/staff/syncAll",getCustGrpList:"/client_group/customerGroup/getCustGrpList",changeRole:"/enterprise/role/change",departmentStaff:"/enterprise/department/staff",addStaffRole:"/enterprise/role/addStaffRole",getQuitStaff:"/client_manager/transfer/getQuitStaff",getStaff:"/enterprise/staff/get",department:"/enterprise/department",getDepartmentStaff:"/enterprise/department/getStaff",loginAdmin:"/enterprise/staff/loginAdmin",getRoleRes:"/enterprise/role/getRoleRes",changeRes:"/enterprise/role/change/res",getPermissionLog:"/enterprise/permissionLog/query",staffInfo:"/enterprise/staff/statistics/get/staffInfo",yesterdayData:"/enterprise/staff/statistics/get/yesterdayData",getDate:"/enterprise/staff/statistics/get/date",editDelConfig:"/client_manager/customerdelremind/editDelConfig",queryDelConfig:"/client_manager/customerdelremind/queryDelConfig",customStage:"/enterprise/staff/statistics/get/stage",idOrUserIdGet:"/enterprise/staff/idOrUserIdGet",staffOKR:"/enterprise/staffOKR/staffOKR",saveOKR:"/enterprise/staffOKR/save",getStaffOKRList:"/enterprise/staffOKR/getStaffOKRList",getRepeatList:"/enterprise/staffOKR/getRepeatList",checkTime:"enterprise/staffOKR/checkTime",delOkr:"/enterprise/staffOKR/del",modify:"/enterprise/staffOKR/modify"};function r(t){return Object(n["b"])({url:i.idOrUserIdGet,method:"get",params:t})}function s(t){return Object(n["b"])({url:i.customStage,method:"get",params:t})}function o(t){return Object(n["b"])({url:i.loginAdmin,method:"get",params:t})}function c(t){return Object(n["b"])({url:i.getCustGrpList,method:"post",data:t})}function l(t){return Object(n["b"])({url:i.getQuitStaff,method:"get",params:t})}function u(t){return Object(n["b"])({url:i.staff,method:"get",params:t})}function d(){return Object(n["b"])({url:i.roleList,method:"get"})}function f(){return Object(n["b"])({url:i.department,method:"get"})}function g(){return Object(n["b"])({url:i.syncAll,method:"get"})}function p(t){return Object(n["b"])({url:i.changeRole,method:"get",params:t})}function m(){return Object(n["b"])({url:i.departmentStaff,method:"get"})}function h(t){return Object(n["b"])({url:i.addStaffRole,method:"post",data:t})}function b(t){return Object(n["b"])({url:i.getStaff,method:"get",params:t})}function v(t){return Object(n["b"])({url:i.editDelConfig,method:"post",data:t})}function y(t){return Object(n["b"])({url:i.queryDelConfig,method:"post",data:t})}function O(t){return Object(n["b"])({url:i.getRoleRes,method:"get",params:t})}function T(t){return Object(n["b"])({url:i.changeRes,method:"post",data:t})}function _(t){return Object(n["b"])({url:i.getDepartmentStaff,method:"get",params:t})}function C(t){return Object(n["b"])({url:i.getPermissionLog,method:"post",data:t})}function j(t){return Object(n["b"])({url:i.staffInfo,method:"get",params:t})}function S(t){return Object(n["b"])({url:i.yesterdayData,method:"get",params:t})}function w(t){return Object(n["b"])({url:i.getDate,method:"get",params:t})}function x(t){return Object(n["b"])({url:i.staffOKR,method:"get",params:t})}function D(t){return Object(n["b"])({url:i.saveOKR,method:"post",data:t})}function L(t){return Object(n["b"])({url:i.getStaffOKRList,method:"get",params:t})}function k(t){return Object(n["b"])({url:i.getRepeatList,method:"get",params:t})}function N(t){return Object(n["b"])({url:i.checkTime,method:"get",params:t})}function R(t){return Object(n["b"])({url:i.delOkr,method:"post",data:t})}function I(t){return Object(n["b"])({url:i.modify,method:"post",data:t})}},2220:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"规则详情"},on:{back:function(e){return t.$router.go(-1)}}}),e("pageContent",{attrs:{detailData:t.detailData}}),e("SearchFrom",{attrs:{detailData:t.detailData}})],1)},i=[],r=a("5530"),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-content"},[e("h6",{staticClass:"base-info"},[t._v("基本信息")]),e("div",{staticClass:"flex-row card-wrap"},[e("div",{staticClass:"card card-left"},[e("ul",[e("li",{staticClass:"flex-row left-list"},[e("label",[t._v("规则名称：")]),t._v(" "+t._s(t.detailData.ruleName)+" ")]),t._m(0),e("li",{staticClass:"flex-row left-list"},[e("label",[t._v("创建者：")]),e("span",{staticClass:"aks-tag"},[e("a-icon",{staticClass:"user",attrs:{type:"user"}}),t._v(t._s(t.detailData.creatorName))],1)]),e("li",{staticClass:"flex-row left-list"},[e("label",[t._v("生效成员：")]),e("span",{staticClass:"aks-tag"},[e("a-icon",{staticClass:"user",attrs:{type:"user"}}),t._v(t._s(t.detailData.effectStaffName))],1)]),e("li",{staticClass:"flex-row left-list"},[e("label",[t._v("创建时间：")]),t._v(" "+t._s(t.detailData.createTime)+" ")]),e("li",{staticClass:"flex-row left-list"},[e("label",[t._v("自动添加标签：")]),e("div",{staticClass:"group-list-txt"},t._l(t.addTags,(function(a,n){return e("a-tag",{key:n},[t._v(" "+t._s(a)+" ")])})),1),e("a-popover",{attrs:{trigger:"click",placement:"rightTop"}},[e("template",{slot:"content"},[e("div",{staticClass:"tootip-title"},[e("ul",{staticClass:"tootip-list-wrap"},t._l(t.addTags,(function(a,n){return e("a-tag",{key:n,staticStyle:{"margin-bottom":"8px"}},[t._v(" "+t._s(a)+" ")])})),1)])]),e("template",{slot:"title"},[e("p",{staticClass:"tip"},[t._v("自动添加标签")])]),e("a-button",{attrs:{type:"link"}},[t._v("查看")])],2)],1),e("li",{staticClass:"flex-row left-list"},[e("label",[t._v("规则状态：")]),e("a-switch",{attrs:{defaultChecked:t.useStatus},on:{change:function(e){return t.changeActive(t.autoTaggingId,e)}}})],1)])]),e("div",{staticClass:"card card-right"},[e("span",{staticClass:"rule-setting"},[t._v("规则设置:")]),e("ul",{staticClass:"card-list"},[e("p",[t._v("共"+t._s(t.detailData.times&&t.detailData.times.length)+"条规则")]),t._l(t.detailData.times,(function(a,n){return e("li",{key:n},[e("p",{staticClass:"list-title"},[e("span",{staticClass:"bar"}),t._v("规则"+t._s(n+1))]),e("p",{domProps:{innerHTML:t._s(t.getRuleName(a))}})])}))],2)])]),e("h6",{staticClass:"base-info"},[t._v(" 数据统计 "),e("a-tooltip",{attrs:{placement:"right"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",[t._v("打标签总数：该规则下打标签的全部客户数；")]),e("p",[t._v("今日打标签数：该规则下今日打标签的客户数")])]),e("a-icon",{attrs:{type:"question-circle"}})],1)],1),e("div",{staticClass:"flex-row"},[e("div",{staticClass:"card all-num"},[e("div",{staticClass:"inner"},[e("div",{staticStyle:{"padding-right":"24px"}},[e("div",{staticClass:"flex-row data-panel"},[e("div",{staticClass:"col-1"},[e("h2",[t._v(t._s(t.detailData.tagTotal))]),e("p",[t._v("打标签总数")])]),e("div",{staticClass:"col-1"},[e("h2",[t._v(t._s(t.detailData.dailyTotal))]),e("p",[t._v("今日打标签数")])])])])])])])])},o=[function(){var t=this,e=t._self._c;return e("li",{staticClass:"flex-row left-list"},[e("label",[t._v("打标签方式：")]),t._v(" 根据客户成为企业微信客户时间段 ")])}],c=(a("0481"),a("4069"),a("d81d"),a("a15b"),a("99af"),a("7db0"),a("d3b7"),a("159b"),a("7ba4")),l=a("ca00"),u={props:{detailData:{type:Object,default:function(){}}},data:function(){return{dateList:[{value:1,text:"天"},{value:2,text:"周"},{value:3,text:"月"}],weekList:[{id:2,text:"一"},{id:3,text:"二"},{id:4,text:"三"},{id:5,text:"四"},{id:6,text:"五"},{id:7,text:"六"},{id:1,text:"日"}]}},computed:{autoTaggingId:function(){return this.$route.query.autoTaggingId},useStatus:function(){return!Boolean(this.detailData.useStatus)},tagList:function(){var t=[];return this.detailData.tagBitmapNames&&(t=this.detailData.tagBitmapNames.split(",")),t},addTags:function(){var t,e,a=[];return(null===(t=this.detailData)||void 0===t||null===(e=t.times)||void 0===e?void 0:e.length)>0&&(a=this.detailData.times.map((function(t){var e;return null===(e=t.tagBitmapNames)||void 0===e?void 0:e.split(",")})).flat(),a=Object(l["j"])(a)),a},tagRule:function(){var t,e,a="";return(null===(t=this.detailData)||void 0===t||null===(e=t.grps)||void 0===e?void 0:e.length)>0&&(a=this.detailData.grps.map((function(t){return"[".concat(t.custGrpNames,"]")})).join("、"),a="".concat(a,"等").concat(this.detailData.grps.length,"个群聊")),a}},methods:{getRuleName:function(t){var e,a,n,i="[".concat(t.filterTimeStart,"~").concat(t.filterTimeEnd,"]"),r=null===(e=t.tagBitmapNames)||void 0===e||null===(a=e.split(","))||void 0===a?void 0:a.map((function(t){return'<a-tag class="tag">'.concat(t,"</a-tag>")})).join(""),s=null===(n=this.dateList.find((function(e){return e.value===t.type})))||void 0===n?void 0:n.text,o=[];if(2===t.type){var c=t.weekly.split(",");this.weekList.forEach((function(t){c.forEach((function(e){t.id==e&&o.push("周".concat(t.text))}))})),o=o.join("、")}if(3===t.type){for(var l=t.monthly.split(","),u=function(t){l.forEach((function(e){t==e&&o.push("".concat(t))}))},d=1;d<=31;d++)u(d);o+="号"}return"客户在 每".concat(s," 的 ").concat(o).concat(i,"内添加生效成员时， 将会被自动打上").concat(r,"标签")},changeActive:function(t,e){var a=this,n=e?"开启":"关闭",i={ruleId:t,status:e?0:1};Object(c["g"])(i).then((function(){a.$message.success("开关已".concat(n))}))}}},d=u,f=(a("253b"),a("2877")),g=Object(f["a"])(d,s,o,!1,null,"39d559d4",null),p=g.exports,m=function(){var t=this,e=t._self._c;return e("div",[e("a-form-model",{ref:"ruleForm",staticClass:"form flex-row align-side auto-box",staticStyle:{"padding-top":"16px"},attrs:{model:t.form,layout:"inline",labelAlign:"right"}},[e("div",{staticStyle:{width:"100%",heigt:"100%"},on:{click:function(e){return t.hideDaysbox()}}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"r-b-16"},[e("a-form-model-item",{attrs:{label:"搜索用户",prop:"searchName"}},[e("a-input-search",{staticStyle:{width:"200px"},attrs:{allowClear:"",placeholder:"请输入要搜索的客户"},on:{search:t.onSearchName},model:{value:t.form.searchName,callback:function(e){t.$set(t.form,"searchName",e)},expression:"form.searchName"}})],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-model-item",{attrs:{label:"所属客服",prop:"staffId"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{allowClear:"",suffixIcon:"down",mode:"multiple",placeholder:"请选择客服","option-label-prop":"label",dropdownMatchSelectWidth:!1,open:t.isOpen},on:{focus:function(e){t.isOpen=!0},change:t.serviceChange},model:{value:t.serviceList,callback:function(e){t.serviceList=e},expression:"serviceList"}},[e("div",{staticClass:"transfer",attrs:{slot:"dropdownRender"},slot:"dropdownRender"},[e("StaffList",{attrs:{type:"customer"},on:{closeopencustomer:t.closeopencustomer}})],1)])],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-model-item",{attrs:{label:"规则筛选"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择规则",allowClear:""},on:{change:t.changeChat},model:{value:t.ruleType,callback:function(e){t.ruleType=e},expression:"ruleType"}},t._l(t.detailData.times,(function(a){return e("a-select-option",{key:a.ruleordername,attrs:{value:a.ruleordername}},[t._v(" "+t._s(a.ruleordername)+" ")])})),1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-model-item",{attrs:{label:"添加好友时间",prop:"rangePicker"}},[e("a-range-picker",{staticStyle:{width:"280px"},on:{change:t.changeAddDate},model:{value:t.form.rangePicker,callback:function(e){t.$set(t.form,"rangePicker",e)},expression:"form.rangePicker"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1)],1),e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"r-b-16",attrs:{offset:22}},[e("a-button",{staticClass:"reset-btn",on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)]),e("KeyWordTabel",{attrs:{pagination:t.pagination,pageList:t.pageList,loading:t.loading},on:{change:t.change}})],1)},h=[],b=(a("b0c0"),a("b7fd")),v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tabel-wrap background-white"},[e("header",{staticClass:"header"},[t._v(" 共"+t._s(t.pagination.total)+"个客户 "),e("a-divider",{attrs:{type:"vertical"}})],1),e("a-table",{attrs:{"data-source":t.pageList,columns:t.columns,pagination:t.pagination,loading:t.loading},on:{change:t.change},scopedSlots:t._u([{key:"staffNameList",fn:function(a){return[e("div",t._l(a,(function(a,n){return e("a-tag",{key:n},[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(a)+" ")],1)})),1)]}}])})],1)},y=[],O={name:"KeyWordTabel",props:{pagination:{type:Object,default:function(){}},pageList:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{columns:[{title:"客户",dataIndex:"wxCustomerName",key:"wxCustomerName",scopedSlots:{customRender:"wxCustomerName"}},{title:"所属客服",dataIndex:"staffNameList",key:"staffNameList",scopedSlots:{customRender:"staffNameList"}},{title:"生效规则",dataIndex:"ruleordername",key:"ruleordername",scopedSlots:{customRender:"ruleordername"}},{title:"添加好友时间",dataIndex:"friendDate",key:"friendDate",scopedSlots:{customRender:"friendDate"}}]}},methods:{refresh:function(){},change:function(t){var e=t.current;this.$emit("change",{current:e}),this.pagination.current=e}}},T=O,_=(a("79b5"),Object(f["a"])(T,v,y,!1,null,"cd1aa7be",null)),C=_.exports,j={data:function(){return{serviceList:[],isOpen:!1,loading:!1,form:{searchName:"",beginTime:"",staffId:"",endTime:"",grpName:"",rangePicker:[]},pageList:[],pagination:{current:1,pageSize:8,total:0},joinGroupType:"",ruleType:void 0,enumWay:[{text:"全部方式",id:""},{text:"群成员直接邀请入群",id:1},{text:"群成员通过链接邀请入群",id:2},{text:"通过扫描群二维码入群",id:3}]}},components:{StaffList:b["a"],KeyWordTabel:C},props:{detailData:{type:Object,default:function(){}}},computed:{autoTaggingId:function(){return this.$route.query.autoTaggingId}},activated:function(){this.init()},methods:{changeChat:function(){this.init()},init:function(){var t=this,e={autoTaggingId:this.autoTaggingId,type:3,custName:this.form.searchName,staffId:this.form.staffId,grpName:this.form.grpName,beginTime:this.form.beginTime,endTime:this.form.endTime,ruleType:this.ruleType,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,Object(c["e"])(e).then((function(e){var a;e.data?(t.pageList=null===(a=e.data.list)||void 0===a?void 0:a.map((function(t){var e,a,n=Object(r["a"])(Object(r["a"])({},t),{},{key:t.id,staffNameList:null===(e=t.staffNames)||void 0===e?void 0:e.split(","),keywordList:null===(a=t.keyword)||void 0===a?void 0:a.split(",")});return n.operation=n,n})),t.pagination.total=e.data.total):t.pageList=[]})).catch((function(e){t.$message.error(e),t.pageList=[]})).finally((function(){t.loading=!1}))},change:function(t){var e=t.current;this.pagination.current=e,this.init()},hideDaysbox:function(){this.isOpen=!1},onSearchName:function(){this.init()},onSearchGrpName:function(){this.init()},handleReset:function(){this.$refs.ruleForm.resetFields(),this.serviceList=[],this.ruleType="",this.init()},serviceChange:function(t){this.serviceList=t,this.form.staffId="",this.init()},closeopencustomer:function(t){this.serviceList=[t.name],this.form.staffId=t.staffId,this.isOpen=!1,this.init()},changeAddDate:function(t){var e,a;t.length>1?(this.form.endTime=null===(e=t[1])||void 0===e?void 0:e.format("X"),this.form.beginTime=null===(a=t[0])||void 0===a?void 0:a.format("X")):(this.form.endTime="",this.form.beginTime="");this.form.rangePicker=t,this.init()}}},S=j,w=(a("5d94"),Object(f["a"])(S,m,h,!1,null,"135cbbc6",null)),x=w.exports,D={name:"timeMakeDetails",components:{pageContent:p,SearchFrom:x},computed:{autoTaggingId:function(){return this.$route.query.autoTaggingId}},data:function(){return{detailData:{grps:[]}}},activated:function(){this.init()},methods:{init:function(){var t=this;Object(c["i"])({autoTaggingId:this.autoTaggingId}).then((function(e){t.detailData=Object(r["a"])(Object(r["a"])({},t.detailData),e.data)})).catch((function(e){t.$message.error(e)}));var e={autoTaggingId:this.autoTaggingId,ruleType:3};Object(c["j"])(e).then((function(e){t.detailData=Object(r["a"])(Object(r["a"])({},t.detailData),e.data)})).catch((function(e){t.$message.error(e)}))}}},L=D,k=Object(f["a"])(L,n,i,!1,null,"20687134",null);e["default"]=k.exports},"253b":function(t,e,a){"use strict";a("352e")},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||r(t)||Object(s["a"])(t)||o()}},"352e":function(t,e,a){},"487a":function(t,e,a){(function(e,a){t.exports=a()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var a,n,i,r,s,o=function(){t.apply(r,s),n=a};return function(){if(r=this,s=arguments,a=Date.now(),i&&(clearTimeout(i),i=null),n){var t=e-(a-n);t<0?o():i=setTimeout((function(){o()}),t)}else o()}},a=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},n=document.defaultView.getComputedStyle,i=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var a=n(e).overflowY;if("scroll"===a||"auto"===a)return e;e=e.parentNode}return window},r=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?a(window):t.getBoundingClientRect().top+a(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,a=t.el,n=a.getAttribute("infinite-scroll-throttle-delay"),r=200;n&&(r=Number(t.vm[n]||n),(isNaN(r)||r<0)&&(r=200)),t.throttleDelay=r,t.scrollEventTarget=i(a),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=a.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var c=a.getAttribute("infinite-scroll-distance"),u=0;c&&(u=Number(t.vm[c]||c),isNaN(u)&&(u=0)),t.distance=u;var d=a.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&l.call(t);var g=a.getAttribute("infinite-scroll-listen-for-event");g&&t.vm.$on(g,(function(){l.call(t)}))}},l=function(t){var e=this.scrollEventTarget,n=this.el,i=this.distance;if(!0===t||!this.disabled){var o=a(e),c=o+r(e),l=!1;if(e===n)l=e.scrollHeight-c<=i;else{var u=s(n)-s(e)+n.offsetHeight+o;l=c+i>=u}l&&this.expression&&this.expression()}},u={bind:function(e,a,n){e[t]={el:e,vm:n.context,expression:a.value};var i=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&c.call(e[t],i),e[t].bindTryCount=0;var a=function a(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?c.call(e[t],i):setTimeout(a,50))};a()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u}))},"49b0":function(t,e,a){},"5d94":function(t,e,a){"use strict";a("49b0")},"79b5":function(t,e,a){"use strict";a("c40a")},"7ba4":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"g",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"j",(function(){return f})),a.d(e,"e",(function(){return g})),a.d(e,"h",(function(){return p}));var n=a("b775"),i={autoTaggingQueryList:"/client_transformation/autoTagging/autoTaggingQueryList",openRule:"/client_transformation/autoTagging/openRule",delRule:"/client_transformation/autoTagging/delRule",createAutoTaggingKeyWord:"/client_transformation/autoTagging/createAutoTaggingKeyWord",createAutoTaggingGrp:"/client_transformation/autoTagging/createAutoTaggingGrp",createAutoTaggingTime:"/client_transformation/autoTagging/createAutoTaggingTime",ruleDetail:"/client_transformation/autoTagging/ruleDetail",statistics:"/client_transformation/autoTaggingStatistics/statistics",customerList:"/client_transformation/autoTaggingStatistics/customerList",remindList:"/client_manager/customerdelremind/remindList"};function r(t){return Object(n["b"])({url:i.autoTaggingQueryList,method:"post",data:t})}function s(t){return Object(n["b"])({url:i.openRule,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.delRule,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.createAutoTaggingKeyWord,method:"post",data:t})}function l(t){return Object(n["b"])({url:i.createAutoTaggingGrp,method:"post",data:t})}function u(t){return Object(n["b"])({url:i.createAutoTaggingTime,method:"post",data:t})}function d(t){return Object(n["b"])({url:i.ruleDetail,method:"post",data:t})}function f(t){return Object(n["b"])({url:i.statistics,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.customerList,method:"post",data:t})}function p(t){return Object(n["b"])({url:i.remindList,method:"post",data:t})}},9694:function(t,e,a){},b52b:function(t,e,a){"use strict";a.d(e,"j",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"d",(function(){return g})),a.d(e,"f",(function(){return p}));var n=a("b775"),i={labelGroupList:"/client_group/tagBuildGroup/page",labelGroupAdd:"/client_group/tagBuildGroup/add",labelGroupDel:"/client_group/tagBuildGroup/delGroupTagPull",getChat:"/client_group/tagBuildGroup/getChat",getStatistics:"/client_group/tagBuildGroup/getStatistics",queryCustomers:"/client_group/tagBuildGroup/customer/get",customersDetail:"/client_group/tagBuildGroup/staff/get",remind:"/client_group/tagBuildGroup/remind",calculateNum:"/client_group/tagBuildGroup/calculateNum",updateDate:"/client_group/tagBuildGroup/getNewData"};function r(t){return Object(n["b"])({url:i.updateDate,method:"get",params:t})}function s(t){return Object(n["b"])({url:i.getChat,method:"get",params:t})}function o(t){return Object(n["b"])({url:i.calculateNum,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.remind,method:"post",data:t})}function l(t){return Object(n["b"])({url:i.labelGroupList,method:"get",params:t})}function u(t){return Object(n["b"])({url:i.labelGroupAdd,method:"post",data:t})}function d(t){return Object(n["b"])({url:i.queryCustomers,method:"post",data:t})}function f(t){return Object(n["b"])({url:i.customersDetail,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.getStatistics,method:"get",params:t})}function p(t){return Object(n["b"])({url:i.labelGroupDel,method:"post",params:t})}},b5c3:function(t,e,a){t.exports=a.p+"assets/default.c42b7ede.svg"},b7fd:function(t,e,a){"use strict";a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"groupbox"},[e("div",{staticClass:"title"},[t._v(" 全部"+t._s(t.title)+" ("+t._s(t.total)+") ")]),e("div",{staticClass:"search-box"},[e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入".concat(t.title,"名称")},on:{search:t.onSearchGroupleader,pressEnter:t.onSearchGroupleader,blur:t.blursearch,focus:t.searchClick},model:{value:t.searchGroupleader,callback:function(e){t.searchGroupleader=e},expression:"searchGroupleader"}})],1),e("div",{staticClass:"list-wrap"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.allemployees,expression:"allemployees"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[t.staffdata.length>0?e("a-list",{attrs:{"data-source":t.staffdata},scopedSlots:t._u([{key:"renderItem",fn:function(a,n){return e("div",{key:n,staticClass:"list-item",on:{click:function(e){return t.choiceGroup(a)}}},[e("div",{staticClass:"item-content"},[e("img",{staticClass:"avatar",attrs:{src:a.thumbAvatar||t.defaultThumbAvatar,alt:""}}),e("span",{staticClass:"name"},[t._v(t._s(a.name||a.groupName||a.staffName))])]),t.defalytStaffIndex==(a.staffId||a.groupId)?e("a-icon",{staticClass:"img",attrs:{type:"check-circle"}}):e("div",{staticClass:"circle"})],1)}}],null,!1,1114407245)}):e("div",{staticClass:"cter"},[t._v("没有更多相关"+t._s(t.title)+"哦~~")])],1)])])},i=[],r=a("2909"),s=(a("d81d"),a("99af"),a("1c9c")),o=a("b52b"),c=a("487a"),l=a.n(c),u={directives:{infiniteScroll:l.a},props:{type:{type:String,default:"Staff"},title:{type:String,default:"员工"},tagPullId:{type:String,default:""}},data:function(){return{defaultThumbAvatar:a("b5c3"),staffdata:[],defalytStaffIndex:"",loading:!1,busy:!1,total:0,page:1,limit:10,searchGroupleader:""}},created:function(){},methods:{searchClick:function(){this.$emit("isSearchNoHide","1")},blursearch:function(){this.$emit("isSearchNoHide","2")},allemployees:function(){var t=this;switch(this.type){case"Staff":var e={currentPage:this.page,pageSize:this.limit,name:this.searchGroupleader||""};if(this.loading=!0,"0"!=this.total&&this.staffdata.length>=this.total)return void(this.busy=!0);Object(s["q"])(e).then((function(e){e.data.list.map((function(t){t.flag=!1}));var a=e.data.list;t.total=e.data.total,t.staffdata.length>=t.total?t.busy=!0:(t.page>1?t.staffdata=[].concat(Object(r["a"])(t.staffdata),Object(r["a"])(a)):t.staffdata=Object(r["a"])(a),t.page=t.page+1,t.loading=!1)}));break;case"customersDetail":var a={tagPullId:this.tagPullId||""};Object(o["b"])(a).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break;case"customer":var n={name:this.searchGroupleader||""};Object(s["n"])(n).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break;case"custGrpList":var i={grpName:this.searchGroupleader||"",filterType:0,grpStatus:0,orderCondition:1,orderWay:1,date:"",currentPage:1,pageSize:9999};Object(s["j"])(i).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break}},onSearchGroupleader:function(){this.$emit("isSearchNoHide","0"),this.page=1,this.staffdata=[],this.allemployees()},choiceGroup:function(t){this.defalytStaffIndex=t.userid||t.groupId||t.staffId,"Staff"==this.type?(this.$emit("closeopenstaff",t),this.$emit("closeopencustomer",t)):"customer"==this.type?this.$emit("closeopencustomer",t):"custGrpList"==this.type?this.$emit("closeopengroup",t):"customersDetail"==this.type&&this.$emit("closeopencustomer",t)}}},d=u,f=(a("be8d"),a("2877")),g=Object(f["a"])(d,n,i,!1,null,"e031d236",null);e["a"]=g.exports},be8d:function(t,e,a){"use strict";a("9694")},c40a:function(t,e,a){}}]);