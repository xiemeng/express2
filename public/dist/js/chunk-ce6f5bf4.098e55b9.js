(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce6f5bf4","chunk-7239b5fa"],{"1c9c":function(t,e,a){"use strict";a.d(e,"s",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"t",(function(){return o})),a.d(e,"j",(function(){return c})),a.d(e,"n",(function(){return u})),a.d(e,"y",(function(){return l})),a.d(e,"w",(function(){return d})),a.d(e,"g",(function(){return f})),a.d(e,"B",(function(){return p})),a.d(e,"c",(function(){return h})),a.d(e,"h",(function(){return m})),a.d(e,"a",(function(){return g})),a.d(e,"q",(function(){return v})),a.d(e,"i",(function(){return b})),a.d(e,"v",(function(){return y})),a.d(e,"p",(function(){return C})),a.d(e,"b",(function(){return w})),a.d(e,"l",(function(){return _})),a.d(e,"m",(function(){return S})),a.d(e,"z",(function(){return L})),a.d(e,"C",(function(){return O})),a.d(e,"k",(function(){return x})),a.d(e,"A",(function(){return k})),a.d(e,"x",(function(){return N})),a.d(e,"r",(function(){return I})),a.d(e,"o",(function(){return j})),a.d(e,"d",(function(){return G})),a.d(e,"f",(function(){return P})),a.d(e,"u",(function(){return R}));var n=a("b775"),r={staff:"/enterprise/role/staff",roleList:"/enterprise/role",roleResource:"/enterprise/role/getRoleResource",syncAll:"/enterprise/staff/syncAll",getCustGrpList:"/client_group/customerGroup/getCustGrpList",changeRole:"/enterprise/role/change",departmentStaff:"/enterprise/department/staff",addStaffRole:"/enterprise/role/addStaffRole",getQuitStaff:"/client_manager/transfer/getQuitStaff",getStaff:"/enterprise/staff/get",department:"/enterprise/department",getDepartmentStaff:"/enterprise/department/getStaff",loginAdmin:"/enterprise/staff/loginAdmin",getRoleRes:"/enterprise/role/getRoleRes",changeRes:"/enterprise/role/change/res",getPermissionLog:"/enterprise/permissionLog/query",staffInfo:"/enterprise/staff/statistics/get/staffInfo",yesterdayData:"/enterprise/staff/statistics/get/yesterdayData",getDate:"/enterprise/staff/statistics/get/date",editDelConfig:"/client_manager/customerdelremind/editDelConfig",queryDelConfig:"/client_manager/customerdelremind/queryDelConfig",customStage:"/enterprise/staff/statistics/get/stage",idOrUserIdGet:"/enterprise/staff/idOrUserIdGet",staffOKR:"/enterprise/staffOKR/staffOKR",saveOKR:"/enterprise/staffOKR/save",getStaffOKRList:"/enterprise/staffOKR/getStaffOKRList",getRepeatList:"/enterprise/staffOKR/getRepeatList",checkTime:"enterprise/staffOKR/checkTime",delOkr:"/enterprise/staffOKR/del",modify:"/enterprise/staffOKR/modify"};function i(t){return Object(n["b"])({url:r.idOrUserIdGet,method:"get",params:t})}function s(t){return Object(n["b"])({url:r.customStage,method:"get",params:t})}function o(t){return Object(n["b"])({url:r.loginAdmin,method:"get",params:t})}function c(t){return Object(n["b"])({url:r.getCustGrpList,method:"post",data:t})}function u(t){return Object(n["b"])({url:r.getQuitStaff,method:"get",params:t})}function l(t){return Object(n["b"])({url:r.staff,method:"get",params:t})}function d(){return Object(n["b"])({url:r.roleList,method:"get"})}function f(){return Object(n["b"])({url:r.department,method:"get"})}function p(){return Object(n["b"])({url:r.syncAll,method:"get"})}function h(t){return Object(n["b"])({url:r.changeRole,method:"get",params:t})}function m(){return Object(n["b"])({url:r.departmentStaff,method:"get"})}function g(t){return Object(n["b"])({url:r.addStaffRole,method:"post",data:t})}function v(t){return Object(n["b"])({url:r.getStaff,method:"get",params:t})}function b(t){return Object(n["b"])({url:r.editDelConfig,method:"post",data:t})}function y(t){return Object(n["b"])({url:r.queryDelConfig,method:"post",data:t})}function C(t){return Object(n["b"])({url:r.getRoleRes,method:"get",params:t})}function w(t){return Object(n["b"])({url:r.changeRes,method:"post",data:t})}function _(t){return Object(n["b"])({url:r.getDepartmentStaff,method:"get",params:t})}function S(t){return Object(n["b"])({url:r.getPermissionLog,method:"post",data:t})}function L(t){return Object(n["b"])({url:r.staffInfo,method:"get",params:t})}function O(t){return Object(n["b"])({url:r.yesterdayData,method:"get",params:t})}function x(t){return Object(n["b"])({url:r.getDate,method:"get",params:t})}function k(t){return Object(n["b"])({url:r.staffOKR,method:"get",params:t})}function N(t){return Object(n["b"])({url:r.saveOKR,method:"post",data:t})}function I(t){return Object(n["b"])({url:r.getStaffOKRList,method:"get",params:t})}function j(t){return Object(n["b"])({url:r.getRepeatList,method:"get",params:t})}function G(t){return Object(n["b"])({url:r.checkTime,method:"get",params:t})}function P(t){return Object(n["b"])({url:r.delOkr,method:"post",data:t})}function R(t){return Object(n["b"])({url:r.modify,method:"post",data:t})}},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("d3b7");function n(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(u){return void a(u)}o.done?e(c):Promise.resolve(c).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function o(t){n(s,r,i,o,c,"next",t)}function c(t){n(s,r,i,o,c,"throw",t)}o(void 0)}))}}},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("6b75");function r(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||i(t)||Object(s["a"])(t)||o()}},"3c43":function(t,e,a){t.exports=a.p+"assets/avatar-room-default.de3b5fcd.svg"},"487a":function(t,e,a){(function(e,a){t.exports=a()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var a,n,r,i,s,o=function(){t.apply(i,s),n=a};return function(){if(i=this,s=arguments,a=Date.now(),r&&(clearTimeout(r),r=null),n){var t=e-(a-n);t<0?o():r=setTimeout((function(){o()}),t)}else o()}},a=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},n=document.defaultView.getComputedStyle,r=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var a=n(e).overflowY;if("scroll"===a||"auto"===a)return e;e=e.parentNode}return window},i=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?a(window):t.getBoundingClientRect().top+a(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,a=t.el,n=a.getAttribute("infinite-scroll-throttle-delay"),i=200;n&&(i=Number(t.vm[n]||n),(isNaN(i)||i<0)&&(i=200)),t.throttleDelay=i,t.scrollEventTarget=r(a),t.scrollListener=e(u.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=a.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&u.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var c=a.getAttribute("infinite-scroll-distance"),l=0;c&&(l=Number(t.vm[c]||c),isNaN(l)&&(l=0)),t.distance=l;var d=a.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&u.call(t);var p=a.getAttribute("infinite-scroll-listen-for-event");p&&t.vm.$on(p,(function(){u.call(t)}))}},u=function(t){var e=this.scrollEventTarget,n=this.el,r=this.distance;if(!0===t||!this.disabled){var o=a(e),c=o+i(e),u=!1;if(e===n)u=e.scrollHeight-c<=r;else{var l=s(n)-s(e)+n.offsetHeight+o;u=c+r>=l}u&&this.expression&&this.expression()}},l={bind:function(e,a,n){e[t]={el:e,vm:n.context,expression:a.value};var r=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&c.call(e[t],r),e[t].bindTryCount=0;var a=function a(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?c.call(e[t],r):setTimeout(a,50))};a()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",l)};return window.Vue&&(window.infiniteScroll=l,Vue.use(d)),l.install=d,l}))},"84fb":function(t,e,a){t.exports=a.p+"assets/qr-icon.45fec915.svg"},9694:function(t,e,a){},a5b4:function(t,e,a){},a761:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"详情"},on:{back:function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"labelGroup-content page-box",on:{click:function(e){t.showAllGroup=!1}}},[e("div",{staticClass:"top-part"},[e("div",{staticClass:"left"},[e("p",{staticClass:"graph"},[e("span",{staticClass:"intro"},[t._v("邀请入群条件")]),t._v(" "),e("span",[t._v("已有"+t._s(t.groupInfo.inGroupNum)+"人入群")])]),e("div",{staticClass:"brief"},[t._v("成员"+t._s(t.staffName)+"中的全部客户")]),e("div",{staticClass:"group-part"},[e("span",{staticClass:"title"},[t._v("群聊：")]),e("div",{staticClass:"group"},[e("img",{staticClass:"group-icon",attrs:{src:a("3c43")}}),e("div",{staticClass:"info"},[e("span",{staticClass:"tips-wrap"},[e("span",[e("p",{staticClass:"title"},[t._v(t._s(t.groupListone.groupName))])])]),e("p",{staticClass:"num"},[e("span",[t._v(t._s(t.groupListone.groupCustomerNum)+"/200人")]),t._m(0),e("span",[t._v("本次入群："+t._s(t.groupListone.enterGroupThisTime)+"人")])])]),e("div",{staticClass:"qr clickable"},[e("img",{attrs:{src:a("84fb")}}),e("div",{staticClass:"hover-part"},[e("img",{staticClass:"qr-img",attrs:{src:t.groupListone.groupUrl}})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAllGroup,expression:"showAllGroup"}],staticClass:"all-group"},[e("p",{staticClass:"title title1"},[t._v("全部群聊")]),e("ul",{staticClass:"group-list"},t._l(t.groupList,(function(n,r){return e("li",{key:r,staticClass:"group"},[e("img",{staticClass:"group-icon",attrs:{src:a("3c43")}}),e("div",{staticClass:"info"},[e("span",{staticClass:"tips-wrap"},[e("span",[e("p",{staticClass:"title"},[t._v(t._s(n.groupName))])])]),e("p",{staticClass:"num"},[e("span",[t._v(t._s(n.groupCustomerNum)+"/200人")]),t._m(1,!0),e("span",[t._v("本次入群："+t._s(n.enterGroupThisTime)+"人")])])])])})),0)])]),t.groupList.length>1?e("p",{staticClass:"expaned",on:{click:function(e){e.stopPropagation(),t.showAllGroup=!t.showAllGroup}}},[t._v("展开全部"+t._s(t.groupList.length)+"个群聊")]):t._e()]),e("div",{staticClass:"right"},[e("p",[t._v("客户统计")]),e("div",{staticClass:"data-wrap"},[e("div",{staticClass:"data"},[e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.statistics.inGroup))]),e("span",[t._v("已入群客户")])]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.statistics.noInGroup))]),e("span",[t._v("未入群客户")])])]),e("div",{staticClass:"data"},[e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.statistics.invited))]),e("span",[t._v("已邀请客户"),e("a-tooltip",{attrs:{title:"邀请客户列表中，已收到成员推送的入群邀请的客户数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.statistics.noInvited))]),e("span",[t._v("未邀请客户"),e("a-tooltip",{attrs:{title:"邀请客户列表中，未收到成员推送的入群邀请的客户数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])]),e("div",{staticClass:"data"},[e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.statistics.hasFinished))]),e("span",[t._v("完成发送成员"),e("a-tooltip",{attrs:{title:"已将邀请客户入群的群发任务，群发给客户的员工数，若成员收到了多条邀请群发的任务，需将全部推送都发送，则视为已发送"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.statistics.hasNotFinished))]),e("span",[t._v("未完成发送成员"),e("a-tooltip",{attrs:{title:"收到群发任务的成员，未发送群发邀请的成员数。若成员收到了多条邀请群发的任务，有一条未发送的任务，则视为未完成"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])])])])]),e("div",{staticClass:"bottom-part"},[e("a-tabs",{attrs:{"default-active-key":"1"}},[e("a-tab-pane",{key:"1",attrs:{tab:"客户详情"}},[e("customerDetails")],1),e("a-tab-pane",{key:"2",attrs:{tab:"成员详情","force-render":""}},[e("memberDetails")],1)],1)],1)])],1)},r=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})])}],i=a("c7eb"),s=a("1da1"),o=(a("a9e3"),a("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"customerDetails"},[e("div",{staticClass:"header"},[e("span",[t._v("共"+t._s(t.pagination.total)+"个客户")])]),e("div",{staticClass:"filter"},[e("a-form",{staticClass:"form flex-row align-side",staticStyle:{"padding-top":"16px"},attrs:{labelAlign:"left",layout:"inline"}},[e("div",{staticStyle:{width:"100%",heigt:"100%"},on:{click:function(e){return t.hideDaysbox()}}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"搜索客户"}},[e("a-input-search",{staticStyle:{width:"200px"},attrs:{allowClear:"",placeholder:"请输入要搜索的客户"},on:{search:t.onSearchName,pressEnter:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"所属客服"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{allowClear:"",suffixIcon:"down",mode:"multiple",placeholder:"请选择客服","option-label-prop":"label",dropdownMatchSelectWidth:!1,open:t.isOpen},on:{focus:function(e){t.isOpen=!0},change:t.serviceChange},model:{value:t.serviceList,callback:function(e){t.serviceList=e},expression:"serviceList"}},[e("div",{staticClass:"transfer",attrs:{slot:"dropdownRender"},slot:"dropdownRender"},[e("StaffList",{attrs:{title:"客服",tagPullId:t.tagPullId,type:"customersDetail"},on:{closeopencustomer:t.closeopencustomer}})],1)])],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"送达状态"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"送达状态",allowClear:""},on:{change:t.statusListchange},model:{value:t.statusmodel,callback:function(e){t.statusmodel=e},expression:"statusmodel"}},t._l(t.statusList,(function(a,n){return e("a-select-option",{key:n,attrs:{value:a.channelId}},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"是否入群"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"客户是否入群",allowClear:""},on:{change:t.handleChange},model:{value:t.numGroup,callback:function(e){t.numGroup=e},expression:"numGroup"}},[e("a-select-option",{attrs:{value:"1"}},[t._v("已入群")]),e("a-select-option",{attrs:{value:"0"}},[t._v("未入群")])],1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"邀请群聊"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{allowClear:"",suffixIcon:"down",mode:"multiple",placeholder:"请选择群聊","option-label-prop":"label",dropdownMatchSelectWidth:!1,open:t.isOpen2},on:{focus:function(e){t.isOpen2=!0},change:t.groupChange},model:{value:t.groupList,callback:function(e){t.groupList=e},expression:"groupList"}},[e("div",{staticClass:"transfer",attrs:{slot:"dropdownRender"},slot:"dropdownRender"},[e("StaffList",{attrs:{title:"群聊",type:"custGrpList"},on:{closeopengroup:t.closeopengroup}})],1)])],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-button",{staticClass:"reset-btn",on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)])],1),e("div",{staticClass:"customer-table"},[e("div",{staticClass:"ant-spin-nested-loading"},[e("a-table",{staticClass:"background-white",attrs:{"data-source":t.channelList,columns:t.columns,loading:t.loading,pagination:t.pagination},on:{change:t.change},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",[t._v(t._s(a.name))])])],1)}},{key:"staffName",fn:function(a){return a?e("a-tag",{},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"customer-service"}}),t._v(" "+t._s(a)+" ")],1):t._e()}},{key:"receiveStatus",fn:function(a){return e("div",{},[t._v(" "+t._s("0"==a?"未收到邀请":"已收到邀请")+" ")])}},{key:"inGroup",fn:function(a){return e("div",{},["0"==a?e("div",{staticStyle:{color:"#d53e3e"}},[t._v("未入群")]):e("div",[t._v("已入群")])])}},{key:"operation",fn:function(a){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookDetail(a)}}},[t._v("客户详情")])],1)}}],null,!0)})],1)])])}),c=[],u=a("5530"),l=a("ade3"),d=(a("d3b7"),a("d81d"),a("b7fd")),f=a("b52b"),p={data:function(){return{tagPullId:"",searchName:"",serviceList:[],groupList:[],numGroup:[],isOpen:!1,isOpen2:!1,statusList:[{name:"未收到邀请",channelId:"0"},{name:"已收到邀请",channelId:"1"}],statusmodel:[],isGroup:[],loading:!1,pagination:{current:1,pageSize:10,total:0},channelList:[],columns:[{title:"客户",dataIndex:"info",scopedSlots:{customRender:"info"},key:"info"},{title:"所属成员",dataIndex:"staffName",key:"staffName",scopedSlots:{customRender:"staffName"}},{title:"送达状态",dataIndex:"receiveStatus",key:"receiveStatus",scopedSlots:{customRender:"receiveStatus"}},{title:"邀请群聊",dataIndex:"chatName",key:"chatName",customRender:function(t){return t||"-"}},Object(l["a"])({title:"是否入群",dataIndex:"inGroup",key:"inGroup",scopedSlots:{customRender:"inGroup"}},"key","inGroup"),Object(l["a"])({title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}},"key","operation")]}},activated:function(){this.tagPullId=this.$route.query.tagPullId,this.getPageList()},deactivated:function(){this.isOpen=!1,this.isOpen2=!1},methods:{lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerUserid,staffId:t.staffUserid}})},hideDaysbox:function(){this.isOpen=!1,this.isOpen2=!1},onSearchName:function(){this.getPageList()},serviceChange:function(t){this.isOpen=!1,t.length<=0&&(this.staffId=void 0,this.getPageList())},closeopencustomer:function(t){this.isOpen=!1,this.staffId=t.staffUserid,this.serviceList=t.staffName,this.getPageList()},statusListchange:function(t){this.receiveStatus=t,this.statusmodel=t,this.getPageList()},handleChange:function(t){this.inGroup=t,this.numGroup=t,this.getPageList()},groupChange:function(t){this.isOpen2=!1,t.length<=0&&(this.groupChatId=void 0,this.getPageList())},closeopengroup:function(t){this.groupList=t.groupName,this.groupChatId=t.groupId,this.isOpen2=!1,this.getPageList()},handleReset:function(){this.groupList=[],this.serviceList=[],this.numGroup=[],this.statusmodel=[],this.searchName=void 0,this.staffId=void 0,this.receiveStatus=void 0,this.inGroup=void 0,this.groupChatId=void 0,this.getPageList()},change:function(t){var e=t.current;this.pagination.current=e,this.getPageList()},getPageList:function(){var t=this,e={name:this.searchName,staffId:this.staffId,receiveStatus:this.receiveStatus,inGroup:this.inGroup,groupChatId:this.groupChatId,tagPullId:Number(this.tagPullId),currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,Object(f["h"])(e).then((function(e){e.data&&(t.channelList=e.data.list.map((function(t){t.info={name:t.customerName,avatar:t.customerAvatar},null!==t&&void 0!==t&&t.staffList?t.tagNameList=t.staffList:t.tagNameList=[];var e=Object(u["a"])(Object(u["a"])({},t),{},{key:t.id});return e.operation=e,e})),t.pagination.total=e.data.total)})).finally((function(){return t.loading=!1}))}},components:{StaffList:d["a"]}},h=p,m=(a("b16c"),a("2877")),g=Object(m["a"])(h,o,c,!1,null,"284b293e",null),v=g.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"memberDetails"},[t.hideSpin?e("div",{staticClass:"showspin"},[e("a-spin")],1):t._e(),e("div",{staticClass:"header"},[e("span",[t._v("共"+t._s(t.channelList.length)+"个客户")])]),e("div",{staticClass:"filter"},[e("a-form",{staticClass:"form flex-row align-side",staticStyle:{"padding-top":"16px"},attrs:{labelAlign:"left",layout:"inline"}},[e("div",{staticStyle:{width:"100%",heigt:"100%"}},[e("a-row",{attrs:{type:"flex"}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"搜索成员"}},[e("a-input-search",{staticStyle:{},attrs:{allowClear:"",placeholder:"请输入要搜索的成员"},on:{search:t.onSearchName,pressEnter:t.onSearchName},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"收到任务条数"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择收到任务条数",allowClear:""},on:{change:t.taskNumChange},model:{value:t.numStatus,callback:function(e){t.numStatus=e},expression:"numStatus"}},[e("a-select-option",{attrs:{value:"1"}},[t._v("1条")]),e("a-select-option",{attrs:{value:"2"}},[t._v("多条")])],1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"发送状态"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择发送状态",allowClear:""},on:{change:t.handleChange},model:{value:t.sendNum,callback:function(e){t.sendNum=e},expression:"sendNum"}},[e("a-select-option",{attrs:{value:"0"}},[t._v("未完成发送")]),e("a-select-option",{attrs:{value:"1"}},[t._v("已完成发送")])],1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-button",{staticClass:"reset-btn",on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)],1)])],1),e("a-button",{staticClass:"btntip",attrs:{type:"primary"},on:{click:function(e){return t.remindGruoupAll()}}},[t._v("提醒成员发送")]),e("div",{staticClass:"customer-table"},[e("div",{staticClass:"ant-spin-nested-loading"},[e("a-table",{staticClass:"background-white",attrs:{"data-source":t.channelList,columns:t.columns,pagination:!1,loading:t.loading},scopedSlots:t._u([{key:"info",fn:function(a){return e("div",{staticClass:"name-list"},[e("a-avatar",{staticClass:"portrait",attrs:{shape:"square",size:"default",src:a.avatar}}),e("div",[e("p",[t._v(t._s(a.name))])])],1)}},{key:"sendStatus",fn:function(a){return e("div",{},["0"==a?e("div",{staticStyle:{color:"#d53e3e"}},[t._v("未发送")]):e("div",[t._v("已发送")])])}},{key:"operation",fn:function(a){return e("div",{},["0"==a.sendStatus?e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.remindGruoup(a.tagPullId,a.staffUserid)}}},[t._v("提醒发送")]):e("div",[t._v("-")])],1)}}])})],1)])],1)},y=[],C={data:function(){return{hideSpin:!1,name:"",loading:!1,sendNum:[],numStatus:[],channelList:[],columns:[{title:"成员",dataIndex:"info",width:"240px",scopedSlots:{customRender:"info"},key:"info"},{title:"客户数",dataIndex:"customerNum",key:"customerNum",width:"200px",customRender:function(t){return t||"0"}},{title:"已邀请",dataIndex:"hasInvited",key:"hasInvited",width:"200px",customRender:function(t){return t||"0"}},{title:"收到任务条数",dataIndex:"taskNum",key:"taskNum",width:"200px",customRender:function(t){return t||"0"}},{title:"发送状态",dataIndex:"sendStatus",key:"sendStatus",width:"200px",scopedSlots:{customRender:"sendStatus"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}]}},activated:function(){this.tagPullId=this.$route.query.tagPullId,this.getPageList()},methods:{onSearchName:function(){this.getPageList()},handleChange:function(t){this.sendStatus=t,this.sendNum=t,this.getPageList()},taskNumChange:function(t){this.taskNum=t,this.numStatus=t,this.getPageList()},handleReset:function(){this.sendNum=[],this.numStatus=[],this.taskNum=void 0,this.name=void 0,this.sendStatus=void 0,this.getPageList()},remindGruoup:function(t,e){var a=this,n=[e],r=Number(t);Object(f["i"])({tagPullId:r,staffUserid:n}).then((function(t){a.$message.success(t.data)}))},remindGruoupAll:function(){var t=this,e=Number(this.$route.query.tagPullId);this.hideSpin=!0,Object(f["i"])({tagPullId:e}).then((function(e){t.$message.success(e.data)})).finally((function(){t.hideSpin=!1}))},getPageList:function(){var t=this,e={tagPullId:Number(this.tagPullId),taskNum:this.taskNum,name:this.name,sendStatus:this.sendStatus};this.loading=!0,Object(f["b"])(e).then((function(e){e.data&&(t.channelList=e.data.list.map((function(t){t.info={name:t.staffName,avatar:t.avatar},null!==t&&void 0!==t&&t.staffList?t.tagNameList=t.staffList:t.tagNameList=[];var e=Object(u["a"])(Object(u["a"])({},t),{},{key:t.staffId});return e.operation=e,e})))})).finally((function(){return t.loading=!1}))}}},w=C,_=(a("c490"),Object(m["a"])(w,b,y,!1,null,"4cd446e0",null)),S=_.exports,L={components:{customerDetails:v,memberDetails:S},data:function(){return{showAllGroup:!1,tagPullId:0,staffName:"",groupInfo:{},groupList:[],groupListone:{},statistics:{}}},activated:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.query,t.tagPullId=Number(a.tagPullId)||0,t.getChatInfo(),e.next=5,t.getupdateDate();case 5:return e.next=7,t.getStatistics();case 7:case"end":return e.stop()}}),e)})))()},methods:{getupdateDate:function(){var t=Number(this.tagPullId);Object(f["j"])({tagPullId:t}).then((function(t){}))},getChatInfo:function(){var t=this,e=Number(this.tagPullId);Object(f["c"])({tagPullId:e}).then((function(e){t.groupInfo=e.data,e.data.staffs.length>1?t.staffName=e.data.staffs[0].staffName+"、"+e.data.staffs[1].staffName+"等"+e.data.staffs.length+"名成员中的":t.staffName=e.data.staffs[0].staffName,t.groupListone=e.data.groupList[0],t.groupList=e.data.groupList}))},getStatistics:function(){var t=this,e=Number(this.tagPullId);Object(f["d"])({tagPullId:e}).then((function(e){t.statistics=e.data}))}}},O=L,x=(a("e02f"),Object(m["a"])(O,n,r,!1,null,"7165884a",null));e["default"]=x.exports},b16c:function(t,e,a){"use strict";a("eb7c")},b52b:function(t,e,a){"use strict";a.d(e,"j",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"g",(function(){return u})),a.d(e,"e",(function(){return l})),a.d(e,"h",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"d",(function(){return p})),a.d(e,"f",(function(){return h}));var n=a("b775"),r={labelGroupList:"/client_group/tagBuildGroup/page",labelGroupAdd:"/client_group/tagBuildGroup/add",labelGroupDel:"/client_group/tagBuildGroup/delGroupTagPull",getChat:"/client_group/tagBuildGroup/getChat",getStatistics:"/client_group/tagBuildGroup/getStatistics",queryCustomers:"/client_group/tagBuildGroup/customer/get",customersDetail:"/client_group/tagBuildGroup/staff/get",remind:"/client_group/tagBuildGroup/remind",calculateNum:"/client_group/tagBuildGroup/calculateNum",updateDate:"/client_group/tagBuildGroup/getNewData"};function i(t){return Object(n["b"])({url:r.updateDate,method:"get",params:t})}function s(t){return Object(n["b"])({url:r.getChat,method:"get",params:t})}function o(t){return Object(n["b"])({url:r.calculateNum,method:"post",data:t})}function c(t){return Object(n["b"])({url:r.remind,method:"post",data:t})}function u(t){return Object(n["b"])({url:r.labelGroupList,method:"get",params:t})}function l(t){return Object(n["b"])({url:r.labelGroupAdd,method:"post",data:t})}function d(t){return Object(n["b"])({url:r.queryCustomers,method:"post",data:t})}function f(t){return Object(n["b"])({url:r.customersDetail,method:"post",data:t})}function p(t){return Object(n["b"])({url:r.getStatistics,method:"get",params:t})}function h(t){return Object(n["b"])({url:r.labelGroupDel,method:"post",params:t})}},b5c3:function(t,e,a){t.exports=a.p+"assets/default.c42b7ede.svg"},b7fd:function(t,e,a){"use strict";a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"groupbox"},[e("div",{staticClass:"title"},[t._v(" 全部"+t._s(t.title)+" ("+t._s(t.total)+") ")]),e("div",{staticClass:"search-box"},[e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入".concat(t.title,"名称")},on:{search:t.onSearchGroupleader,pressEnter:t.onSearchGroupleader,blur:t.blursearch,focus:t.searchClick},model:{value:t.searchGroupleader,callback:function(e){t.searchGroupleader=e},expression:"searchGroupleader"}})],1),e("div",{staticClass:"list-wrap"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.allemployees,expression:"allemployees"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[t.staffdata.length>0?e("a-list",{attrs:{"data-source":t.staffdata},scopedSlots:t._u([{key:"renderItem",fn:function(a,n){return e("div",{key:n,staticClass:"list-item",on:{click:function(e){return t.choiceGroup(a)}}},[e("div",{staticClass:"item-content"},[e("img",{staticClass:"avatar",attrs:{src:a.thumbAvatar||t.defaultThumbAvatar,alt:""}}),e("span",{staticClass:"name"},[t._v(t._s(a.name||a.groupName||a.staffName))])]),t.defalytStaffIndex==(a.staffId||a.groupId)?e("a-icon",{staticClass:"img",attrs:{type:"check-circle"}}):e("div",{staticClass:"circle"})],1)}}],null,!1,1114407245)}):e("div",{staticClass:"cter"},[t._v("没有更多相关"+t._s(t.title)+"哦~~")])],1)])])},r=[],i=a("2909"),s=(a("d81d"),a("99af"),a("1c9c")),o=a("b52b"),c=a("487a"),u=a.n(c),l={directives:{infiniteScroll:u.a},props:{type:{type:String,default:"Staff"},title:{type:String,default:"员工"},tagPullId:{type:String,default:""}},data:function(){return{defaultThumbAvatar:a("b5c3"),staffdata:[],defalytStaffIndex:"",loading:!1,busy:!1,total:0,page:1,limit:10,searchGroupleader:""}},created:function(){},methods:{searchClick:function(){this.$emit("isSearchNoHide","1")},blursearch:function(){this.$emit("isSearchNoHide","2")},allemployees:function(){var t=this;switch(this.type){case"Staff":var e={currentPage:this.page,pageSize:this.limit,name:this.searchGroupleader||""};if(this.loading=!0,"0"!=this.total&&this.staffdata.length>=this.total)return void(this.busy=!0);Object(s["q"])(e).then((function(e){e.data.list.map((function(t){t.flag=!1}));var a=e.data.list;t.total=e.data.total,t.staffdata.length>=t.total?t.busy=!0:(t.page>1?t.staffdata=[].concat(Object(i["a"])(t.staffdata),Object(i["a"])(a)):t.staffdata=Object(i["a"])(a),t.page=t.page+1,t.loading=!1)}));break;case"customersDetail":var a={tagPullId:this.tagPullId||""};Object(o["b"])(a).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break;case"customer":var n={name:this.searchGroupleader||""};Object(s["n"])(n).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break;case"custGrpList":var r={grpName:this.searchGroupleader||"",filterType:0,grpStatus:0,orderCondition:1,orderWay:1,date:"",currentPage:1,pageSize:9999};Object(s["j"])(r).then((function(e){t.total=e.data.total,t.staffdata=e.data.list||[]}));break}},onSearchGroupleader:function(){this.$emit("isSearchNoHide","0"),this.page=1,this.staffdata=[],this.allemployees()},choiceGroup:function(t){this.defalytStaffIndex=t.userid||t.groupId||t.staffId,"Staff"==this.type?(this.$emit("closeopenstaff",t),this.$emit("closeopencustomer",t)):"customer"==this.type?this.$emit("closeopencustomer",t):"custGrpList"==this.type?this.$emit("closeopengroup",t):"customersDetail"==this.type&&this.$emit("closeopencustomer",t)}}},d=l,f=(a("be8d"),a("2877")),p=Object(f["a"])(d,n,r,!1,null,"e031d236",null);e["a"]=p.exports},be8d:function(t,e,a){"use strict";a("9694")},c490:function(t,e,a){"use strict";a("c784")},c784:function(t,e,a){},c7eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("b636"),a("944a"),a("0c47"),a("23dc"),a("3410"),a("159b"),a("b0c0"),a("131a"),a("fb6a");var n=a("53ca");function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
r=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,i=Object.defineProperty||function(t,e,a){t[e]=a.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(j){l=function(t,e,a){return t[e]=a}}function d(t,e,a,n){var r=e&&e.prototype instanceof h?e:h,s=Object.create(r.prototype),o=new k(n||[]);return i(s,"_invoke",{value:S(t,a,o)}),s}function f(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(j){return{type:"throw",arg:j}}}t.wrap=d;var p={};function h(){}function m(){}function g(){}var v={};l(v,o,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(N([])));y&&y!==e&&a.call(y,o)&&(v=y);var C=g.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(i,s,o,c){var u=f(t[i],t,s);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==Object(n["a"])(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(d).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,c)}))}c(u.arg)}var s;i(this,"_invoke",{value:function(t,a){function n(){return new e((function(e,n){r(t,a,e,n)}))}return s=s?s.then(n,n):n()}})}function S(t,e,a){var n="suspendedStart";return function(r,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw i;return I()}for(a.method=r,a.arg=i;;){var s=a.delegate;if(s){var o=L(s,a);if(o){if(o===p)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var c=f(t,e,a);if("normal"===c.type){if(n=a.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n="completed",a.method="throw",a.arg=c.arg)}}}function L(t,e){var a=e.method,n=t.iterator[a];if(void 0===n)return e.delegate=null,"throw"===a&&t.iterator["return"]&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==a&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+a+"' method")),p;var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=g,i(C,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},w(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,a,n,r,i){void 0===i&&(i=Promise);var s=new _(d(e,a,n,r),i);return t.isGeneratorFunction(a)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(C),l(C,u,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),a=[];for(var n in e)a.push(n);return a.reverse(),function t(){for(;a.length;){var n=a.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=N,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(a,n){return s.type="throw",s.arg=t,e.next=a,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var o=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(o&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),x(a),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var r=n.arg;x(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:N(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=void 0),p}},t}},e02f:function(t,e,a){"use strict";a("a5b4")},eb7c:function(t,e,a){}}]);