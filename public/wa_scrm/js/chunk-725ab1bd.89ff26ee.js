(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-725ab1bd"],{4820:function(t,e,n){"use strict";n.d(e,"k",(function(){return u})),n.d(e,"j",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"o",(function(){return p})),n.d(e,"l",(function(){return g})),n.d(e,"m",(function(){return f})),n.d(e,"n",(function(){return h})),n.d(e,"a",(function(){return b})),n.d(e,"f",(function(){return m})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return v}));var r=n("b775"),o={groups:"/tbContactsGroup/page",groupDetail:"/tbContactsGroup/queryById",groupBuild:"/tbContactsGroup/create",groupDelete:"/yuntu/group",groupEdit:"/yuntu/group",countPerson:"/yuntu/group/count",downloadUser:"/yuntu/group/download/user",history:"/yuntu/group/download/history",updateUser:"/yuntu/group/update",usersList:"/yuntu/group/users",groupHistory:"/yuntu/group_history",propretySelect:"/yuntu/group/proprety/select",propretySet:"/yuntu/group/proprety/select",changeStatus:"/tbContactsGroup/changeStatus",getNewGroupResult:"/tbTagResult/getNewGroupResult",getGroupResult:"/tbTagResult/getGroupResult",getContactsByCGID:"/tbTagResult/getContactsByCGID"};function u(t){return Object(r["b"])({url:o.groups,method:"post",data:t})}function a(t){return Object(r["b"])({url:o.groupEdit,method:"put",data:t})}function i(t){return Object(r["b"])({url:o.groupDetail,method:"get",params:t})}function s(t){return Object(r["b"])({url:o.groupBuild,method:"post",data:t})}function c(t){return Object(r["b"])({url:o.groupDelete,method:"delete",params:t})}function l(t){return Object(r["b"])({url:o.countPerson,method:"post",data:t})}function d(t){return Object(r["b"])({url:o.downloadUser,method:"post",data:t,responseType:"blob"})}function p(t){return Object(r["b"])({url:o.updateUser,method:"post",data:t})}function g(t){return Object(r["b"])({url:o.history,method:"get",params:t,responseType:"blob"})}function f(t){return Object(r["b"])({url:o.propretySelect,method:"get",params:t})}function h(t){return Object(r["b"])({url:o.propretySet,method:"post",data:t})}function b(t){return Object(r["b"])({url:o.changeStatus,method:"post",data:t})}function m(t){return Object(r["b"])({url:o.getNewGroupResult,method:"get",params:t})}function y(t){return Object(r["b"])({url:o.getGroupResult,method:"post",data:t})}function v(t){return Object(r["b"])({url:o.getContactsByCGID,method:"post",data:t})}},"5b0f":function(t,e,n){"use strict";n("6964f")},"6964f":function(t,e,n){},e237:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page"},[e("section",{staticClass:"section"},[e("div",{staticClass:"head"},[e("h2",[t._v("User Group")]),e("a-button",{attrs:{type:"primary",disabled:t.Actions},on:{click:t.buildGroup}},[t._v("Create User Group")])],1),e("div",{staticClass:"top"},[e("div"),e("div",{staticClass:"right"},[e("a-checkbox",{on:{change:t.searchList},model:{value:t.form.isSelf,callback:function(e){t.$set(t.form,"isSelf",e)},expression:"form.isSelf"}},[t._v("Created by Me")]),e("a-input-search",{staticClass:"search",attrs:{placeholder:"place input",allowClear:""},on:{search:t.searchList},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1)]),e("a-table",{staticClass:"table",attrs:{columns:t.columns,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.change},scopedSlots:t._u([{key:"groupName",fn:function(n,r){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.editImage(r)}}},[t._v(t._s(n))])],1)}},{key:"operation",fn:function(n,r){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.buildGroup(r,!0)}}},[t._v("Detail")]),e("a-switch",{attrs:{disabled:t.Actions},on:{change:function(e){return t.changeStatus(r)}},model:{value:r.statusBool,callback:function(e){t.$set(r,"statusBool",e)},expression:"record.statusBool"}})],1)}}])})],1)])},o=[],u=n("5530"),a=(n("b0c0"),n("d3b7"),n("d81d"),n("a9e3"),n("4820")),i=n("ca00"),s={name:"UserGroup",components:{},data:function(){return{tableLoading:!1,clientList:[],columns:[{title:"Group",dataIndex:"groupName",scopedSlots:{customRender:"groupName"},align:"center",key:"groupName"},{title:"User Count",dataIndex:"groupNum",align:"center",key:"groupNum"},{title:"Creator",dataIndex:"creatorName",align:"center",key:"creatorName"},{title:"status",dataIndex:"statusName",align:"center",key:"statusName"},{title:"remark",dataIndex:"remark",align:"center",width:"200px",key:"remark"},{title:"Actions",dataIndex:"operation",align:"center",key:"operation",scopedSlots:{customRender:"operation"}}],form:{keyword:"",isSelf:!1},pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0},creater:"",runStateList:[{text:"正常运行",value:1},{text:"已暂停",value:0}],createWay:[{text:"规则创建",value:1},{text:"结果保存",value:0},{text:"导入创建",value:2}],updateWayList:[{text:"手动",value:1},{text:"例行",value:0}]}},created:function(){var t,e,n;this.creater=null===(t=this.$store)||void 0===t||null===(e=t.state)||void 0===e||null===(n=e.user)||void 0===n?void 0:n.name,this.grounListFun()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{change:function(t){var e=t.current;this.pagination.current=e,this.grounListFun()},grounListFun:function(){var t=this;this.tableLoading=!0;var e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,onlyMe:!!this.form.isSelf,groupName:this.form.keyword};Object(a["k"])(e).then((function(e){var n;t.clientList=null===(n=e.data.records)||void 0===n?void 0:n.map((function(e){return Object(u["a"])(Object(u["a"])({},e),{},{key:e.group_id,operation:e,statusBool:!Boolean(e.status),task_type_text:"1"===e.task_type?"手动":"例行",statusName:t.status?"disable":"enable"})})),t.pagination.total=e.data.total})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},goUser:function(){this.$router.push({name:"BuildUserPortrait",query:{isEdit:Number(!0)}})},deleteImage:function(t){var e=this;this.$confirm({title:"提示",icon:"",cancelText:"取消",okText:"删除",content:"确认删除后，将会删除这条信息",onOk:function(){e.portraitDeleteFun(t)}})},portraitDeleteFun:function(t){var e=this;Object(a["h"])({id:t.group_id}).then((function(t){e.$message.success("删除成功"),e.grounListFun()})).catch((function(t){e.$message.error(t)}))},searchList:function(){this.pagination.current=1,this.grounListFun()},editImage:function(t){this.$router.push({name:"GroupDetail",query:{id:t.id,name:t.groupName}})},buildGroup:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$router.push({name:"BuildGroup",query:{id:null===t||void 0===t?void 0:t.id,isEdit:e}})},download:function(t){var e=this;Object(a["l"])({id:t.group_id}).then((function(t){Object(i["b"])(t,".csv","分群历史详情")})).catch((function(t){e.$message.error(t)}))},updateUserFun:function(t){var e=this;Object(a["o"])({id:t.group_id}).then((function(t){e.$message.success("更新成功"),e.grounListFun()})).catch((function(t){e.$message.error(t)}))},changeStatus:function(t){var e=this,n={id:t.id,status:Number(!t.statusBool)};Object(a["a"])(n).then((function(t){e.grounListFun()})).catch((function(t){e.$message.error(t)}))}}},c=s,l=(n("5b0f"),n("2877")),d=Object(l["a"])(c,r,o,!1,null,"1f7ed006",null);e["default"]=d.exports}}]);