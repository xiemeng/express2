(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c5367b6"],{2880:function(t,e,i){"use strict";i("592d")},"2a86":function(t,e,i){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),t.tipText?e("span",{attrs:{name:"tip"}},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" "+t._s(t.tipText)+" ")],1)]):t._e(),t._t("default"),t.footer?e("div",{staticClass:"foot-button"},[e("div",{staticClass:"left"},[t._t("bottomLeft")],2),e("a-space",{attrs:{size:12}},[t._t("footer"),e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v(t._s(t.cancleText))]),e("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("serviceOk")}}},[t._v(t._s(t.okText))])],2)],1):t._e()],2)},a=[],n={name:"CommonModal",props:{title:{type:String,default:"标题"},cancleText:{type:String,default:"取消"},okText:{type:String,default:"确定"},tipText:{type:[String,Boolean],default:!1},footer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}}},r=n,s=(i("2880"),i("2877")),c=Object(s["a"])(r,o,a,!1,null,"c55b780c",null);e["a"]=c.exports},"544b":function(t,e,i){},"592d":function(t,e,i){},a2bf7:function(t,e,i){},baaa:function(t,e,i){"use strict";i("eac5e")},bf1c:function(t,e,i){"use strict";i("a2bf7")},d497:function(t,e,i){"use strict";i("544b")},e34d:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"header"},[e("a-form-model",{attrs:{layout:"inline",labelCol:{span:8},wrapperCol:{span:16}}},[e("a-form-model-item",{attrs:{label:"腾讯文档编码"}},[e("a-input-search",{attrs:{placeholder:"请输入腾讯文档编码",allowClear:""},on:{search:t.getListFun},model:{value:t.form.fileName,callback:function(e){t.$set(t.form,"fileName",e)},expression:"form.fileName"}})],1),e("a-form-model-item",{attrs:{label:"OKR开始时间"}},[e("a-range-picker",{on:{change:t.getListFun},model:{value:t.form.startAndEndTime,callback:function(e){t.$set(t.form,"startAndEndTime",e)},expression:"form.startAndEndTime"}})],1),e("a-form-model-item",[e("a-space",[e("a-button",{attrs:{type:"primary"},on:{click:t.getListFun}},[t._v("搜索")]),e("a-button",{on:{click:t.resut}},[t._v("重置")]),e("a-button",{attrs:{type:"primary",loading:t.pushLoading},on:{click:t.pushWorder}},[t._v("创建腾讯文档")])],1)],1)],1)],1),e("div",{staticClass:"bar"}),e("section",[e("a-table",{staticClass:"table",attrs:{columns:t.columns,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.change},scopedSlots:t._u([{key:"operation",fn:function(i){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.syncTencentDocFun(i)}}},[t._v("同步OPPM")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteItem(i)}}},[t._v("删除")])],1)}}])})],1),e("a-modal",{attrs:{footer:null,destroyOnClose:"",centered:"",width:"590px"},model:{value:t.visibileForm,callback:function(e){t.visibileForm=e},expression:"visibileForm"}},[e("BuildWorder",{attrs:{editData:t.editData},on:{cancle:function(e){t.visibileForm=!1},serviceOk:t.serviceOk}})],1),e("a-modal",{attrs:{footer:null,destroyOnClose:"",width:"599px"},model:{value:t.visibileAccessToken,callback:function(e){t.visibileAccessToken=e},expression:"visibileAccessToken"}},[e("AccessToken",{on:{cancle:function(e){t.visibileAccessToken=!1},serviceOk:t.serviceOkToken}})],1)],1)},a=[],n=i("5530"),r=(i("d3b7"),i("d81d"),i("b775")),s={tencentDocSettingPage:"/enterprise/tencentDocSetting/page",addDoc:"/enterprise/tencentDocSetting/addDoc",deleteDoc:"/enterprise/tencentDocSetting/deleteDoc",updateDoc:"/enterprise/tencentDocSetting/updateDoc",refreshAccessToken:"/enterprise/tencentDocSetting/refreshAccessToken",syncTencentDoc:"/enterprise/tencentDocSetting/syncTencentDoc"};function c(t){return Object(r["b"])({url:s.tencentDocSettingPage,method:"post",data:t})}function l(t){return Object(r["b"])({url:s.addDoc,method:"post",data:t})}function d(t){return Object(r["b"])({url:s.deleteDoc,method:"post",data:t})}function m(t){return Object(r["b"])({url:s.updateDoc,method:"post",data:t})}function u(t){return Object(r["b"])({url:s.refreshAccessToken,method:"post",data:t})}function f(t){return Object(r["b"])({url:s.syncTencentDoc,method:"post",data:t})}var p=function(){var t=this,e=t._self._c;return e("CommonModal",{attrs:{title:t.title,loading:t.loading},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},[e("a-form-model",{ref:"ruleForm",staticClass:"form-model",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol}},[e("a-form-model-item",{attrs:{label:"项目名称",prop:"projectGroup"}},[e("a-input",{staticStyle:{width:"370px"},attrs:{placeholder:"请输入项目名称"},model:{value:t.form.projectGroup,callback:function(e){t.$set(t.form,"projectGroup",e)},expression:"form.projectGroup"}})],1),e("a-form-model-item",{attrs:{label:"腾讯文档名",prop:"docName"}},[e("a-input",{staticStyle:{width:"370px"},attrs:{placeholder:"请输入腾讯文档名"},model:{value:t.form.docName,callback:function(e){t.$set(t.form,"docName",e)},expression:"form.docName"}})],1),e("a-form-model-item",{attrs:{label:"腾讯文档地址",prop:"docUrl"}},[e("a-input",{staticStyle:{width:"370px"},attrs:{placeholder:"请输入腾讯文档地址"},model:{value:t.form.docUrl,callback:function(e){t.$set(t.form,"docUrl",e)},expression:"form.docUrl"}})],1),e("a-form-model-item",{attrs:{label:"腾讯文档sheetID",prop:"sheetId"}},[e("a-input",{staticStyle:{width:"370px"},attrs:{placeholder:"请输入腾讯文档sheetID"},model:{value:t.form.sheetId,callback:function(e){t.$set(t.form,"sheetId",e)},expression:"form.sheetId"}})],1),e("a-form-model-item",{attrs:{label:"腾讯文档编码",prop:"fileName"}},[e("a-input",{staticStyle:{width:"370px"},attrs:{placeholder:"请输入腾讯文档编码"},model:{value:t.form.fileName,callback:function(e){t.$set(t.form,"fileName",e)},expression:"form.fileName"}})],1),e("a-form-model-item",{attrs:{label:"OKR周期",prop:"startAndEndTime"}},[e("a-range-picker",{model:{value:t.form.startAndEndTime,callback:function(e){t.$set(t.form,"startAndEndTime",e)},expression:"form.startAndEndTime"}})],1),t.editData.id?t._e():e("a-tooltip",{attrs:{trigger:"click",overlayClassName:"token-tooltip"}},[e("ul",{staticClass:"tooltip",attrs:{slot:"title"},slot:"title"},[e("li",[e("h2",[t._v("一、 打开浏览器访问以下地址打开扫码页面")]),e("p",[t._v("https://docs.qq.com/oauth/v2/authorize?client_id=2e810cad82d142388913e59593e94514&redirect_uri=https%3A%2F%2Fcacapi.acadsoc.com.cn%2F&response_type=code&scope=all&state=STATE")]),e("img",{attrs:{src:"/imgs/jira/image1.png"}})]),e("li",[e("h2",[t._v("二、 手机微信扫码确认，授权登陆")]),e("img",{attrs:{src:"/imgs/jira/image2.png"}})]),e("li",[e("h2",[t._v("三、 复制跳转页面上的CODE填入输入框")]),e("img",{attrs:{src:"/imgs/jira/image3.png"}})])]),e("a-button",{attrs:{type:"link"}},[t._v("如何获取code")])],1),t.editData.id?t._e():e("span",{staticStyle:{color:"red"}},[t._v("(一个code只能使用一次，且只有5分钟有效时间)")]),t.editData.id?t._e():e("a-form-model-item",{attrs:{label:"腾讯文档登录code",prop:"code"}},[t._v(" "+t._s(t.editData.id)+" "),e("a-input",{staticStyle:{width:"370px"},attrs:{placeholder:"请输入腾讯文档登录code"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1)],1)],1)},h=[],v=i("2a86"),g={name:"BuildWorder",components:{CommonModal:v["a"]},props:{editData:{type:Object,default:function(){return{}}},source:{type:String,default:""}},data:function(){return{labelCol:{span:6},form:{startAndEndTime:void 0,fileName:void 0,docUrl:void 0,docName:void 0,sheetId:void 0,code:void 0,projectGroup:void 0},rules:{fileName:[{required:!0,message:"未填写腾讯文档编码"}],startAndEndTime:[{required:!0,message:"未选择时间"}],docUrl:[{required:!0,message:"未填写腾讯文档地址"}],docName:[{required:!0,message:"未填写腾讯文档名"}],sheetId:[{required:!0,message:"未填写腾讯文档sheetID"}],code:[{required:!0,message:"未填写腾讯文档登录code"}],projectGroup:[{required:!0,message:"未填写项目名称"}]},title:"创建腾讯文档",loading:!1}},watch:{editData:{handler:function(){this.editData.id?(this.title="编辑腾讯文档",this.form={fileName:this.editData.fileName,startAndEndTime:[this.$moment(this.editData.startTime),this.$moment(this.editData.endTime)],docUrl:this.editData.docUrl,docName:this.editData.docName,sheetId:this.editData.sheetId,code:this.editData.code,projectGroup:this.editData.projectGroup}):(this.title="创建腾讯文档",this.form={startAndEndTime:void 0,fileName:void 0})},immediate:!0,deep:!0}},methods:{serviceOk:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;t.editData.id?t.updateDocFun():t.addDocFun()}))},addDocFun:function(){var t,e,i=this;this.loading=!0;var o={startDateFrom:(null===(t=this.form.startAndEndTime)||void 0===t?void 0:t.length)>0?this.form.startAndEndTime[0].format("YYYY-MM-DD 00:00:00"):void 0,startDateTo:(null===(e=this.form.startAndEndTime)||void 0===e?void 0:e.length)>0?this.form.startAndEndTime[1].format("YYYY-MM-DD 23:59:59"):void 0,fileName:this.form.fileName,docUrl:this.form.docUrl,docName:this.form.docName,sheetId:this.form.sheetId,code:this.form.code,projectGroup:this.form.projectGroup};l(o).then((function(t){i.$message.success("新建成功"),i.$emit("serviceOk")})).catch((function(t){i.$message.error(t)})).finally((function(){i.loading=!1}))},updateDocFun:function(){var t,e,i=this;this.loading=!0;var o={startDateFrom:(null===(t=this.form.startAndEndTime)||void 0===t?void 0:t.length)>0?this.form.startAndEndTime[0].format("YYYY-MM-DD 00:00:00"):void 0,startDateTo:(null===(e=this.form.startAndEndTime)||void 0===e?void 0:e.length)>0?this.form.startAndEndTime[1].format("YYYY-MM-DD 23:59:59"):void 0,fileName:this.form.fileName,id:this.editData.id,docUrl:this.form.docUrl,docName:this.form.docName,sheetId:this.form.sheetId,projectGroup:this.form.projectGroup};m(o).then((function(t){i.$message.success("编辑成功"),i.$emit("serviceOk")})).catch((function(t){i.$message.error(t)})).finally((function(){i.loading=!1}))}}},b=g,k=(i("d497"),i("2877")),D=Object(k["a"])(b,p,h,!1,null,"7c849deb",null),T=D.exports,y=function(){var t=this,e=t._self._c;return e("CommonModal",{attrs:{title:t.title,loading:t.loading},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},[e("a-tooltip",{attrs:{trigger:"click",overlayClassName:"token-tooltip"}},[e("ul",{staticClass:"tooltip",attrs:{slot:"title"},slot:"title"},[e("li",[e("h2",[t._v("一、 打开浏览器访问以下地址打开扫码页面")]),e("p",[t._v("https://docs.qq.com/oauth/v2/authorize?client_id=2e810cad82d142388913e59593e94514&redirect_uri=https%3A%2F%2Fcacapi.acadsoc.com.cn%2F&response_type=code&scope=all&state=STATE")]),e("img",{attrs:{src:"/imgs/jira/image1.png"}})]),e("li",[e("h2",[t._v("二、 手机微信扫码确认，授权登陆")]),e("img",{attrs:{src:"/imgs/jira/image2.png"}})]),e("li",[e("h2",[t._v("三、 复制跳转页面上的CODE填入输入框")]),e("img",{attrs:{src:"/imgs/jira/image3.png"}})])]),e("a-button",{attrs:{type:"link"}},[t._v("如何获取code")])],1),e("a-input",{staticClass:"token-text",attrs:{placeholder:"请填写腾讯文档扫码code"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1)},x=[],_={name:"AccessToken",components:{CommonModal:v["a"]},data:function(){return{title:"生成AccessToken",exportOrPushType:void 0,loading:!1,code:void 0}},created:function(){},methods:{serviceOk:function(){var t=this;this.loading=!0;var e={code:this.code};u(e).then((function(e){t.$emit("serviceOk")})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))}}},A=_,O=(i("baaa"),Object(k["a"])(A,y,x,!1,null,"cc6d3fcc",null)),F=O.exports,N={name:"Tencent",components:{BuildWorder:T,AccessToken:F},data:function(){return{visibileForm:!1,tableLoading:!1,visibileAccessToken:!1,visibleTransfer:!1,clientList:[],editData:{},columns:[{title:"项目名称",dataIndex:"projectGroup",key:"projectGroup",align:"center"},{title:"腾讯文档名",dataIndex:"docName",key:"docName",align:"center"},{title:"腾讯文档地址",dataIndex:"docUrl",width:"300px",key:"docUrl",align:"center"},{title:"腾讯文档sheetID",dataIndex:"sheetId",key:"sheetId",align:"center"},{title:"腾讯文档编码",dataIndex:"fileName",key:"fileName",align:"center"},{title:"OKR开始时间",dataIndex:"startTime",align:"center",key:"startTime"},{title:"OKR结束时间",dataIndex:"endTime",align:"center",key:"endTime"},{title:"创建时间",dataIndex:"createTime",align:"center",key:"createTime"},{title:"操作",dataIndex:"operation",align:"center",width:"300px",key:"operation",scopedSlots:{customRender:"operation"}}],pagination:{current:1,pageSize:10,total:0},visibleDeath:!1,form:{fileName:void 0,startAndEndTime:void 0},loadingOppm:!1,isExport:!0,pushLoading:!1,executorList:[]}},created:function(){this.getListFun()},methods:{exportOppmFun:function(){this.isExport=!0,this.visibileForm=!0},pushWorder:function(){this.editData={},this.isExport=!1,this.visibileForm=!0},change:function(t){var e=t.current;this.pagination.current=e,this.getListFun()},getListFun:function(){var t=this;this.tableLoading=!0;var e=this.getParams();c(e).then((function(e){var i;t.clientList=null===(i=e.data.list)||void 0===i?void 0:i.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{key:t.id,operation:t})})),t.pagination.total=e.data.total})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},deathFun:function(){this.visibleDeath=!0},transferFun:function(){this.visibleTransfer=!0},getParams:function(){var t,e,i={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,fileName:this.form.fileName,startDateTo:(null===(t=this.form.startAndEndTime)||void 0===t?void 0:t.length)>0?this.form.startAndEndTime[1].format("YYYY-MM-DD 23:59:59"):void 0,startDateFrom:(null===(e=this.form.startAndEndTime)||void 0===e?void 0:e.length)>0?this.form.startAndEndTime[0].format("YYYY-MM-DD 00:00:00"):void 0};return i},serviceOk:function(){this.visibileForm=!1,this.getListFun()},resut:function(){this.form={fileName:void 0,startAndEndTime:void 0},this.getListFun()},editItem:function(t){this.editData=t,this.visibileForm=!0},deleteItem:function(t){var e=this,i={id:t.id};d(i).then((function(t){e.$message.success("删除成功"),e.getListFun()})).catch((function(t){e.$message.error(t)}))},serviceOkToken:function(){this.visibileAccessToken=!1},syncTencentDocFun:function(t){var e=this;f({id:t.id}).then((function(t){e.$message.success("同步成功")})).catch((function(t){e.$message.error(t)}))}}},j=N,E=(i("bf1c"),Object(k["a"])(j,o,a,!1,null,"ebb1ddca",null));e["default"]=E.exports},eac5e:function(t,e,i){}}]);