(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34769c6c"],{"0b6a":function(t,e,a){},"12c3":function(t,e,a){},2035:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r}));a("c7eb"),a("1da1"),a("ac1f"),a("466d"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("99af"),a("b680");var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",a=t.split(","),i=a[0].match(/:(.*?);/)[1],r=i.split("/")[1],n=atob(a[1]),o=n.length,l=new Uint8Array(o);while(o--)l[o]=n.charCodeAt(o);return new File([l],"".concat(e,".").concat(r),{type:i})},r=function(t){if(null==t||""==t)return"0 Bytes";var e=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),a=0,i=parseFloat(t);a=Math.floor(Math.log(i)/Math.log(1024));var r=i/Math.pow(1024,a);return r=r.toFixed(2),r+e[a]}},"5a43":function(t,e,a){"use strict";a("0b6a")},"7e0d":function(t,e,a){"use strict";a("12c3")},"8c2e":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",[e("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture","show-upload-list":!1,"before-upload":t.beforeUpload,accept:t.accept,customRequest:t.customRequest},on:{change:t.handleChange}},[t._t("default",(function(){return[e("a-button",{staticStyle:{position:"relative","margin-top":"80px"},attrs:{type:"link",icon:"sync"}},[t._v(" 重新上传 ")])]}))],2)],1)},r=[],n={data:function(){return{loading:!1,accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",imageUrl:"",iconStart:0,uploadFile:""}},created:function(){this.imageUrl=this.defaultImage},watch:{imageUrl:function(){this.$emit("imageUrlData",this.imageUrl)}},props:{defaultImage:{type:String,default:""}},methods:{customRequest:function(t){this.uploadFile=t.file,t.onSuccess()},beforeUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("文件不能大于2MB!"),e},getBase64:function(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)},handleChange:function(t){var e,a=this;"uploading"===t.file.status&&(this.getBase64(t.file.originFileObj,(function(t){a.imageUrl=t})),this.fileList=[t.fileList[t.fileList.length-1]],this.fileList[0].status="done"),"removed"===t.file.status&&(this.fileList=[],this.imageUrl=""),this.$emit("input",null===t||void 0===t||null===(e=t.fileList[t.fileList.length-1])||void 0===e?void 0:e.originFileObj)}}},o=n,l=(a("5a43"),a("2877")),c=Object(l["a"])(o,i,r,!1,null,"b8a55c42",null);e["a"]=c.exports},"8dd4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"新建雷达文章"},on:{back:t.articleGoBack}}),e("div",{staticStyle:{padding:"16px"}},[e("div",{staticClass:"page-content"},[e("h2",{staticStyle:{"font-size":"15px"}},[t._v("基本信息")]),e("a-divider",{staticStyle:{margin:"12px 0"}}),e("div",{staticClass:"yellow-tips"},[e("a-icon",{staticStyle:{color:"#faad14","margin-right":"6px"},attrs:{type:"bell"}}),e("span",[t._v("提示：上传文章后将自动转化为雷达文章，员工发送给客户后可记录客户的阅读时长和分享数据")])],1),e("a-form-model",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{label:"雷达标题",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{maxLength:15,disabled:t.isSuccet,placeholder:"名称不会展示给用户，用于企业记录渠道名称或使用场景"},model:{value:t.activityTitle,callback:function(e){t.activityTitle=e},expression:"activityTitle"}})],1),e("a-form-model-item",{attrs:{label:"雷达文章",required:""}},[e("a-radio-group",{model:{value:t.articleValue,callback:function(e){t.articleValue=e},expression:"articleValue"}},t._l(t.articleTabList,(function(a){return e("a-radio",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.title)+" ")])})),1)],1),3==t.articleValue?e("div",[e("a-form-model-item",{attrs:{label:"雷达链接",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{placeholder:"请在此输入链接"},model:{value:t.activityUrl,callback:function(e){t.activityUrl=e},expression:"activityUrl"}})],1),e("a-form-model-item",{attrs:{label:"链接标题",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{maxLength:30,placeholder:"请在此输入链接标题"},model:{value:t.linkTitle,callback:function(e){t.linkTitle=e},expression:"linkTitle"}})],1),e("a-form-model-item",{attrs:{label:"链接摘要",required:""}},[e("a-input",{staticStyle:{width:"450px"},attrs:{maxLength:30,placeholder:"请在此输入链接摘要"},model:{value:t.linkSummary,callback:function(e){t.linkSummary=e},expression:"linkSummary"}})],1),e("a-form-model-item",{attrs:{label:"链接封面"}},[e("div",{staticStyle:{display:"flex"}},[e("span",{staticClass:"box-img"},[e("a-avatar",{staticStyle:{left:"2px",top:"2px"},attrs:{src:t.defaultImage,size:100,shape:"square"}}),e("span",{staticClass:"box-close-icon"},["/imgs/default-cover.png"!==t.defaultImage?e("a-icon",{attrs:{type:"close-circle",theme:"filled"},on:{click:t.iconClose}}):t._e()],1)],1),e("UploadImages",{on:{imageUrlData:t.imageUrlData,input:t.uploadFile}},[e("a-button",{staticStyle:{position:"relative","margin-top":"80px"},attrs:{type:"link",icon:"sync"}},[t._v(" 重新上传 ")])],1)],1)])],1):e("div",[e("div",{staticStyle:{"margin-left":"130px","margin-bottom":"60px"}},[""!=t.myArticleTitle?e("a-card",{staticStyle:{width:"200px"},attrs:{hoverable:""}},[e("div",{staticClass:"cover",attrs:{slot:"cover"},slot:"cover"},[e("div",{staticClass:"document"},[e("div",{staticClass:"document-left"},[e("p",[t._v(t._s(t.myArticleTitle))]),e("p",{attrs:{title:t.myArticleDesc}},[t._v(t._s(t.myArticleDesc))])]),e("img",{attrs:{src:t.myArticleCoverUrl,alt:"封面"}})])]),e("div",{attrs:{slot:"actions"},slot:"actions"},[e("div",{staticClass:"article-operation"},[e("a-icon",{attrs:{type:"edit"},on:{click:t.editArticle}}),e("a-icon",{attrs:{type:"delete"},on:{click:t.deleteArticle}})],1)])]):e("a-button",{attrs:{type:"primary"},on:{click:t.createNewArticle}},[t._v(" +新建文章素材 ")])],1)])],1),e("h2",{staticStyle:{"font-size":"15px"}},[t._v("链接追踪设置")]),e("a-divider",{staticStyle:{margin:"12px 0"}}),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.actionNotice,callback:function(e){t.actionNotice=e},expression:"actionNotice"}},[t._v(" 行为通知 "),e("span",{staticStyle:{color:"#909090"}},[t._v(" （当客户点击雷达文章时，发送雷达文章的员工将会收到消息提醒） ")])])],1),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.dynamicNotification,callback:function(e){t.dynamicNotification=e},expression:"dynamicNotification"}},[t._v(" 动态通知 "),e("span",{staticStyle:{color:"#909090"}},[t._v(" （当客户点击雷达文章时，会将客户的打开行为、阅读时长和阅读完成率记录在客户动态里） ")])])],1),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.customerLabel,callback:function(e){t.customerLabel=e},expression:"customerLabel"}},[t._v(" 客户标签 "),e("span",{staticStyle:{color:"#909090"}},[t._v(" （给点击雷达文章的客户打上对应规则的标签） ")])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.customerLabel,expression:"customerLabel"}],staticStyle:{"margin-bottom":"15px"}},[e("TableAddpdf",{attrs:{dataSourceList:t.TableAddpdfDataSource},on:{funcData:t.dataSource}})],1),e("div",{staticStyle:{"margin-bottom":"15px"}},[e("a-checkbox",{model:{value:t.setCustomerRatings,callback:function(e){t.setCustomerRatings=e},expression:"setCustomerRatings"}},[t._v(" 设置客户评分 ")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.setCustomerRatings,expression:"setCustomerRatings"}],staticStyle:{"margin-bottom":"15px"}},[e("TableAddpdfTwo",{attrs:{dataSourceList:t.TableAddpdfDataSourceTwo},on:{funcData:t.dataSourceTwo}})],1),e("a-button",{attrs:{type:"primary",size:"large",loading:t.activityLoading},on:{click:t.addData}},[t._v(" "+t._s(t.buttonData)+" ")])],1)]),e("a-modal",{attrs:{footer:null,centered:""},model:{value:t.visibleTag,callback:function(e){t.visibleTag=e},expression:"visibleTag"}},[e("SelectTags",{attrs:{selectTagList:t.form.selectTagList},on:{cancle:function(e){t.visibleTag=!1},serviceOk:t.serviceOk}})],1)],1)},r=[],n=a("c7eb"),o=a("53ca"),l=a("1da1"),c=(a("9911"),a("d81d"),a("7db0"),a("d3b7"),a("a434"),a("0481"),a("4069"),a("4de4"),a("ac1f"),a("a15b"),a("b64b"),a("c844")),s=a("8c2e"),u=a("69e4"),d=a("fe6f"),m=a("d885"),f=a("2035"),g=a("cf5f"),p={watch:{myArticleFile:function(t,e){var a=this;t&&this.getBase64(t,(function(t){a.myArticleCoverUrl=t}))}},data:function(){return{isEdit:!1,myArticleTitle:"",myArticleAuthor:"",myArticleContent:"",myArticleDesc:"",myArticleCoverUrl:"",myArticleFile:null,articleValue:3,articleTabList:[{id:3,title:"公众号文章"},{id:4,title:"新建文章素材"}],TableAddpdfDataSource:[],TableAddpdfDataSourceTwo:[],changeImage:"",paramDict:{},buttonData:"",activityLoading:!1,formData:{},businessCard:!0,defaultImage:"/imgs/default-cover.png",form:{selectTagList:[]},visibleTag:!1,actionNotice:!0,dynamicNotification:!0,customerLabel:!1,setCustomerRatings:!1,isSuccet:!1,activityTitle:"",activityUrl:"",linkTitle:"",linkSummary:"",labelCol:{span:2},wrapperCol:{span:7}}},components:{SelectTags:c["a"],UploadImages:s["a"],TableAddpdf:u["a"],TableAddpdfTwo:d["a"]},created:function(){this.init()},methods:{articleGoBack:function(){this.$router.push({name:"Dashboard",query:{state:"article"}})},editArticle:function(){this.createNewArticle()},deleteArticle:function(){this.myArticleTitle="",this.myArticleAuthor="",this.myArticleContent="",this.myArticleDesc="",this.myArticleCoverUrl="",this.myArticleFile=""},getBase64:function(t,e){var a=new FileReader;a.addEventListener("load",(function(){return e(a.result)})),a.readAsDataURL(t)},createNewArticle:function(){var t={state:this.$route.query.state,type:"article",tab:4,radarName:this.activityTitle};"edit"===this.$route.query.state&&(t.id=this.$route.query.id),this.$router.push({name:"ArticleEditor",params:{isSelfEditor:!0,from:"CreateArticle",myArticleTitle:this.myArticleTitle,myArticleAuthor:this.myArticleAuthor,myArticleContent:this.myArticleContent,myArticleDesc:this.myArticleDesc,myArticleCoverUrl:this.myArticleCoverUrl,myArticleFile:this.myArticleFile},query:t})},initArticleMaterial:function(){if(this.$route.query.tab&&(this.articleValue=this.$route.query.tab,this.activityTitle=this.$route.query.radarName),this.$route.params.isSelfEditor){var t=this.$route.params;this.isSelfEditor=!0,this.myArticleTitle=t.myArticleTitle,this.myArticleAuthor=t.myArticleAuthor,this.myArticleContent=t.myArticleContent,this.myArticleDesc=t.myArticleDesc,this.myArticleCoverUrl=t.myArticleCoverUrl,this.myArticleFile=t.myArticleFile}},init:function(){var t=this;"add"===this.$route.query.state?(this.initArticleMaterial(),this.iconClose(),this.buttonData="创建雷达链接"):"edit"===this.$route.query.state&&(this.isEdit=!0,this.editFunc((function(){t.initArticleMaterial()})),this.isSuccet=!0,this.buttonData="保存")},editFunc:function(t){var e=this;Object(m["h"])(this.$route.query.id).then((function(a){var i,r,n,o,l,c,s,u,d,m,f,g,p,v,b,A,h,y,w,S,T,C,x,k,D;(e.articleValue=null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.type,e.paramDict=null===a||void 0===a?void 0:a.data,e.activityTitle=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.radarName,3==e.articleValue)?(e.activityUrl=null===a||void 0===a||null===(h=a.data)||void 0===h?void 0:h.link,e.linkTitle=null===a||void 0===a||null===(y=a.data)||void 0===y?void 0:y.title,e.linkSummary=null===a||void 0===a||null===(w=a.data)||void 0===w?void 0:w.radarName,e.defaultImage=null===a||void 0===a||null===(S=a.data)||void 0===S?void 0:S.coverUrl):(e.myArticleTitle=null===a||void 0===a||null===(T=a.data)||void 0===T?void 0:T.title,e.myArticleAuthor=null===a||void 0===a||null===(C=a.data)||void 0===C?void 0:C.author,e.myArticleContent=null===a||void 0===a||null===(x=a.data)||void 0===x?void 0:x.content,e.myArticleDesc=null===a||void 0===a||null===(k=a.data)||void 0===k?void 0:k.desc,e.myArticleCoverUrl=null===a||void 0===a||null===(D=a.data)||void 0===D?void 0:D.coverUrl);e.changeImage=null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.coverUrl,e.actionNotice=1===(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.behaviorNotify),e.dynamicNotification=1===(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.activityNotify),e.customerLabel=(null===a||void 0===a||null===(c=a.data)||void 0===c||null===(s=c.tagRules)||void 0===s?void 0:s.length)>0,e.setCustomerRatings=(null===a||void 0===a||null===(u=a.data)||void 0===u||null===(d=u.scoreRules)||void 0===d?void 0:d.length)>0,e.businessCard=1===(null===a||void 0===a||null===(m=a.data)||void 0===m?void 0:m.businessCard),e.TableAddpdfDataSource=null===a||void 0===a||null===(f=a.data)||void 0===f||null===(g=f.tagRules)||void 0===g?void 0:g.map((function(t){var e;return{id:t.id,defaultValue:{1:"1",3:"2",2:"3"}[t.ruleKind],grade:null===t||void 0===t?void 0:t.count,fraction:null===t||void 0===t?void 0:t.score,switchData:(null===t||void 0===t||null===(e=t.customerTags)||void 0===e?void 0:e.length)>0,selectTagList:(null===t||void 0===t?void 0:t.customerTags)||[]}}));var L=null===a||void 0===a||null===(p=a.data)||void 0===p||null===(v=p.scoreRules)||void 0===v?void 0:v.find((function(t){return 0===t.ruleKind}));e.TableAddpdfDataSourceTwo=null===a||void 0===a||null===(b=a.data)||void 0===b||null===(A=b.scoreRules)||void 0===A?void 0:A.map((function(t){var e;return{id:t.id,defaultValue:{0:"1",1:"2",4:"3"}[t.ruleKind],grade:null===t||void 0===t?void 0:t.count,fraction:null===t||void 0===t?void 0:t.score,switchData:(null===t||void 0===t||null===(e=t.customerTags)||void 0===e?void 0:e.length)>0,selectTagList:(null===t||void 0===t?void 0:t.customerTags)||[],disabledData:!!L}})),t&&t()})).catch((function(t){e.$message.warning(t)}))},closeTag:function(t){this.form.selectTagList.splice(t,1)},serviceOk:function(t){this.form.selectTagList=t.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat(),this.visibleTag=!1},imageUrlData:function(t){this.defaultImage=t},uploadFile:function(t){this.formData.NewCustomerFile=t},dataSource:function(t){this.formData.dataSource=t},dataSourceTwo:function(t){this.formData.dataSourceTwo=t},iconClose:function(){this.defaultImage="/imgs/default-cover.png";var t="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABYAFgDASIAAhEBAxEB/8QAGgABAAMBAQEAAAAAAAAAAAAAAAQFBwYDAv/EACwQAAEEAQIFAgYDAQAAAAAAAAEAAgMEBQYREiExQVEHgRMWIkJhcRRicpH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A3/TuDx+ncPWxmIrRVqldgY1sbQN9h1PknqSeZKskRAREQEREBERAREQVuosHj9RYezjMvWis1LDCxzZGg7bjqPBHUEcwUVkiAiIgIiICIsw1pqu5mcl8t6RJkneeGezGdgB3Ad2A7u9gg7q1qPC1LJr2crRimB2LHTNBB/PPl7qzikZNG2SF7ZI3DdrmncEfgrP8b6VYSKg2O+6xZtEfXK2QsAP9R4/e6qdJm3ozX3y3LYdPjbjeOHi+0kEh23Y7gtO3Xqg1hERAREQEREBEWbar1lkL2cjwOjPruNftNYDQ5o26gbgjYdz7BBI9V85drso4PEktuZJ3AXNOxDSQ0AHtuT18Ar5xrsF6aso0bglfcvc5bgYOEbEDmSdw0b9Bv5Kieq1G9Tnwuo4GiaTHuaJ+EbDcODgf8k7j3Cm+oVqhnfTM5R8ZZxBktf4g2e15cAQPbf25oO3yORqY7HyXbk7I6sbeIvJ5bdtvO/ZZjpT+TrP1AdqN8LocZSHBDxfcQCGt/f1Fx8dFc4bT8WrPTvBQZaWxH8IB4MbgCQC5rd9wft2Xb4+nXx9OKpSibDXibwsY3oAgkIiICIiAiIgqdW2Jqml8rYrEiaOtI5hHVp4Tz9uq5T0VoVYdLG7E1ptWJXCV/cBp2Df1391300TJoXxStD43tLXNPQg8iFlXy9qrRd+w/SwZfxkzuL4L9iW+N27g79t2nn3QadlL1XHUJrWQlZFWjbu9zum3jbvv4WURR5D1NzLXOa+npqo/ZrRy4vx4LiPZoP8A2T8u6r1pehdqkihjIncXwI9gXfpu55/l3TstQx9Kvj6cVSlE2GvE3hYxo5AIPStBHWrxQQMDIYmhjGDo1oGwC9ERAREQEREBERAREQEREBERAREQEREFbp3OY/UWHrZPEWYrNSwwPa6NwO246HwR0IPMFWSIgIiICIiAiIgIiIK3UWcx+ncPZyeXsxVqldhe50jgN9h0HknoAOZKIiD/2Q==",e=Object(f["a"])(t);this.formData.NewCustomerFile=e},addImageFile:function(t){var e=this,a=new FormData;return a.append("file",t),a.append("dir","clientTransformation"),this.activityLoading=!0,Object(g["m"])(a).then((function(t){var e=(null===t||void 0===t?void 0:t.data)||"";return e})).catch((function(t){e.$message.warning(t)})).finally((function(){e.activityLoading=!1}))},addData:function(){var t=this;return Object(l["a"])(Object(n["a"])().mark((function e(){var a,i,r,l,c,s,u,d,f,g,p,v,b,A,h;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.activityTitle){e.next=3;break}return t.$message.warning("请填写雷达名称"),e.abrupt("return");case 3:if(3!=t.articleValue){e.next=20;break}if(t.activityUrl){e.next=7;break}return t.$message.warning("请填写雷达链接"),e.abrupt("return");case 7:if(!t.activityUrl){e.next=12;break}if(r=/(https|http):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g,r.test(t.activityUrl)){e.next=12;break}return t.$message.warning("输入的雷达链接有误"),e.abrupt("return");case 12:if(t.linkTitle){e.next=15;break}return t.$message.warning("请输入链接标题"),e.abrupt("return");case 15:if(t.linkSummary){e.next=18;break}return t.$message.warning("请输入链接描述"),e.abrupt("return");case 18:e.next=35;break;case 20:if(t.myArticleTitle){e.next=23;break}return t.$message.warning("请新建文章素材标题"),e.abrupt("return");case 23:if(t.myArticleAuthor){e.next=26;break}return t.$message.warning("请新建文章素材作者"),e.abrupt("return");case 26:if(t.myArticleContent){e.next=29;break}return t.$message.warning("请新建文章素材内容"),e.abrupt("return");case 29:if(t.myArticleDesc){e.next=32;break}return t.$message.warning("请新建文章素材描述"),e.abrupt("return");case 32:if(t.myArticleCoverUrl||t.myArticleFile){e.next=35;break}return t.$message.warning("请新建文章素材封面"),e.abrupt("return");case 35:if(l=null===(a=t.formData)||void 0===a?void 0:a.dataSource,!t.customerLabel){e.next=43;break}if(l){e.next=40;break}return t.$message.warning("请填写次数"),e.abrupt("return",!1);case 40:if(c=null===l||void 0===l?void 0:l.every((function(e,a){if("1"===e.defaultValue){var i;if(!e.grade)return t.$message.warning("请填写次数"),!1;if((null===(i=e.selectTagList)||void 0===i?void 0:i.length)<1)return t.$message.warning("请选择标签"),!1}else if("2"===e.defaultValue){var r;if(!e.grade)return t.$message.warning("请填写分钟数"),!1;if((null===(r=e.selectTagList)||void 0===r?void 0:r.length)<1)return t.$message.warning("请选择标签"),!1}else if("3"===e.defaultValue){var n;if(!e.grade)return t.$message.warning(" 请填写人数"),!1;if((null===(n=e.selectTagList)||void 0===n?void 0:n.length)<1)return t.$message.warning("请选择标签"),!1}return!0})),c){e.next=43;break}return e.abrupt("return");case 43:if(s=null===l||void 0===l?void 0:l.map((function(e){var a,i=null===e||void 0===e||null===(a=e.selectTagList)||void 0===a?void 0:a.map((function(t){return t.bitmap||t.tagBitmap})).join(",");return{id:e.id,type:1,count:e.grade,ruleKind:{1:1,2:3,3:2}[e.defaultValue],autoMarkTagBitmaps:t.customerLabel?i:""}})),u=null===(i=t.formData)||void 0===i?void 0:i.dataSourceTwo,!t.setCustomerRatings){e.next=52;break}if(u){e.next=49;break}return t.$message.warning("请填写评分"),e.abrupt("return",!1);case 49:if(c=null===u||void 0===u?void 0:u.every((function(e,a){if("1"===e.defaultValue){if(!e.fraction)return t.$message.warning("请填写评分"),!1}else if("2"===e.defaultValue){if(!e.grade)return t.$message.warning("次数不可小于0"),!1;if(!e.fraction)return t.$message.warning("请填写评分"),!1}else if("3"===e.defaultValue){if(!e.grade)return t.$message.warning("时长不可小于0"),!1;if(!e.fraction)return t.$message.warning("请填写评分"),!1}var i;if(e.switchData&&(null===(i=e.selectTagList)||void 0===i?void 0:i.length)<1)return t.$message.warning("请选择标签"),!1;return!0})),c){e.next=52;break}return e.abrupt("return");case 52:if(d=null===u||void 0===u?void 0:u.map((function(e){var a,i=null===e||void 0===e||null===(a=e.selectTagList)||void 0===a?void 0:a.map((function(t){return t.bitmap||t.tagBitmap})).join(",");return{id:e.id,type:2,count:e.defaultValue,ruleKind:{1:0,2:1,3:4}[e.defaultValue],score:e.fraction,hasTag:e.switchData?1:0,autoMarkTagBitmaps:t.setCustomerRatings?i:""}})),f=t.defaultImage,3!=t.articleValue){e.next=64;break}if(t.defaultImage===t.changeImage){e.next=62;break}return e.next=58,t.addImageFile(t.formData.NewCustomerFile);case 58:if(f=e.sent,f){e.next=62;break}return t.$message.warning("未获取到图片链接"),e.abrupt("return");case 62:e.next=74;break;case 64:if(!t.myArticleFile){e.next=73;break}return e.next=67,t.addImageFile(t.myArticleFile);case 67:if(f=e.sent,f){e.next=71;break}return t.$message.warning("未获取到图片链接"),e.abrupt("return");case 71:e.next=74;break;case 73:f=t.myArticleCoverUrl;case 74:g={radarName:t.activityTitle,type:t.articleValue,businessCard:void 0===t.businessCard||t.businessCard?1:0,author:3==t.articleValue?"":t.myArticleAuthor,content:3==t.articleValue?"":t.myArticleContent,channelId:"",isRadar:"",link:3==t.articleValue?t.activityUrl:null,title:3==t.articleValue?t.linkTitle:t.myArticleTitle,desc:3==t.articleValue?t.linkSummary:t.myArticleDesc,coverUrl:f,behaviorNotify:void 0===t.actionNotice||t.actionNotice?1:0,activityNotify:void 0===t.dynamicNotification||t.dynamicNotification?1:0,hasCustomerTag:t.customerLabel?1:0,tagRule:t.customerLabel?s:[],scoreRule:t.setCustomerRatings?d:[]},p=new FormData,v=Object.keys(g),null===v||void 0===v||v.map((function(t){"object"===Object(o["a"])(g[t])?p.append(t,JSON.stringify(g[t])):p.append(t,g[t])})),t.activityLoading=!0,"add"===t.$route.query.state?Object(m["f"])(p).then((function(e){0===(null===e||void 0===e?void 0:e.statusCode)?(t.$message.success("雷达创建成功"),t.articleGoBack()):t.$message.warning(null===e||void 0===e?void 0:e.msg)})).catch((function(e){t.$message.warning(e)})).finally((function(){t.activityLoading=!1})):"edit"===t.$route.query.state&&(g=Object.assign(t.paramDict,g),b=new FormData,A=Object.keys(g),h=["createTime","creatorName","creatorId","scoreRules","tagRules","autoMarkTagNames","errMsg","isShowSenderInfo","fileId","fileName","fileSize","fileType","fileUrl"],null===A||void 0===A||A.map((function(t){-1!==h.indexOf(t)||("object"===Object(o["a"])(g[t])?b.append(t,JSON.stringify(g[t])):b.append(t,g[t]))})),Object(m["k"])(b).then((function(e){0===(null===e||void 0===e?void 0:e.statusCode)?(t.$message.success("雷达修改成功"),t.articleGoBack()):t.$message.warning(null===e||void 0===e?void 0:e.msg)})).catch((function(e){t.$message.warning(e)})).finally((function(){t.activityLoading=!1})));case 80:case"end":return e.stop()}}),e)})))()}}},v=p,b=(a("7e0d"),a("2877")),A=Object(b["a"])(v,i,r,!1,null,"a29f56b0",null);e["default"]=A.exports},cf5f:function(t,e,a){"use strict";a.d(e,"k",(function(){return n})),a.d(e,"r",(function(){return o})),a.d(e,"l",(function(){return l})),a.d(e,"m",(function(){return c})),a.d(e,"a",(function(){return s})),a.d(e,"e",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"p",(function(){return m})),a.d(e,"q",(function(){return f})),a.d(e,"u",(function(){return g})),a.d(e,"v",(function(){return p})),a.d(e,"x",(function(){return v})),a.d(e,"t",(function(){return b})),a.d(e,"o",(function(){return A})),a.d(e,"g",(function(){return h})),a.d(e,"b",(function(){return y})),a.d(e,"h",(function(){return w})),a.d(e,"s",(function(){return S})),a.d(e,"c",(function(){return T})),a.d(e,"n",(function(){return C})),a.d(e,"f",(function(){return x})),a.d(e,"w",(function(){return k})),a.d(e,"j",(function(){return D})),a.d(e,"y",(function(){return L})),a.d(e,"d",(function(){return j}));var i=a("b775"),r={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function n(t){return Object(i["b"])({url:r.getLastSyncTime,method:"get",params:t})}function o(t){return Object(i["b"])({url:r.syncUpdate,method:"get",params:t})}function l(t){return Object(i["b"])({url:r.getOfficialAccount,method:"get",params:t})}function c(t){return Object(i["b"])({url:r.interactiveRadarUploadFile,method:"post",data:t})}function s(t){return Object(i["b"])({url:r.addSersonSop,method:"post",data:t})}function u(t){return Object(i["b"])({url:r.delGroupSop,method:"post",params:t})}function d(t){return Object(i["b"])({url:r.detailPersonSop,method:"get",params:t})}function m(t){return Object(i["b"])({url:r.pagePersonSop,method:"get",params:t})}function f(t){return Object(i["b"])({url:r.setPersonSopStaff,method:"post",data:t})}function g(t){return Object(i["b"])({url:r.updatePersonSop,method:"post",data:t})}function p(t){return Object(i["b"])({url:r.updateStatus,method:"post",params:t})}function v(t){return Object(i["b"])({url:r.upload,method:"post",data:t})}function b(t){return Object(i["b"])({url:r.update,method:"post",data:t})}function A(t){return Object(i["b"])({url:r.materialList,method:"get",params:t})}function h(t){return Object(i["b"])({url:r.deleteMaterial,method:"get",params:t})}function y(t){return Object(i["b"])({url:r.addTag,method:"post",data:t})}function w(t){return Object(i["b"])({url:r.deleteTag,method:"get",params:t})}function S(t){return Object(i["b"])({url:r.tagList,method:"get",params:t})}function T(t){return Object(i["b"])({url:r.addWelcome,method:"post",data:t})}function C(t){return Object(i["b"])({url:r.listWelcome,method:"get",params:t})}function x(t){return Object(i["b"])({url:r.delWelcome,method:"post",params:t})}function k(t){return Object(i["b"])({url:r.updateWelcome,method:"post",data:t})}function D(t){return Object(i["b"])({url:r.detailWelcome,method:"get",params:t})}function L(t){return Object(i["b"])({url:r.uploadMedia,method:"post",data:t})}function j(t){return Object(i["b"])({url:r.channelCodeUploadFile,method:"post",data:t})}}}]);