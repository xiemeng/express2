(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e1e58aa"],{"0348":function(t,e,a){},"0972":function(t,e,a){},"0a18":function(t,e,a){"use strict";a("0972")},"0ed9":function(t,e,a){},1367:function(t,e,a){},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("d3b7");function n(t,e,a,n,i,r,o){try{var s=t[r](o),c=s.value}catch(l){return void a(l)}s.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,a=arguments;return new Promise((function(i,r){var o=t.apply(e,a);function s(t){n(o,i,r,s,c,"next",t)}function c(t){n(o,i,r,s,c,"throw",t)}s(void 0)}))}}},"1dce":function(t,e,a){"use strict";a("f422")},2880:function(t,e,a){"use strict";a("592d")},"299d":function(t,e,a){},"2a86":function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),t.tipText?e("span",{attrs:{name:"tip"}},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" "+t._s(t.tipText)+" ")],1)]):t._e(),t._t("default"),t.footer?e("div",{staticClass:"foot-button"},[e("div",{staticClass:"left"},[t._t("bottomLeft")],2),e("a-space",{attrs:{size:12}},[t._t("footer"),e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v(t._s(t.cancleText))]),e("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("serviceOk")}}},[t._v(t._s(t.okText))])],2)],1):t._e()],2)},i=[],r={name:"CommonModal",props:{title:{type:String,default:"标题"},cancleText:{type:String,default:"取消"},okText:{type:String,default:"确定"},tipText:{type:[String,Boolean],default:!1},footer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}}},o=r,s=(a("2880"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,"c55b780c",null);e["a"]=c.exports},"2bf4":function(t,e,a){"use strict";var n=a("2909"),i=a("5530"),r=(a("d3b7"),a("d81d"),a("3ca3"),a("ddb0"),a("9911"),a("a15b"),a("a9e3"),a("d885")),o=a("cf5f");e["a"]={methods:{addAccessory:function(t){this.attachments=t},uploadMedia:function(t){var e=this,a=t||this.attachments;return new Promise((function(t,n){var i=(null===a||void 0===a?void 0:a.map((function(t){return new Promise((function(a,n){if("link"===t.type)e.interactiveRadarAdd(t).then((function(t){a(t)}));else if("img"===t.type&&t.pic_url.file){var i=new FormData;i.append("file",t.pic_url.file),i.append("dir","clientTransformation"),i.append("type","image"),Object(o["y"])(i).then((function(e){t.pic_url.fileUrl=e.data.fileUrl,t.pic_url.mediaId=e.data.mediaId,a(e.data)}))}else a()}))})))||[];Promise.all(i).then((function(e){t()})).catch((function(t){e.$message.error(t||t.message),e.loading=!1,n(t)}))}))},channelCodeUploadFileFun:function(t){var e=this,a=t||this.attachments;return new Promise((function(t,n){var i=(null===a||void 0===a?void 0:a.map((function(t){return new Promise((function(a,n){if("link"===t.type)e.interactiveRadarAdd(t).then((function(t){a(t)}));else if("img"===t.type&&t.pic_url.file){var i=new FormData;i.append("file",t.pic_url.file),Object(o["d"])(i).then((function(e){t.pic_url.fileUrl=e.data.fileUrl,t.pic_url.mediaId=e.data.mediaId,a(e.data)}))}else a()}))})))||[];Promise.all(i).then((function(e){t()})).catch((function(t){e.$message.error(t||t.message),e.loading=!1,n(t)}))}))},getAttachments:function(t){var e=t||this.attachments;return null===e||void 0===e?void 0:e.map((function(t){if("img"===t.type)return{msgtype:"image",image:{media_id:t.pic_url.mediaId,pic_url:t.pic_url.fileUrl||t.pic_url.compress,title:t.title}};if("link"===t.type){var e="normal_link";t.linktype?e=t.linktype:t.radarId&&(e="radar_link");var a=t.radarId||t.formId||t.id;return a&&(a=String(a)),{msgtype:"link",link:{title:t.linkTitle,picurl:t.picurl||t.coverUrl.compress,desc:t.desc,url:t.url||t.link||t.activityLink,radarId:a,type:e}}}}))},interactiveRadarAdd:function(t){var e=this;return new Promise((function(a,n){e.getParamsLink(t).then((function(e){t.isRadar&&t.randerIsEdit?Object(r["f"])(e).then((function(e){t.radarId=e.data.radarId,t.url=e.data.radarLink+t.source,a(e)})).catch((function(t){n(t)})):a()}))}))},getParamsLink:function(t){return new Promise((function(e,a){var n=new FormData,i=t.isCustomerTag?[{autoMarkTagBitmaps:t.selectCustomerTagList.map((function(t){return t.bitmap})).join(",")}]:[];if(n.append("type",1),n.append("radarName",t.linkTitle),n.append("link",t.url),n.append("activityNotify",Number(t.activityNotify)),n.append("behaviorNotify",Number(t.behaviorNotify)),n.append("tagRule",JSON.stringify(i)),n.append("title",t.radarTitle),n.append("desc",t.desc),n.append("hasCustomerTag",Number(t.isCustomerTag)),t.isScoreRule){var r=JSON.stringify(t.ruleDetails.map((function(t){var e,a;return{autoMarkTagBitmaps:null===(e=t.selectTagList)||void 0===e||null===(a=e.map((function(t){return t.bitmap})))||void 0===a?void 0:a.join(","),hasTag:Number(t.hasTag),score:t.score,ruleKind:t.ruleKind,count:t.count||0}})));n.append("scoreRule",r)}if(t.coverUrl.file){var s=new FormData;s.append("file",t.coverUrl.file),s.append("dir","clientTransformation"),Object(o["m"])(s).then((function(a){n.append("coverUrl",a.data),t.picurl=a.data,e(n)})).catch((function(t){a(t)}))}else e(n)}))},attachmentsDetail:function(t){return null===t||void 0===t?void 0:t.map((function(t){var e,a,n,r,o,s="",c="",l="",u="",d={};("image"===t.msgtype&&(s="图文",c="visibileAddImg",u="img",l={compress:t.image.pic_url}),"link"===t.msgtype)&&(u="link",t.linktype=t.link.type,"radar_link"!==t.linktype&&"normal_link"!==t.linktype||(c="visibileAddLink",s="链接"),"form_link"===t.linktype&&(c="visibileForm",s="自定义表单"),"luck_link"===t.linktype&&(c="visibileLuckDraw",s="抽奖活动"),d={compress:t.link.picurl},t.linkTitle=t.link.title,t.desc=t.link.desc,t.url=t.link.url,t.link.interactRadar&&(t.isRadar=!0,t.behaviorNotify=Boolean(t.link.interactRadar.behaviorNotify),t.activityNotify=Boolean(t.link.interactRadar.activityNotify),t.isCustomerTag=(null===(e=t.link.interactRadar.tagRules)||void 0===e?void 0:e.length)>0,t.radarId=null===(a=t.link.interactRadar)||void 0===a?void 0:a.radarId,t.radarTitle=t.link.title,t.selectCustomerTagList=null===(n=t.link.interactRadar.tagRules[0])||void 0===n||null===(r=n.customerTags)||void 0===r?void 0:r.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{key:t.tagId})})),t.isScoreRule=(null===(o=t.link.interactRadar.scoreRules)||void 0===o?void 0:o.length)>0,t.ruleDetails=t.link.interactRadar.scoreRules.map((function(t){var e;return Object(i["a"])(Object(i["a"])({},t),{},{autoMarkTagBitmaps:t.autoMarkTagBitmaps,selectTagList:null===(e=t.customerTags)||void 0===e?void 0:e.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{key:t.tagId})})),hasTag:Boolean(t.hasTag),score:t.score,ruleKind:t.ruleKind,count:t.count})}))));return Object(i["a"])(Object(i["a"])({},t),{},{key:c,pic_url:l,type:u,coverUrl:d,typeText:s})}))}},computed:{state:function(){return this.$route.query.state},isAddText:function(){return"add"===this.$route.query.state?"新建":"修改"},textList:function(){var t=[];return this.messageOne&&t.push(this.messageOne),this.attachments&&t.push.apply(t,Object(n["a"])(this.attachments)),t}}}},3373:function(t,e,a){"use strict";a("8d2c")},"592d":function(t,e,a){},"5d57":function(t,e,a){"use strict";a("0ed9")},"653d":function(t,e,a){"use strict";a("f872")},"6b80":function(t,e,a){"use strict";a("95a1")},"6ed5":function(t,e,a){"use strict";a("1367")},"812e":function(t,e,a){"use strict";a("ccf9")},"8d2c":function(t,e,a){},"8e34":function(t,e,a){"use strict";a("299d")},9437:function(t,e,a){},"95a1":function(t,e,a){},c7eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("b636"),a("944a"),a("0c47"),a("23dc"),a("3410"),a("159b"),a("b0c0"),a("131a"),a("fb6a");var n=a("53ca");function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,r=Object.defineProperty||function(t,e,a){t[e]=a.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(j){u=function(t,e,a){return t[e]=a}}function d(t,e,a,n){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),s=new I(n||[]);return r(o,"_invoke",{value:L(t,a,s)}),o}function f(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(j){return{type:"throw",arg:j}}}t.wrap=d;var p={};function m(){}function h(){}function v(){}var g={};u(g,s,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(S([])));y&&y!==e&&a.call(y,s)&&(g=y);var _=v.prototype=m.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function i(r,o,s,c){var l=f(t[r],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Object(n["a"])(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,s,c)}),(function(t){i("throw",t,s,c)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return i("throw",t,s,c)}))}c(l.arg)}var o;r(this,"_invoke",{value:function(t,a){function n(){return new e((function(e,n){i(t,a,e,n)}))}return o=o?o.then(n,n):n()}})}function L(t,e,a){var n="suspendedStart";return function(i,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw r;return T()}for(a.method=i,a.arg=r;;){var o=a.delegate;if(o){var s=x(o,a);if(s){if(s===p)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var c=f(t,e,a);if("normal"===c.type){if(n=a.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n="completed",a.method="throw",a.arg=c.arg)}}}function x(t,e){var a=e.method,n=t.iterator[a];if(void 0===n)return e.delegate=null,"throw"===a&&t.iterator["return"]&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==a&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+a+"' method")),p;var i=f(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function S(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:h,configurable:!0}),h.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},k(C.prototype),u(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,a,n,i,r){void 0===r&&(r=Promise);var o=new C(d(e,a,n,i),r);return t.isGeneratorFunction(a)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(_),u(_,l,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),a=[];for(var n in e)a.push(n);return a.reverse(),function t(){for(;a.length;){var n=a.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(a,n){return o.type="throw",o.arg=t,e.next=a,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),O(a),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var i=n.arg;O(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:S(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=void 0),p}},t}},ccf9:function(t,e,a){},cf5f:function(t,e,a){"use strict";a.d(e,"k",(function(){return r})),a.d(e,"r",(function(){return o})),a.d(e,"l",(function(){return s})),a.d(e,"m",(function(){return c})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"p",(function(){return f})),a.d(e,"q",(function(){return p})),a.d(e,"u",(function(){return m})),a.d(e,"v",(function(){return h})),a.d(e,"x",(function(){return v})),a.d(e,"t",(function(){return g})),a.d(e,"o",(function(){return b})),a.d(e,"g",(function(){return y})),a.d(e,"b",(function(){return _})),a.d(e,"h",(function(){return k})),a.d(e,"s",(function(){return C})),a.d(e,"c",(function(){return L})),a.d(e,"n",(function(){return x})),a.d(e,"f",(function(){return w})),a.d(e,"w",(function(){return O})),a.d(e,"j",(function(){return I})),a.d(e,"y",(function(){return S})),a.d(e,"d",(function(){return T}));var n=a("b775"),i={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function r(t){return Object(n["b"])({url:i.getLastSyncTime,method:"get",params:t})}function o(t){return Object(n["b"])({url:i.syncUpdate,method:"get",params:t})}function s(t){return Object(n["b"])({url:i.getOfficialAccount,method:"get",params:t})}function c(t){return Object(n["b"])({url:i.interactiveRadarUploadFile,method:"post",data:t})}function l(t){return Object(n["b"])({url:i.addSersonSop,method:"post",data:t})}function u(t){return Object(n["b"])({url:i.delGroupSop,method:"post",params:t})}function d(t){return Object(n["b"])({url:i.detailPersonSop,method:"get",params:t})}function f(t){return Object(n["b"])({url:i.pagePersonSop,method:"get",params:t})}function p(t){return Object(n["b"])({url:i.setPersonSopStaff,method:"post",data:t})}function m(t){return Object(n["b"])({url:i.updatePersonSop,method:"post",data:t})}function h(t){return Object(n["b"])({url:i.updateStatus,method:"post",params:t})}function v(t){return Object(n["b"])({url:i.upload,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.update,method:"post",data:t})}function b(t){return Object(n["b"])({url:i.materialList,method:"get",params:t})}function y(t){return Object(n["b"])({url:i.deleteMaterial,method:"get",params:t})}function _(t){return Object(n["b"])({url:i.addTag,method:"post",data:t})}function k(t){return Object(n["b"])({url:i.deleteTag,method:"get",params:t})}function C(t){return Object(n["b"])({url:i.tagList,method:"get",params:t})}function L(t){return Object(n["b"])({url:i.addWelcome,method:"post",data:t})}function x(t){return Object(n["b"])({url:i.listWelcome,method:"get",params:t})}function w(t){return Object(n["b"])({url:i.delWelcome,method:"post",params:t})}function O(t){return Object(n["b"])({url:i.updateWelcome,method:"post",data:t})}function I(t){return Object(n["b"])({url:i.detailWelcome,method:"get",params:t})}function S(t){return Object(n["b"])({url:i.uploadMedia,method:"post",data:t})}function T(t){return Object(n["b"])({url:i.channelCodeUploadFile,method:"post",data:t})}},d885:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"n",(function(){return c})),a.d(e,"o",(function(){return l})),a.d(e,"m",(function(){return u})),a.d(e,"l",(function(){return d})),a.d(e,"d",(function(){return f})),a.d(e,"a",(function(){return p})),a.d(e,"j",(function(){return m})),a.d(e,"h",(function(){return h})),a.d(e,"k",(function(){return v})),a.d(e,"g",(function(){return g})),a.d(e,"f",(function(){return b})),a.d(e,"i",(function(){return y}));var n=a("b775"),i={interactiveRadarAdd:"/client_transformation/interactradar/add",interactiveRadarList:"/client_transformation/interactradar/list",interactiveRadarDelete:"/client_transformation/interactradar/delete",interactiveRadarupdate:"/client_transformation/interactradar/update",interactiveRadarInfo:"/client_transformation/interactradar/info",interactiveRadarSave:"/client_transformation/interactradar/channel/save",channelLinks:"/client_transformation/interactradar/getChannelLinks",generateChannelLink:"/client_transformation/interactradar/generateChannelLink",interactradarList:"/client_transformation/interactradar/channel/list",interactradarUpdate:"/client_transformation/interactradar/channel/update",statisticOverview:"/client_transformation/interactradar/statisticOverview",statisticDetail:"/client_transformation/interactradar/statisticDetail",customerLog:"/client_transformation/interactradar/customerLog",getCustomerLogDetail:"/client_transformation/interactradar/customerLogDetail",channelLog:"/client_transformation/interactradar/channelLog"};function r(t){return Object(n["b"])({url:i.channelLog,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.getCustomerLogDetail,method:"get",params:t})}function s(t){return Object(n["b"])({url:i.customerLog,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.statisticDetail,method:"get",params:t})}function l(t){return Object(n["b"])({url:i.statisticOverview,method:"get",params:t})}function u(t){return Object(n["b"])({url:i.interactradarUpdate,method:"post",data:t})}function d(t){return Object(n["b"])({url:i.interactradarList,method:"get",params:t})}function f(t){return Object(n["b"])({url:i.generateChannelLink,method:"get",params:t})}function p(t){return Object(n["b"])({url:i.channelLinks,method:"get",params:t})}function m(t){return Object(n["b"])({url:i.interactiveRadarSave,method:"post",data:t})}function h(t){return Object(n["b"])({url:i.interactiveRadarInfo+"/"+t,method:"get"})}function v(t){return Object(n["b"])({url:i.interactiveRadarupdate,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.interactiveRadarDelete,method:"post",data:t})}function b(t){return Object(n["b"])({url:i.interactiveRadarAdd,method:"post",data:t})}function y(t){return Object(n["b"])({url:i.interactiveRadarList,method:"post",data:t})}},e2e5:function(t,e,a){"use strict";a("9437")},e6b1:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-model"},[e("img",{staticClass:"bg",attrs:{src:"/imgs/chatBg.png"}}),e("div",{staticClass:"contant"},[e("p",{staticClass:"time"},[t._v(t._s(t.time))]),t.textList.length>0?e("ul",t._l(t.textList,(function(a,n){return e("li",{key:n,staticClass:"contant-list"},["img"===a.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[e("img",{staticClass:"upload-img",attrs:{src:a.pic_url.compress}})])]:t._e(),"link"===a.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-title"},[e("a-tooltip",{attrs:{title:a.linkTitle}},[e("p",{staticClass:"contant-subtitle"},[t._v(t._s(a.linkTitle))])]),e("div",{staticClass:"contant-contant"},[a.desc?e("a-tooltip",{attrs:{title:a.desc}},[e("span",[t._v(t._s(a.desc))])]):t._e(),e("a-avatar",{attrs:{src:a.coverUrl.compress,size:32,shape:"square"}})],1)],1)]:t._e(),a.type?t._e():[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[t._v(t._s(a))])]],2)})),0):t._e()])])},i=[],r={name:"PhoneModel",data:function(){return{time:this.$moment().format("HH:mm")}},props:{textList:{type:[Array],default:function(){return[]}}},watch:{textList:function(){}}},o=r,s=(a("8e34"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,"1aa7a172",null);e["a"]=c.exports},f422:function(t,e,a){},f647:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("a-tabs",{attrs:{"default-active-key":"1"}},[e("a-tab-pane",{key:"1",attrs:{tab:"渠道列表"}},[e("ChannelList",{on:{getCodeItem:t.getCodeItem},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}})],1),t.isShow?e("a-tab-pane",{key:"2",attrs:{tab:"数据详情"}},[e("DataDetail",{attrs:{codeItem:t.codeItem}})],1):t._e()],1)],1)},i=[],r=a("ade3"),o=(a("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"channel-list"},[e("a-row",{staticClass:"search-hurdle",attrs:{type:"flex",justify:"space-between"}},[e("a-col",[e("a-space",{attrs:{size:12}},[e("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$router.push({name:"NewCode",query:{state:"add"}})}}},[t._v(" 新建活码 ")]),e("a-button",{staticClass:"aks-border-but",attrs:{size:"large"},on:{click:function(e){return t.$router.push({name:"NewCode",query:{state:"batchAdd"}})}}},[t._v(" 批量创建活码 ")]),e("a-button",{staticClass:"aks-border-but",attrs:{size:"large",loading:t.grouploading},on:{click:t.batchGroup}},[t._v("批量分组")]),e("a-button",{staticClass:"aks-border-but",attrs:{size:"large",loading:t.downloading},on:{click:t.batchDrown}},[t._v("批量下载")])],1)],1),e("a-col",[e("a-space",{attrs:{size:18}},[e("span",[t._v("筛选时间:")]),e("a-range-picker",{attrs:{value:t.showAddDateTime,"disabled-date":t.disabledDate},on:{change:t.changeAddDate}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1),e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入活码名称"},on:{search:t.searchName},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)],1),e("section",{staticClass:"main"},[e("aside",{staticClass:"aside background-white"},[e("Grouping",{attrs:{groupList:t.groupList},on:{changeSpeechGroupId:t.changeSpeechGroupId,addGroup:t.speechGroup,delGroup:t.delGroup}})],1),e("a-table",{staticClass:"table",staticStyle:{background:"#fff"},attrs:{"row-selection":t.rowSelection,"data-source":t.channelList,columns:t.columns,pagination:t.pagination},on:{change:t.change},scopedSlots:t._u([{key:"qrCode",fn:function(a,n,i){return e("img",{staticClass:"qr-code",attrs:{index:i,src:n.urlCode||"",alt:"二维码"},on:{click:function(e){return t.openCodeDetail(n.id)}}})}},{key:"useMember",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}]},t._l(a,(function(a){return e("a-tag",{key:a.id,class:[Object(r["a"])({parency:a.staffAddLimit==a.todayAddNum},"parency",0===a.onlineStatus)]},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(t._s(a.staffName)+" ")],1)})),1):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"backupUserList",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}]},t._l(a,(function(a){return e("a-tag",{key:a.id},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(t._s(a.staffName)+" ")],1)})),1):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"tagNameList",fn:function(a){return e("div",{staticClass:"tag-name-list"},[a.length>0&&Array.isArray(a)?e("div",{class:[{mheight:a.length>=4}]},t._l(a,(function(a,n){return e("a-tag",{key:n,staticStyle:{"margin-right":"3px"}},[t._v(" "+t._s(a.tagName)+" ")])})),1):e("div",[t._v("-")]),a.length>=4&&Array.isArray(a)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"operation",fn:function(a,n,i){return e("div",{attrs:{index:i}},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.routerLink(n.id,n.name)}}},[t._v("数据统计")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.openCodeDetail(n.id)}}},[t._v("详情")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.download(n.qrCode,n.name)}}},[t._v("下载")]),e("a-dropdown",[e("a-button",{attrs:{type:"link"}},[t._v(" 编辑 "),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},on:{click:t.handleMenuClick},slot:"overlay"},[e("a-menu-item",{key:"1",on:{click:function(e){return t.$router.push({name:"NewCode",query:{id:n.id,state:"edit"}})}}},[t._v(" 修改 ")]),e("a-menu-item",{key:"2",on:{click:function(e){return t.$router.push({name:"NewCode",query:{id:n.id,state:"copy"}})}}},[t._v(" 复制 ")]),e("a-menu-item",{key:"3",on:{click:function(e){return t.deleteList(n.id)}}},[t._v(" 删除 ")])],1)],1)],1)}}])},[e("div",{attrs:{slot:"addNumTitle"},slot:"addNumTitle"},[t._v(" 添加扫码次数 "),e("a-tooltip",{attrs:{title:"统计添加渠道码的人次，若客户重复添加将会记录多条数据"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])],1),e("a-modal",{attrs:{visible:t.visibleCodeTetail,footer:null,width:"700px"},on:{cancel:function(e){t.visibleCodeTetail=!1}}},[e("CodeDetail",{attrs:{detailInfo:t.detailInfo}})],1),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("BatchGroup",{on:{cancle:function(e){t.visible=!1},serviceOk:t.serviceOk}})],1)],1)}),s=[],c=a("2909"),l=(a("c740"),a("a434"),a("d81d"),a("d3b7"),a("a15b"),a("99af"),a("159b"),a("caad"),a("2532"),function(){var t=this,e=t._self._c;return e("div",[e("h4",[t._v("活码详情")]),e("section",{staticClass:"section"},[e("a-space",{staticClass:"section-left",attrs:{direction:"vertical",align:"center",size:16}},[e("img",{staticClass:"qr-code",attrs:{src:t.info.urlCode||"",alt:"二维码"}}),e("p",[t._v(t._s(t.info.nameList[0]))]),e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.download(t.info.urlCode,t.info.nameList[0])}}},[t._v("下载活码")]),e("a-button",{on:{click:function(e){return t.$router.push({name:"NewCode",query:{id:t.info.id,state:"edit"}})}}},[t._v("修改")])],1),e("a-space",{staticClass:"section-right",attrs:{direction:"vertical",size:16}},[e("h6",[t._v("基本设置")]),e("p",[t._v(" 创建时间："),e("span",{staticClass:"bark-color"},[t._v(t._s(t.info.createTime))])]),e("div",[e("p",{staticStyle:{"margin-bottom":"15px"}},[t._v(" 上线成员: "),t.info.useMember.length>0?e("span",t._l(t.info.useMember,(function(a,n){return e("a-tag",{directives:[{name:"show",rawName:"v-show",value:"1"==a.onlineStatus,expression:"item.onlineStatus == '1'"}],key:n,staticClass:"bark-color"},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(" "+t._s(a.staffName)+" ")],1)})),1):e("span",{staticClass:"bark-color"},[t._v("-")])]),e("p",[t._v(" 下线成员: "),t.info.useMember&&t.info.useMember.length>0?e("span",t._l(t.info.useMember,(function(a,n){return e("a-tag",{directives:[{name:"show",rawName:"v-show",value:"0"==a.onlineStatus,expression:"item.onlineStatus == '0'"}],key:n,staticClass:"bark-color"},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(" "+t._s(a.staffName)+" ")],1)})),1):e("span",{staticClass:"bark-color"},[t._v("-")])])]),e("p",[t._v(" 员工添加上限："),e("span",{staticClass:"bark-color"},[t._v(t._s(t.info.openStaffAddLimit?"已开启":"已关闭"))])]),e("p",[t._v(" 允许员工上下线："),e("span",{staticClass:"bark-color"},[t._v(t._s(1===t.info.allowStaffOffline?"已开启":"已关闭"))])]),t.info.openStaffAddLimit?e("div",{staticClass:"user-limit-box"},[e("div",{staticClass:"limit-box-header"},[e("div",{staticClass:"left-desc"},[t._v("共"+t._s(t.info.user.length)+"个员工")]),e("div",{staticClass:"right-desc"},[e("div",{staticClass:"brief"},[t._v("今日添加客户数")]),e("div",{staticClass:"brief"},[t._v("每日添加客户上限")])])]),e("ul",{staticClass:"limit-box-content"},t._l(t.info.user,(function(a,n){return e("li",{key:n,staticClass:"limit-content"},[e("div",{staticClass:"left-desc"},[e("img",{attrs:{src:a.staffAvatar}}),e("span",[t._v(t._s(a.staffName))])]),e("div",{staticClass:"right-desc"},[e("div",[t._v(t._s(a.todayAddNum||0))]),e("div",[t._v(t._s(a.staffAddLimit))])])])})),0)]):t._e(),t.info.backupUser?e("p",[t._v(" 备用成员: "),t.info.backupUser.length>0?e("span",t._l(t.info.backupUser,(function(a,n){return e("a-tag",{key:n,staticClass:"bark-color"},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(" "+t._s(a.staffName)+" ")],1)})),1):e("span",{staticClass:"bark-color"},[t._v("-")])]):t._e(),e("p",{directives:[{name:"show",rawName:"v-show",value:t.info.autoPassFriend,expression:"info.autoPassFriend"}]},[t._v(" 自动通过好友: "),e("span",{staticClass:"bark-color"},[t._v(" "+t._s(t.info.allDayOpen?"全天开启":"".concat(t.info.openStartTime,"-").concat(t.info.openEndTime,"自动通过"))+" ")])]),t.info.tagList.length>0?e("p",[t._v(" 客户标签："),t._l(t.info.tagList,(function(a,n){return e("a-tag",{key:n},[t._v(t._s(a.tagName))])}))],2):t._e(),e("h6",[t._v("欢迎语设置")]),t.info.message?e("div",[t._v(" 渠道码欢迎语： "),e("div",{staticClass:"welcome-words-content"},[e("div",[t._v("欢迎语1:"),e("span",{staticClass:"allwelcome",on:{click:function(e){return t.seeView(t.info.message)}}},[t._v("查看全部")])])])]):t._e(),t.info.welcomeSpanList?e("div",[t._v(" 分时段欢迎语： "),t._l(t.info.welcomeSpanList,(function(a,n){return e("div",{key:n,staticClass:"welcome-words-content"},[e("div",{staticClass:"detail-item-title"},[e("span",{staticClass:"item-title divide"},[t._v("时段"+t._s(n+1)+"：")]),e("div",{staticClass:"time-wrap"},[e("div",{staticClass:"weeks"},[t._l(a.weekDay.split(","),(function(a,n){return e("div",{key:n,staticClass:"week"},[t._v(t._s(t.weekDayTxt(a)))])})),e("span",{staticClass:"time"},[t._v(t._s(a.spanStartTime)+"～"+t._s(a.spanEndTime))])],2)])]),e("div",{staticClass:"detail-item-title"},[e("span",{staticClass:"item-title"},[t._v("欢迎语：")]),e("div",{staticStyle:{color:"#1890FF",cursor:"pointer"},on:{click:function(e){return t.seeView(a)}}},[t._v("查看全部")])])])}))],2):t._e()])],1),e("a-modal",{attrs:{footer:null,centered:"",width:"410px"},model:{value:t.phoneBox,callback:function(e){t.phoneBox=e},expression:"phoneBox"}},[e("PhoneModel",{attrs:{textList:t.textList}})],1)],1)}),u=[],d=(a("ac1f"),a("5319"),a("e6b1")),f=a("ca00"),p=a("2bf4"),m={name:"CodeDetail",mixins:[p["a"]],props:{detailInfo:{type:Object,default:function(){}}},components:{PhoneModel:d["a"]},data:function(){return{info:this.detailInfo,phoneBox:!1,innerText:"",attachments:[],defaultImg:"/imgs/qr-preview.png"}},computed:{textList:function(){var t,e=[];return this.innerText&&e.push(this.innerText.replace(/<span class="nick-name">/g," ").replace(/<\/span>/g," ")),(null===(t=this.attachments)||void 0===t?void 0:t.length)>0&&e.push.apply(e,Object(c["a"])(this.attachments)),e}},methods:{weekDayTxt:function(t){return"1"==t?"周一":"2"==t?"周二":"3"==t?"周三":"4"==t?"周四":"5"==t?"周五":"6"==t?"周六":"7"==t?"周日":void 0},seeView:function(t){if(t.message&&(t=t.message),t){var e,a=JSON.parse(t);this.attachments=this.attachmentsDetail(null===a||void 0===a?void 0:a.attachments),null!==a&&void 0!==a&&null!==(e=a.text)&&void 0!==e&&e.content&&(this.innerText=a.text.content.replace(/#客户昵称#​*/g,'<span class="nick-name">客户昵称</span>')),this.phoneBox=!0}},download:function(t,e){var a=this;t?Object(f["d"])(t,e).catch((function(t){a.$message.error(t)})):this.$message.warning("二维码路径错误")}},watch:{detailInfo:{handler:function(t,e){this.info=t}}}},h=m,v=(a("fc2a"),a("2877")),g=Object(v["a"])(h,l,u,!1,null,"c60f345a",null),b=g.exports,y=a("032e"),_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"grouping"},[e("div",{staticClass:"plus-botton",on:{click:t.plusGroup}},[e("a-space",{attrs:{size:4}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加分组 ")],1)],1),e("a-menu",{staticClass:"group-list",attrs:{mode:"inline"},on:{click:t.handleClick},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}},t._l(t.groupList,(function(a,n){return e("a-menu-item",{key:a.id,on:{mouseenter:function(e){return t.mouseenter(n)},mouseleave:function(e){return t.mouseleave(n)}}},[t._v(" "+t._s(a.group_name)+"（"+t._s(t.defaultNum(a.codeCount,n))+"） "),e("div",{directives:[{name:"show",rawName:"v-show",value:0!==n&&t.selectIndex===n&&1!==a.id,expression:"index !== 0 && selectIndex === index && item.id !== 1"}]},[e("a-icon",{attrs:{type:"edit"},on:{click:function(e){return e.stopPropagation(),t.editGroup(a)}}}),1!==a.isDefault&&t.defaultNum(a.codeCount,n)<=0?e("a-icon",{attrs:{type:"delete"},on:{click:function(e){return e.stopPropagation(),t.deleteGroup(a)}}}):t._e()],1)])})),1),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("BuildGroup",{attrs:{state:t.state,detailData:t.detailData},on:{cancle:function(e){t.visible=!1},serviceOk:t.serviceOk}})],1)],1)},k=[],C=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.stateText)+"分组")]),e("section",{staticClass:"section"},[e("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":{span:4},"wrapper-col":{span:18},labelAlign:"right"}},[e("a-form-model-item",{attrs:{label:"分组名称",prop:"groupName"}},[e("a-input",{attrs:{maxLength:10,placeholder:"请输入分组名称",disabled:1===t.detailData.isDefault},model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1)],1),e("div",{staticClass:"foot-button"},[e("a-space",{attrs:{size:12}},[e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("修改")])],1)],1)])},L=[],x=a("c7eb"),w=a("1da1"),O={name:"BuildGroup",props:{detailData:{type:[Object],default:function(){return{}}},state:{type:[String],default:"add"}},data:function(){return{selectList:[],form:{groupName:""},rules:{groupName:[{required:!0,message:"请填写分组名称"}]}}},computed:{speechGroupId:function(){return this.detailData.id},stateText:function(){return"add"===this.state?"新建":"修改"}},created:function(){var t;(null===(t=this.detailData)||void 0===t?void 0:t.id)&&this.getDetailData()},methods:{getDetailData:function(){this.detailData.id&&(this.form.groupName=this.detailData.group_name)},selectPerson:function(t){this.selectList=t},submit:function(){var t=this;this.$refs.ruleForm.validate(function(){var e=Object(w["a"])(Object(x["a"])().mark((function e(a){var n,i;return Object(x["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return e.next=3,t.validate();case 3:n=t.getParams(),i=t.speechGroupId?t.groupUpdate(n):t.groupSave(n),i.then((function(){t.$message.success("".concat(t.stateText,"分组成功")),t.$emit("serviceOk")})).catch((function(e){t.$message.error(e)})),e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},validate:function(){var t=this;return new Promise((function(e,a){1===t.form.type&&t.selectList.length<1&&(t.$message.warning("请选择部门"),a("请选择部门")),e()}))},getParams:function(){var t={groupName:this.form.groupName};return t},groupUpdate:function(t){return t.id=this.speechGroupId,Object(y["r"])(t)},groupSave:function(t){return Object(y["q"])(t)}}},I=O,S=(a("653d"),Object(v["a"])(I,C,L,!1,null,"7ece9fa8",null)),T=S.exports,j={name:"Grouping",components:{BuildGroup:T},props:{groupList:{type:[Array],default:function(){return[]}}},data:function(){return{visible:!1,state:"",current:[""],detailData:{},selectIndex:""}},computed:{},methods:{defaultNum:function(t,e){if("0"==e){var a=0;return this.groupList.map((function(t,e){"0"!=e&&(a+=t.codeCount)})),a}return t},mouseenter:function(t){this.selectIndex=t},mouseleave:function(){this.selectIndex=""},handleClick:function(t){this.$emit("changeSpeechGroupId",t.key)},plusGroup:function(){this.detailData={},this.state="add",this.visible=!0},editGroup:function(t){this.detailData=t,this.state="edit",this.visible=!0},deleteGroup:function(t){if(!(t.codeCount>0)){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"确定要删除此分组吗？",onOk:function(){e.delGroup(t.id)}})}},serviceOk:function(){this.visible=!1,this.$emit("addGroup")},delGroup:function(t){var e=this;Object(y["o"])({id:t}).then((function(t){e.visible=!1,e.$message.success("删除成功"),e.current=[""],e.$emit("delGroup")})).catch((function(t){$message.error(t)}))}}},D=j,N=(a("3373"),Object(v["a"])(D,_,k,!1,null,"147ed7ce",null)),A=N.exports,P=function(){var t=this,e=t._self._c;return e("CommonModal",{attrs:{title:"批量分组",okText:"确定"},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:function(e){return t.$emit("serviceOk",t.groupId)}}},[e("section",{staticClass:"section"},[e("a-form-model",{ref:"ruleForm",attrs:{"label-col":{span:4},"wrapper-col":{span:18},labelAlign:"right"}},[e("a-form-model-item",{attrs:{label:"选择分组",required:""}},[e("a-select",{model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groupList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.group_name)+" ")])})),1)],1)],1)],1)])},R=[],$=a("2a86"),G={name:"BatchGroup",components:{CommonModal:$["a"]},data:function(){return{groupList:[],groupId:1}},created:function(){this.getGroupList()},methods:{getGroupList:function(){var t=this,e={pageSize:999,currentPage:1};Object(y["p"])(e).then((function(e){t.groupList=e.data.list})).catch((function(e){t.$message.error(e)}))}}},E=G,M=Object(v["a"])(E,P,R,!1,null,"7fa4d50a",null),U=M.exports,F=a("2f62"),q={name:"ChannelList",data:function(){return{visibleCodeTetail:!1,channelList:[],showAddDateTime:null,detailInfo:{},name:void 0,defaultImg:"/imgs/qr-preview.png",groupList:[],downloading:!1,defaultGroupList:[{group_name:"全部分组",id:""}],columns:[{title:"二维码",dataIndex:"qrCode",key:"qrCode",scopedSlots:{customRender:"qrCode"}},{title:"名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{dataIndex:"addTimes",key:"addTimes",slots:{title:"addNumTitle"},scopedSlots:{customRender:"addTimes"}},{title:"创建时间",dataIndex:"createTime",key:"createTime",scopedSlots:{customRender:"createTime"}},{title:"使用成员",dataIndex:"useMember",key:"useMember",scopedSlots:{customRender:"useMember"}},{title:"备用成员",dataIndex:"backupUserList",key:"backupUserList",scopedSlots:{customRender:"backupUserList"}},{title:"标签",dataIndex:"tagNameList",key:"tagNameList",scopedSlots:{customRender:"tagNameList"}},{title:"操作",dataIndex:"operation",align:"right",key:"operation",width:"320px",scopedSlots:{customRender:"operation"}}],pagination:{current:1,pageSize:10,total:0},groupId:"",visible:!1,grouploading:!1,selectedRowKeys:[],codeIdList:[],checkAll:!1}},components:{CodeDetail:b,Grouping:A,BatchGroup:U},props:{codeItem:{type:Object,default:function(){return{}}}},computed:Object(F["c"])({getBatchNum:function(){var t=0;return t=this.checkAll?this.pagination.total-this.codeIdList.length:this.selectedRowKeys.length,t},rowSelection:function(){var t=this,e=this;return{selectedRowKeys:this.selectedRowKeys,onChange:function(e,a){t.selectedRowKeys=e},onSelectAll:function(t){e.checkAll=t},onSelect:function(t,a,n){if(e.checkAll)if(a){var i,r=null===(i=e.codeIdList)||void 0===i?void 0:i.findIndex((function(e){return e.id===t.id}));e.codeIdList.splice(r,1)}else e.codeIdList.push(t.id)},text:"选择全部二维码",hideDefaultSelections:!0,selections:[{key:"1",text:"全部",onSelect:function(){e.checkAll=!0,t.selectedRowKeys=e.channelList.map((function(t){return t.id}))}},{key:"2",text:"当前页面",onSelect:function(){e.checkAll=!1,t.selectedRowKeys=e.channelList.map((function(t){return t.id}))}}]}}}),created:function(){this.getPageList(),this.speechGroup()},methods:{delGroup:function(){this.pagination.current=1,this.groupId="",this.groupList=[],this.speechGroup(),this.getPageList()},routerLink:function(t,e){this.$router.push({name:"Statistics",query:{id:t,codeName:e,state:"detail"}})},serviceOk:function(t){var e=this;this.grouploading=!0,this.visible=!1;var a={groupId:t,checkAll:this.checkAll,codeIdList:this.checkAll?this.codeIdList:this.selectedRowKeys};Object(y["d"])(a).then((function(t){e.$message.success("批量分组修改成功"),e.checkAll=!1,e.selectedRowKeys=[],e.codeIdList=[],e.speechGroup(),e.getPageList()})).catch((function(t){e.$message.error(t)})).finally((function(){e.grouploading=!1}))},batchDrown:function(){if(this.selectedRowKeys.length>0){var t=this;this.$confirm({title:"提示",icon:"",content:"确定批量下载".concat(t.getBatchNum,"个渠道活码吗？"),onOk:function(){t.batchDownload()}})}else this.$message.warning("请选择需要批量下载的渠道码")},batchDownload:function(){var t=this,e=this.checkAll?this.codeIdList.join(","):this.selectedRowKeys.join(","),a={ids:e,checkAll:this.checkAll};this.downloading=!0,Object(y["c"])(a).then((function(t){Object(f["e"])(t,".zip","渠道活码列表")})).catch((function(e){t.$message.error(e)})).finally((function(){t.downloading=!1}))},batchGroup:function(){this.selectedRowKeys.length>0?this.visible=!0:this.$message.warning("请选择需要分组的渠道码")},changeSpeechGroupId:function(t){this.groupId=t,this.checkAll=!1,this.selectedRowKeys=[],this.getPageList()},speechGroup:function(){var t=this,e={pageSize:999,currentPage:1};Object(y["p"])(e).then((function(e){t.groupList=[].concat(Object(c["a"])(t.defaultGroupList),Object(c["a"])(e.data.list))})).catch((function(e){t.$message.error(e)}))},changeAddDate:function(t,e){this.showAddDateTime=t,e[0]?(this.startDate=e[0],this.endDate=e[1]):(this.startDate=void 0,this.endDate=void 0),this.getPageList()},disabledDate:function(t){return t&&t>Date.now()},searchName:function(){this.checkAll=!1,this.selectedRowKeys=[],this.getPageList()},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))},change:function(t){var e=t.current;this.pagination.current=e,this.getPageList()},getPageList:function(){var t=this,e={name:this.name,startDate:this.startDate,endDate:this.endDate,groupId:this.groupId,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};this.loading=!0,Object(y["l"])(e).then((function(e){e.data.list&&(t.pagination.total=e.data.total,t.checkAll&&t.getSelectedRowKeys(e.data.list.map((function(t){return t.id}))),t.channelList=t.disposeClientList(e.data.list),t.$emit("input",t.channelList.length>0),t.$emit("getCodeItem",e.data.list[0]))})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))},getSelectedRowKeys:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0&&e.forEach((function(e){t.codeIdList.includes(e)||t.selectedRowKeys.includes(e)||t.selectedRowKeys.push(e)}))},disposeClientList:function(t){return t.map((function(t,e){return null!==t&&void 0!==t&&t.tagList?t.tagNameList=t.tagList:t.tagNameList=[],t.list?t.useMember=t.list:t.useMember=[],t.backupUser?t.backupUserList=t.backupUser:t.backupUserList=[],t.key=t.id,Object.assign({},t)}))},handleMenuClick:function(t){},openCodeDetail:function(t){var e=this;Object(y["f"])({id:t}).then((function(t){if(t.data){var a=t.data;(null===a||void 0===a?void 0:a.tagList.length)>0?a.tagNameList=a.tagList:a.tagNameList=[],a.user?a.useMember=a.user:a.useMember=[],e.detailInfo=a,e.visibleCodeTetail=!0}})).catch((function(t){e.$message.error(t)}))},deleteList:function(t){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"删除后不可恢复，确定删除吗？",onOk:function(){e.delGroupAutoPull(t)}})},delGroupAutoPull:function(t){var e=this;Object(y["e"])({id:t}).then((function(t){var a;e.$message.success("删除成功"),1===(null===(a=e.channelList)||void 0===a?void 0:a.length)&&(e.pagination.current=e.pagination.current-1||1),e.getPageList()})).catch((function(t){e.$message.error(t)}))},download:function(t,e){var a=this;t?Object(f["d"])(t,e).catch((function(t){a.$message.error(t)})):this.$message.warning("二维码路径错误")}}},B=q,Y=(a("0a18"),Object(v["a"])(B,o,s,!1,null,"2caf126a",null)),K=Y.exports,z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"background-white wrap"},[e("a-tabs",{attrs:{type:"card"}},[e("a-tab-pane",{key:"1",attrs:{tab:"集合数据"}},[e("a-spin",{attrs:{spinning:t.loading}},[e("Gather",{attrs:{codeItem:t.codeItem,detailInfo:t.detailInfo},on:{backdetail:t.backdetail}})],1)],1),e("a-tab-pane",{key:"2",attrs:{tab:"对比数据"}},[e("Contrast",{attrs:{codeItem:t.codeItem}})],1)],1)],1)},W=[],J=function(){var t=this,e=t._self._c;return e("div",[e("footer",{staticClass:"foot"},[e("a-space",[t._v(" 渠道码: "),e("usePerson",{attrs:{title:"添加渠道码",type:"groupList",placeHolder:"请选择一个渠道码",needControlReturn:!0},on:{usePersionInfo:t.usePersionInfo},model:{value:t.codeList,callback:function(e){t.codeList=e},expression:"codeList"}})],1),e("div",{staticClass:"data-wrap"},[e("div",{staticClass:"data"},[e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.TodayAdd))]),e("span",[t._v("今日添加客户数(人)")])]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.TodayLoss))]),e("span",[t._v("今日流失客户数(人)")])])]),e("div",{staticClass:"data"},[e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.AddCount))]),e("span",[t._v("总添加客户数(人)")])]),e("div",{staticClass:"inner"},[e("span",{staticClass:"num"},[t._v(t._s(t.detailInfo.LossCount))]),e("span",[t._v("总流失客户数(人)"),e("a-tooltip",{attrs:{title:"未发送的成员所拥有的所有客户数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])])])],1),e("section",[e("ChatData",{attrs:{chatId:"gather",codeItem:t.codeItem,codeList:t.codeList}})],1)])},H=[],V=a("6bd9"),Q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tendency-chart background-white"},[e("h4",[t._v("图表数据")]),e("a-radio-group",{staticClass:"changeRadio",attrs:{size:"default","button-style":"solid"},on:{change:t.changeGroup},model:{value:t.tabPosition,callback:function(e){t.tabPosition=e},expression:"tabPosition"}},t._l(t.customerStatus,(function(a){return e("a-radio-button",{key:a.value,attrs:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),1),e("a-tooltip",[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",[t._v("1、客户总数：扫码添加的客户总数，若客户重复添加将不会重复计数")]),e("p",[t._v("2、新增客户数：扫码添加的新增客户数")]),e("p",[t._v("3、流失客户数：扫码添加后将成员删除的客户数")])]),t._v(" 统计说明 "),e("a-icon",{attrs:{type:"question-circle"}})],1),e("div",{staticClass:"select-date"},[e("div",[e("a-select",{staticStyle:{width:"100px","margin-right":"10px"},on:{change:t.changePeriodTime},model:{value:t.timeSpace,callback:function(e){t.timeSpace=e},expression:"timeSpace"}},t._l(t.periodTime,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.text)+" ")])})),1),t._v(" 自定义: "),e("a-range-picker",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{disabledDate:t.disabledDate},on:{change:t.changeDate},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1),t._v(" 请选择员工: "),e("SelectMultiple",{staticStyle:{display:"inline-block"},attrs:{reactflag:t.reactflag},on:{selectCustom:t.selectCustom}})],1),e("a-button",{on:{click:t.result}},[t._v("重置")])],1),e("div",{staticClass:"echarts",attrs:{id:t.chatId}}),e("div",{staticClass:"space-gray"}),"gather"===t.chatId?e("TableData",{attrs:{dataList:t.dataList,chatId:t.chatId,staffId:t.staffId,codeList:t.codeList,codeItem:t.codeItem,staffData:t.staffData},on:{onChange:t.onChange,dailyStatisticsExport:t.dailyStatisticsExport}}):t._e()],1)},X=[],Z=(a("a9e3"),a("7db0"),a("f8de")),tt=a("eb82"),et=a("313e"),at=a("4cb5"),nt=a("9394"),it=a("2da7"),rt=a("4b2a"),ot=a("f95e");et["b"]([nt["a"],it["a"],rt["a"],at["a"],ot["a"]]);var st,ct={name:"ChatData",components:{SelectMultiple:tt["a"],TableData:Z["a"]},props:{chatId:{type:String,default:""},codeItem:{type:Object,default:function(){return{}}},codeList:{type:Array,default:function(){return[]}}},computed:{codeId:function(){return this.$route.query.id||this.codeItem.id}},data:function(){return{tabPosition:"todayCount",searchName:"",timeSpace:7,startOrEndTime:void 0,reactflag:!1,dataList:[],staffData:[],staffId:"",customerStatus:[{value:"todayCount",text:"客户总数"},{value:"todayAdd",text:"新增客户数"},{value:"todayLoss",text:"流失客户数"}],periodTime:[{text:"今日",id:0},{text:"近一周",id:7},{text:"近一个月",id:30}],myChart:"",dateOrStaff:"date"}},mounted:function(){this.changePeriodTime(this.timeSpace),this.myChart=et["a"](document.getElementById(this.chatId))},methods:{onChange:function(t){this.dateOrStaff=t},dailyStatisticsExport:function(){var t,e,a,n,i=this,r={list:[Number(this.codeId)],staffId:this.staffId,startTime:(null===(t=this.startOrEndTime)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.format("YYYY-MM-DD"))+" 00:00:00",endTime:(null===(a=this.startOrEndTime)||void 0===a||null===(n=a[1])||void 0===n?void 0:n.format("YYYY-MM-DD"))+" 23:59:59"},o="date"===this.dateOrStaff?this.exportForDate():this.exportForStaff();o(r).then((function(t){Object(f["e"])(t,".xlsx","渠道活码详情列表")})).catch((function(t){i.$message.error(t)}))},exportForStaff:function(){return y["i"]},exportForDate:function(){return y["g"]},selectCustom:function(t){this.staffId=(null===t||void 0===t?void 0:t.userid)||"",this.reactflag=!1,this.getData()},result:function(){this.timeSpace=7,this.startOrEndTime=void 0,this.searchName="",this.reactflag=!0,this.tabPosition="todayCount",this.changePeriodTime(this.timeSpace)},changeGroup:function(t){this.renderContainer()},disabledDate:function(t){return t&&t>this.$moment().subtract("day")},changeDate:function(t){t.length>0&&this.getData()},changePeriodTime:function(t){this.startOrEndTime=0===t?[this.$moment().subtract(t,"days"),this.$moment().subtract(t,"days")]:[this.$moment().subtract(t-1,"days"),this.$moment()],this.getData()},getData:function(){var t,e,a,n,i=this;this.loading=!0;var r=this.codeList.map((function(t){return Number(t.key)})),o={list:r,startTime:(null===(t=this.startOrEndTime)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.format("YYYY-MM-DD"))+" 00:00:00",endTime:(null===(a=this.startOrEndTime)||void 0===a||null===(n=a[1])||void 0===n?void 0:n.format("YYYY-MM-DD"))+" 23:59:59",staffId:this.staffId};Object(y["k"])(o).then((function(t){var e,a;i.dataList=(null===(e=t.data.dateData)||void 0===e?void 0:e.map((function(t,e){return t.operation=t,t.key=e,t})))||[],i.staffData=(null===(a=t.data.staffData)||void 0===a?void 0:a.map((function(t,e){return t.operation=t,t.key=e,t})))||[],i.renderContainer()})).catch((function(t){i.$message.error(t)})).finally((function(){i.loading=!1}))},renderContainer:function(){var t,e=this,a=this.customerStatus.find((function(t){return t.value===e.tabPosition})).text;this.myChart.setOption((t={tooltip:{},xAxis:{data:this.dataList.map((function(t){return t.day}))}},Object(r["a"])(t,"tooltip",{trigger:"axis"}),Object(r["a"])(t,"yAxis",{name:"人数",minInterval:1}),Object(r["a"])(t,"grid",{left:"60px",right:"5%"}),Object(r["a"])(t,"series",[{name:a,type:"line",data:this.dataList.map((function(t){return t[e.tabPosition]}))}]),t))}},watch:{codeList:function(t){this.getData()}}},lt=ct,ut=(a("6b80"),Object(v["a"])(lt,Q,X,!1,null,"4dfc74ba",null)),dt=ut.exports,ft=(st={name:"Gather",components:{usePerson:V["a"],ChatData:dt},props:{codeItem:{type:Object,default:function(){return{}}},detailInfo:{type:Object,default:function(){return{}}}},data:function(){return{userList:[]}},watch:{codeItem:{handler:function(){this.codeItem.id&&(this.codeList=[{key:String(this.codeItem.id),disabled:!1,title:this.codeItem.name,source:this.codeItem}])},immediate:!0}},created:function(){}},Object(r["a"])(st,"data",(function(){return{codeList:[]}})),Object(r["a"])(st,"methods",{usePersionInfo:function(t,e){t.length<1?this.$message.warning("必须选择一个渠道码"):(this.codeList=t,this.$emit("backdetail",t),e())}}),st),pt=ft,mt=(a("5d57"),Object(v["a"])(pt,J,H,!1,null,"c6e32c1a",null)),ht=mt.exports,vt=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("h4",[t._v("对比数据")]),e("div",{staticClass:"add-code"},[e("a-space",[e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.visibleTree=!0}}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 添加渠道码 ")],1),t._v(" 最多同时对比五个渠道码（组） ")],1)],1),e("a-table",{attrs:{columns:t.columns,"data-source":t.data},scopedSlots:t._u([{key:"color",fn:function(t){return e("div",{},[e("a-badge",{attrs:{color:t}})],1)}},{key:"data",fn:function(a){return e("div",{},[e("a-icon",{attrs:{type:"qrcode"}}),t._v(" "+t._s(a)+" ")],1)}},{key:"operation",fn:function(a){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteItem(a)}}},[t._v("删除")])],1)}}])})],1),e("ContrastChat",{attrs:{chatId:"contrast",codeItem:t.codeItem,selectList:t.selectList,colorList:t.colorList}}),e("a-modal",{attrs:{footer:null,centered:"",width:"680px",destroyOnClose:""},model:{value:t.visibleTree,callback:function(e){t.visibleTree=e},expression:"visibleTree"}},[e("AddTransfer",{attrs:{tips:"最多同时对比五个渠道码（组）",title:"选择渠道码",type:"groupList",maxLength:5,selectList:t.selectList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleTree=!1}}},[e("div",{attrs:{slot:"tips"},slot:"tips"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" 最多同时对比五个渠道码（组） ")],1)])],1)],1)},gt=[],bt=a("5530"),yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tendency-chart background-white"},[e("h4",[t._v("图表数据")]),e("a-radio-group",{staticClass:"changeRadio",attrs:{size:"default","button-style":"solid"},on:{change:t.changeGroup},model:{value:t.tabPosition,callback:function(e){t.tabPosition=e},expression:"tabPosition"}},t._l(t.customerStatus,(function(a){return e("a-radio-button",{key:a.value,attrs:{value:a.value}},[t._v(" "+t._s(a.text)+" ")])})),1),e("a-tooltip",[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",[t._v("1、客户总数：扫码添加的客户总数，若客户重复添加将不会重复计数")]),e("p",[t._v("2、新增客户数：扫码添加的新增客户数，包含流失数据")]),e("p",[t._v("3、流失客户数：扫码添加后将成员删除的客户数")])]),t._v(" 统计说明 "),e("a-icon",{attrs:{type:"question-circle"}})],1),e("div",{staticClass:"select-date"},[e("div",[e("a-select",{staticStyle:{width:"100px","margin-right":"10px"},on:{change:t.changePeriodTime},model:{value:t.timeSpace,callback:function(e){t.timeSpace=e},expression:"timeSpace"}},t._l(t.periodTime,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.text)+" ")])})),1),t._v(" 自定义: "),e("a-range-picker",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{disabledDate:t.disabledDate},on:{change:t.changeDate},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1),t._v(" 请选择员工: "),e("SelectMultiple",{staticStyle:{display:"inline-block"},attrs:{reactflag:t.reactflag},on:{selectCustom:t.selectCustom}})],1),e("a-button",{on:{click:t.result}},[t._v("重置")])],1),e("div",{staticClass:"echarts",attrs:{id:t.chatId}})],1)},_t=[];et["b"]([nt["a"],it["a"],rt["a"],at["a"],ot["a"]]);var kt={name:"ContrastChat",components:{SelectMultiple:tt["a"],TableData:Z["a"]},props:{selectList:{type:Array,default:function(){return[]}},chatId:{type:String,default:""},codeItem:{type:Object,default:function(){return{}}},colorList:{type:Array,default:function(){return[]}}},computed:{codeId:function(){return this.$route.query.id||this.codeItem.id}},data:function(){return{tabPosition:"todayCount",searchName:"",timeSpace:7,reactflag:!1,startOrEndTime:void 0,dataList:[],staffId:"",customerStatus:[{value:"todayCount",text:"客户总数"},{value:"todayAdd",text:"新增客户数"},{value:"todayLoss",text:"流失客户数"}],periodTime:[{text:"今日",id:0},{text:"近一周",id:7},{text:"近一个月",id:30}],myChart:""}},watch:{selectList:function(){this.getData()}},mounted:function(){this.changePeriodTime(this.timeSpace),this.myChart=et["a"](document.getElementById(this.chatId))},methods:{selectCustom:function(t){this.staffId=(null===t||void 0===t?void 0:t.userid)||"",this.reactflag=!1,this.getData()},result:function(){this.timeSpace=7,this.startOrEndTime=void 0,this.searchName="",this.tabPosition="todayCount",this.reactflag=!0,this.changePeriodTime(this.timeSpace)},changeGroup:function(t){this.renderContainer()},disabledDate:function(t){return t&&t>this.$moment().subtract("day")},changeDate:function(t){t.length>0&&this.getData()},changePeriodTime:function(t){this.startOrEndTime=0===t?[this.$moment().subtract(t,"days"),this.$moment().subtract(t,"days")]:[this.$moment().subtract(t-1,"days"),this.$moment()],this.getData()},getData:function(){var t,e,a,n,i=this;this.loading=!0;var r={list:this.selectList.map((function(t){return t.source.id})),startTime:(null===(t=this.startOrEndTime)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.format("YYYY-MM-DD"))+" 00:00:00",endTime:(null===(a=this.startOrEndTime)||void 0===a||null===(n=a[1])||void 0===n?void 0:n.format("YYYY-MM-DD"))+" 23:59:59",staffId:this.staffId};Object(y["j"])(r).then((function(t){i.dataList=t.data,i.renderContainer()})).catch((function(t){i.$message.error(t)})).finally((function(){i.loading=!1}))},renderContainer:function(t){var e,a,n,i=this;this.myChart.clear(),this.myChart.setOption((n={tooltip:{},xAxis:{type:"category",boundaryGap:!1,data:null===(e=this.dataList[0])||void 0===e?void 0:e.data.dateData.map((function(t){return t.day}))},legend:{data:null===(a=this.dataList)||void 0===a?void 0:a.map((function(t){return t.codeName}))}},Object(r["a"])(n,"tooltip",{trigger:"axis"}),Object(r["a"])(n,"toolbox",{feature:{saveAsImage:{}}}),Object(r["a"])(n,"yAxis",{name:"人数",minInterval:1}),Object(r["a"])(n,"grid",{left:"30px",right:"5%"}),Object(r["a"])(n,"series",this.dataList.map((function(t,e){var a;return{name:t.codeName,type:"line",color:i.colorList[e],data:null===(a=t.data)||void 0===a?void 0:a.dateData.map((function(t){return t[i.tabPosition]}))}}))),n))}}},Ct=kt,Lt=(a("e2e5"),Object(v["a"])(Ct,yt,_t,!1,null,"47190b38",null)),xt=Lt.exports,wt=a("1eb1"),Ot={name:"Contrast",components:{ContrastChat:xt,AddTransfer:wt["a"]},props:{codeItem:{type:Object,default:function(){return{}}}},data:function(){return{visibleTree:!1,selectList:[],columns:[{title:" ",dataIndex:"color",key:"color",width:"60px",scopedSlots:{customRender:"color"}},{title:"渠道码（组）名称",dataIndex:"codeName",key:"codeName",scopedSlots:{customRender:"codeName"}},{title:"今日添加客户人数",dataIndex:"TodayAdd",key:"TodayAdd"},{title:"今日流失客户人数",dataIndex:"TodayLoss",key:"TodayLoss"},{title:"总添加客户人数",dataIndex:"AddCount",key:"AddCount"},{title:"总流失客户人数",dataIndex:"LossCount",key:"LossCount"},{title:"操作",dataIndex:"operation",align:"right",key:"operation",scopedSlots:{customRender:"operation"}}],data:[],colorList:["#01A3FE","#00D06A","#FED000","#FE5079","#A25AEA"]}},methods:{serviceOk:function(t){this.selectList=t,this.visibleTree=!1,this.getStaffStatistics()},getStaffStatistics:function(){var t=this;this.loading=!0;var e=this.selectList.map((function(t){return{codeId:t.source.id,codeName:t.source.name}}));Object(y["m"])(e).then((function(e){t.data=e.data.map((function(e,a){return Object(bt["a"])({operation:e,color:t.colorList[a],key:a},e)}))})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))},deleteItem:function(t){var e=this.data.findIndex((function(e){return e.codeName===t.codeName})),a=this.selectList.findIndex((function(e){return e.title===t.codeName}));this.data.splice(e,1),this.selectList.splice(a,1)}}},It=Ot,St=(a("812e"),Object(v["a"])(It,vt,gt,!1,null,"7fd42121",null)),Tt=St.exports,jt={name:"DataDetail",components:{Gather:ht,Contrast:Tt},data:function(){return{loading:!1,detailInfo:{}}},props:{codeItem:{type:Object,default:function(){return{}}}},created:function(){this.getStaffStatistics()},methods:{backdetail:function(t){var e=this,a=t.map((function(t){return{codeId:t.key,codeName:t.title}}));Object(y["n"])(a).then((function(t){e.detailInfo=t.data})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},getStaffStatistics:function(){var t=this;this.loading=!0;var e=[{codeId:this.codeItem.id,codeName:this.codeItem.name}];Object(y["m"])(e).then((function(e){t.detailInfo=e.data[0]})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))}}},Dt=jt,Nt=(a("1dce"),Object(v["a"])(Dt,z,W,!1,null,"16f90ba2",null)),At=Nt.exports,Pt={name:"ChannelCode",components:{ChannelList:K,DataDetail:At},provide:function(){return{codeItem:this.codeItem}},data:function(){return{isShow:!1,codeItem:{}}},methods:{getCodeItem:function(t){this.codeItem=t}}},Rt=Pt,$t=(a("6ed5"),Object(v["a"])(Rt,n,i,!1,null,"70acb3a8",null));e["default"]=$t.exports},f872:function(t,e,a){},fc2a:function(t,e,a){"use strict";a("0348")}}]);