(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd38dce0"],{"72c1":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-box"},[e("header",{staticClass:"header"},[e("a-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.$router.push({name:"SOPrule",query:{state:"add"}})}}},[t._v(" 创建规则 ")]),e("a-input-search",{staticClass:"search-name",attrs:{allowClear:"",placeholder:"请输入要搜索的规则名称"},on:{search:t.onSearchName},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1),e("a-table",{staticClass:"background-white",attrs:{columns:t.columns,"data-source":t.fSend,pagination:t.pagination,loading:t.loading},on:{change:t.changePage},scopedSlots:t._u([{key:"creatorName",fn:function(n){return e("div",{},[e("a-tag",[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),t._v(" "+t._s(n)+" ")],1)],1)}},{key:"staffList",fn:function(n){return e("div",{},t._l(n,(function(n){return e("a-tag",{key:n.staffId},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"user"}}),t._v(" "+t._s(n.staffName)+" ")],1)})),1)}},{key:"isActiveObj",fn:function(n){var a=n.isActiveBoolean,o=n.sopId;return e("div",{},[e("a-switch",{attrs:{defaultChecked:a},on:{change:function(e){return t.changeActive(o,e)}}})],1)}},{key:"operation",fn:function(n){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.addService(n)}}},[t._v("添加客服")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"SOPDetail",query:{state:"look",sopId:n}})}}},[t._v(" 详情 ")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteRule(n)}}},[t._v("删除")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.$router.push({name:"SOPrule",query:{state:"edit",sopId:n}})}}},[t._v(" 编辑 ")])],1)}}])}),e("a-modal",{attrs:{footer:null,centered:"",width:"680px"},model:{value:t.visibleTree,callback:function(e){t.visibleTree=e},expression:"visibleTree"}},[e("AddTransfer",{attrs:{type:"deptId",selectList:t.selectList,selectRoleIdList:[]},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleTree=!1}}})],1)],1)},o=[],r=n("5530"),i=(n("d81d"),n("b0c0"),n("7db0"),n("d3b7"),n("cf5f")),s=n("1eb1"),c={name:"PersonSOP",components:{AddTransfer:s["a"]},data:function(){return{fSend:[],visibleTree:!1,loading:!1,sopId:"",keywords:"",selectList:[],pagination:{current:1,pageSize:10,total:0},columns:[{title:"规则名称",key:"name",dataIndex:"name"},{title:"创建人",key:"creatorName",dataIndex:"creatorName",scopedSlots:{customRender:"creatorName"}},{title:"使用成员",key:"staffList",dataIndex:"staffList",scopedSlots:{customRender:"staffList"}},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"开关",key:"isActiveObj",dataIndex:"isActiveObj",scopedSlots:{customRender:"isActiveObj"}},{title:"操作",key:"sopId",align:"right",dataIndex:"sopId",scopedSlots:{customRender:"operation"}}]}},activated:function(){this.getPagePersonSop()},methods:{serviceOk:function(t){var e=this;this.selectList=t;var n={sopId:this.sopId,staffList:t.map((function(t){var e=t.source;return{staffId:e.staffId,userid:e.userid,staffName:e.name,thumbAvatar:e.thumbAvatar}}))};Object(i["q"])(n).then((function(t){e.visibleTree=!1,e.getPagePersonSop(),e.$message.success("修改客服成功")})).catch((function(t){e.$message.error(t)}))},addService:function(t){var e;this.sopId=t;var n=this.fSend.find((function(e){return e.sopId===t}));this.selectList=(null===(e=n.staffList)||void 0===e?void 0:e.map((function(t){return t.key=String(t.userid),t.name=t.staffName,Object(r["a"])(Object(r["a"])({},t),{},{title:t.title,source:t,userIds:t.userid})})))||[],this.visibleTree=!0},onSearchName:function(){this.getPagePersonSop()},changeActive:function(t,e){var n=this,a=e?"开启":"关闭",o={sopId:t,isActive:e?1:0};Object(i["v"])(o).then((function(){n.$message.success("开关已".concat(a))}))},changePage:function(t){var e=t.current;this.pagination.current=e,this.getPagePersonSop()},deleteRule:function(t){var e=this;this.$confirm({title:"提示",icon:"",okText:"删除",content:"确定要删除此个人SOP吗？",onOk:function(){e.delGroupSop(t)}})},delGroupSop:function(t){var e=this;this.loading=!0,Object(i["e"])({sopId:t}).then((function(t){var n;1===(null===(n=e.fSend)||void 0===n?void 0:n.length)&&(e.pagination.current=e.pagination.current-1||1),e.getPagePersonSop(),e.$message.success("删除成功")})).catch((function(t){e.$message.error(t)})).finally((function(){return e.loading=!1}))},getPagePersonSop:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,keywords:this.keywords};this.loading=!0,Object(i["p"])(e).then((function(e){null!==e&&void 0!==e&&e.data&&(t.pagination.total=e.data.total,t.fSend=e.data.list.map((function(t){return t.key=t.sopId,t.isActiveObj={isActiveBoolean:1===t.isActive,sopId:t.sopId,isActive:t.isActive},t})))})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))}}},u=c,d=(n("a921"),n("2877")),l=Object(d["a"])(u,a,o,!1,null,"385d9afa",null);e["default"]=l.exports},a921:function(t,e,n){"use strict";n("b1f3")},b1f3:function(t,e,n){},cf5f:function(t,e,n){"use strict";n.d(e,"k",(function(){return r})),n.d(e,"r",(function(){return i})),n.d(e,"l",(function(){return s})),n.d(e,"m",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"p",(function(){return f})),n.d(e,"q",(function(){return p})),n.d(e,"u",(function(){return m})),n.d(e,"v",(function(){return g})),n.d(e,"x",(function(){return b})),n.d(e,"t",(function(){return h})),n.d(e,"o",(function(){return S})),n.d(e,"g",(function(){return v})),n.d(e,"b",(function(){return O})),n.d(e,"h",(function(){return k})),n.d(e,"s",(function(){return y})),n.d(e,"c",(function(){return _})),n.d(e,"n",(function(){return j})),n.d(e,"f",(function(){return P})),n.d(e,"w",(function(){return I})),n.d(e,"j",(function(){return T})),n.d(e,"y",(function(){return w})),n.d(e,"d",(function(){return A}));var a=n("b775"),o={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function r(t){return Object(a["b"])({url:o.getLastSyncTime,method:"get",params:t})}function i(t){return Object(a["b"])({url:o.syncUpdate,method:"get",params:t})}function s(t){return Object(a["b"])({url:o.getOfficialAccount,method:"get",params:t})}function c(t){return Object(a["b"])({url:o.interactiveRadarUploadFile,method:"post",data:t})}function u(t){return Object(a["b"])({url:o.addSersonSop,method:"post",data:t})}function d(t){return Object(a["b"])({url:o.delGroupSop,method:"post",params:t})}function l(t){return Object(a["b"])({url:o.detailPersonSop,method:"get",params:t})}function f(t){return Object(a["b"])({url:o.pagePersonSop,method:"get",params:t})}function p(t){return Object(a["b"])({url:o.setPersonSopStaff,method:"post",data:t})}function m(t){return Object(a["b"])({url:o.updatePersonSop,method:"post",data:t})}function g(t){return Object(a["b"])({url:o.updateStatus,method:"post",params:t})}function b(t){return Object(a["b"])({url:o.upload,method:"post",data:t})}function h(t){return Object(a["b"])({url:o.update,method:"post",data:t})}function S(t){return Object(a["b"])({url:o.materialList,method:"get",params:t})}function v(t){return Object(a["b"])({url:o.deleteMaterial,method:"get",params:t})}function O(t){return Object(a["b"])({url:o.addTag,method:"post",data:t})}function k(t){return Object(a["b"])({url:o.deleteTag,method:"get",params:t})}function y(t){return Object(a["b"])({url:o.tagList,method:"get",params:t})}function _(t){return Object(a["b"])({url:o.addWelcome,method:"post",data:t})}function j(t){return Object(a["b"])({url:o.listWelcome,method:"get",params:t})}function P(t){return Object(a["b"])({url:o.delWelcome,method:"post",params:t})}function I(t){return Object(a["b"])({url:o.updateWelcome,method:"post",data:t})}function T(t){return Object(a["b"])({url:o.detailWelcome,method:"get",params:t})}function w(t){return Object(a["b"])({url:o.uploadMedia,method:"post",data:t})}function A(t){return Object(a["b"])({url:o.channelCodeUploadFile,method:"post",data:t})}}}]);