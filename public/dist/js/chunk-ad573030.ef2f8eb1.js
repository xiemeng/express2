(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad573030"],{2880:function(t,e,i){"use strict";i("592d")},"2a86":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),t.tipText?e("span",{attrs:{name:"tip"}},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" "+t._s(t.tipText)+" ")],1)]):t._e(),t._t("default"),t.footer?e("div",{staticClass:"foot-button"},[e("div",{staticClass:"left"},[t._t("bottomLeft")],2),e("a-space",{attrs:{size:12}},[t._t("footer"),e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v(t._s(t.cancleText))]),e("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("serviceOk")}}},[t._v(t._s(t.okText))])],2)],1):t._e()],2)},n=[],s={name:"CommonModal",props:{title:{type:String,default:"标题"},cancleText:{type:String,default:"取消"},okText:{type:String,default:"确定"},tipText:{type:[String,Boolean],default:!1},footer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}}},o=s,r=(i("2880"),i("2877")),l=Object(r["a"])(o,a,n,!1,null,"c55b780c",null);e["a"]=l.exports},"592d":function(t,e,i){},"776b":function(t,e,i){"use strict";i("aa8d")},"7a7a":function(t,e,i){"use strict";i("9215")},"8e2eb":function(t,e,i){},9215:function(t,e,i){},aa8d:function(t,e,i){},b141:function(t,e,i){"use strict";i("8e2eb")},dfd7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"header"},[e("a-form-model",{attrs:{layout:"inline",labelCol:{span:6},wrapperCol:{span:18}}},[e("a-form-model-item",{attrs:{label:"执行人"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择执行人",allowClear:""},on:{change:t.searchgetListFun},model:{value:t.form.exeName,callback:function(e){t.$set(t.form,"exeName",e)},expression:"form.exeName"}},t._l(t.executorList,(function(i){return e("a-select-option",{key:i.okrName,attrs:{value:i.okrName}},[t._v(" "+t._s(i.okrName)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"项目名称"}},[e("a-input-search",{attrs:{placeholder:"请输入项目名称"},on:{search:t.searchgetListFun},model:{value:t.form.projectGroup,callback:function(e){t.$set(t.form,"projectGroup",e)},expression:"form.projectGroup"}})],1),e("a-form-model-item",{attrs:{label:"启动时间"}},[e("a-range-picker",{on:{change:t.searchgetListFun},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),e("a-form-model-item",{attrs:{label:"完成时间"}},[e("a-range-picker",{on:{change:t.searchgetListFun},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),e("a-form-model-item",[e("a-space",[e("a-button",{attrs:{type:"primary"},on:{click:t.searchgetListFun}},[t._v("搜索")]),e("a-button",{on:{click:t.resut}},[t._v("重置")])],1)],1)],1)],1),e("div",{staticClass:"bar"}),e("section",[e("a-table",{staticClass:"table",attrs:{columns:t.columns,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.change},scopedSlots:t._u([{key:"operation",fn:function(i){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.deleteByIdFun(i)}}},[t._v("查看子任务")])],1)}}])})],1),e("a-modal",{attrs:{footer:null,destroyOnClose:"",centered:"",width:"880px"},model:{value:t.visibileForm,callback:function(e){t.visibileForm=e},expression:"visibileForm"}},[e("ChooseWay",{on:{cancle:function(e){t.visibileForm=!1},serviceOk:t.serviceOk},model:{value:t.form.exportOrPushType,callback:function(e){t.$set(t.form,"exportOrPushType",e)},expression:"form.exportOrPushType"}})],1),e("a-modal",{attrs:{footer:null,destroyOnClose:"",centered:"",width:"880px"},model:{value:t.visibileSubtasks,callback:function(e){t.visibileSubtasks=e},expression:"visibileSubtasks"}},[e("Subtasks",{attrs:{subtaskIs:t.subtaskIs},on:{cancle:function(e){t.visibileSubtasks=!1},serviceOk:function(e){t.visibileSubtasks=!1}}})],1)],1)},n=[],s=i("5530"),o=(i("d3b7"),i("d81d"),i("b775")),r={jiraTaskInfoPage:"/enterprise/jiraTaskInfo/page",jiraUserNameMappingList:"/enterprise/jiraUserNameMapping/list",exportOPPM:"/enterprise/jiraTaskInfo/exportOPPM",pushOPPM:"/enterprise/jiraTaskInfo/pushOPPM",listSubTask:"/enterprise/jiraTaskInfo/listSubTask"};function l(t){return Object(o["b"])({url:r.jiraTaskInfoPage,method:"post",data:t})}function c(t){return Object(o["b"])({url:r.jiraUserNameMappingList,method:"post",data:t})}function u(t){return Object(o["b"])({url:r.exportOPPM,method:"post",data:t,responseType:"blob"})}function d(t){return Object(o["b"])({url:r.pushOPPM,method:"post",data:t})}function m(t){return Object(o["b"])({url:r.listSubTask,method:"post",data:t})}var p=i("ca00"),f=function(){var t=this,e=t._self._c;return e("CommonModal",{attrs:{title:t.title},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},[e("a-radio-group",{on:{change:t.changeType},model:{value:t.exportOrPushType,callback:function(e){t.exportOrPushType=e},expression:"exportOrPushType"}},[e("a-radio",{attrs:{value:0}},[t._v(" 根据筛选条件进行推送 ")]),e("a-radio",{attrs:{value:1}},[t._v(" 根据勾选数据进行导出 ")])],1)],1)},h=[],b=(i("a9e3"),i("2a86")),g={name:"ChooseWay",components:{CommonModal:b["a"]},props:{value:{type:[String,Number],default:0}},data:function(){return{title:"选择方式",exportOrPushType:void 0}},created:function(){this.exportOrPushType=this.value},methods:{serviceOk:function(){this.$emit("input",this.exportOrPushType),this.$emit("serviceOk")},changeType:function(){this.$emit("input",this.exportOrPushType)}}},v=g,k=(i("776b"),i("2877")),x=Object(k["a"])(v,f,h,!1,null,"39ade351",null),y=x.exports,T=function(){var t=this,e=t._self._c;return e("CommonModal",{attrs:{title:t.title},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},[e("a-table",{staticClass:"table",attrs:{pagination:!1,columns:t.columns,scroll:{y:700},"data-source":t.clientList,loading:t.loading}})],1)},O=[],I={name:"Subtasks",components:{CommonModal:b["a"]},props:{subtaskIs:{type:[String,Number],default:0}},data:function(){return{title:"子任务列表",loading:!1,columns:[{title:"子任务ID",dataIndex:"taskId",align:"center",key:"taskId"},{title:"任务描述",dataIndex:"describe",align:"center",key:"describe"},{title:"\t执行人",dataIndex:"exeName",align:"center",key:"exeName"},{title:"到期时间",dataIndex:"endTime",align:"center",key:"endTime"},{title:"预估时间(h)",dataIndex:"hours",align:"center",key:"hours"},{title:"实际工作时间(h)",dataIndex:"actualHours",align:"center",key:"actualHours"},{title:"剩余工时(h)",dataIndex:"residueHours",align:"center",key:"residueHours"}],clientList:[]}},created:function(){this.listSubTaskFun()},methods:{serviceOk:function(){this.$emit("serviceOk")},listSubTaskFun:function(){var t=this,e={parentId:this.subtaskIs};this.loading=!0,m(e).then((function(e){t.clientList=e.data})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))}}},P=I,F=(i("b141"),Object(k["a"])(P,T,O,!1,null,"05ed0a01",null)),L=F.exports,S={name:"Jira",components:{ChooseWay:y,Subtasks:L},data:function(){return{visibileSubtasks:!1,visibileForm:!1,subtaskIs:"",selectedRowKeys:[],tableLoading:!1,visibleTransfer:!1,clientList:[],columns:[{title:"项目名称",dataIndex:"projectGroup",align:"center",key:"projectGroup"},{title:"一级事项",dataIndex:"firstItem",align:"center",key:"firstItem"},{title:"二级事项",dataIndex:"secondItem",align:"center",key:"secondItem"},{title:"输出物",dataIndex:"outputObject",align:"center",key:"outputObject"},{title:"工作量（H）",dataIndex:"hours",align:"center",key:"hours"},{title:"开始时间",dataIndex:"startTime",key:"startTime",align:"center"},{title:"结束时间",dataIndex:"endTime",scopedSlots:{customRender:"info"},key:"endTime",align:"center"},{title:"执行人",dataIndex:"exeName",key:"exeName",align:"center"},{title:"当前状态",dataIndex:"taskStatus",key:"taskStatus",align:"center"},{title:"进度日志",dataIndex:"progress",key:"progress",align:"center"},{title:"操作",dataIndex:"operation",align:"center",key:"operation",scopedSlots:{customRender:"operation"}}],pagination:{current:1,pageSize:10,total:0},visibleDeath:!1,form:{startTime:void 0,endTime:void 0,exeName:void 0,exportOrPushType:void 0},loadingOppm:!1,isExport:!0,pushLoading:!1,executorList:[]}},created:function(){this.getListFun(),this.init()},methods:{onSelectChange:function(t){this.selectedRowKeys=t},exportOppmFun:function(){this.isExport=!0,this.visibileForm=!0},pushWorder:function(){this.isExport=!1,this.visibileForm=!0},exportFun:function(){var t=this;this.loadingOppm=!0;var e=this.getParams();u(e).then((function(e){Object(p["e"])(e,".xlsx","OPPM列表"),t.visibileForm=!1,t.$message.success("导出成功")})).catch((function(e){t.$message.error(e)})).finally((function(){t.loadingOppm=!1}))},pushOPPMFun:function(){var t=this;this.pushLoading=!0;var e=this.getParams();d(e).then((function(e){t.visibileForm=!1,t.$message.success("推送成功")})).catch((function(e){t.$message.error(e)})).finally((function(){t.pushLoading=!1}))},init:function(){var t=this;c().then((function(e){t.executorList=e.data})).catch((function(e){t.$message.error(e)}))},change:function(t){var e=t.current;this.pagination.current=e,this.getListFun()},searchgetListFun:function(){this.pagination.current=1,this.getListFun()},getListFun:function(){var t=this;this.tableLoading=!0;var e=this.getParams();l(e).then((function(e){var i;t.clientList=null===(i=e.data.list)||void 0===i?void 0:i.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{key:t.id,operation:t})})),t.pagination.total=e.data.total})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},deathFun:function(){this.visibleDeath=!0},transferFun:function(){this.visibleTransfer=!0},getParams:function(){var t,e,i,a,n={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,exeName:this.form.exeName,projectGroup:this.form.projectGroup,exportOrPushType:this.form.exportOrPushType,idList:1===this.form.exportOrPushType?this.selectedRowKeys:void 0,startDateTo:(null===(t=this.form.startTime)||void 0===t?void 0:t.length)>0?this.form.startTime[1].format("YYYY-MM-DD 23:59:59"):void 0,startDateFrom:(null===(e=this.form.startTime)||void 0===e?void 0:e.length)>0?this.form.startTime[0].format("YYYY-MM-DD 00:00:00"):void 0,endDateTo:(null===(i=this.form.endTime)||void 0===i?void 0:i.length)>0?this.form.endTime[1].format("YYYY-MM-DD 23:59:59"):void 0,endDateFrom:(null===(a=this.form.endTime)||void 0===a?void 0:a.length)>0?this.form.endTime[0].format("YYYY-MM-DD 00:00:00"):void 0};return n},serviceOk:function(){1===this.form.exportOrPushType&&this.selectedRowKeys.length<1?this.$message.warning("请勾选数据"):this.isExport?this.exportFun():this.pushOPPMFun()},resut:function(){this.form={startTime:void 0,endTime:void 0,exeName:void 0},this.getListFun()},deleteByIdFun:function(t){this.subtaskIs=t.taskId,this.visibileSubtasks=!0}}},j=S,_=(i("7a7a"),Object(k["a"])(j,a,n,!1,null,"0c881088",null));e["default"]=_.exports}}]);