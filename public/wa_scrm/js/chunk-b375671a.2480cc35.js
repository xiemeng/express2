(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b375671a"],{"0885":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Attribute"},[e("section",{staticClass:"section"},[e("div",{staticClass:"total"},[e("a-form-model",{ref:"ruleForm",staticClass:"ant-advanced-search-form",attrs:{form:t.form,layout:"inline"}},[e("a-form-model-item",{attrs:{label:"Reminder time",name:"AttributeName"}},[e("a-range-picker",{staticStyle:{width:"200px"},model:{value:t.form.remindTime,callback:function(e){t.$set(t.form,"remindTime",e)},expression:"form.remindTime"}})],1),e("a-form-model-item",{attrs:{label:"Agent"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{filterOption:t.filterOption,placeholder:"place select","show-search":"",allowClear:""},model:{value:t.form.customerService,callback:function(e){t.$set(t.form,"customerService",e)},expression:"form.customerService"}},t._l(t.tagList,(function(i,n){return e("a-select-opt-group",{key:n},[e("span",{attrs:{slot:"label"},slot:"label"},[e("a-icon",{attrs:{type:"user"}}),t._v(t._s(n))],1),t._l(i,(function(i){return e("a-select-option",{key:i.username,attrs:{value:i.id}},[t._v(" "+t._s(i.username)+" ")])}))],2)})),1)],1),e("a-form-model-item",{attrs:{label:"Status"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"place select"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusList,(function(i){return e("a-select-option",{key:i.value,attrs:{value:i.value}},[t._v(" "+t._s(i.text)+" ")])})),1)],1),e("a-form-model-item",[e("a-button",{attrs:{type:"primary"},on:{click:t.searchList}},[t._v("Search")]),e("a-button",{style:{marginLeft:"8px"},on:{click:t.clearFn}},[t._v("Clear")])],1)],1)],1),e("div",[e("a-table",{staticClass:"table",attrs:{columns:t.columns,rowKey:"id",loading:t.loading,dataSource:t.clientList,pagination:t.pagination},on:{change:t.changeTab},scopedSlots:t._u([{key:"messageContent",fn:function(i,n){return e("div",{},[t._v(" "+t._s("text"==n.messageType?i:"Chat contains pictures/videos, etc.")+" ")])}},{key:"status",fn:function(i){return e("div",{},[t._v(" "+t._s(t.statusList[i-1].text)+" ")])}},{key:"Edit",fn:function(i,n){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.editPage(n)}}},[t._v("Chat Session")]),t._v("Â  ")],1)}}])})],1)])])},a=[],s=i("5530"),o=(i("d3b7"),i("d81d"),i("7db0"),i("aa39")),r=i("9b7b"),c=i("1f72"),d=i("986e"),u={name:"NoReply",components:{},data:function(){return{statusList:[{text:"No Reply",value:1},{text:"Replied",value:2}],userList:[],AddBox:!1,fetching:!1,loading:!1,addType:"add",pagination:{current:1,pageSize:10,total:0},addTxt:"",form:{status:void 0,remindTime:void 0,customerService:void 0},layout:{labelCol:{span:4},wrapperCol:{span:18}},clientList:[],columns:[{title:"ID",dataIndex:"id"},{title:"UID",dataIndex:"uid"},{title:"Name",dataIndex:"name"},{title:"Agent",dataIndex:"username"},{title:"Reminder time",dataIndex:"remindTime"},{title:"Message content",dataIndex:"messageContent",width:"400px",scopedSlots:{customRender:"messageContent"}},{title:"Status",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"Actions",dataIndex:"Edit",scopedSlots:{customRender:"Edit"}}],confirmLoading:!1,modalForm:{},tagList:[]}},created:function(){this.getList(),this.init()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{init:function(){var t=this;Object(r["e"])().then((function(e){e.data&&(t.tagList=e.data)})).catch((function(e){t.$message.error(e)}))},clearFn:function(){this.form={status:void 0,remindTime:void 0,customerService:void 0},this.searchList()},getList:function(){var t,e,i=this,n=Object(s["a"])(Object(s["a"])({currentPage:this.pagination.current,pageSize:this.pagination.pageSize},this.form),{},{startRemindTime:null!==(t=this.form.remindTime)&&void 0!==t&&t[0]?this.form.remindTime[0].format("YYYY-MM-DD HH:mm:ss"):void 0,endRemindTime:null!==(e=this.form.remindTime)&&void 0!==e&&e[1]?this.form.remindTime[1].format("YYYY-MM-DD HH:mm:ss"):void 0});delete n.remindTime,this.loading=!0,Object(r["c"])(n).then((function(t){var e;i.clientList=null===(e=t.data.records)||void 0===e?void 0:e.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{createTime:t.createTime?i.$moment(t.createTime).format("YYYY-MM-DD HH:mm:ss"):"-"})})),i.pagination.total=t.data.total})).catch((function(t){i.$message.error(t)})).finally((function(){i.loading=!1}))},searchList:function(){this.pagination.current=1,this.getList()},editPage:function(t){this.fetchUser(t)},deletePage:function(t){var e=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"It cannot be restored after being deleted",onOk:function(){e.contactsDeleteFun(t.id)}})},contactsDeleteFun:function(t){var e=this,i={id:t};Object(o["b"])(i).then((function(t){e.$message.success("delete success"),e.getList()})).catch((function(t){e.$message.error(t)}))},submitKeyword:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var i=Object(s["a"])({},t.modalForm);t.confirmLoading=!0,t.modalForm.id?t.editKeywordFn(i):t.addKeywordFn(i)}))},addKeywordFn:function(t){var e=this;Object(o["a"])(t).then((function(t){e.AddBox=!1,e.$message.success("success"),e.searchList()})).catch((function(t){e.$message.error(t)})).finally((function(){e.confirmLoading=!1}))},editKeywordFn:function(t){var e=this;t.id=this.modalForm.id,Object(o["c"])(t).then((function(t){e.AddBox=!1,e.$message.success("success"),e.searchList()})).catch((function(t){e.$message.error(t)})).finally((function(){e.confirmLoading=!1}))},addBtn:function(){this.modalForm={contactId:void 0,propertiesValue:void 0,propertiesId:void 0,id:void 0},this.addType="add",this.AddBox=!0},changeTab:function(t){var e=t.current;this.pagination.current=e,this.getList()},changePerson:function(t){var e=this.tagList.find((function(e){return e.id===t}));e&&(this.modalForm.propertiesValue=e.cname)},fetchUser:function(t){var e=this;this.fetching=!0;var i={id:t.contactsId};Object(c["c"])(i).then((function(t){d["a"].$emit("getChat",t.data.id,t.data)})).catch((function(t){e.$message.error(t)})).finally((function(){e.fetching=!1}))},filterOption:function(t,e){return e.data.key.indexOf(t)>-1}}},l=u,m=(i("af3a"),i("2877")),f=Object(m["a"])(l,n,a,!1,null,"0249bb5b",null);e["default"]=f.exports},"1ffb":function(t,e,i){},aa39:function(t,e,i){"use strict";i.d(e,"d",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return c}));var n=i("b775"),a={getContactsProperties:"/userProperties/getContactsProperties",addContactsProperties:"/userProperties/addContactsProperties",editContactsProperties:"/userProperties/editContactsProperties",delContactsProperties:"/userProperties/delContactsProperties"};function s(t){return Object(n["b"])({url:a.getContactsProperties,method:"post",data:t})}function o(t){return Object(n["b"])({url:a.addContactsProperties,method:"post",data:t})}function r(t){return Object(n["b"])({url:a.editContactsProperties,method:"post",data:t})}function c(t){return Object(n["b"])({url:a.delContactsProperties,method:"get",params:t})}},af3a:function(t,e,i){"use strict";i("1ffb")}}]);