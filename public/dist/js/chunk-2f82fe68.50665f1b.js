(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f82fe68"],{2598:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAABQCAMAAAC9OtKiAAABelBMVEU9fv49fv8+f/5AgP5Cgf5Dgv5Eg/5Hhf5Oif5Si/5SjP5TjP5Ujf5Xj/5Yj/5glf5ilv1pm/1wn/19qPyFrfyMsvyQk5mQtPySlZuStvyTlpyVmJ6WmZ+WuPyXmqCYuvyanaKau/ybnqObnqSbvPycn6Scn6Wdn6WdoKagoqigo6ihpKqhv/yhwPyipKqipaqjpaunqa6oq7CrrrOsx/utyPuusbauyfuvsbavyfuytLmyy/uztru0t7u0t7y2zvu3ub64u8C5u8C6vcK7vsK70Pu8v8O80fu+0vu+0/u/wcXBw8jHys7H2fvIys7Iy8/I2fvJzNDJ2vrJ2vvK2vrK2/rLztLL2/rO0NTQ3/rR3/rU19rW2NzW2N3X4/rZ29/b3uHc3uHe4OTg6frh4+fi5Ojj5enk5unl5+vl7Pro6+7o7vro7/rp6+/p7/rr8Prt7/Lt8PPu8vrw8vXw9Prx8/bx9Pry9Pfy9frz9fjz9vr09vn09vr19/pgXDcjAAADbElEQVRYw7WZ+XvSMBjHF+d9X5vsEHdYdqA7QBEnTC7ZHBPEA1FAYDKYKArWrmLN/26TltGV9MrI9xdKefPhyZP3ffPmzQi0ULucjftXPG6Xy+1Z8cez5bbViBGzH4VicnV8QKvJokCHlKqRqXEDTUWqkmOkmFscN9ViTnSEFNIz2uFzvkAoGg0FfHPatzNpwT6ytNAfF87X+P4vfC0f7v/bQskmshnsDeFSDdKYRorrWQSbdpCFadU8UDFcAqkSUI2mC5ZIMaHabuybe9/+hmqYEM2RnXXFbm0PWmpvTbFd75ghW8vYaDLThTbUzUxi8+WWMfJgHpss1aFN1ZfwgPkDI2RLIYZ4aFt8SGG2yMiOMusdCTqQtKPMvUNCisrK7EKH2lXWSCQgE3TEHjMxiCwos4YUUuZe0CObOGZCEg1Swms03dQhcYAt8ZBKPPalwHFkCXt4HVKqjn2+pEUKHvQqA6mVwblO0CDTOK679Mgujvd0HynirErMFH+27k08/mEjh+B8LR4hczibkSzfXASyzkz8tGTiXJfrISW8c5Hy47tRoOj8078WyH28x0kqsqp1gWOzvgyOdP2DBRO7YVVFRtCXCsFqG2g0cuuLKbKCKBEFKaAKgCPFzX1wTGdnf5nFENrjpgSMLCJ8imQ1BnS69PyfMTOFOEWMTKLHhi0kADc+GSIbiJPESFRJzUCbSHDq9lcjJvLuVYRsI/imbSQA5x7+JiPDiNSWkWX0kHeABODqS6J5HpHKMjKLHmqOkADc/EwwryFSVkbG0QPvEAlGx74Ppk1EistIP6r2oFOkHKOvBuxRreiXkV7500eBBKc/6u19MsorIzmDALdEgmukMOdkpBttY1RIoHd7tK25ZaRL/ozRIZ/p7GMyyqUio8NBRlUkg4l7hrs8nuE70QobV2cQkAzSBkVyu7JtntxwCg47ScEPrFIwg42CxXbGYNM1Lg1maUsD4wJmi7aAMS6zDi9oyqz3Tsos42Lw9VEx+MRZMWhSsr6lLFnNCuvDF3fvPPrmvLBmUP5DYWHohxQGRykIgyc/8AXZH0sZHJ5ZHPFZNCIYtEtYNHVYtJ5YNMhYtPFYNBtZtERRbAaG3bhFecnTby9v6tvLmxTtZXITPBY7UROcRaueyYUCk2sP7eWMl0OXM5zX1uXMf61zWruWvNb8AAAAAElFTkSuQmCC"},"3daa":function(t,e,s){},6322:function(t,e,s){},7977:function(t,e,s){"use strict";s("ccdfe")},"8d0e":function(t,e,s){"use strict";s("3daa")},a9c7:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"enterprise"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"flex-row"},[e("div",{class:[{active:t.defalutActive},"tab"],on:{click:function(e){return t.tabswitch(0)}}},[t._v(t._s(t.ENTERPRICE_NAME)+"朋友圈"),e("span")]),e("div",{class:[{active:!t.defalutActive},"tab"],on:{click:function(e){return t.tabswitch(1)}}},[t._v("企业微信朋友圈"),e("span")])])]),e("div",{staticClass:"content"},[t.defalutActive?e("enterpriseOther"):e("enterpriseWechat")],1)])},n=[],a=(s("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"enterpriseWechat"},[e("div",{staticClass:"top-prompt"},[t._v(" 从【企业微信朋友圈】同步到【"+t._s(t.ENTERPRICE_NAME)+"朋友圈】的内容，暂不支持地址、点赞、评论的同步 ")]),e("div",{staticClass:"filter-reset-box flex-row align-side"},[e("a-form",{staticClass:"search-form auto-box",attrs:{layout:"inline",labelAlign:"right"}},[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"选择员工"}},[e("div",{staticClass:"use-person",on:{click:function(e){t.visibleUsePerson=!0}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.serviceList,(function(s){return e("li",{key:s.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(s.title))])],1)})),t.serviceList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v("请选择要搜索的创建人")]):t._e()],2),t.serviceList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.serviceList.length)+"个账号")]):t._e(),e("div",{staticClass:"icon"},[t.serviceList.length<1?e("a-icon",{attrs:{type:"down"}}):t._e(),t.serviceList.length>0?e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return e.stopPropagation(),t.clean.apply(null,arguments)}}}):t._e()],1)])])],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"朋友圈类型"}},[e("a-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择朋友圈类型",allowClear:""},on:{change:t.handleChange},model:{value:t.friendsName,callback:function(e){t.friendsName=e},expression:"friendsName"}},t._l(t.friendsList,(function(s){return e("a-select-option",{key:s.val},[t._v(" "+t._s(s.name)+" ")])})),1)],1)],1),e("a-col",{staticClass:"r-b-16"},[e("a-form-item",{attrs:{label:"创建时间"}},[e("a-range-picker",{staticStyle:{width:"280px"},attrs:{"disabled-date":t.disabledDate},on:{change:t.changeDate},model:{value:t.showAddDateTime,callback:function(e){t.showAddDateTime=e},expression:"showAddDateTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)],1),e("a-col",{staticClass:"r-b-16",staticStyle:{"margin-left":"30px","margin-top":"5px"}},[e("a-button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)],1),e("div",{staticClass:"list"},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"flexd"},[e("div",{staticStyle:{display:"flex"}},[e("strong",[t._v("共"+t._s(t.pagination.total)+"条朋友圈")]),e("span",{staticClass:"select-count"},[t._v("已选择"+t._s(t.momentInfos.length)+"条朋友圈")])]),e("div",{staticStyle:{display:"flex"}},[e("a-button",{staticClass:"reset-btn",staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.tongbu()}}},[t._v(" 同步至"+t._s(t.ENTERPRICE_NAME)+"朋友圈 ")]),e("a-button",{staticClass:"reset-btn",attrs:{loading:t.syncloading},on:{click:t.tosyncQw}},[t._v("同步企业朋友圈记录")])],1)])])]),e("a-table",{staticStyle:{background:"#fff"},attrs:{columns:t.columns,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.changeone},scopedSlots:t._u([{key:"wechatMoments",fn:function(s){return e("div",{staticClass:"name-list"},["3"==s.type?e("div",{staticClass:"article"},[e("span",[t._v("[图文消息]")])]):t._e(),e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(s.content))]),"1"==s.type?e("div",{staticClass:"flex"},t._l(s.contentOss,(function(t,s){return e("img",{key:s,staticClass:"image-img",attrs:{src:t,alt:""}})})),0):t._e(),"2"==s.type?e("div",[e("img",{staticClass:"image-img",attrs:{src:s.thumbMediaOss||t.defaultBg,alt:""}})]):t._e()])}},{key:"creatorName",fn:function(s){return e("div",{staticClass:"name-list flex"},[e("a-tag",{staticClass:"bark-color"},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(t._s(s)+" ")],1)],1)}},{key:"operation",fn:function(s,i,n){return e("div",{staticStyle:{display:"flex"},attrs:{index:n}},[e("span",{staticClass:"copy-btn",on:{click:function(e){return t.goDetail(i)}}},[t._v("详情")])])}}])}),e("a-modal",{attrs:{footer:null,width:"680px",centered:"",destroyOnClose:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",{attrs:{type:"deptId",title:"请选择成员",selectList:t.serviceList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleUsePerson=!1}}})],1),e("a-modal",{attrs:{width:"600px"},on:{ok:t.syncOk},model:{value:t.syncShow,callback:function(e){t.syncShow=e},expression:"syncShow"}},[e("div",{staticClass:"enter-modal-body"},[e("h2",{staticClass:"dialog-title"},[t._v("同步到"+t._s(t.ENTERPRICE_NAME)+"朋友圈")]),e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[e("span",{staticClass:"bold-bold"},[t._v("可同步"+t._s(t.momentSyncList.length)+"条企业微信朋友圈")]),e("p",[t._v(" 当前选择了 "),e("span",{staticClass:"number bold-bold"},[t._v(t._s(t.momentInfos.length))]),t._v(" 条朋友圈，其中有 "),e("span",{staticClass:"number bold-bold"},[t._v(t._s(t.momentInfos.length-t.momentSyncList.length))]),t._v(" 条朋友圈已同步至"+t._s(t.ENTERPRICE_NAME)+"朋友圈中，将不再同步该类朋友圈，余下可同步企业微信朋友圈有 "),e("span",{staticClass:"number bold-bold"},[t._v(t._s(t.momentSyncList.length))]),t._v(" 条 ")])]),e("div",{staticClass:"selected-moment-list"},[t.momentSyncList.length>0?e("div",t._l(t.momentSyncList,(function(s,i){return e("div",{key:i,staticClass:"moment-item"},[e("p",{staticClass:"moment-title"},[t._v("朋友圈"+t._s(i+1))]),e("div",{staticClass:"sync-staff-list"},[e("span",{staticClass:"label"},[t._v("同步到"+t._s(t.ENTERPRICE_NAME)+"的员工：")]),e("a-tag",{staticClass:"bark-color"},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(t._s(s.creatorName)+" ")],1)],1),e("div",{staticClass:"moment-content-box"},[e("p",{staticClass:"text"},[t._v(t._s(s.wechatMoments.content))]),"1"==s.wechatMoments.type?e("div",{staticClass:"image"},t._l(s.wechatMoments.contentOss,(function(s,i){return e("img",{key:i,staticClass:"img",attrs:{src:s},on:{click:function(e){return t.bgImgShow(s)}}})})),0):t._e(),"2"==s.wechatMoments.type?e("div",{staticClass:"image"},[e("img",{key:i,staticClass:"img",attrs:{src:s.thumbMediaOss||t.defaultBg},on:{click:function(e){return t.moviceShow(s.wechatMoments.contentOss)}}})]):t._e()])])})),0):e("div",[e("div",{staticStyle:{"padding-top":"74px","padding-bottom":"60px"}},[e("a-empty",[e("span",{attrs:{slot:"description"},slot:"description"},[t._v(" 选中的【企业朋友圈】已全部同步至【"+t._s(t.ENTERPRICE_NAME)+"朋友圈】中了哦～ ")])])],1)])])])])]),e("a-modal",{attrs:{width:"526px",footer:null,centered:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("img",{staticClass:"bgImg",attrs:{src:t.bgImg}})]),e("a-modal",{attrs:{footer:null,width:"1010px",centered:""},model:{value:t.mp4visible,callback:function(e){t.mp4visible=e},expression:"mp4visible"}},[e("div",{staticClass:"preview-box"},[e("video",{attrs:{src:t.videoSrc,autoplay:"",id:"videoPlay"}})])])],1)}),o=[],c=(s("d3b7"),s("d81d"),s("a9e3"),s("a15b"),s("c98f")),l=s("1eb1"),r={data:function(){return{visible:!1,bgImg:"",mp4visible:!1,videoSrc:"",defaultBg:s("2598"),showAddDateTime:null,syncShow:!1,syncloading:!1,friendsList:[{name:"全部类型",val:"2"},{name:"企业发表",val:"0"},{name:"个人发表",val:"1"}],friendsType:2,friendsName:void 0,visibleUsePerson:!1,selectRoleIdList:[""],startOrEndTime:[],dateString:[],serviceList:[],selectedRowKeys:[],tableLoading:!1,beginTime:void 0,endTime:void 0,pagination:{current:1,pageSize:10,total:0},staffIds:void 0,clientList:[],momentSyncList:[],columns:[{title:"朋友圈",width:"200px",dataIndex:"wechatMoments",key:"wechatMoments",scopedSlots:{customRender:"wechatMoments"}},{title:"朋友圈类型",dataIndex:"sendName",key:"sendName"},{title:"类型",dataIndex:"contentName",key:"contentName"},{title:"同步".concat(ENTERPRICE_NAME,"朋友圈状态"),dataIndex:"syncName",key:"syncName"},{title:"创建人",dataIndex:"creatorName",key:"creatorName",scopedSlots:{customRender:"creatorName"}},{title:"创建时间",dataIndex:"publishDate",key:"publishDate"},{title:"已发送成员",dataIndex:"sendCount",key:"sendCount"},{title:"未发送成员",dataIndex:"unsendCount",key:"unsendCount"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}}],momentInfos:[]}},created:function(){this.getList()},methods:{moviceShow:function(t){var e=(new Date).valueOf();this.videoSrc=t+"?timer="+e,this.mp4visible=!0},bgImgShow:function(t){this.bgImg=t,this.visible=!0},customRequest:function(t){t.onSuccess()},tosyncQw:function(){var t=this;this.syncloading=!0,Object(c["f"])().then((function(e){null!==e&&void 0!==e&&e.data&&(t.$message.success("企业微信朋友圈同步成功"),t.pagination.current=1,t.getList())})).finally((function(){t.syncloading=!1}))},tongbu:function(){this.momentInfos.length<=0?this.$message.warning("请先选择需要同步的列表"):this.getUseSyncList()},getUseSyncList:function(){var t=this;Object(c["d"])({momentInfos:this.momentInfos}).then((function(e){null!==e&&void 0!==e&&e.data&&t.disposemomentSyncList(e.data)})).finally((function(){t.syncShow=!0}))},syncOk:function(){var t=this;if(this.momentSyncList.length<=0)this.syncShow=!1;else{var e=this.momentInfos.map((function(t){return{momentInfoId:t.momentInfoId}}));Object(c["e"])({momentInfos:e}).then((function(e){null!==e&&void 0!==e&&e.data&&(t.$message.success("同步成功"),t.selectedRowKeys=[],t.pagination.current=1,t.getList())})).finally((function(){t.syncShow=!1}))}},disposemomentSyncList:function(t){this.momentSyncList=t.map((function(t){var e;return t.wechatMoments={type:t.contentType,linkUrl:t.linkUrl||"",linkTitle:t.linkTitle||"",thumbMediaOss:t.thumbMediaOss||"",content:t.content,contentOss:(null===(e=t.contentOss)||void 0===e?void 0:e.split(","))||[]},t.key=t.momentInfoId,Object.assign({},t)}))},disabledDate:function(t){return t&&t>Date.now()},goDetail:function(t){var e=JSON.stringify(t);sessionStorage.setItem("priseDetail",e),this.$router.push({name:"priseDetail"})},handleChange:function(t){this.friendsType=void 0==t?2:Number(t),this.pagination.current=1,this.getList()},serviceOk:function(t){this.serviceList=t;var e=this.serviceList.map((function(t){return t.source.staffId}));this.staffIds=e.join(","),this.visibleUsePerson=!1,this.pagination.current=1,this.getList()},clean:function(){this.serviceList=[],this.staffIds=void 0,this.pagination.current=1,this.getList()},changeDate:function(t,e){if(this.showAddDateTime=t,e[0]){var s=e[0]+" 00:00:00",i=e[1]+" 23:59:59.999";this.beginTime=this.$moment(s).format("x"),this.endTime=this.$moment(i).format("x")}else this.beginTime=void 0,this.endTime=void 0;this.pagination.current=1,this.getList()},handleReset:function(){this.clearData()},clearData:function(){this.startOrEndTime=[],this.friendsType=2,this.beginTime=void 0,this.endTime=void 0,this.showAddDateTime=null,this.friendsName=void 0,this.serviceList=[],this.pagination.current=1,this.getList()},onSelectChange:function(t,e){this.selectedRowKeys=t,this.momentInfos=e.map((function(t){return{momentInfoId:t.momentInfoId}}))},changeone:function(t){var e=t.current;this.pagination.current=e},getList:function(){var t=this;this.tableLoading=!0;var e={staffIds:this.staffIds,sendType:this.friendsType,queryType:1,beginTime:this.beginTime,endTime:this.endTime,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};"1"==this.pagination.current&&(this.clientList=[]),Object(c["b"])(e).then((function(e){var s;null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.list&&(t.pagination.total=Number(e.data.total),t.disposeClientList(e.data.list))})).finally((function(){t.tableLoading=!1}))},disposeClientList:function(t){this.clientList=t.map((function(t){var e;return"0"==t.sendType?t.sendName="企业发表":"1"==t.sendType?t.sendName="个人发表":t.sendName="所有","0"==t.contentType?t.contentName="文字":"1"==t.contentType?t.contentName="图片":"2"==t.contentType?t.contentName="视频":"3"==t.contentType&&(t.contentName="图文链接"),"0"==t.syncType?t.syncName="已同步":t.syncName="未同步",t.wechatMoments={type:t.contentType,linkUrl:t.linkUrl||"",linkTitle:t.linkTitle||"",thumbMediaOss:t.thumbMediaOss||"",content:t.content,contentOss:(null===(e=t.contentOss)||void 0===e?void 0:e.split(","))||[]},t.key=t.momentInfoId,Object.assign({},t)}))}},components:{AddTransfer:l["a"]}},d=r,m=(s("d40c"),s("2877")),u=Object(m["a"])(d,a,o,!1,null,"4093ff56",null),f=u.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"weiban-moment-wrap"},[e("div",{staticClass:"action"},[e("div",{staticClass:"left"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"publishFriends"})}}},[t._v("发布朋友圈")])],1),e("div",{staticClass:"right"},[e("div",{staticClass:"content-item"},[e("label",[t._v("选择创建人: ")]),e("div",{staticClass:"use-person",on:{click:function(e){t.visibleUsePerson=!0}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.serviceList,(function(s){return e("li",{key:s.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(s.title))])],1)})),t.serviceList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v("请选择要搜索的创建人")]):t._e()],2),t.serviceList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.serviceList.length)+"个账号")]):t._e(),e("div",{staticClass:"icon"},[t.serviceList.length<1?e("a-icon",{attrs:{type:"down"}}):t._e(),t.serviceList.length>0?e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return e.stopPropagation(),t.clean.apply(null,arguments)}}}):t._e()],1)])]),e("div",{staticClass:"content-item"},[e("label",[t._v("发布时间: ")]),e("a-range-picker",{staticStyle:{width:"280px"},attrs:{"disabled-date":t.disabledDate},on:{change:t.changeDate},model:{value:t.showAddDateTime,callback:function(e){t.showAddDateTime=e},expression:"showAddDateTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),e("div",{staticClass:"content-item"},[e("a-button",{on:{click:t.clearData}},[t._v("重置")])],1)])]),e("a-table",{staticStyle:{background:"#fff"},attrs:{columns:t.columns,"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.changeone},scopedSlots:t._u([{key:"wechatMoments",fn:function(s){return e("div",{staticClass:"name-list"},["3"==s.type?e("div",{staticClass:"article"},[e("span",[t._v("[图文消息]")])]):t._e(),e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(s.content))]),"1"==s.type?e("div",{staticClass:"flex"},t._l(s.contentOss,(function(t,s){return e("img",{key:s,staticClass:"image-img",attrs:{src:t,alt:""}})})),0):t._e(),"2"==s.type?e("div",[e("img",{staticClass:"image-img",attrs:{src:s.thumbMediaOss||t.defaultBg,alt:""}})]):t._e()])}},{key:"creatorName",fn:function(s){return e("div",{staticClass:"name-list flex"},[e("a-tag",{staticClass:"bark-color"},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(t._s(s)+" ")],1)],1)}},{key:"ownerName",fn:function(s){return e("div",{staticClass:"name-list flex"},[e("a-tag",{staticClass:"bark-color"},[e("a-icon",{staticClass:"primaryColor",staticStyle:{"margin-right":"3px"},attrs:{type:"user"}}),t._v(t._s(s)+" ")],1)],1)}},{key:"operation",fn:function(s,i,n){return e("div",{staticStyle:{display:"flex"},attrs:{index:n}},[e("span",{staticClass:"copy-btn",on:{click:function(e){return t.deleteMoment(i.momentInfoId)}}},[t._v("删除")]),e("span",{staticClass:"copy-btn",on:{click:function(e){return t.toDetail(i)}}},[t._v("详情")])])}}])}),e("a-modal",{attrs:{footer:null,width:"680px",centered:"",destroyOnClose:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",{attrs:{type:"deptId",title:"请选择成员",selectList:t.serviceList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleUsePerson=!1}}})],1),e("a-modal",{attrs:{footer:null,width:"568px",centered:"",destroyOnClose:""},model:{value:t.detailShow,callback:function(e){t.detailShow=e},expression:"detailShow"}},[e("div",{staticClass:"enter-detail"},[e("h2",{staticClass:"dialog-title"},[t._v("朋友圈详情")]),e("div",{staticClass:"row"},[e("label",[t._v("发布方式：")]),e("div",{staticClass:"content sync"},[t._v(t._s(t.detailInfo.publishName))])]),e("div",{staticClass:"row"},[e("label",[t._v("发布时间：")]),e("div",{staticClass:"content sync"},[t._v(t._s(t.detailInfo.publishDate))])]),e("div",{staticClass:"row"},[e("label",[t._v("同步提醒：")]),e("div",{staticClass:"content sync"},[t._v(t._s(t.detailInfo.publishStatusName))])]),e("div",{staticClass:"row content-row"},[e("label",[t._v("内容：")]),e("div",{staticClass:"content sync"},[e("div",[e("p",[t._v(t._s(t.detailInfo.wechatMoments.content))]),"1"==t.detailInfo.wechatMoments.type?e("div",{staticClass:"images"},t._l(t.detailInfo.wechatMoments.contentOss,(function(s,i){return e("img",{key:i,staticClass:"img",attrs:{src:s},on:{click:function(e){return t.bgImgShow(s)}}})})),0):t._e(),"2"==t.detailInfo.wechatMoments.type?e("div",{staticClass:"images"},[e("img",{staticClass:"img",attrs:{src:t.detailInfo.wechatMoments.thumbMediaOss||t.defaultBg},on:{click:function(e){return t.moviceShow(t.detailInfo.wechatMoments.contentOss)}}})]):t._e(),"3"==t.detailInfo.wechatMoments.type?e("div",{staticClass:"articleBox"},[e("a",{attrs:{href:t.detailInfo.wechatMoments.linkUrl,target:"_blank"}},[e("div",{staticClass:"part"},[e("p",[t._v(t._s(t.detailInfo.wechatMoments.linkTitle))])])])]):t._e()])])])])]),e("a-modal",{attrs:{width:"526px",footer:null,centered:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("img",{staticClass:"bgImg",attrs:{src:t.bgImg}})]),e("a-modal",{attrs:{footer:null,width:"1010px",centered:""},model:{value:t.mp4visible,callback:function(e){t.mp4visible=e},expression:"mp4visible"}},[e("div",{staticClass:"preview-box"},[e("video",{attrs:{src:t.videoSrc,autoplay:"",id:"videoPlay"}})])])],1)},h=[],p=s("5530"),g=s("2f62"),b={data:function(){return{defaultBg:s("2598"),videoSrc:"",mp4visible:!1,detailInfo:{publishName:"",publishDate:"",publishStatusName:"",wechatMoments:{content:""}},detailShow:!1,selectRoleIdList:[""],visibleUsePerson:!1,serviceList:[],showAddDateTime:null,beginTime:void 0,endTime:void 0,pagination:{current:1,pageSize:10,total:0},tableLoading:!1,staffIds:void 0,clientList:[],columns:[{title:"发布方式",dataIndex:"publishName",key:"publishName"},{title:"内容",width:"200px",dataIndex:"wechatMoments",key:"wechatMoments",scopedSlots:{customRender:"wechatMoments"}},{title:"类型",dataIndex:"contentName",key:"contentName"},{title:"创建人",dataIndex:"creatorName",key:"creatorName",scopedSlots:{customRender:"creatorName"}},{title:"来源",dataIndex:"sourceName",key:"sourceName"},{title:"发送成员",dataIndex:"ownerName",key:"ownerName",scopedSlots:{customRender:"ownerName"}},{title:"发布状态",dataIndex:"publishStatusName",key:"publishStatusName"},{title:"发布时间",dataIndex:"publishDate",key:"publishDate"},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"}}],bgImg:"",visible:!1}},created:function(){this.getList()},computed:Object(p["a"])({},Object(g["c"])({channelId:function(t){return t.customer.channelId}})),methods:{moviceShow:function(t){var e=(new Date).valueOf();this.videoSrc=t+"?timer="+e,this.mp4visible=!0},bgImgShow:function(t){this.bgImg=t,this.visible=!0},toDetail:function(t){this.detailInfo=t,this.detailShow=!0},deleteMoment:function(t){var e=this;this.$confirm({title:"提示",icon:"",content:"确定删除该".concat(ENTERPRICE_NAME,"朋友圈，删除后不可恢复？"),onOk:function(){e.deltoPull(t)}})},deltoPull:function(t){var e=this,s=[{momentInfoId:t}];Object(c["a"])({momentInfos:s}).then((function(t){null!==t&&void 0!==t&&t.data&&e.getList()})).finally((function(){e.syncShow=!0}))},clean:function(){this.serviceList=[],this.staffIds=void 0,this.pagination.current=1,this.getList()},getList:function(){var t=this;this.tableLoading=!0;var e={staffIds:this.staffIds,sendType:2,queryType:0,beginTime:this.beginTime,endTime:this.endTime,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};"1"==this.pagination.current&&(this.clientList=[]),Object(c["b"])(e).then((function(e){var s;null!==e&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.list&&(t.pagination.total=Number(e.data.total),t.disposeClientList(e.data.list))})).finally((function(){t.tableLoading=!1}))},disposeClientList:function(t){this.clientList=t.map((function(t){var e;return"0"==t.publishStatus?t.publishStatusName="已发布":t.publishStatusName="未发布","0"==t.source?t.sourceName="".concat(ENTERPRICE_NAME,"朋友圈创建"):t.sourceName="企业微信朋友圈","0"==t.publishType?t.publishName="立即发送":t.publishName="定时发送","0"==t.sendType?t.sendName="企业发表":"1"==t.sendType?t.sendName="个人发表":t.sendName="所有","0"==t.contentType?t.contentName="文字":"1"==t.contentType?t.contentName="图片":"2"==t.contentType?t.contentName="视频":"3"==t.contentType&&(t.contentName="图文链接"),"0"==t.syncType?t.syncName="已同步":t.syncName="未同步",t.wechatMoments={type:t.contentType,content:t.content,linkUrl:t.linkUrl||"",linkTitle:t.linkTitle||"",thumbMediaOss:t.thumbMediaOss||"",contentOss:(null===(e=t.contentOss)||void 0===e?void 0:e.split(","))||[]},t.key=t.momentInfoId,Object.assign({},t)}))},serviceOk:function(t){this.serviceList=t;var e=this.serviceList.map((function(t){return t.source.staffId}));this.staffIds=e.join(","),this.visibleUsePerson=!1,this.pagination.current=1,this.getList()},clearData:function(){this.beginTime=void 0,this.endTime=void 0,this.showAddDateTime=null,this.staffIds=void 0,this.serviceList=[],this.pagination.current=1,this.getList()},changeDate:function(t,e){if(this.showAddDateTime=t,e[0]){var s=e[0]+" 00:00:00",i=e[1]+" 23:59:59.999";this.beginTime=this.$moment(s).format("x"),this.endTime=this.$moment(i).format("x")}else this.beginTime=void 0,this.endTime=void 0;this.pagination.current=1,this.getList()},changeone:function(t){var e=t.current;this.pagination.current=e},disabledDate:function(t){return t&&t>Date.now()}},components:{AddTransfer:l["a"]},watch:{channelId:function(){this.pagination.current=1,this.getList()}}},y=b,C=(s("7977"),Object(m["a"])(y,v,h,!1,null,"fd51e370",null)),w=C.exports,k={name:"EnterpriseCircle",data:function(){return{defalutActive:!0}},methods:{tabswitch:function(t){this.defalutActive="0"==t}},components:{enterpriseWechat:f,enterpriseOther:w}},I=k,_=(s("8d0e"),Object(m["a"])(I,i,n,!1,null,"54acf576",null));e["default"]=_.exports},c98f:function(t,e,s){"use strict";s.d(e,"c",(function(){return a})),s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return c})),s.d(e,"f",(function(){return l})),s.d(e,"d",(function(){return r})),s.d(e,"e",(function(){return d}));var i=s("b775"),n={syncQw:"/moment/enterpriseMoment/syncQw",checkSyncQwMoment:"/moment/enterpriseMoment/checkSyncQwMoment",queryMomentSyncFlag:"/moment/enterpriseMoment/queryMomentSyncFlag",syncLocalMoment:"/moment/enterpriseMoment/syncLocalMoment",getQwMomentList:"/moment/enterpriseMoment/getQwMomentList",delLocalMoment:"/moment/enterpriseMoment/delLocalMoment",publishLocalMoment:"/moment/momentinfo/publishLocalMoment"};function a(t){return Object(i["b"])({url:n.publishLocalMoment,method:"post",data:t})}function o(t){return Object(i["b"])({url:n.delLocalMoment,method:"post",data:t})}function c(t){return Object(i["b"])({url:n.getQwMomentList,method:"post",data:t})}function l(t){return Object(i["b"])({url:n.syncQw,method:"get",params:t})}function r(t){return Object(i["b"])({url:n.queryMomentSyncFlag,method:"post",data:t})}function d(t){return Object(i["b"])({url:n.syncLocalMoment,method:"post",data:t})}},ccdfe:function(t,e,s){},d40c:function(t,e,s){"use strict";s("6322")}}]);