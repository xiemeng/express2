(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70979562"],{"02ed":function(t,e,i){"use strict";
/*!
 * Copyright 2018 yangjunbao <yangjunbao@shimo.im>. All rights reserved.
 * @since 2018-11-02 19:47:25
 */
var a;function n(){return void 0===a&&(a=document.queryCommandSupported("copy")?"copy":!!document.queryCommandSupported("cut")&&"cut"),a}function r(t){var e=document.createElement("input");return e.style.cssText="position: absolute; top: -9999px; left: -9999px;",document.body.appendChild(e),e.value=t,e.readOnly=!0,e.select(),e.setSelectionRange(0,t.length),e}function s(t){var e=n();if(!e)return!1;var i=r(t);try{return document.execCommand(e)}catch(a){return!1}finally{document.body.removeChild(i)}}i.d(e,"a",(function(){return s})),s.isSupported=n},"0395":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"aks-person",on:{click:function(e){return t.$emit("open")}}},[e("ul",{staticClass:"a-line-omit"},[t._l(t.usePersionList,(function(i){return e("li",{key:i.key,staticClass:"a-line-omit"},[e("a-tag",[t._v(t._s(i.tagName))])],1)})),t.usePersionList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v(t._s(t.placeHolder))]):t._e()],2),t.usePersionList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.usePersionList.length)+"个账号")]):t._e(),e("a-icon",{attrs:{type:"caret-down"}})],1)},n=[],r={name:"SelectInput",props:{usePersionList:{type:[Array],default:function(){return[]}},placeHolder:{type:[String],default:""}}},s=r,o=(i("af8f"),i("2877")),l=Object(o["a"])(s,a,n,!1,null,"7ad15fc6",null);e["a"]=l.exports},"09c0":function(t,e,i){},"17db":function(t,e,i){"use strict";i("1a5a")},"1a5a":function(t,e,i){},"209d":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-wrap"},[e("div",{staticClass:"contant-wrap"},[e("p",{staticStyle:{"text-align":"right"}},[e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return t.$emit("cancle")}}})],1),e("img",{staticClass:"bg",attrs:{src:"/imgs/chatBg.png"}}),e("WebHtml",{staticClass:"box-contant",attrs:{customerForm:t.customerForm}}),e("div",{staticClass:"code-img"},[e("p",[t._v("请扫码预览")]),e("vue-qr",{attrs:{text:t.qrCode,size:200}})],1)],1)])},n=[],r=i("471b"),s=i("658f5"),o=i.n(s),l={name:"PhonePreview",components:{WebHtml:r["a"],vueQr:o.a},props:{customerForm:{type:Object,default:function(){return{}}},qrCode:{type:String,default:""}},data:function(){return{}},methods:{}},c=l,u=(i("17db"),i("2877")),d=Object(u["a"])(c,a,n,!1,null,"088d8962",null);e["a"]=d.exports},2880:function(t,e,i){"use strict";i("592d")},"299d":function(t,e,i){},"2a86":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),t.tipText?e("span",{attrs:{name:"tip"}},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"primaryColor",attrs:{type:"bell",theme:"filled"}}),t._v(" "+t._s(t.tipText)+" ")],1)]):t._e(),t._t("default"),t.footer?e("div",{staticClass:"foot-button"},[e("div",{staticClass:"left"},[t._t("bottomLeft")],2),e("a-space",{attrs:{size:12}},[t._t("footer"),e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v(t._s(t.cancleText))]),e("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.$emit("serviceOk")}}},[t._v(t._s(t.okText))])],2)],1):t._e()],2)},n=[],r={name:"CommonModal",props:{title:{type:String,default:"标题"},cancleText:{type:String,default:"取消"},okText:{type:String,default:"确定"},tipText:{type:[String,Boolean],default:!1},footer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}}},s=r,o=(i("2880"),i("2877")),l=Object(o["a"])(s,a,n,!1,null,"c55b780c",null);e["a"]=l.exports},"3c9e":function(t,e,i){"use strict";i("8b53")},"471b":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[t.getFormSet.children[0].isChecked?e("div",{staticClass:"form-img"},[e("img",{attrs:{src:t.getFormSet.children[0].value.compress},on:{error:t.errorImg}})]):t._e(),e("div",{staticClass:"form-name"},[e("a-input",{attrs:{placeholder:"请输入表单名称",size:"large"},model:{value:t.getFormSet.children[1].value,callback:function(e){t.$set(t.getFormSet.children[1],"value",e)},expression:"getFormSet.children[1].value"}})],1),t.getFormSet.children[2].isChecked?e("div",{staticClass:"form-describe"},[e("a-textarea",{attrs:{placeholder:"请输入表单说明",autoSize:{minRows:4,maxRows:4}},model:{value:t.getFormSet.children[2].value,callback:function(e){t.$set(t.getFormSet.children[2],"value",e)},expression:"getFormSet.children[2].value"}})],1):t._e(),e("ul",{staticClass:"background-white"},[t._l(t.customerForm.componentVoList,(function(i,a){return e("li",{key:"".concat(i.id+a),staticClass:"list-data",class:t.isShowBorder(i,"cross",a),on:{click:function(e){return t.chooseList(a,i)}}},[e("div",{staticClass:"list-data-contant",class:t.isShowBorder(i,"cross",a)},[e("div",[i.hideTitle?t._e():e("p",{staticClass:"title"},[t.isRequire(i,"verify")?e("span",{staticClass:"require"},[t._v("*")]):t._e(),t._v(" "+t._s("".concat(a+1))+" "+t._s(t.getTitle(i,"title"))+" ")]),"input"===i.type?e("div",[e("a-input",{attrs:{placeholder:i.children[0].value}})],1):t._e(),"paging"===i.type?e("div",{staticClass:"paging"},[e("p",[t._v("第"+t._s(i.index+1)+"页/共"+t._s(t.customerForm.pageSize)+"页")])]):t._e(),"image-text"===i.type?e("div",[e("a-input",{attrs:{placeholder:i.children[0].value}}),e("div",{staticClass:"form-img"},[e("img",{attrs:{src:i.children[1].value.compress},on:{error:t.errorImg}})])],1):t._e(),"slideshow"===i.type?e("div",[i.children[1].value.length>0&&t.slideshow?e("a-carousel",{attrs:{autoplay:"",autoplaySpeed:i.children[0].value}},t._l(i.children[1].value,(function(i,a){return e("div",{key:a},[e("img",{attrs:{src:i.thumbUrl},on:{error:t.errorImg}})])})),0):e("div",{staticClass:"form-img"},[e("img",{attrs:{src:""},on:{error:t.errorImg}})])],1):t._e(),"one_picture"===i.type?e("div",["1"===i.children[0].value?e("div",{staticClass:"form-img"},[e("img",{attrs:{src:i.children[1].value.compress},on:{error:t.errorImg}})]):t._e(),"2"===i.children[0].value?e("div",[e("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,accept:t.accept}},[e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(" "+t._s(i.children[2].value)+" ")])],1)])],1):t._e()]):t._e(),"textarea"===i.type?e("div",[e("a-textarea",{attrs:{placeholder:i.children[1].tips,autoSize:{minRows:4,maxRows:4}},model:{value:i.children[1].value,callback:function(e){t.$set(i.children[1],"value",e)},expression:"item.children[1].value"}})],1):t._e(),"select"===i.type?e("div",[e("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:i.children[1].value}},t._l(t.getSelect(i,"option"),(function(i){return e("a-select-option",{key:i.id,attrs:{value:i.value}},[t._v(" "+t._s(i.value)+" ")])})),1)],1):t._e(),"cascade3"===i.type?e("div",[e("div",{staticClass:"solid-bar"},t._l(t.getAddress(i.children),(function(i,a){return e("a-select",{key:a,staticClass:"solid-children",model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"address.value"}},[e("a-select-option",{key:i.title,attrs:{value:i.title}},[t._v(" "+t._s(i.title)+" ")])],1)})),1),"address"===i.id?e("a-textarea",{staticClass:"address-textarea",attrs:{placeholder:i.children[3].tips,autoSize:{minRows:4,maxRows:4}},model:{value:i.children[3].value,callback:function(e){t.$set(i.children[3],"value",e)},expression:"item.children[3].value"}}):t._e()],1):t._e(),"sex"===i.id?e("div",[e("div",{staticClass:"solid-bar"},[e("a-radio-group",{model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}},t._l(i.option,(function(a){return e("a-radio",{key:a.id,style:t.getRadioStyle(i,"arrangement"),attrs:{value:a.id}},[t._v(" "+t._s(a.text)+" ")])})),1)],1)]):t._e(),"radio"===i.type?e("div",[e("div",{staticClass:"solid-bar"},[e("a-radio-group",{model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}},t._l(i.children[1].list,(function(a){return e("a-radio",{key:a.id,style:t.getRadioStyle(i,"arrangement"),attrs:{value:a.id}},[a.baseImg.compress?e("a-avatar",{attrs:{src:a.baseImg.compress,size:22,shape:"square"}}):t._e(),t._v(" "+t._s(a.value)+" ")],1)})),1)],1)]):t._e(),"checkbox"===i.type?e("div",[e("div",{staticClass:"solid-bar"},[e("a-checkbox-group",{model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}},t._l(i.children[1].list,(function(a){return e("div",{key:a.id,staticStyle:{"line-height":"30px"},style:t.getRadioStyle(i,"arrangement")},[e("a-checkbox",{key:a.id,attrs:{value:a.id}},[a.baseImg.compress?e("a-avatar",{attrs:{src:a.baseImg.compress,size:22,shape:"square"}}):t._e(),t._v(" "+t._s(a.value)+" ")],1),e("br")],1)})),0)],1)]):t._e()]),t.activite===a?e("div",{staticClass:"list-data-right"},[e("p",{on:{click:function(e){return e.stopPropagation(),t.upData(a)}}},[e("a-tooltip",{attrs:{title:"上移"}},[e("a-icon",{attrs:{type:"up"}})],1)],1),e("p",{on:{click:function(e){return e.stopPropagation(),t.downData(a)}}},[e("a-tooltip",{attrs:{title:"下移"}},[e("a-icon",{attrs:{type:"down"}})],1)],1),e("p",{on:{click:function(e){return e.stopPropagation(),t.deleteData(a)}}},[e("a-tooltip",{attrs:{title:"删除"}},[e("a-icon",{attrs:{type:"delete"}})],1)],1)]):t._e()])])})),e("a-button",{staticClass:"foot-bottom",attrs:{type:"primary",block:"",size:"large"}},[t._v(t._s(t.getFormSet.children[3].value))])],2)])},n=[],r=(i("a9e3"),i("7db0"),i("d3b7"),i("a434"),i("4de4"),{name:"WebHtml",components:{},props:{customerForm:{type:Object,default:function(){return{}}},value:{type:[String,Number],default:""}},computed:{getFormSet:function(){var t;return null===(t=this.customerForm.asideRightData)||void 0===t?void 0:t.find((function(t){return"formSet"===t.id}))}},watch:{customerForm:{handler:function(){var t=this;setTimeout((function(){var e,i,a=t.customerForm.componentVoList.find((function(t){return"slideshow"===t.type}));null!==a&&void 0!==a&&null!==(e=a.children[1])&&void 0!==e&&null!==(i=e.value[0])&&void 0!==i&&i.thumbUrl&&(t.slideshow=!0,t.$forceUpdate())}),300),this.$forceUpdate()},deep:!0},activite:{handler:function(){this.$emit("input",this.activite)}},value:{handler:function(){this.activite=this.value},immediate:!0}},data:function(){return{slideshow:!1,accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",activite:-1}},methods:{upData:function(t){if(0===t)this.$message.warning("不能上移了");else{var e=this.customerForm.componentVoList[t];this.customerForm.componentVoList[t]=this.customerForm.componentVoList[t-1],this.activite=t-1,this.customerForm.componentVoList[t-1]=e,this.$forceUpdate()}},deleteData:function(t){this.customerForm.componentVoList.splice(t,1),this.$emit("deleteData")},downData:function(t){if(t===this.customerForm.componentVoList.length-1)this.$message.warning("不能下移了");else{var e=this.customerForm.componentVoList[t];this.customerForm.componentVoList[t]=this.customerForm.componentVoList[t+1],this.activite=t+1,this.customerForm.componentVoList[t+1]=e,this.$forceUpdate()}},chooseList:function(t,e){this.$emit("chooseList",e,null,!0),this.activite=t},isShowBorder:function(t,e,i){var a,n,r=null===(a=t.children)||void 0===a?void 0:a.find((function(t){return t.id===e})),s=[];null!==r&&void 0!==r&&r.list[0].isChecked&&s.push(null===r||void 0===r||null===(n=r.list[0])||void 0===n?void 0:n.value);return i===this.activite&&s.push("active"),s},isRequire:function(t,e){var i,a=t.children.find((function(t){return t.id===e}));return!(null!==a&&void 0!==a&&null!==(i=a.list[0])&&void 0!==i&&i.isChecked)},getAddress:function(t){return t.filter((function(t){return"input"===t.type}))},getRadioStyle:function(t,e){var i=t.children.find((function(t){return t.id===e})),a={marginRight:0,height:"30px",lineHeight:"30px"};return a.width="".concat(100/i.value,"%"),a},getSelect:function(t,e){var i=t.children.find((function(t){return t.id===e}));return null===i||void 0===i?void 0:i.list},getTitle:function(t,e){var i=t.children.find((function(t){return t.id===e}));return(null===i||void 0===i?void 0:i.value)||t.title},errorImg:function(t){t.target.src="/imgs/formTable/empty-img.png"}}}),s=r,o=(i("3c9e"),i("2877")),l=Object(o["a"])(s,a,n,!1,null,"5f1de929",null);e["a"]=l.exports},"52f9":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"d",(function(){return s}));var a=[{title:"填写项",key:"fillIn",children:[{title:"信息",tips:"不能重复添加同一个元素",isRepetition:!1,list:[{title:"公司",id:"company",type:"input",count_type:"input",exhibition:!1,data:{value:"",img:{}},children:[{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请输入公司名称",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"地址",id:"address",count_type:"select",type:"cascade3",exhibition:!1,data:{value:"",img:{}},children:[{title:"省份",isChecked:!1,disabled:!0,value:"省份",tips:"请输入",maxLength:15,type:"input"},{title:"城市",isChecked:!1,disabled:!0,value:"城市",tips:"请输入",maxLength:15,type:"input"},{title:"区/县",isChecked:!1,disabled:!0,value:"区/县",tips:"请输入",maxLength:15,type:"input"},{title:"街道",isChecked:!1,value:"街道信息",tips:"街道信息",maxLength:100,type:"textarea"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"姓名",id:"name",type:"input",count_type:"input",exhibition:!1,data:{value:"",img:{}},children:[{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请输入姓名",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"微信号",id:"wechat",type:"input",count_type:"input",exhibition:!1,data:{value:"",img:{}},children:[{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请输入微信号",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"职务",id:"post",type:"input",count_type:"input",exhibition:!1,data:{value:"",img:{}},children:[{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请输入职务",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"性别",id:"sex",value:"",type:"sex",count_type:"select",exhibition:!1,data:{value:"",img:{}},option:[{text:"男",id:0},{text:"女",id:1}],children:[{title:"排列方式",id:"arrangement",isChecked:!1,value:"1",tips:"请输入",maxLength:15,type:"radio",list:[{title:"1列",label:"1"},{title:"2列",label:"2"}]},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"手机",id:"phoneNum",type:"input",count_type:"input",exhibition:!1,data:{value:"",img:{}},children:[{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请输入手机",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"生日",id:"birthday",type:"cascade3",exhibition:!1,data:{value:"",img:{}},count_type:"select",children:[{title:"年份",isChecked:!1,disabled:!0,value:"年份",tips:"请输入",maxLength:15,type:"input"},{title:"月份",isChecked:!1,disabled:!0,value:"月份",tips:"请输入",maxLength:15,type:"input"},{title:"日期",isChecked:!1,disabled:!0,value:"日期",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]}]},{title:"选项",tips:"可重复添加",isRepetition:!0,list:[{title:"单下拉框",id:"single",type:"select",count_type:"select",exhibition:!1,data:{value:"",img:{}},children:[{title:"标题",id:"title",isChecked:!1,value:"单下拉框",tips:"请输入",maxLength:80,type:"input"},{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请选择",tips:"请输入",maxLength:15,type:"input"},{title:"选项内容",id:"option",subtitle:"客户标签",subtitleTooltip:"开启【客户标签】，可给选项设置不同的标签",subtitleValue:!1,isChecked:!1,value:"请选择",tips:"请输入",maxLength:20,type:"select",defaultItem:{value:"选项",selectTagList:[]},list:[{value:"选项1",selectTagList:[],id:0},{value:"选项2",selectTagList:[],id:1},{value:"选项3",selectTagList:[],id:2}]},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"单选",id:"multipleChoice",type:"radio",value:"",count_type:"select",exhibition:!1,data:{value:"",img:{}},children:[{title:"标题",id:"title",isChecked:!1,value:"单选",tips:"请输入",maxLength:80,type:"input"},{title:"选项内容",subtitle:"客户标签",subtitleTooltip:"开启【客户标签】，可给选项设置不同的标签",subtitleValue:!1,isUpdateImg:!0,accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",isChecked:!1,value:"请选择",tips:"请输入",maxLength:15,type:"select",defaultItem:{value:"选项",selectTagList:[],baseImg:""},list:[{value:"选项1",selectTagList:[],baseImg:"",id:1},{value:"选项3",selectTagList:[],baseImg:"",id:2},{value:"选项2",selectTagList:[],baseImg:"",id:3}]},{title:"排列方式",id:"arrangement",isChecked:!1,value:"1",tips:"请输入",maxLength:15,type:"radio",list:[{title:"1列",label:"1"},{title:"2列",label:"2"},{title:"3列",label:"3"}]},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"多选",id:"multiSelect",type:"checkbox",count_type:"select",exhibition:!1,data:{value:[],img:{}},children:[{title:"标题",id:"title",isChecked:!1,value:"多选",tips:"请输入",maxLength:80,type:"input"},{title:"选项内容",subtitle:"客户标签",subtitleTooltip:"开启【客户标签】，可给选项设置不同的标签",subtitleValue:!1,isUpdateImg:!0,accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",isChecked:!1,value:"请选择",tips:"请输入",maxLength:15,type:"select",defaultItem:{value:"选项",selectTagList:[],baseImg:""},list:[{value:"选项1",selectTagList:[],baseImg:"",id:1},{value:"选项3",selectTagList:[],baseImg:"",id:2},{value:"选项2",selectTagList:[],baseImg:"",id:3}]},{title:"排列方式",id:"arrangement",isChecked:!1,value:"1",tips:"请输入",maxLength:15,type:"radio",list:[{title:"1列",label:"1"},{title:"2列",label:"2"},{title:"3列",label:"3"}]},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]}]},{title:"填空",tips:"可重复添加",isRepetition:!0,list:[{title:"多行填空",id:"textarea",type:"textarea",count_type:"input",exhibition:!1,data:{value:"",img:{}},children:[{title:"标题",id:"title",isChecked:!1,value:"多行填空",tips:"请输入",maxLength:80,type:"input"},{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请输入",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"单行填空",id:"input",type:"input",count_type:"input",exhibition:!1,data:{value:"",img:{}},children:[{title:"标题",id:"title",isChecked:!1,value:"单行填空",tips:"请输入",maxLength:80,type:"input"},{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请输入",tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]}]},{title:"展示",tips:"可重复添加",isRepetition:!0,list:[{title:"文字",id:"text",hideTitle:!0,type:"input",count_type:"other",exhibition:!0,children:[{title:"编辑文案",isChecked:!1,value:"请输入文本",tips:"请输入",maxLength:500,type:"textarea"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"图片",id:"one_picture",hideTitle:!0,type:"one_picture",radio:!0,data:{value:[],img:{}},count_type:"other",exhibition:!0,children:[{title:"",isChecked:!1,value:"1",isShow:["1","2"],tips:"请输入",maxLength:80,type:"radio",list:[{title:"企业上传",label:"1"},{title:"客户上传",label:"2"}]},{isChecked:!0,value:{compress:""},tips:"",isShow:["1"],maxLength:1,type:"img",accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp"},{title:"默认文案设置",id:"defaultText",isChecked:!1,value:"请上传图片",isShow:["2"],tips:"请输入",maxLength:15,type:"input"},{title:"校验设置",id:"verify",isShow:["2"],list:[{isChecked:!1,value:!1,tips:"设置此字段为非必填项"}],type:"switch"},{title:"分割线设置",id:"cross",isShow:["1","2"],list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]}]},{title:"感谢语",tips:"不能重复添加同一个元素",isRepetition:!1,list:[{title:"感谢语",id:"acknowledgments",hideTitle:!0,type:"input",count_type:"other",exhibition:!0,children:[{title:"编辑文案",isChecked:!1,value:"感谢参与填写哦~",tips:"请输入",maxLength:80,type:"textarea"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]}]},{title:"其他 ",id:"ather",tips:"可重复添加",isRepetition:!0,list:[{title:"分页",count_type:"other",exhibition:!0,hideTitle:!0,id:"paging",type:"paging",index:0,notAdd:!0}]}]},{title:"展示项",key:"exhibition",children:[{title:"展示",tips:"可重复添加",isRepetition:!0,list:[{title:"图文",id:"image-text",hideTitle:!0,type:"image-text",exhibition:!0,children:[{title:"编辑文案",isChecked:!1,value:"感谢参与填写哦~",tips:"请输入",maxLength:80,type:"textarea"},{title:"上传图片",isChecked:!0,subtitleAcross:"企业上传图片",value:{compress:""},tips:"建议上传比例为375x235px，且小于2M图",maxLength:0,type:"img",accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]},{title:"轮播图",id:"slideshow",hideTitle:!0,type:"slideshow",exhibition:!0,children:[{title:"轮播时间",subtitleAcross:"到达时间自动轮播下一张图片",isChecked:!1,value:2e3,tips:"请输入",maxLength:80,type:"radio",list:[{title:"2秒",label:2e3},{title:"4秒",label:4e3}]},{title:"上传图片",isChecked:!0,value:[],tips:"(企业上传图片，最多上传9张，最少上传2张，建议上传比例为10：7且小于2M的图片)",maxLength:9,type:"imgList",accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp"},{title:"分割线设置",id:"cross",list:[{isChecked:!1,id:"parting",value:"soild",tips:"显示分割线",tooltip:"开启「显示分割线」,该字段上方会出现一条线，用于分割表单上下文",list:[{text:"横线",label:"soild"},{text:"虚线",label:"dashed"}]}],type:"switch"}]}]}]}],n=[{title:"表单设置",id:"formSet",children:[{title:"头图",isChecked:!0,switch:!0,value:{compress:""},tips:"建议上传比例为375x235px，且小于2M图",maxLength:0,type:"img",accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp"},{title:"表单名称",isChecked:!0,value:"表单名称",tips:"请输入表单名称",maxLength:30,type:"input"},{title:"表单说明",isChecked:!0,switch:!0,value:"表单说明",tips:"请输入表单说明",maxLength:500,type:"textarea"},{title:"按钮文案",isChecked:!0,value:"提交",tips:"完成",maxLength:8,type:"input"}]}],r={color:"#1890ff",title:"提交",index:"",type:"button"},s=[{img:"/imgs/formTable/empty-form.png",title:"空白表单",subtitle:"自由设置",id:0,data:[{cover:"",name:"表单名称",describe:"表单说明"}]},{img:"/imgs/formTable/questionnaire-form.png",title:"问卷调查",subtitle:"适合满意度调查、产品调查、市场调查、学生调查等场景",id:1,data:[{cover:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/questionnaire.png",name:"问卷调查",describe:"非常感谢您能够参加调查，希望能够得到您的大力支持与合作，请积极提供您的看法与意见哦～我们极其重视数据安全，绝不会泄漏任何您的隐私信息！现在我们就马上开始填写问卷调查吧～"}]},{img:"/imgs/formTable/activite-form.png",title:"活动报名",subtitle:"适用于活动报名、资质审核、结果推送场景",id:2,data:[{cover:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/activite.png",name:"活动报名",describe:"活动报名现在开始啦，请按照表单内容正确填写相关信息哦～报名时间是有限制的哦，现在我们马上开始填写活动报名信息吧～"}]},{img:"/imgs/formTable/sale-form.png",title:"售后服务",subtitle:"适用于活动报名、资质审核、结果推送场景",id:3,data:[{cover:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/sale.png",name:"售后服务",describe:"请正确填写售后信息，避免信息错误导致售后服务不及时哦～"}]},{img:"/imgs/formTable/market-form.png",title:"营销落地页",subtitle:"适用于营销获客、图片轮播、图文展示、广告落地页",id:4,data:[{cover:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/market.png",name:"营销落地页",describe:"表单说明"}]}]},"592d":function(t,e,i){},"69df":function(t,e,i){},"719f":function(t,e,i){"use strict";i.r(e);i("caad"),i("2532");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("header",{staticClass:"header background-white"},[e("div",{staticClass:"header-left",on:{click:function(e){return t.$router.go(-1)}}},[e("a-icon",{attrs:{type:"left"}}),e("span",{staticClass:"back"},[t._v(" 返回 ")]),0!=t.defaultData.id?e("span",{staticClass:"primaryColor"},[t._v(t._s(t.defaultData.title))]):t._e()],1),e("div",{staticClass:"header-center"},[t._v("375*560 px")]),e("div",{staticClass:"header-right"},[e("a-space",[e("a-button",{attrs:{type:"primary",loading:t.loading1},on:{click:function(e){return t.submitForm("preview","loading1")}}},[t._v("预览")]),e("a-button",{attrs:{type:"primary",loading:t.loading2},on:{click:function(e){return t.submitForm("draft","loading2")}}},[t._v("保存为草稿")]),e("a-button",{attrs:{type:"primary",loading:t.loading3},on:{click:function(e){return t.submitForm("publish","loading3")}}},[t._v(" "+t._s("edit"==t.state?"更新":"发布")+" ")])],1)],1)]),e("section",{staticClass:"section-wrap"},[e("aside",{staticClass:"background-white section-left"},[e("a-tabs",{attrs:{"default-active-key":"fillIn",tabBarStyle:t.tabBarStyle}},t._l(t.asideLeftData,(function(i){return e("a-tab-pane",{key:i.key,attrs:{tab:i.title}},[e("div",{staticClass:"tab-wrap"},t._l(i.children,(function(i,a){return e("div",{key:a},[e("div",{staticClass:"left-title"},[e("strong",[t._v(t._s(i.title))]),e("span",{staticClass:"aks-tips"},[t._v("("+t._s(i.tips)+")")])]),e("ul",{staticClass:"list-wrap"},t._l(i.list,(function(a){return e("li",{key:a.id,staticClass:"list",on:{click:function(e){return t.editInfo(a,i.isRepetition)}}},[e("a-button",{attrs:{"data-info":a.id}},[t._v(t._s(a.title))])],1)})),0)])})),0)])})),1)],1),e("section",{staticClass:"section-main"},[e("div",{staticClass:"main-content background-white"},[e("WebHtml",{attrs:{customerForm:t.customerForm},on:{chooseList:t.chooseInfo,deleteData:t.deleteData},model:{value:t.activite,callback:function(e){t.activite=e},expression:"activite"}})],1)]),e("aside",{staticClass:"background-white section-right"},[e("a-tabs",{attrs:{tabBarStyle:t.tabBarStyle},model:{value:t.rightTabs,callback:function(e){t.rightTabs=e},expression:"rightTabs"}},t._l(t.customerForm.asideRightData,(function(i){return e("a-tab-pane",{key:i.id,attrs:{tab:i.title}},[e("ul",{staticClass:"form-setting"},t._l(i.children,(function(a,n){return e("li",{directives:[{name:"show",rawName:"v-show",value:!(i.radio&&!a.isShow.includes(i.children[0].value)),expression:"!(rightData.radio && !item.isShow.includes(rightData.children[0].value))"}],key:n},[a.title?e("p",{staticClass:"set-header"},[e("strong",[t._v(" "+t._s(a.title)+" "),a.subtitleAcross?e("span",{staticClass:"font-color-black-25"},[t._v("("+t._s(a.subtitleAcross)+")")]):t._e()]),"formSet"===t.rightTabs&&a.switch?e("a-switch",{attrs:{size:"small"},model:{value:a.isChecked,callback:function(e){t.$set(a,"isChecked",e)},expression:"item.isChecked"}}):t._e()],1):t._e(),e("FormList",{directives:[{name:"show",rawName:"v-show",value:a.isChecked||"formSet"!==t.rightTabs,expression:"item.isChecked || rightTabs !== 'formSet'"}],staticClass:"form-list",attrs:{formInfo:a}})],1)})),0)])})),1)],1)]),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:"",width:"950px"},model:{value:t.visiblePublish,callback:function(e){t.visiblePublish=e},expression:"visiblePublish"}},[e("Publish",{attrs:{state:t.state,loading:t.loadingPublish},on:{cancle:function(e){t.visiblePublish=!1},serviceOk:t.publishForm},model:{value:t.publishData,callback:function(e){t.publishData=e},expression:"publishData"}})],1),t.isShowPhone?e("PhonePreview",{attrs:{customerForm:t.customerForm,qrCode:t.qrCode},on:{cancle:function(e){t.isShowPhone=!1}}}):t._e()],1)},n=[],r=i("53ca"),s=i("5530"),o=i("c7eb"),l=i("1da1"),c=(i("7db0"),i("d3b7"),i("b0c0"),i("a434"),i("159b"),i("d81d"),i("a9e3"),i("3ca3"),i("ddb0"),i("a15b"),i("9911"),i("52f9")),u=i("26f2"),d=i("8f19"),m=i("de2f"),p=i("471b"),f=i("209d"),h=i("842b"),v=i("ca00"),g={name:"FormEditor",components:{FormList:u["a"],Publish:m["a"],WebHtml:p["a"],PhonePreview:f["a"]},mixins:[h["a"]],data:function(){return{uploadFilePath:"clientTransformation",tabBarStyle:{textAlign:"center"},asideLeftData:c["a"],rightTabs:"formSet",visiblePublish:!1,defaultSubmitButton:c["c"],isShowPhone:!1,qrCode:"",activite:-1,loadingPublish:!1,loading1:!1,loading2:!1,loading3:!1,customerForm:{componentVoList:[],pageSize:0,asideRightData:c["b"]},selfFormId:"",form:{},formStatus:"",publishData:{},defaultData:{}}},computed:{type:function(){return this.$route.query.state},state:function(){return this.$route.query.type},rightData:function(){return this.customerForm.asideRightData.find((function(t){return"formSet"===t.id}))},formId:function(){return this.selfFormId||this.$route.query.formId}},watch:{"customerForm.asideRightData":{handler:function(){"one_picture"===this.customerForm.asideRightData[0].id&&("2"===this.customerForm.asideRightData[0].children[0].value?(this.customerForm.asideRightData[0].hideTitle=!1,this.customerForm.asideRightData[0].exhibition=!1):(this.customerForm.asideRightData[0].hideTitle=!0,this.customerForm.asideRightData[0].exhibition=!0))},deep:!0}},created:function(){var t=this,e=c["d"].find((function(e){return e.id==t.type}));this.defaultData=e,this.rightData.children[0].value.compress=e.data[0].cover,this.rightData.children[1].value=e.data[0].name,this.rightData.children[2].value=e.data[0].describe,this.formId&&this.getCustomerFormInfo()},methods:{deleteData:function(){this.customerForm.asideRightData.length>1&&(this.customerForm.asideRightData=[this.customerForm.asideRightData[1]]),this.rightTabs="formSet",this.$forceUpdate()},publishForm:function(t){var e=this;return Object(l["a"])(Object(o["a"])().mark((function i(){var a;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.loadingPublish=!0,i.next=3,e.getPublishParams(t);case 3:a=i.sent,Object(d["g"])(a).then((function(t){e.$router.go(-1),e.$message.success("表单发布成功")})).catch((function(t){e.$message.error(t)})).finally((function(){e.loadingPublish=!1}));case 5:case"end":return i.stop()}}),i)})))()},getCustomerFormInfo:function(){var t=this;Object(d["e"])({formId:this.formId}).then((function(e){var i,a;if(null!==(i=e.data)&&void 0!==i&&null!==(a=i.form)&&void 0!==a&&a.asideLeftData&&(t.formStatus=e.data.form.status,t.form=e.data.form,t.customerForm=JSON.parse(e.data.form.asideLeftData),e.data.form.actionList=e.data.actionList,t.publishData=e.data.form,"reuse"===t.state)){var n,r=null===(n=t.customerForm.asideRightData)||void 0===n?void 0:n.find((function(t){return"formSet"===t.id}));r.children[1].value=r.children[1].value+"_复制"}})).catch((function(e){t.$message.error(e)}))},chooseInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.infoCommon(t,e,i)},editInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||!this.isExist(t)?this.infoCommon(t,e,i):this.$message.warning("您已添加了该字段，请不要重复添加")},infoCommon:function(t){var e=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(t){if(!i){t=JSON.parse(JSON.stringify(t));e.activite>=0?(e.customerForm.componentVoList.splice(e.activite+1,0,t),e.activite++):e.customerForm.componentVoList.push(t),e.getPageSize()}if(t.notAdd)return e.customerForm.asideRightData=1===c["b"].length?c["b"]:[c["b"][1]],void(e.rightTabs="formSet");1===e.customerForm.asideRightData.length?(e.customerForm.asideRightData.unshift(t),e.rightTabs=t.id):(e.$set(e.customerForm.asideRightData,0,t),e.rightTabs=t.id)}(t)},getPageSize:function(){var t=[];this.customerForm.componentVoList.forEach((function(e){"paging"===e.type&&t.push(e)})),t.length>0&&t.forEach((function(t,e){t.index=e})),this.customerForm.pageSize=t.length+1},isExist:function(t){for(var e=this.customerForm.componentVoList,i=0;i<e.length;i++){var a=e[i];if(a.id===t.id)return!0}return!1},getParams:function(){var t=this;return new Promise(function(){var e=Object(l["a"])(Object(o["a"])().mark((function e(i,a){var n,r,s,l;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=[],l={componentVoList:t.customerForm.componentVoList.map((function(e,i){t.getUploadFile(e,s);var a=[];return"single"===e.id&&(a=e.children[2].list.map((function(i){return{value:i.value,tag:t.getTag(e.children[2],i)}}))),"multipleChoice"!==e.id&&"multiSelect"!==e.id||(a=e.children[1].list.map((function(i){return{value:i.value,tag:t.getTag(e.children[1],i)}}))),"sex"===e.id&&(a=[{value:"男",tag:""},{value:"女",tag:""}]),{customerFormComponent:{componentId:e.id,index:i,formId:t.selfFormId||("reuse"===t.state?"":t.formId),title:e.title,componentIcon:"",type:e.type,countType:e.count_type,isRequired:Number(t.isRequire(e,"verify"))},customerFormConfig:{option:JSON.stringify(a),index:i,defaultText:t.getDefaultText(e,"defaultText"),isRequired:Number(t.isRequire(e,"verify")),lineType:"soild"===t.isShowBorder(e,"cross")?"1":"0",isShowDivisionLine:Number(t.isShowBorder(e,"cross"))}}})),form:{formId:t.selfFormId||("reuse"===t.state?"":t.formId),status:t.formStatus,name:t.rightData.children[1].value,cover:(null===(n=t.form)||void 0===n?void 0:n.cover)||t.rightData.children[0].value.compress,describe:t.rightData.children[2].value,type:t.type}},null!==(r=t.rightData.children[0].value)&&void 0!==r&&r.file&&Object(v["i"])(t.rightData.children[0].value.file)&&s.push(t.getPromise(t.rightData.children[0].value)),s.length>0?Promise.all(s).then((function(e){var a;l.form.asideLeftData=t.getAsideLeftData(),l.form.cover=(null===(a=t.form)||void 0===a?void 0:a.cover)||t.rightData.children[0].value.compress,i(l)})).catch((function(e){t.$message.error(e),a(e)})):(l.form.asideLeftData=t.getAsideLeftData(),i(l));case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())},getUploadFile:function(t,e){var i,a,n,r,s=this;"one_picture"===t.id&&t.exhibition&&null!==(i=t.children[1].value)&&void 0!==i&&i.file&&Object(v["i"])(null===(a=t.children[1].value)||void 0===a?void 0:a.file)&&e.push(this.getPromise(t.children[1].value)),"multiSelect"!==t.id&&"multipleChoice"!==t.id||t.children[1].list.forEach((function(t){var i,a;null!==(i=t.baseImg)&&void 0!==i&&i.file&&Object(v["i"])(null===(a=t.baseImg)||void 0===a?void 0:a.file)&&e.push(s.getPromise(t.baseImg))})),"image-text"===t.id&&null!==(n=t.children[1].value)&&void 0!==n&&n.file&&Object(v["i"])(null===(r=t.children[1].value)||void 0===r?void 0:r.file)&&e.push(this.getPromise(t.children[1].value)),"slideshow"===t.id&&t.children[1].value.forEach((function(t){t.originFileObj&&Object(v["i"])(t.originFileObj)&&(t.file=t.originFileObj,e.push(s.getPromise(t)))}))},getPromise:function(t){var e=this;return new Promise((function(i,a){e.interactiveRadarUploadFile(t.file).then((function(e){t.compress=e,t.master=e,t.thumbUrl=e,i(e)})).catch((function(t){a(t)}))}))},getAsideLeftData:function(){return JSON.stringify(this.customerForm)},getPublishParams:function(t){var e=this;return new Promise((function(i,a){var n,r={customerForm:{qrCode:"",guidanceDoc:1===t.linkOrCode?"":t.guidanceDoc,linkUrl:1===t.linkOrCode?t.linkUrl:"",linkFlag:t.linkFlag,status:1,submitCountLimit:t.submitCountLimit,tagEnable:t.tagEnable,msgNotify:t.msgNotify,eventNotify:t.eventNotify,matchRule:t.matchRule,endTime:0===t.isForeverEffect?t.endTime.format("YYYY-MM-DD HH:mm:ss"):"",effectStatus:Boolean(t.isForeverEffect),formId:e.selfFormId||("reuse"===e.state?"":e.formId),name:e.rightData.children[1].value,cover:(null===(n=e.form)||void 0===n?void 0:n.cover)||e.rightData.children[0].value.compress,describe:e.rightData.children[2].value,type:e.type},customerFormActionList:t.tagEnable?t.customerFormActionList.map((function(t){return{action:t.action,tagIds:t.selectTagList.map((function(t){return t.tagId})).join(","),enable:Number(t.enable),scores:t.score,formId:e.selfFormId||("reuse"===e.state?"":e.formId)}})):[]};t.linkFlag&&0===t.linkOrCode?t.qrCode[0].originFileObj?e.interactiveRadarUploadFile(t.qrCode[0].originFileObj,"clientTransformation").then((function(t){r.customerForm.qrCode=t,i(r)})).catch((function(t){e.loadingPublish=!1,a(t)})):(r.customerForm.qrCode=t.qrCode[0].url,i(r)):i(r)}))},submitForm:function(t,e){var i=this;this.verify().then(function(){var a=Object(l["a"])(Object(o["a"])().mark((function a(n){var r,l;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i[e]=!0,a.next=3,i.getParams();case 3:r=a.sent,l=d["h"],"reuse"!==i.state||i.selfFormId?i.formId&&(l=d["i"]):l=d["h"],l(r).then((function(e){i.formStatus=e.data.form.status,i.selfFormId=e.data.form.formId,"preview"===t&&(i.isShowPhone=!0,i.qrCode=e.data.form.link+"&preview=true"),"draft"===t&&i.$router.go(-1),"publish"===t&&(i.publishData=Object(s["a"])(Object(s["a"])({},i.publishData),{},{name:i.rightData.children[1].value,describe:i.rightData.children[2].value,cover:i.rightData.children[0].value.compress,effectStatus:1}),i.visiblePublish=!0),i.$message.success("保存成功")})).catch((function(t){i.$message.error(t)})).finally((function(){i[e]=!1}));case 7:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){i[e]=!1,i.$message.warning(t)}))},verify:function(){var t=this;return new Promise((function(e,i){for(var a=0;a<t.rightData.children.length;a++){var n=t.rightData.children[a];n.switch&&n.isChecked&&n.value?"object"!==Object(r["a"])(n.value)||n.value.compress||i("请添加".concat(n.title)):n.value||i("请添加".concat(n.title))}t.customerForm.componentVoList.length<=0&&i("至少选择一个选项");for(var s=0;s<t.customerForm.componentVoList.length;s++){var o,l=t.customerForm.componentVoList[s];"slideshow"===l.type&&(null===(o=l.children[1].value)||void 0===o?void 0:o.length)<1&&i("轮播图至少上传2张图片"),"image-text"!==l.type||l.children[1].value.compress||i("请上传图文中的图片"),"acknowledgments"!==l.id||l.children[0].value||i("请填写感谢语"),l.exhibition&&"text"===l.id&&!l.children[0].value&&i("请填写展示文本"),l.exhibition&&"one_picture"===l.id&&!l.children[1].value.compress&&i("由企业上传的图片不能为空")}e()}))},isRequire:function(t,e){var i,a,n=null===(i=t.children)||void 0===i?void 0:i.find((function(t){return t.id===e}));return!(null!==n&&void 0!==n&&null!==(a=n.list[0])&&void 0!==a&&a.isChecked)},getDefaultText:function(t,e){var i,a=null===(i=t.children)||void 0===i?void 0:i.find((function(t){return t.id===e}));return!(null!==a&&void 0!==a&&a.value)},isShowBorder:function(t,e){var i,a,n=null===(i=t.children)||void 0===i?void 0:i.find((function(t){return t.id===e})),r="";null!==n&&void 0!==n&&n.list[0].isChecked&&(r=null===n||void 0===n||null===(a=n.list[0])||void 0===a?void 0:a.value);return r},getTag:function(t,e){var i;return t.subtitleValue?null===(i=e.selectTagList)||void 0===i?void 0:i.map((function(t){return{id:t.tagId,name:t.tagName}})):[]}}},b=g,y=(i("720a"),i("2877")),x=Object(y["a"])(b,a,n,!1,null,"ed182b4e",null);e["default"]=x.exports},"720a":function(t,e,i){"use strict";i("a2e6")},"7af2":function(t,e,i){},"842b":function(t,e,i){"use strict";var a=i("5530"),n=(i("d3b7"),i("d81d"),i("3ca3"),i("ddb0"),i("a15b"),i("a9e3"),i("b0c0"),i("9911"),i("d885")),r=i("cf5f");e["a"]={methods:{interactiveRadarUploadFile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.uploadFilePath;return new Promise((function(i,a){var n=new FormData;n.append("file",t),n.append("dir",e),Object(r["m"])(n).then((function(t){i(t.data)})).catch((function(t){a(t)}))}))},uploadMedia:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attachments;return new Promise((function(i,a){var n=(null===e||void 0===e?void 0:e.map((function(e){return new Promise((function(i,a){if("link"===e.type&&e.isRadar&&!e.isMaterial)t.interactiveRadarAdd(e).then((function(t){i(t)})).catch((function(t){a(t)}));else if("img"===e.type){var n=new FormData;n.append("file",e.pic_url.file),n.append("dir","clientTransformation"),n.append("type","image"),Object(r["y"])(n).then((function(t){e.pic_url.fileUrl=t.data.fileUrl,e.pic_url.mediaId=t.data.mediaId,i(t.data)}))}else i()}))})))||[];Promise.all(n).then((function(t){i()})).catch((function(e){t.$message.error(e||e.message),t.loading=!1,a(e)}))}))},interactiveRadarAdd:function(t){var e=this;return new Promise((function(i,a){e.getParamsLink(t).then((function(e){Object(n["f"])(e).then((function(e){t.radarId=e.data.radarId,t.url=e.data.radarLink+t.source,i(e)})).catch((function(t){a(t)}))}))}))},getParamsLink:function(t){return new Promise((function(e,i){var a=new FormData,n=t.isCustomerTag?[{autoMarkTagBitmaps:t.selectCustomerTagList.map((function(t){return t.bitmap})).join(",")}]:[];if(a.append("type",1),a.append("radarName",t.linkTitle),a.append("link",t.url),a.append("activityNotify",Number(t.activityNotify)),a.append("behaviorNotify",Number(t.behaviorNotify)),a.append("tagRule",JSON.stringify(n)),a.append("title",t.radarTitle),a.append("desc",t.desc),a.append("hasCustomerTag",Number(t.isCustomerTag)),t.isScoreRule){var s=JSON.stringify(t.ruleDetails.map((function(t){var e,i;return{autoMarkTagBitmaps:null===(e=t.selectTagList)||void 0===e||null===(i=e.map((function(t){return t.bitmap})))||void 0===i?void 0:i.join(","),hasTag:Number(t.hasTag),score:t.score,ruleKind:t.ruleKind,count:t.count||0}})));a.append("scoreRule",s)}if(t.coverUrl.file){var o=new FormData;o.append("file",t.coverUrl.file),o.append("dir","clientTransformation"),Object(r["m"])(o).then((function(i){a.append("coverUrl",i.data),t.picurl=i.data,e(a)})).catch((function(t){i(t)}))}else e(a)}))},getMessageList:function(t){return t.map((function(t){var e="";if(0===t.msgType&&(e=t.msgContent,t.formObj={},t.pdfArr=[],t.videoArr=[]),1===t.msgType&&(e={compress:t.msgContent},t.imageObj={title:"图片",prop:"pic_url",type:"img",tips:"",accept:".jpg,.png",maxLength:2097152,value:{compress:t.msgContent}},t.formObj={},t.pdfArr=[],t.videoArr=[]),2===t.msgType){t.pdfArr=[],t.videoArr=[];var i,n,r,s,o=JSON.parse(t.msgContent);if(e={form:{linkTitle:o.title,desc:o.desc,coverUrl:{compress:o.picUrl},type:"link",url:o.url}},t.interactRadar)e.form.isRadar=!0,e.form.behaviorNotify=Boolean(t.interactRadar.behaviorNotify),e.form.activityNotify=Boolean(t.interactRadar.activityNotify),e.form.isCustomerTag=(null===(i=t.interactRadar.tagRules)||void 0===i?void 0:i.length)>0,e.form.radarTitle=t.interactRadar.radarName,e.form.radarId=t.interactRadar.radarId,e.form.selectCustomerTagList=null===(n=t.interactRadar.tagRules[0])||void 0===n||null===(r=n.customerTags)||void 0===r?void 0:r.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{key:t.tagId})})),e.form.isScoreRule=(null===(s=t.interactRadar.scoreRules)||void 0===s?void 0:s.length)>0,e.form.ruleDetails=t.interactRadar.scoreRules.map((function(t){var e;return Object(a["a"])(Object(a["a"])({},t),{},{autoMarkTagBitmaps:t.autoMarkTagBitmaps,selectTagList:null===(e=t.customerTags)||void 0===e?void 0:e.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{key:t.tagId})})),hasTag:Boolean(t.hasTag),score:t.score,ruleKind:t.ruleKind,count:t.count})}))}if(3===t.msgType){var l=JSON.parse(t.msgContent);t.pdfArr=[Object(a["a"])(Object(a["a"])({},l),{},{uid:"1",status:"done"})],t.formObj={},t.videoArr=[]}if(4===t.msgType){var c=JSON.parse(t.msgContent);t.formObj=Object(a["a"])(Object(a["a"])({},c),{},{name:c.title}),t.pdfArr=[]}if(5===t.msgType){var u=JSON.parse(t.msgContent);t.videoArr=[Object(a["a"])({},u)],t.formObj={},t.pdfArr=[]}return Object(a["a"])(Object(a["a"])({},t),{},{msgContent:e})}))},getPlanList:function(t){var e=this;return t.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{messageList:e.getAddMessageList(t.messageList)})}))},getAddMessageList:function(t){return t.map((function(t){var e="";if(0===t.msgType&&(e=t.msgContent),1===t.msgType&&(e=t.fileUrl||t.msgContent.compress),2===t.msgType){var i,a,n="";t.fileUrl?n=t.fileUrl:t.msgContent.form.picurl?n=t.msgContent.form.picurl:t.msgContent.form.coverUrl.compress&&(n=t.msgContent.form.coverUrl.compress);var r=t.msgContent.form.radarId||(null===(i=t.msgContent.form.interactRadar)||void 0===i?void 0:i.radarId);r&&(r=String(r)),e=JSON.stringify({desc:t.msgContent.form.desc,picUrl:n,url:t.msgContent.form.url,title:t.msgContent.form.linkTitle,radarId:r,type:t.msgContent.form.radarId||null!==(a=t.msgContent.form.interactRadar)&&void 0!==a&&a.radarId?"radar_link":"normal_link"})}return 3===t.msgType&&(e=JSON.stringify({pdfFile:t.pdfArr[0].fileUrl||t.pdfArr[0].pdfFile,name:t.pdfArr[0].name,size:t.pdfArr[0].size,cover:"https://acadsocscrmpc.oss-cn-shenzhen.aliyuncs.com/h5/img/pdf.png"})),4===t.msgType&&(e=JSON.stringify({cover:t.formObj.cover,desc:t.formObj.desc,title:t.formObj.name,url:t.formObj.link})),{messageId:t.messageId,msgType:t.msgType,msgContent:e}}))},getPlanFileList:function(t){var e=this,i=[];return t.length>0&&(i=t.map((function(t){return new Promise((function(i,a){var n,r,s,o;2===t.msgType?t.msgContent.form.isRadar&&t.msgContent.form.randerIsEdit?e.interactiveRadarAdd(t.msgContent.form).then((function(e){t.radarId=e.data,i(e)})).catch((function(t){a(t)})):t.msgContent.form.coverUrl.file?e.interactiveRadarUploadFile(t.msgContent.form.coverUrl.file).then((function(e){t.fileUrl=e,i(e)})).catch((function(t){a(t)})):i():1===t.msgType&&t.msgContent.file?e.interactiveRadarUploadFile(t.msgContent.file).then((function(e){t.fileUrl=e,i(e)})).catch((function(t){a(t)})):3===t.msgType&&null!==(n=t.pdfArr)&&void 0!==n&&null!==(r=n[0])&&void 0!==r&&r.originFileObj?e.interactiveRadarUploadFile(t.pdfArr[0].originFileObj).then((function(e){t.pdfArr[0].fileUrl=e,i(e)})).catch((function(t){a(t)})):5===t.msgType&&null!==(s=t.videoArr)&&void 0!==s&&null!==(o=s[0])&&void 0!==o&&o.originFileObj?e.interactiveRadarUploadFile(t.videoArr[0].originFileObj).then((function(e){t.videoArr[0].fileUrl=e,i(e)})).catch((function(t){a(t)})):i()}))}))),i}}}},"8b53":function(t,e,i){},"8e34":function(t,e,i){"use strict";i("299d")},"8f19":function(t,e,i){"use strict";i.d(e,"n",(function(){return r})),i.d(e,"q",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"j",(function(){return l})),i.d(e,"h",(function(){return c})),i.d(e,"f",(function(){return u})),i.d(e,"l",(function(){return d})),i.d(e,"d",(function(){return m})),i.d(e,"e",(function(){return p})),i.d(e,"i",(function(){return f})),i.d(e,"g",(function(){return h})),i.d(e,"b",(function(){return v})),i.d(e,"k",(function(){return g})),i.d(e,"m",(function(){return b})),i.d(e,"c",(function(){return y})),i.d(e,"p",(function(){return x})),i.d(e,"o",(function(){return C}));var a=i("b775"),n={customerFormSave:"/client_transformation/customerForm/save",dateInfoList:"/client_transformation/customerFormData/dateInfoList",customerFormList:"/client_transformation/customerForm/list",customerFormInfo:"/client_transformation/customerForm/info",customerFormUpdate:"/client_transformation/customerForm/update",customerFormPublish:"/client_transformation/customerForm/publish",customerFormDelete:"/client_transformation/customerForm/delete",dataInfo:"/client_transformation/customerFormData/dataInfo",analysis:"/client_transformation/customerFormData/analysis",staffList:"/client_transformation/customerFormData/staffList",infoList:"/client_transformation/customerFormData/infoList",analysisExport:"/client_transformation/customerFormData/analysisExport",dataInfoExport:"/client_transformation/customerFormData/dataInfoExport",infoCityList:"/client_transformation/customerFormData/infoCityList",batchTags:"/client_transformation/customerFormData/batchTags",selectList:"/client_transformation/customerForm/userData/selectList",queryDataList:"/client_transformation/customerFormData/queryDataList"};function r(t){return Object(a["b"])({url:n.infoList,method:"post",data:t})}function s(t){return Object(a["b"])({url:n.staffList,method:"get",params:t})}function o(t){return Object(a["b"])({url:n.analysis,method:"get",params:t})}function l(t){return Object(a["b"])({url:n.dataInfo,method:"get",params:t})}function c(t){return Object(a["b"])({url:n.customerFormSave,method:"post",data:t})}function u(t){return Object(a["b"])({url:n.customerFormList,method:"get",params:t})}function d(t){return Object(a["b"])({url:n.dateInfoList,method:"get",params:t})}function m(t){return Object(a["b"])({url:n.customerFormDelete,method:"post",data:t})}function p(t){return Object(a["b"])({url:n.customerFormInfo,method:"get",params:t})}function f(t){return Object(a["b"])({url:n.customerFormUpdate,method:"post",data:t})}function h(t){return Object(a["b"])({url:n.customerFormPublish,method:"post",data:t})}function v(t){return Object(a["b"])({url:n.analysisExport,method:"get",params:t,responseType:"blob"})}function g(t){return Object(a["b"])({url:n.dataInfoExport,method:"get",params:t,responseType:"blob"})}function b(t){return Object(a["b"])({url:n.infoCityList,method:"get",params:t})}function y(t){return Object(a["b"])({url:n.batchTags,method:"post",data:t})}function x(t){return Object(a["b"])({url:n.selectList,method:"get",params:t})}function C(t){return Object(a["b"])({url:n.queryDataList,method:"post",data:t})}},a2e6:function(t,e,i){},af8f:function(t,e,i){"use strict";i("7af2")},b431:function(t,e,i){"use strict";i("09c0")},cf5f:function(t,e,i){"use strict";i.d(e,"k",(function(){return r})),i.d(e,"r",(function(){return s})),i.d(e,"l",(function(){return o})),i.d(e,"m",(function(){return l})),i.d(e,"a",(function(){return c})),i.d(e,"e",(function(){return u})),i.d(e,"i",(function(){return d})),i.d(e,"p",(function(){return m})),i.d(e,"q",(function(){return p})),i.d(e,"u",(function(){return f})),i.d(e,"v",(function(){return h})),i.d(e,"x",(function(){return v})),i.d(e,"t",(function(){return g})),i.d(e,"o",(function(){return b})),i.d(e,"g",(function(){return y})),i.d(e,"b",(function(){return x})),i.d(e,"h",(function(){return C})),i.d(e,"s",(function(){return _})),i.d(e,"c",(function(){return k})),i.d(e,"n",(function(){return L})),i.d(e,"f",(function(){return w})),i.d(e,"w",(function(){return F})),i.d(e,"j",(function(){return T})),i.d(e,"y",(function(){return O})),i.d(e,"d",(function(){return j}));var a=i("b775"),n={syncUpdate:"/client_transformation/oss/syncArticle",getOfficialAccount:"/client_transformation/oss/getPublicAccount",getLastSyncTime:"/client_transformation/oss/getLastSyncTime",upload:"/client_transformation/oss/upload",update:"/client_transformation/oss/update",materialList:"/client_transformation/oss/page",deleteMaterial:"/client_transformation/oss/delete",addTag:"/client_transformation/materialTag/add",deleteTag:"/client_transformation/materialTag/delete",tagList:"/client_transformation/materialTag/page",updateTag:"/client_transformation/materialTag/update",addWelcome:"/client_transformation/welcome/add",listWelcome:"/client_transformation/welcome/page",delWelcome:"/client_transformation/welcome/delWelcome",detailWelcome:"/client_transformation/welcome/detail",updateWelcome:"/client_transformation/welcome/update",addCustomerSend:"/client_transformation/customerSend/add",delCustomerSend:"/client_transformation/customerSend/delete",pageCustomerSend:"/client_transformation/customerSend/page",upDateCustomerSend:"/client_transformation/customerSend/update",addSersonSop:"/client_transformation/personSop/add",delGroupSop:"/client_transformation/personSop/delGroupSop",detailPersonSop:"/client_transformation/personSop/detail",pagePersonSop:"/client_transformation/personSop/page",setPersonSopStaff:"/client_transformation/personSop/setPersonSopStaff",updatePersonSop:"/client_transformation/personSop/update",updateStatus:"/client_transformation/personSop/updateStatus",interactiveRadarUploadFile:"/client_group/upload/uploadFile",uploadMedia:"/client_group/upload/uploadMedia",channelCodeUploadFile:"/channel/channelCode/uploadFile"};function r(t){return Object(a["b"])({url:n.getLastSyncTime,method:"get",params:t})}function s(t){return Object(a["b"])({url:n.syncUpdate,method:"get",params:t})}function o(t){return Object(a["b"])({url:n.getOfficialAccount,method:"get",params:t})}function l(t){return Object(a["b"])({url:n.interactiveRadarUploadFile,method:"post",data:t})}function c(t){return Object(a["b"])({url:n.addSersonSop,method:"post",data:t})}function u(t){return Object(a["b"])({url:n.delGroupSop,method:"post",params:t})}function d(t){return Object(a["b"])({url:n.detailPersonSop,method:"get",params:t})}function m(t){return Object(a["b"])({url:n.pagePersonSop,method:"get",params:t})}function p(t){return Object(a["b"])({url:n.setPersonSopStaff,method:"post",data:t})}function f(t){return Object(a["b"])({url:n.updatePersonSop,method:"post",data:t})}function h(t){return Object(a["b"])({url:n.updateStatus,method:"post",params:t})}function v(t){return Object(a["b"])({url:n.upload,method:"post",data:t})}function g(t){return Object(a["b"])({url:n.update,method:"post",data:t})}function b(t){return Object(a["b"])({url:n.materialList,method:"get",params:t})}function y(t){return Object(a["b"])({url:n.deleteMaterial,method:"get",params:t})}function x(t){return Object(a["b"])({url:n.addTag,method:"post",data:t})}function C(t){return Object(a["b"])({url:n.deleteTag,method:"get",params:t})}function _(t){return Object(a["b"])({url:n.tagList,method:"get",params:t})}function k(t){return Object(a["b"])({url:n.addWelcome,method:"post",data:t})}function L(t){return Object(a["b"])({url:n.listWelcome,method:"get",params:t})}function w(t){return Object(a["b"])({url:n.delWelcome,method:"post",params:t})}function F(t){return Object(a["b"])({url:n.updateWelcome,method:"post",data:t})}function T(t){return Object(a["b"])({url:n.detailWelcome,method:"get",params:t})}function O(t){return Object(a["b"])({url:n.uploadMedia,method:"post",data:t})}function j(t){return Object(a["b"])({url:n.channelCodeUploadFile,method:"post",data:t})}},d885:function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"e",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"n",(function(){return l})),i.d(e,"o",(function(){return c})),i.d(e,"m",(function(){return u})),i.d(e,"l",(function(){return d})),i.d(e,"d",(function(){return m})),i.d(e,"a",(function(){return p})),i.d(e,"j",(function(){return f})),i.d(e,"h",(function(){return h})),i.d(e,"k",(function(){return v})),i.d(e,"g",(function(){return g})),i.d(e,"f",(function(){return b})),i.d(e,"i",(function(){return y}));var a=i("b775"),n={interactiveRadarAdd:"/client_transformation/interactradar/add",interactiveRadarList:"/client_transformation/interactradar/list",interactiveRadarDelete:"/client_transformation/interactradar/delete",interactiveRadarupdate:"/client_transformation/interactradar/update",interactiveRadarInfo:"/client_transformation/interactradar/info",interactiveRadarSave:"/client_transformation/interactradar/channel/save",channelLinks:"/client_transformation/interactradar/getChannelLinks",generateChannelLink:"/client_transformation/interactradar/generateChannelLink",interactradarList:"/client_transformation/interactradar/channel/list",interactradarUpdate:"/client_transformation/interactradar/channel/update",statisticOverview:"/client_transformation/interactradar/statisticOverview",statisticDetail:"/client_transformation/interactradar/statisticDetail",customerLog:"/client_transformation/interactradar/customerLog",getCustomerLogDetail:"/client_transformation/interactradar/customerLogDetail",channelLog:"/client_transformation/interactradar/channelLog"};function r(t){return Object(a["b"])({url:n.channelLog,method:"post",data:t})}function s(t){return Object(a["b"])({url:n.getCustomerLogDetail,method:"get",params:t})}function o(t){return Object(a["b"])({url:n.customerLog,method:"post",data:t})}function l(t){return Object(a["b"])({url:n.statisticDetail,method:"get",params:t})}function c(t){return Object(a["b"])({url:n.statisticOverview,method:"get",params:t})}function u(t){return Object(a["b"])({url:n.interactradarUpdate,method:"post",data:t})}function d(t){return Object(a["b"])({url:n.interactradarList,method:"get",params:t})}function m(t){return Object(a["b"])({url:n.generateChannelLink,method:"get",params:t})}function p(t){return Object(a["b"])({url:n.channelLinks,method:"get",params:t})}function f(t){return Object(a["b"])({url:n.interactiveRadarSave,method:"post",data:t})}function h(t){return Object(a["b"])({url:n.interactiveRadarInfo+"/"+t,method:"get"})}function v(t){return Object(a["b"])({url:n.interactiveRadarupdate,method:"post",data:t})}function g(t){return Object(a["b"])({url:n.interactiveRadarDelete,method:"post",data:t})}function b(t){return Object(a["b"])({url:n.interactiveRadarAdd,method:"post",data:t})}function y(t){return Object(a["b"])({url:n.interactiveRadarList,method:"post",data:t})}},dceb:function(t,e,i){"use strict";i("69df")},de2f:function(t,e,i){"use strict";i("9911");var a=function(){var t=this,e=t._self._c;return e("CommonModal",t._b({attrs:{loading:t.loading,footer:"preview"!==t.state},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.source,!1),[e("section",{staticClass:"contant"},[e("div",{staticClass:"contant-left"},[e("PhoneModel",{attrs:{textList:t.textList}}),e("p",{staticClass:"aks-tips"},[t._v("（可点击分享卡片进行表单内容查看）")])],1),e("ul",{staticClass:"contant-right .share_model"},[e("li",{staticClass:"list-data",class:{exhibition:"preview"===t.state}},[e("p",{staticClass:"title"},[t._v("基本信息")]),e("div",{staticClass:"setting-box"},[e("p",{staticClass:"aks-tips"},[t._v("截止日期："),e("small",[t._v("（表单截止后，用户打开表单会提示此表单已结束哦）")])]),e("a-radio-group",{attrs:{disabled:"preview"===t.state},model:{value:t.form.isForeverEffect,callback:function(e){t.$set(t.form,"isForeverEffect",e)},expression:"form.isForeverEffect"}},t._l(t.deadlineList,(function(i,a){return e("a-radio",{key:a,attrs:{value:i.id}},[t._v(" "+t._s(i.text)+" ")])})),1),0===t.form.isForeverEffect?e("div",{staticClass:"time-contant"},[e("a-date-picker",{attrs:{placeholder:"请选择截止日期",disabledDate:t.disabledDate,format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:t.$moment("00:00:00","HH:mm:ss")}},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1):t._e(),e("p",{staticClass:"aks-tips"},[t._v("匹配客户方式："),e("small",[t._v("(将参与活动的微信客户和企业微信客户匹配)")])]),e("a-radio-group",{attrs:{disabled:"preview"===t.state},model:{value:t.form.matchRule,callback:function(e){t.$set(t.form,"matchRule",e)},expression:"form.matchRule"}},t._l(t.customerMode,(function(i,a){return e("a-radio",{key:a,attrs:{value:i.id,disabled:"preview"===t.state||"edit"===t.state}},[t._v(" "+t._s(i.text)+" "),e("a-tag",{attrs:{color:i.color}},[t._v(t._s(i.remark))])],1)})),1),e("div",{staticClass:"match-contant"},[e("p",[t._v("对数据精准度要求不高可用，相同昵称客户可能会出现匹配错误")])])],1),e("div",{staticClass:"checkout-list"},[e("a-checkbox",{attrs:{disabled:"preview"===t.state},model:{value:t.form.msgNotify,callback:function(e){t.$set(t.form,"msgNotify",e)},expression:"form.msgNotify"}},[e("span",[t._v("行为通知")]),e("small",{staticClass:"aks-tips"},[t._v("（当客户点击或发布表单时，发送表单的员工将会收到消息提醒）")])])],1),e("div",{staticClass:"checkout-list"},[e("a-checkbox",{attrs:{disabled:"preview"===t.state},model:{value:t.form.eventNotify,callback:function(e){t.$set(t.form,"eventNotify",e)},expression:"form.eventNotify"}},[e("span",[t._v("动态通知")]),e("small",{staticClass:"aks-tips"},[t._v("（当客户点击雷达链接时，会将客户的打开行为记录在客户动态里）")])])],1)]),"preview"===t.state?e("div",{staticClass:"box"},[e("p",{staticClass:"title"},[t._v("查看表单")]),e("div",{staticClass:"box-bottom"},[e("div",{staticClass:"qr-box flex-row"},[e("vue-qr",{attrs:{text:t.form.link,size:120,callback:t.qrCallback}}),e("span",{on:{click:function(e){return t.downFile(t.form.link)}}},[t._v("下载二维码")])],1),e("div",{staticClass:"box-bottom-copy"},[e("div",{staticClass:"qr-url-box"},[e("textarea",{ref:"letters",staticClass:"copy-text",attrs:{type:"text",readonly:""},domProps:{value:t.form.link}})]),e("p",{staticClass:"copy-url",on:{click:function(e){return t.copyUrl(t.form.link)}}},[t._v("复制链接")])])])]):t._e(),e("li",{staticClass:"list-data",class:{exhibition:"preview"===t.state}},[e("p",{staticClass:"title"},[t._v(" 客户标签 "),e("a-switch",{attrs:{size:"small",disabled:"preview"===t.state},model:{value:t.form.tagEnable,callback:function(e){t.$set(t.form,"tagEnable",e)},expression:"form.tagEnable"}}),e("small",{staticClass:"aks-tips"},[t._v("(最多可设置3个标签规则，已设置的标签规则不能进行修改）")])],1),t.form.tagEnable?e("CustomerTag",{attrs:{ruleDetails:t.form.customerFormActionList,maxLength:3,disabled:"preview"===t.state}}):t._e()],1),e("li",{staticClass:"list-data",class:{exhibition:"preview"===t.state}},[e("p",{staticClass:"title"},[t._v("客户提交次数限制"),e("small",{staticClass:"aks-tips"},[t._v("（此功能发布后不可修改）")])]),e("a-radio-group",{staticClass:"setting-box limit",attrs:{disabled:"preview"===t.state||"edit"===t.state},model:{value:t.form.submitCountLimit,callback:function(e){t.$set(t.form,"submitCountLimit",e)},expression:"form.submitCountLimit"}},t._l(t.countLimitList,(function(i,a){return e("a-radio",{key:a,attrs:{value:i.id}},[t._v(" "+t._s(i.text)+" "),e("br"),t.form.submitCountLimit===i.id?e("span",{staticClass:"aks-tips"},[t._v(" "+t._s(i.tip)+" ")]):t._e()])})),1)],1),e("li",{class:{exhibition:"preview"===t.state}},[e("p",{staticClass:"title"},[t._v(" 表单填写后跳转设置 "),e("a-switch",{attrs:{size:"small",disabled:"preview"===t.state},model:{value:t.form.linkFlag,callback:function(e){t.$set(t.form,"linkFlag",e)},expression:"form.linkFlag"}})],1),t.form.linkFlag?e("div",{staticClass:"setting-box"},[e("a-radio-group",{staticClass:"setting-box",attrs:{disabled:"preview"===t.state},model:{value:t.form.linkOrCode,callback:function(e){t.$set(t.form,"linkOrCode",e)},expression:"form.linkOrCode"}},t._l(t.flagList,(function(i,a){return e("a-radio",{key:a,attrs:{value:i.id}},[t._v(" "+t._s(i.text)+" ")])})),1),t.form.linkOrCode===t.flagList[0].id?e("div",[t._v(" 客户提交表单成功后跳转此链接 "),e("a-tooltip",{attrs:{placement:"top"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("img",{staticClass:"form-preview",attrs:{src:"/imgs/formTable/form-preview.png"}})]),e("a-button",{attrs:{type:"link"}},[t._v("查看预览")])],1),e("div",[e("a-input",{attrs:{placeholder:"请输入以http/https开头的网址"},model:{value:t.form.linkUrl,callback:function(e){t.$set(t.form,"linkUrl",e)},expression:"form.linkUrl"}})],1)],1):t._e(),t.form.linkOrCode===t.flagList[1].id?e("div",[t._v(" 客户提交表单成功后出现此二维码 "),e("a-tooltip",{attrs:{placement:"top"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("img",{staticClass:"form-preview",attrs:{src:"/imgs/formTable/form-preview2.png"}})]),e("a-button",{attrs:{type:"link"}},[t._v("查看预览")])],1),e("a-form-model",{attrs:{"label-col":{span:4},"wrapper-col":{span:12}}},t._l(t.form.uploadList,(function(t,i){return e("a-form-model-item",{key:i,attrs:{label:t.title}},[e("FormList",{staticClass:"form-list",attrs:{formInfo:t}})],1)})),1)],1):t._e()],1):t._e()])])])])},n=[],r=i("5530"),s=(i("b0c0"),i("b64b"),i("a9e3"),i("d81d"),i("d3b7"),i("2a86")),o=i("e6b1"),l=(i("caad"),i("2532"),function(){var t=this,e=t._self._c;return e("ul",{staticClass:"add-rule"},[t._l(t.ruleDetails,(function(i,a){return e("li",{key:a,staticClass:"rule-list"},[e("a-icon",{attrs:{type:"minus-circle"},on:{click:function(e){return t.delRule(a)}}}),e("span",{class:0===a?"first":""},[t._v("规则"+t._s(a+1)+"：为")]),e("a-select",{staticClass:"form-item",staticStyle:{width:"120px"},attrs:{placeholder:"请选择用户行为"},model:{value:i.action,callback:function(e){t.$set(i,"action",e)},expression:"item.action"}},t._l(t.ruleKindList,(function(i){return e("a-select-option",{key:i.id,attrs:{value:i.id,disabled:t.selectAction.includes(i.id)}},[t._v(" "+t._s(i.text)+" ")])})),1),t._v(" 的客户，打上 "),e("a-space",[e("SelectInput",{staticClass:"form-item",attrs:{placeHolder:"请选择标签",usePersionList:i.selectTagList},on:{open:function(e){return t.openTag(i)}}})],1),t._v(" 标签，"),e("br"),t._v(" 并添加评分: "),e("a-switch",{staticClass:"form-item",attrs:{disabled:t.disabled},model:{value:i.enable,callback:function(e){t.$set(i,"enable",e)},expression:"item.enable"}}),i.enable?e("span",[t._v(" 给Ta添加 "),e("a-input-number",{staticClass:"time form-item",attrs:{min:1},model:{value:i.score,callback:function(e){t.$set(i,"score",e)},expression:"item.score"}}),t._v(" 分 ")],1):t._e()],1)})),e("a-button",{attrs:{type:"link"},on:{click:t.addRule}},[e("a-space",{attrs:{size:12}},[e("a-icon",{attrs:{type:"plus-circle"}}),t._v("添加规则 "),e("span",{staticClass:"font-color-black-25"})],1)],1),e("a-modal",{attrs:{footer:null,width:"600px",centered:""},model:{value:t.visibleTag,callback:function(e){t.visibleTag=e},expression:"visibleTag"}},[e("SelectTags",{attrs:{selectTagList:t.item.selectTagList},on:{cancle:function(e){t.visibleTag=!1},serviceOk:t.serviceTagOk}})],1)],2)}),c=[],u=(i("a434"),i("0481"),i("4069"),i("4de4"),i("0395")),d=i("c844"),m={name:"CustomerTag",components:{SelectInput:u["a"],SelectTags:d["a"]},props:{ruleDetails:{type:Array,default:function(){return[]}},maxLength:{type:Number,default:8},disabled:{type:Boolean,default:!1}},computed:{selectAction:function(){return this.ruleDetails.map((function(t){return t.action}))}},data:function(){return{ruleKindList:[{id:0,text:"进入表单页面"},{id:1,text:"填写表单"},{id:2,text:"提交表单"}],defaultRuleDetails:function(){return{tagIds:"",enable:!1,selectTagList:[],score:"",action:void 0}},visibleTag:!1,item:{selectTagList:[]}}},methods:{openTag:function(t){this.item=t,this.visibleTag=!0},delRule:function(t){this.ruleDetails.splice(t,1)},addRule:function(){this.ruleDetails.length>=this.maxLength?this.$message.warning("最多设置".concat(this.maxLength,"个规则")):this.ruleDetails.push(this.defaultRuleDetails())},serviceTagOk:function(t){this.item.selectTagList=t.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat(),this.visibleTag=!1}}},p=m,f=(i("dceb"),i("2877")),h=Object(f["a"])(p,l,c,!1,null,"cf8beeba",null),v=h.exports,g=i("26f2"),b=i("02ed"),y=i("658f5"),x=i.n(y),C={name:"Publish",components:{CommonModal:s["a"],PhoneModel:o["a"],CustomerTag:v,FormList:g["a"],vueQr:x.a},props:{value:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:!1},state:{type:String,default:""}},computed:{textList:function(){return[{type:"link",linkTitle:this.value.name,desc:this.value.describe,coverUrl:{compress:this.value.cover}}]}},data:function(){return{source:{okText:"完成并发布",cancleText:"返回编辑",tipText:"表单发布后支持增加字段和修改表单文案，不支持删除已发布的表单字段",title:"发布"},deadlineList:[{text:"永久有效",id:1},{text:"自定义日期",id:0}],customerMode:[{text:"客户昵称匹配",id:0,remark:"普通",color:""}],countLimitList:[{text:"不限提交次数",id:-1,tip:"客户可重复重新提交表单"},{text:"仅限提交一次",id:1,tip:"客户只能提交此表单一次，不可对表单内容进行修改"}],flagList:[{text:"跳转链接",id:1},{text:"跳转二维码",id:0}],form:{isForeverEffect:1,endTime:"",eventNotify:!0,msgNotify:!0,tagEnable:!1,submitCountLimit:-1,linkFlag:!1,customerFormActionList:[],linkOrCode:1,linkUrl:"",guidanceDoc:"",qrCode:"",uploadList:[{title:"上传二维码",type:"imgList",maxLength:1,value:[]},{title:"扫码引导文案",type:"textarea",tips:"长按下方二维码添加客服,可领取神秘大礼哦",value:"",maxLength:300}],matchRule:0}}},watch:{"form.uploadList":{handler:function(){this.form.qrCode=this.form.uploadList[0].value,this.form.guidanceDoc=this.form.uploadList[1].value},deep:!0},value:{handler:function(){var t;Object.keys(this.value).length>0&&(this.form=Object.assign(this.form,this.value,{isForeverEffect:Number(this.value.effectStatus),linkOrCode:this.value.qrCode?0:1,endTime:this.value.endTime?this.$moment(this.value.endTime):null,customerFormActionList:(null===(t=this.value.actionList)||void 0===t?void 0:t.map((function(t){var e,i,a,n=null===(e=t.tagNames)||void 0===e?void 0:e.split("、");return Object(r["a"])(Object(r["a"])({},t),{},{score:t.scores,enable:Boolean(t.enable),selectTagList:null===(i=t.tagIds)||void 0===i||null===(a=i.split(","))||void 0===a?void 0:a.map((function(t,e){return{key:t,tagId:t,tagName:n[e]}}))})})))||[]}),this.form.qrCode&&(this.form.uploadList[0].value=[{uid:"1",name:"xxx.png",status:"done",response:"Server Error 500",url:this.form.qrCode}],this.form.uploadList[1].value=this.form.guidanceDoc))},deep:!0,immediate:!0}},created:function(){"edit"===this.state&&(this.source.title="更新",this.source.okText="更新")},methods:{copyUrl:function(t){t&&(Object(b["a"])(t),this.$message.success("复制成功"))},downFile:function(){var t=document.createElement("a");t.href=this.base64,t.download="".concat(this.form.name,".jpg"),document.body.appendChild(t),t.click(),t.remove()},qrCallback:function(t){this.base64=t},disabledDate:function(t){var e=this.$moment().endOf("day").subtract(1,"days");return t&&t<e},serviceOk:function(){var t=this;this.verify().then((function(){t.$emit("serviceOk",t.form)})).catch((function(e){t.$message.warning(e)}))},verify:function(){var t=this;return new Promise((function(e,i){if(Boolean(t.form.isForeverEffect)||(t.form.endTime||i("请选择时间"),t.form.endTime<t.$moment()&&i("截止时间不能早于当前时刻")),t.form.linkFlag)if(1!==t.form.linkOrCode||t.form.linkUrl){if(0===t.form.linkOrCode){var a;(null===(a=t.form.qrCode)||void 0===a?void 0:a.length)<1&&i("请上传二维码"),t.form.guidanceDoc||i("请填写扫码引导文案")}}else i("请填写跳转链接");var n;if(t.form.tagEnable)if((null===(n=t.form.customerFormActionList)||void 0===n?void 0:n.length)<1)i("请选择标签");else for(var r=0;r<(null===(s=t.form.customerFormActionList)||void 0===s?void 0:s.length);r++){var s,o=t.form.customerFormActionList[r];o.action||0===o.action||i("规则".concat(r+1,"的用户行为没有写")),o.selectTagList.length<1&&i("规则".concat(r+1,"的标签没有写")),!o.enable||o.score&&0!==o.score||i("规则".concat(r+1,"的评分没有写"))}e()}))}}},_=C,k=(i("b431"),Object(f["a"])(_,a,n,!1,null,"09291a7a",null));e["a"]=k.exports},e6b1:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-model"},[e("img",{staticClass:"bg",attrs:{src:"/imgs/chatBg.png"}}),e("div",{staticClass:"contant"},[e("p",{staticClass:"time"},[t._v(t._s(t.time))]),t.textList.length>0?e("ul",t._l(t.textList,(function(i,a){return e("li",{key:a,staticClass:"contant-list"},["img"===i.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[e("img",{staticClass:"upload-img",attrs:{src:i.pic_url.compress}})])]:t._e(),"link"===i.type?[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-title"},[e("a-tooltip",{attrs:{title:i.linkTitle}},[e("p",{staticClass:"contant-subtitle"},[t._v(t._s(i.linkTitle))])]),e("div",{staticClass:"contant-contant"},[i.desc?e("a-tooltip",{attrs:{title:i.desc}},[e("span",[t._v(t._s(i.desc))])]):t._e(),e("a-avatar",{attrs:{src:i.coverUrl.compress,size:32,shape:"square"}})],1)],1)]:t._e(),i.type?t._e():[e("img",{staticClass:"user",attrs:{src:"/icons/user.png"}}),e("div",{staticClass:"contant-main"},[t._v(t._s(i))])]],2)})),0):t._e()])])},n=[],r={name:"PhoneModel",data:function(){return{time:this.$moment().format("HH:mm")}},props:{textList:{type:[Array],default:function(){return[]}}},watch:{textList:function(){}}},s=r,o=(i("8e34"),i("2877")),l=Object(o["a"])(s,a,n,!1,null,"1aa7a172",null);e["a"]=l.exports}}]);