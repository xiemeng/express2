(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42d50d72"],{"0561":function(t,e,i){},"0c1a":function(t,e,i){},"14aa":function(t,e,i){"use strict";i("0561")},"161b":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return o}));var n=i("b775"),r={queryGroupPageByGroupSop:"/client_group/customerGroup/queryGroupPageByGroupSop",addOrEditGroupTag:"/client_group/groupTagController/addOrEditGroupTag",delGroupTag:"/client_group/groupTagController/delGroupTag",queryGroupTag:"/client_group/groupTagController/queryGroupTag"};function a(t){return Object(n["b"])({url:r.addOrEditGroupTag,method:"post",data:t})}function s(t){return Object(n["b"])({url:r.delGroupTag,method:"post",data:t})}function o(t){return Object(n["b"])({url:r.queryGroupTag,method:"post",data:t})}},"1da1":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("d3b7");function n(t,e,i,n,r,a,s){try{var o=t[a](s),c=o.value}catch(u){return void i(u)}o.done?e(c):Promise.resolve(c).then(n,r)}function r(t){return function(){var e=this,i=arguments;return new Promise((function(r,a){var s=t.apply(e,i);function o(t){n(s,r,a,o,c,"next",t)}function c(t){n(s,r,a,o,c,"throw",t)}o(void 0)}))}}},"1f3e":function(t,e,i){"use strict";i("49c9")},"3c43":function(t,e,i){t.exports=i.p+"assets/avatar-room-default.de3b5fcd.svg"},"487a":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var i,n,r,a,s,o=function(){t.apply(a,s),n=i};return function(){if(a=this,s=arguments,i=Date.now(),r&&(clearTimeout(r),r=null),n){var t=e-(i-n);t<0?o():r=setTimeout((function(){o()}),t)}else o()}},i=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},n=document.defaultView.getComputedStyle,r=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var i=n(e).overflowY;if("scroll"===i||"auto"===i)return e;e=e.parentNode}return window},a=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?i(window):t.getBoundingClientRect().top+i(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,i=t.el,n=i.getAttribute("infinite-scroll-throttle-delay"),a=200;n&&(a=Number(t.vm[n]||n),(isNaN(a)||a<0)&&(a=200)),t.throttleDelay=a,t.scrollEventTarget=r(i),t.scrollListener=e(u.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=i.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&u.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var c=i.getAttribute("infinite-scroll-distance"),l=0;c&&(l=Number(t.vm[c]||c),isNaN(l)&&(l=0)),t.distance=l;var d=i.getAttribute("infinite-scroll-immediate-check"),p=!0;d&&(p=Boolean(t.vm[d])),t.immediateCheck=p,p&&u.call(t);var f=i.getAttribute("infinite-scroll-listen-for-event");f&&t.vm.$on(f,(function(){u.call(t)}))}},u=function(t){var e=this.scrollEventTarget,n=this.el,r=this.distance;if(!0===t||!this.disabled){var o=i(e),c=o+a(e),u=!1;if(e===n)u=e.scrollHeight-c<=r;else{var l=s(n)-s(e)+n.offsetHeight+o;u=c+r>=l}u&&this.expression&&this.expression()}},l={bind:function(e,i,n){e[t]={el:e,vm:n.context,expression:i.value};var r=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&c.call(e[t],r),e[t].bindTryCount=0;var i=function i(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?c.call(e[t],r):setTimeout(i,50))};i()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",l)};return window.Vue&&(window.infiniteScroll=l,Vue.use(d)),l.install=d,l}))},"49c9":function(t,e,i){},"4f1a":function(t,e,i){"use strict";i("d3b7"),i("ddb0"),i("caad"),i("2532");var n=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v("选择群聊")]),e("section",[e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入群名称"},on:{search:t.onSearchName},model:{value:t.searchNmae,callback:function(e){t.searchNmae=e},expression:"searchNmae"}}),e("div",{staticClass:"tree"},[e("p",{staticClass:"tree-head"},[t._v(" 全部群聊("+t._s(t.pagination.total)+") "),e("a-checkbox",{on:{change:t.changeAllCheckbox},model:{value:t.isSelectAll,callback:function(e){t.isSelectAll=e},expression:"isSelectAll"}},[t._v(" 全选 ")])],1),e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handleInfiniteOnLoad,expression:"handleInfiniteOnLoad"}],staticClass:"scroll-list",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},[t._l(t.groupList,(function(i,n){return e("li",{key:i.groupId,staticClass:"title-wrap"},[e("div",{staticClass:"title-chilred"},[e("a-avatar",{attrs:{size:40,src:"/icons/groupChat.svg",shape:"square"}}),e("div",{staticClass:"info-wrap"},[e("p",[t._v(t._s(i.chatName)+" "),e("a-tag",{attrs:{color:"blue"}},[t._v("外部")])],1),t.isShowNumber?e("p",{staticClass:"aks-tips"},[t._v(t._s(i.count)+"/200")]):e("p",{staticClass:"aks-tips"},[t._v(" 群主："+t._s(i.chatOwnerName))])])],1),e("div",[0!==i[t.keys]&&t.isSetRule?e("p",{staticClass:"aks-tips"},[t._v(t._s(t.tipText))]):e("a-checkbox",{attrs:{disabled:t.selectGroupIdIdList.includes(i.groupId)},on:{change:function(e){return t.changeChilren(n,e)}},model:{value:i.isSelect,callback:function(e){t.$set(i,"isSelect",e)},expression:"item.isSelect"}})],1)])})),t.loading?e("div",{staticClass:"loading-container"},[e("a-spin",{attrs:{tip:"正在加载中..."}})],1):t._e()],2)])],1),e("div",{staticClass:"foot-button"},[e("a-space",{attrs:{size:12}},[e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$emit("serviceOk",t.addGruoupChat)}}},[t._v("确定")])],1)],1)])},r=[],a=i("2909"),s=(i("d81d"),i("4de4"),i("159b"),i("ccdf")),o=i("487a"),c=i.n(o),u={name:"SelectGroupChat",directives:{infiniteScroll:c.a},props:{selectGroupList:{type:[Array],default:function(){return[]}},selectedList:{type:[Array],default:function(){return[]}},isSetRule:{type:Boolean,default:function(){return!0}},isShowNumber:{type:Boolean,default:function(){return!1}},notifyType:{type:String,default:function(){return"groupSop"}}},data:function(){return{searchNmae:"",busy:!1,loading:!1,groupList:[],isSelectAll:!1,pagination:{current:1,pageSize:10,total:0},tipText:"",keys:"",isEnter:!1,isOtherAll:!1}},computed:{selectGroupIdIdList:function(){return this.selectedList.map((function(t){return t.groupId}))},addGruoupChat:function(){var t={};return this.isOtherAll?t.excludeIdList=this.groupList.filter((function(t){return!t.isSelect})).map((function(t){return t.groupId})):t.groupChatIdList=this.groupList.filter((function(t){return t.isSelect})).map((function(t){return t.groupId})),t.groupList=this.groupList.filter((function(t){return t.isSelect})),t}},created:function(){this.getInfo()},methods:{getInfo:function(){switch(this.notifyType){case"groupSop":this.tipText="该群聊已设置规则",this.keys="sopStatus";break;case"groupCalendar":this.tipText="该群聊已设置日历",this.keys="calendarStatus";break;default:break}},changeChilren:function(t,e){if(this.groupList[t].isSelect=e.target.checked,e.target.checked){var i=this.groupList.filter((function(t){return!t.isSelect}));i.length<1&&(this.isSelectAll=!0)}else this.isSelectAll=!1},changeAllCheckbox:function(t){this.isOtherAll=t.target.checked,t.target.checked?this.groupList.forEach((function(t){t.isSelect=!0})):this.groupList.forEach((function(t){t.isSelect=!1}))},onSearchName:function(){this.pagination.current=1,this.groupList=[],this.busy=!1,this.isEnter=!0,this.queryGroupPageByGroupSop()},queryGroupPageByGroupSop:function(){var t=this,e={currentPage:this.pagination.current,pageSize:this.pagination.pageSize,keywords:this.searchNmae,notifyType:this.notifyType};this.loading=!0,Object(s["k"])(e).then((function(e){if(null!==e&&void 0!==e&&e.data){var i,n,r=t.selectGroupList.map((function(t){return t.groupId}));if(null===(i=e.data.list)||void 0===i||i.forEach((function(t){r.includes(t.groupId)?t.isSelect=!0:t.isSelect=!1})),(n=t.groupList).push.apply(n,Object(a["a"])(e.data.list)),t.pagination.current++,t.pagination.total=e.data.total,e.data.list.length<t.pagination.pageSize)return t.busy=!0,void(t.loading=!1);t.$nextTick((function(){t.isEnter=!1}))}})).catch((function(e){t.$message.error(e),t.loading=!1}))},handleInfiniteOnLoad:function(){!this.busy&&!this.isEnter&&this.queryGroupPageByGroupSop()}}},l=u,d=(i("1f3e"),i("2877")),p=Object(d["a"])(l,n,r,!1,null,"94e9cec6",null);e["a"]=p.exports},"6bd9":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"use-person"},[e("ul",{staticClass:"a-line-omit",on:{click:function(e){t.visibleUsePerson=!0}}},[t._l(t.usePersionList,(function(i){return e("li",{key:i.key,staticClass:"a-line-omit"},[e("a-tooltip",{attrs:{title:i.title}},[i.icon?e("a-icon",{staticClass:"icon",attrs:{type:i.icon}}):e("a-avatar",{staticClass:"imgs",attrs:{size:23,src:i.source.thumbAvatar||t.defaultThumbAvatar}}),e("span",{staticClass:"title"},[t._v(" "+t._s(i.title)+" ")])],1)],1)})),t.usePersionList.length<1?e("p",{staticClass:"font-color-black-25"},[t._v(t._s(t.placeHolder))]):t._e()],2),t.usePersionList.length>2?e("span",{staticClass:"omit"},[t._v("等"+t._s(t.usePersionList.length)+"个账号")]):t._e(),e("a-icon",{attrs:{type:"caret-down"}})],1),e("a-modal",{attrs:{footer:null,width:"680px",centered:""},model:{value:t.visibleUsePerson,callback:function(e){t.visibleUsePerson=e},expression:"visibleUsePerson"}},[e("AddTransfer",t._b({attrs:{type:t.type,title:t.title,selectList:t.usePersionList,selectRoleIdList:t.selectRoleIdList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleUsePerson=!1}}},"AddTransfer",t.source,!1))],1)],1)},r=[],a=(i("d81d"),i("1eb1")),s={name:"UsePerson",props:{defaultUsePerson:{type:[Array],default:function(){return[]}},placeHolder:{type:[String],default:""},type:{type:[String],default:""},title:{type:[String],default:"选择成员"},value:{type:[Array],default:function(){return[]}},needControlReturn:{type:Boolean,default:!1},source:{type:Object,default:function(){return{}}}},components:{AddTransfer:a["a"]},data:function(){return{defaultThumbAvatar:i("b5c3"),visibleUsePerson:!1,selectRoleIdList:[],usePersionList:this.value}},watch:{value:function(){this.usePersionList=this.value}},methods:{serviceOk:function(t){var e=this;t.length<1?this.usePersionList=this.defaultUsePerson:this.usePersionList=t,this.usePersionList.map((function(t){t.value=100})),this.needControlReturn||(this.visibleUsePerson=!1),this.$emit("input",this.usePersionList),this.$emit("usePersionInfo",this.usePersionList,(function(){e.visibleUsePerson=!1}))}}},o=s,c=(i("f0b2"),i("2877")),u=Object(c["a"])(o,n,r,!1,null,"de146f5e",null);e["a"]=u.exports},7183:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"d",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return c}));var n=i("b775"),r={getTagGroup:"/client_manager/CustomerTag/getTagGroup",syncTagGroup:"/client_manager/CustomerTag/syncTagGroup",addOrEditTagGroup:"/client_manager/CustomerTag/addOrEditTagGroup",delTagGroup:"/client_manager/CustomerTag/delTagGroup"};function a(t){return Object(n["b"])({url:r.getTagGroup,method:"post",data:t})}function s(t){return Object(n["b"])({url:r.syncTagGroup,method:"post",data:t})}function o(t){return Object(n["b"])({url:r.addOrEditTagGroup,method:"post",data:t})}function c(t){return Object(n["b"])({url:r.delTagGroup,method:"post",data:t})}},"7ac9":function(t,e,i){"use strict";i.r(e);i("4c53");var n=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"标签建群"},on:{back:function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"labelgroup-main-card page-box"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"edit-panel"},[e("div",{staticClass:"tip"},[e("a-icon",{staticClass:"exclamation-circle",attrs:{type:"exclamation-circle"}}),t._v("每位客户每周最多收到来自客户群发管理员的1条群发消息，如选择的客户本周已收到过群发消息本条邀请将不会成功发送 ")],1),t._m(0),e("div",{staticClass:"row"},[t._m(1),e("div",{staticClass:"content"},[e("a-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请写任务名称"},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}})],1)]),e("div",{staticClass:"row"},[t._m(2),e("div",{staticClass:"content"},[e("usePerson",{attrs:{type:"deptId",placeHolder:"请选择群发账号"},on:{usePersionInfo:t.usePersionInfo},model:{value:t.userIds,callback:function(e){t.userIds=e},expression:"userIds"}})],1)]),e("div",{staticClass:"row row3"},[t._m(3),e("div",{staticClass:"content"},[e("div",[e("a-radio-group",{attrs:{name:"radioGroup"},on:{change:t.radioGroupChange},model:{value:t.screeningCustomer,callback:function(e){t.screeningCustomer=e},expression:"screeningCustomer"}},[e("a-radio",{attrs:{value:1}},[t._v("筛选客户")]),e("a-radio",{attrs:{value:2}},[t._v("全部客户")])],1)],1),"1"==t.screeningCustomer?e("div",{staticClass:"select-content"},[e("p",{staticClass:"bar"},[t._v("筛选客户")]),e("div",{staticClass:"client-info"},[e("div",{staticClass:"info-title"},[t._v("性别:")]),e("div",{staticClass:"tabs"},[e("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(e){t.seeShow=!0}},model:{value:t.criteriaGender,callback:function(e){t.criteriaGender=e},expression:"criteriaGender"}},[e("a-radio",{attrs:{value:3}},[t._v("全部性别")]),e("a-radio",{attrs:{value:1}},[t._v("仅男性粉丝")]),e("a-radio",{attrs:{value:2}},[t._v("仅女性粉丝")]),e("a-radio",{attrs:{value:0}},[t._v("未知性别")])],1)],1)]),e("div",{staticClass:"client-info"},[e("div",{staticClass:"info-title"},[t._v("添加时间:")]),e("div",{staticClass:"tabs"},[e("a-range-picker",{staticStyle:{width:"340px"},attrs:{allowClear:"",value:t.showLossDateTime,"disabled-date":t.disabledDate},on:{change:t.changeDate}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1)]),e("div",{staticClass:"client-info"},[e("div",{staticClass:"info-title"},[t._v("标签:")]),e("div",{staticClass:"tag-group-container"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.DataGroupList.length>3,expression:"DataGroupList.length > 3"}],staticClass:"fold-icon",on:{click:function(e){t.showAll=!t.showAll}}},[t._v(" "+t._s(t.word)),t.showAll?t._e():e("a-icon",{staticClass:"tu",attrs:{type:"down"}}),t.showAll?e("a-icon",{staticClass:"tu",attrs:{type:"up"}}):t._e()],1),t._l(t.showList,(function(i,n){return e("div",{key:n,staticClass:"group-item"},[e("span",{staticClass:"group-name"},[t._v(t._s(i.groupName))]),e("ul",{staticClass:"channel-list"},t._l(i.tags,(function(i,n){return e("li",{key:n,class:[{active:t.spanIndex.indexOf(i.bitmap)>-1},"ant-btn"],on:{click:function(e){return t.changeSpan(i.bitmap,i.tagName)}}},[t._v(" "+t._s(i.tagName)+" ")])})),0)])}))],2)]),t._m(4),"3"!=t.criteriaGender?e("div",{staticClass:"client-info client-info-tips"},[t._m(5),t._v(" 将发送消息给属于"),t.spanName.length>0?e("span",[t._l(t.spanName,(function(i,n){return e("span",{key:n},[t._v("["+t._s(i.tagName)+"] ，")])})),t._v(t._s(t.spanName.length)+"个标签的符合")],2):t._e(),t._v("条件的粉丝 ")]):t._e()]):t._e(),"1"==t.screeningCustomer?e("p",{staticClass:"content-select-all"},[e("span",{staticClass:"icon-wrap",staticStyle:{color:"#666666"}},[e("a-icon",{staticClass:"file-search",attrs:{type:"file-search"}}),t._v("查看该消息预计送达人数： "),t.seeShow?e("span",{staticClass:"btn",on:{click:t.getCalculateNum}},[t._v("查看")]):e("span",[t._v(t._s(t.CalculateNum))])],1)]):t._e(),t.seeShow&&t.loadingSee?e("em",{staticClass:"em-txt"},[t._v("人数计算中，请耐心等待。（此过程可能需要数分钟）")]):t._e(),"2"==t.screeningCustomer?e("div",{staticClass:"content"},[e("p",{staticClass:"content-select-all"},[t._v(" 将群发消息给全部账号的"),e("span",[t._v(t._s(t.num))]),t._v("个客户")])]):t._e()])]),t._m(6),e("div",{staticClass:"row row3"},[e("span",{staticClass:"title title3"},[t._v("入群引导语:")]),e("div",{staticClass:"content"},[e("a-textarea",{staticClass:"textarea",staticStyle:{width:"530px"},attrs:{maxLength:t.maxLength,placeholder:"请输入回复内容",autoSize:{minRows:4,maxRows:8}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._m(7)],1)]),t._l(t.codeList,(function(n,r){return e("div",{key:r,staticClass:"row row3"},[e("span",{staticClass:"title title3"},[t._v("群聊"+t._s(r+1)+":")]),e("div",{staticClass:"group-content"},[e("div",{staticClass:"group-content-header"},[e("div",{staticClass:"group-card-content"},[e("div",{staticClass:"group-card"},[e("img",{attrs:{src:i("3c43")}}),e("div",[e("span",{staticClass:"name"},[t._v(t._s(n.chatName))]),t._v(" "),e("span",{staticClass:"count"},[t._v(t._s(n.count||"0")+" / 200人")])])]),e("span",{staticClass:"tips-wrap"},[e("span",{on:{click:function(e){t.visibleTree=!0}}},[e("a-icon",{staticClass:"anticon icon",attrs:{type:"edit"}})],1)]),e("span",{staticClass:"tips-wrap"},[e("span",{on:{click:function(e){return t.detelGroup(r)}}},[e("a-icon",{staticClass:"anticon icon",attrs:{type:"delete"}})],1)])])]),e("div",{staticClass:"group-content-bottom"},[e("UpDateImg",{attrs:{title:"上传群二维码"},model:{value:n.originFileObj,callback:function(e){t.$set(n,"originFileObj",e)},expression:"item.originFileObj"}})],1),e("div",{staticClass:"tips-text",staticStyle:{color:"#bb5223"}},[t._v("注意：上传群二维码需跟该选择的群聊一致")])])])})),e("div",{staticClass:"row"},[e("span",{staticClass:"title"},[t._v("群聊:")]),e("div",{staticClass:"content"},[e("a-button",{staticClass:"aks-border-but",on:{click:function(e){t.visibleTree=!0}}},[e("a-icon",{attrs:{type:"plus"}}),t._v("选择群聊 ")],1)],1)]),t._m(8),e("div",{staticClass:"footer-btn"},[e("a-button",{attrs:{type:"primary",loading:t.subLoading},on:{click:t.sub}},[t._v("通知成员发送邀请")]),e("span",[t._v("发送后需要员工确认发送后才会将群二维码发送给对应的客户")])],1)],2)])]),e("a-modal",{attrs:{footer:null,centered:"",width:"600px",destroyOnClose:""},model:{value:t.visibleTree,callback:function(e){t.visibleTree=e},expression:"visibleTree"}},[e("SelectGroupChat",{attrs:{selectGroupList:t.codeList,isSetRule:!1},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleTree=!1}}})],1)],1)},r=[function(){var t=this,e=t._self._c;return e("h4",[t._v(" 基础信息 "),e("div",{staticClass:"divider",staticStyle:{"padding-left":"0px","padding-right":"0px",width:"px"}},[e("span",{staticClass:"ant-divider ant-divider-horizontal"})])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"title"},[e("b",{staticClass:"text-red"},[t._v("*")]),t._v("任务名称:")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"title"},[e("b",{staticClass:"text-red"},[t._v("*")]),t._v("选择群发账户:")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"title title3"},[e("b",{staticClass:"text-red"},[t._v("*")]),t._v("筛选客户:")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider line",staticStyle:{"padding-left":"24px","padding-right":"24px",width:"px"}},[e("span",{staticClass:"ant-divider ant-divider-horizontal"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})])},function(){var t=this,e=t._self._c;return e("h4",[t._v(" 设置群信息 "),e("div",{staticClass:"divider",staticStyle:{"padding-left":"0px","padding-right":"0px",width:"px"}},[e("span",{staticClass:"ant-divider ant-divider-horizontal"})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tips"},[e("span",{staticClass:"left"},[t._v("提示：")]),e("ul",[e("li",[t._v("1、群人数上限为200人，超过200人时请 "),e("strong",[t._v("【添加多个群聊】")]),t._v("，否则可能会导致部分用户 "),e("strong",[t._v("【无法入群】")]),t._v("，添加多个群聊时，客户只会收到一条群发邀请")]),e("li",[t._v("2、上传群二维码时请"),e("strong",[t._v("【仔细核对】")]),t._v("，群二维码和群聊"),e("strong",[t._v("【对应错误】")]),t._v("将导致"),e("strong",[t._v("【数据异常】")])]),e("li",[t._v("3、如果客户添加了多个客服，只会收到一位客服的入群邀请")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider",staticStyle:{"padding-left":"0px","padding-right":"0px",width:"px"}},[e("span",{staticClass:"ant-divider ant-divider-horizontal"})])}],a=i("c7eb"),s=i("1da1"),o=(i("d81d"),i("a15b"),i("d3b7"),i("3ca3"),i("ddb0"),i("a434"),i("6bd9")),c=i("e9de"),u=i("4f1a"),l=(i("161b"),i("b52b")),d=i("a935"),p=(i("1c9c"),i("7183")),f={data:function(){return{subLoading:!1,DataGroupList:[],spanIndex:[],spanName:[],loadingSee:!1,CalculateNum:0,showAll:!1,maxLength:400,visibleTree:!1,taskName:"",codeList:[],originFileObj:{},filterCustomer:!0,seeShow:!0,showLossDateTime:null,screeningCustomer:1,criteriaGender:3,content:"",addTimeTo:void 0,num:[],addTimeFrom:void 0,userIds:[{key:"999999",title:"全部成员",source:{},disabled:!1}],noChose:!1}},created:function(){this.getGroupList()},computed:{showList:function(){if(0==this.showAll){var t=[];if(this.DataGroupList.length>3)for(var e=0;e<3;e++)t.push(this.DataGroupList[e]);else t=this.DataGroupList;return t}return this.DataGroupList},word:function(){return 0==this.showAll?"展开":"收起"}},methods:{radioGroupChange:function(){var t=this;if("2"==this.screeningCustomer){var e;e=this.noChose?this.userIds.map((function(t){return t.source.userid})):void 0;var i={userIds:e};Object(l["a"])(i).then((function(e){t.num=(null===e||void 0===e?void 0:e.data)||0})).catch((function(e){t.$message.error(e)}))}},sub:function(){var t=this;return Object(s["a"])(Object(a["a"])().mark((function e(){var i,n,r,s,o,c;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.taskName){e.next=3;break}return t.$message.error("请先输入任务名称"),e.abrupt("return");case 3:return t.loading=!0,e.next=6,t.updateImage();case 6:if(i=t.noChose?t.userIds.map((function(t){return t.source.userid})):void 0,n=t.spanIndex.length>0?t.spanIndex.join(","):void 0,r="3"==t.criteriaGender?void 0:t.criteriaGender,s=[],t.content){e.next=13;break}return t.$message.error("入群引导语不可为空"),e.abrupt("return");case 13:if(!(t.codeList.length<=0)){e.next=16;break}return t.$message.error("群聊不可为空"),e.abrupt("return");case 16:if(o=!1,t.codeList.map((function(e,i){if(!e.qrUrl)return t.$message.error("群聊".concat(i+1,"二维码不可为空")),void(o=!0)})),!o){e.next=20;break}return e.abrupt("return");case 20:if(t.codeList.map((function(t,e){var i={groupChatId:t.groupId,groupChatWxid:t.chatId,groupChatName:t.chatName,mediaId:t.mediaId,qrUrl:t.qrUrl,step:e+1};s.push(i)})),!t.subLoading){e.next=23;break}return e.abrupt("return");case 23:t.subLoading=!0,c={taskName:t.taskName,criteriaGender:r,userIds:i,criteriaTagId:n,criteriaAddTimeFrom:t.addTimeFrom+" 00:00:00",criteriaAddTimeTo:t.addTimeTo+" 00:00:00",content:t.content,groupIofoList:s},Object(l["e"])(c).then((function(e){t.$router.go(-1),t.$message.success("新建成功")})).catch((function(e){t.$message.error(e)})).finally((function(){t.subLoading=!1,t.loading=!1}));case 26:case"end":return e.stop()}}),e)})))()},updateImage:function(){var t=this,e=this.codeList,i=e.map((function(e){return new Promise((function(i){if(e.originFileObj){var n=new FormData;n.append("file",e.originFileObj),n.append("dir","groupTagPull"),n.append("type","image"),Object(d["a"])(n).then((function(t){e.qrUrl=t.data.fileUrl,e.mediaId=t.data.mediaId,i()})).catch((function(){t.loading=!1,t.$message.error("图片上传失败")}))}else setTimeout((function(){i()}),0)}))}));return Promise.all(i).catch((function(e){t.loading=!1}))},changeSpan:function(t,e){var i=this.spanIndex.indexOf(t),n=this.spanName.indexOf(e);if(this.seeShow=!0,i>-1)this.spanIndex.splice(i,1),this.spanName.splice(n,1);else{this.spanIndex.push(t);var r={tagName:e,index:t};this.spanName.push(r)}},serviceOk:function(t){var e=this;this.codeList=[],this.visibleTree=!1,t.groupList.map((function(t,e){t.index=e,t.originFileObj=""})),t.groupList.map((function(t){e.codeList.push(t)}))},detelGroup:function(t){this.codeList.splice(t,1)},usePersionInfo:function(t){if(this.seeShow=!0,t.length<=0)return this.noChose=!1,void(this.userIds=[{key:"999999",title:"全部成员",source:{staffId:999999999,userid:"Amadeus",name:"黄晋炜",thumbAvatar:"",roleId:2,roleName:"部门管理员"},disabled:!1}]);this.noChose=!0,this.userIds=t},changeDate:function(t,e){this.showLossDateTime=t,this.seeShow=!0,e[0]?(this.addTimeFrom=e[0],this.addTimeTo=e[1]):(this.addTimeFrom=void 0,this.addTimeTo=void 0)},disabledDate:function(t){return t&&t>Date.now()},getGroupList:function(){var t=this,e={grpName:""};return Object(p["c"])(e).then((function(e){t.DataGroupList=(null===e||void 0===e?void 0:e.data.tagGroup)||[]})).catch((function(e){t.$message.error(e)}))},getCalculateNum:function(){var t,e,i,n=this;t=this.noChose?this.userIds.map((function(t){return t.source.userid})):void 0,e=this.spanIndex.length>0?this.spanIndex.join(","):void 0,i="3"==this.criteriaGender?void 0:this.criteriaGender;var r={criteriaGender:i,userIds:t,criteriaTagId:e,criteriaAddTimeFrom:this.addTimeFrom?this.addTimeFrom+" 00:00:00":this.addTimeFrom,criteriaAddTimeTo:this.addTimeTo?this.addTimeTo+" 00:00:00":this.addTimeTo};this.seeShow=!0,this.loadingSee=!0,Object(l["a"])(r).then((function(t){n.seeShow=!1,n.CalculateNum=(null===t||void 0===t?void 0:t.data)||0})).catch((function(t){n.$message.error(t)})).finally((function(){n.loadingSee=!1}))}},components:{usePerson:o["a"],UpDateImg:c["a"],SelectGroupChat:u["a"]}},h=f,v=(i("8e08"),i("2877")),g=Object(v["a"])(h,n,r,!1,null,"21122322",null);e["default"]=g.exports},"8e08":function(t,e,i){"use strict";i("0c1a")},a935:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("b775"),r={uploadMedia:"/client_group/upload/uploadMedia"};function a(t){return Object(n["b"])({url:r.uploadMedia,method:"post",data:t})}},b4f0:function(t,e,i){},b52b:function(t,e,i){"use strict";i.d(e,"j",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return o})),i.d(e,"i",(function(){return c})),i.d(e,"g",(function(){return u})),i.d(e,"e",(function(){return l})),i.d(e,"h",(function(){return d})),i.d(e,"b",(function(){return p})),i.d(e,"d",(function(){return f})),i.d(e,"f",(function(){return h}));var n=i("b775"),r={labelGroupList:"/client_group/tagBuildGroup/page",labelGroupAdd:"/client_group/tagBuildGroup/add",labelGroupDel:"/client_group/tagBuildGroup/delGroupTagPull",getChat:"/client_group/tagBuildGroup/getChat",getStatistics:"/client_group/tagBuildGroup/getStatistics",queryCustomers:"/client_group/tagBuildGroup/customer/get",customersDetail:"/client_group/tagBuildGroup/staff/get",remind:"/client_group/tagBuildGroup/remind",calculateNum:"/client_group/tagBuildGroup/calculateNum",updateDate:"/client_group/tagBuildGroup/getNewData"};function a(t){return Object(n["b"])({url:r.updateDate,method:"get",params:t})}function s(t){return Object(n["b"])({url:r.getChat,method:"get",params:t})}function o(t){return Object(n["b"])({url:r.calculateNum,method:"post",data:t})}function c(t){return Object(n["b"])({url:r.remind,method:"post",data:t})}function u(t){return Object(n["b"])({url:r.labelGroupList,method:"get",params:t})}function l(t){return Object(n["b"])({url:r.labelGroupAdd,method:"post",data:t})}function d(t){return Object(n["b"])({url:r.queryCustomers,method:"post",data:t})}function p(t){return Object(n["b"])({url:r.customersDetail,method:"post",data:t})}function f(t){return Object(n["b"])({url:r.getStatistics,method:"get",params:t})}function h(t){return Object(n["b"])({url:r.labelGroupDel,method:"post",params:t})}},b5c3:function(t,e,i){t.exports=i.p+"assets/default.c42b7ede.svg"},c7eb:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("b636"),i("944a"),i("0c47"),i("23dc"),i("3410"),i("159b"),i("b0c0"),i("131a"),i("fb6a");var n=i("53ca");function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
r=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,a=Object.defineProperty||function(t,e,i){t[e]=i.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(I){l=function(t,e,i){return t[e]=i}}function d(t,e,i,n){var r=e&&e.prototype instanceof h?e:h,s=Object.create(r.prototype),o=new k(n||[]);return a(s,"_invoke",{value:L(t,i,o)}),s}function p(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(I){return{type:"throw",arg:I}}}t.wrap=d;var f={};function h(){}function v(){}function g(){}var m={};l(m,o,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(S([])));y&&y!==e&&i.call(y,o)&&(m=y);var _=g.prototype=h.prototype=Object.create(m);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function r(a,s,o,c){var u=p(t[a],t,s);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==Object(n["a"])(d)&&i.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(d).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,c)}))}c(u.arg)}var s;a(this,"_invoke",{value:function(t,i){function n(){return new e((function(e,n){r(t,i,e,n)}))}return s=s?s.then(n,n):n()}})}function L(t,e,i){var n="suspendedStart";return function(r,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw a;return O()}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var o=x(s,i);if(o){if(o===f)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var c=p(t,e,i);if("normal"===c.type){if(n=i.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n="completed",i.method="throw",i.arg=c.arg)}}}function x(t,e){var i=e.method,n=t.iterator[i];if(void 0===n)return e.delegate=null,"throw"===i&&t.iterator["return"]&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),f;var r=p(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function G(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return v.prototype=g,a(_,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},C(w.prototype),l(w.prototype,c,(function(){return this})),t.AsyncIterator=w,t.async=function(e,i,n,r,a){void 0===a&&(a=Promise);var s=new w(d(e,i,n,r),a);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},C(_),l(_,u,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(G),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(i,n){return s.type="throw",s.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var o=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(o&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),G(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;G(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:S(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),f}},t}},e9de:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qrcode-wrap"},[e("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card",accept:t.accept,disabled:t.isDisabled,"file-list":t.fileList,customRequest:t.customRequest},on:{preview:t.handlePreview,change:t.handleChange}},[e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(" "+t._s(t.imageUrl?"重新选择":t.titleName)+" ")])],1)]),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:function(e){t.previewVisible=!1}}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.imageUrl}})])],1)},r=[],a={name:"UpDateImg",props:["value","url","title","isDisabled","articleFile"],data:function(){return{accept:".jpg,.png,",previewVisible:!1,imageUrl:"",titleName:this.title||"上传活码",fileList:[]}},watch:{url:{handler:function(){this.url&&(this.fileList[0]={uid:"-1",name:"image.png",status:"done",url:this.url},this.imageUrl=this.url)},immediate:!0},articleFile:{handler:function(){var t=this;this.articleFile&&this.getBase64(this.articleFile,(function(e){t.fileList[0]={uid:"-1",name:"image.png",status:"done",url:t.imageUrl},t.imageUrl=e}))},immediate:!0}},methods:{customRequest:function(t){t.onSuccess()},handlePreview:function(t){this.previewVisible=!0},getBase64:function(t,e){var i=new FileReader;i.addEventListener("load",(function(){return e(i.result)})),i.readAsDataURL(t)},handleChange:function(t){var e,i=this;"uploading"===t.file.status&&(this.getBase64(t.file.originFileObj,(function(t){i.imageUrl=t})),this.fileList=[t.fileList[t.fileList.length-1]],this.fileList[0].status="done"),"removed"===t.file.status&&(this.fileList=[],this.imageUrl=""),this.$emit("input",null===t||void 0===t||null===(e=t.fileList[t.fileList.length-1])||void 0===e?void 0:e.originFileObj)}}},s=a,o=(i("14aa"),i("2877")),c=Object(o["a"])(s,n,r,!1,null,"05819df1",null);e["a"]=c.exports},f0b2:function(t,e,i){"use strict";i("b4f0")}}]);