(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65d10cdc"],{"01c1":function(t,e,a){"use strict";a("c32e")},"23ba":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return u}));var n=a("b775"),i={addGroup:"/staffgroup/addGroup",batchMoveGroupMember:"/staffgroup/batchMoveGroupMember",delGroup:"/staffgroup/delGroup",queryGroupAllAndCount:"/staffgroup/queryGroupAllAndCount"};function s(t){return Object(n["b"])({url:i.batchMoveGroupMember,method:"post",data:t})}function r(t){return Object(n["b"])({url:i.addGroup,method:"get",params:t})}function o(t){return Object(n["b"])({url:i.delGroup,method:"get",params:t})}function u(t){return Object(n["b"])({url:i.queryGroupAllAndCount,method:"get",params:t})}},"5dbd":function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return u})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return c}));var n=a("b775"),i={pageList:"/rule/page",activatedRuleList:"/rule/activatedRuleList",pageCreate:"/rule/addOrUpdate",pageDetele:"/rule/delete",authorizationAddOrDelete:"/rule/authorization/addOrDelete",authorizationUpdate:"/rule/authorization/update"};function s(t){return Object(n["b"])({url:i.pageList,method:"post",data:t})}function r(t){return Object(n["b"])({url:i.activatedRuleList,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.pageCreate,method:"post",data:t})}function u(t){return Object(n["b"])({url:i.pageDetele,method:"get",params:t})}function l(t){return Object(n["b"])({url:i.authorizationAddOrDelete,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.authorizationUpdate,method:"post",data:t})}},8177:function(t,e,a){},"97b6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"team-wrap"},[e("header",[e("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:t.form,layout:"inline"},on:{submit:t.handleSearch}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:3}},[e("a-form-item",[e("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"place select",size:"large",allowClear:""},model:{value:t.searchData.role,callback:function(e){t.$set(t.searchData,"role",e)},expression:"searchData.role"}},t._l(t.userList,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.id}},[t._v(" "+t._s(a.ruleName)+" ")])})),1)],1)],1),e("a-col",{attrs:{span:3}},[e("a-form-item",[e("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"place select",size:"large",allowClear:""},model:{value:t.searchData.groupId,callback:function(e){t.$set(t.searchData,"groupId",e)},expression:"searchData.groupId"}},t._l(t.groupList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.groupName)+" ")])})),1)],1)],1),e("a-col",{attrs:{span:3}},[e("a-form-item",[e("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"place select",size:"large",allowClear:""},model:{value:t.searchData.isOutId,callback:function(e){t.$set(t.searchData,"isOutId",e)},expression:"searchData.isOutId"}},t._l(t.userStatus,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.value)+" ")])})),1)],1)],1),e("a-col",{attrs:{span:15}},[e("a-form-item",[e("ChooseTime",{attrs:{videoDataTime:t.searchData.time,hasToday:""},on:{changeTime:t.baseTrendGoodsFun}})],1)],1),e("a-col",{style:{textAlign:"right"},attrs:{span:24}},[e("a-form-item",[e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" Search ")])],1)],1)],1)],1)],1),e("section",{staticClass:"section"},[e("a-table",{staticClass:"table",attrs:{columns:t.columns,rowKey:"id",loading:t.loading,dataSource:t.dataList,pagination:t.pagination},on:{change:t.changeTab},scopedSlots:t._u([{key:"edit",fn:function(a,n){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.goRouter(n)}}},[t._v(t._s(a))])],1)}},{key:"role",fn:function(a){return e("div",{},[t._v(" "+t._s(t.getRoleText(a))+" ")])}}])})],1)])},i=[],s=a("5530"),r=(a("d3b7"),a("7db0"),a("d81d"),a("d2e5")),o=a("5dbd"),u=a("23ba"),l=a("a064"),c={name:"RecordSession",components:{ChooseTime:l["a"]},data:function(){return{userStatus:[{value:"Has UID",id:1},{value:"No UID",id:2},{value:"All",id:0}],dataList:[],form:this.$form.createForm(this,{name:"advanced_search"}),userList:[],visibleSearch:!1,editData:{},columns:[{title:"UID",dataIndex:"outerId"},{title:"name",dataIndex:"displayName"},{title:"Total Sessions",dataIndex:"msgTotal"},{title:"User sends message",dataIndex:"customerMsgTotal"},{title:"CS sends a message",dataIndex:"staffMsgTotal"},{title:"CS sends template message",dataIndex:"templateTotal"},{title:"CS sends success message",dataIndex:"staffMsgSuccessTotal"},{title:"CS send Failure Message",dataIndex:"staffMsgFailTotal"},{title:"Follow up CS",dataIndex:"staffFollowTotal",scopedSlots:{customRender:"edit"}}],layout:{labelCol:{span:6},wrapperCol:{span:14}},userListStatus:[{text:"admin",value:1},{text:"BM",value:2},{text:"Sales",value:3}],loading:!1,pagination:{current:1,pageSize:10,total:0},title:"Group messaging",modalForm:{labelName:void 0,groupId:void 0,remark:void 0},confirmLoading:!1,rules:{labelName:[{required:!0,message:"Please input tag name"}],groupId:[{required:!0,message:"Please select"}]},groupList:[],searchData:{time:[this.$moment().subtract(1,"days"),this.$moment().subtract(1,"days")],role:void 0,groupId:void 0,isOutId:0},dataDetail:{},visibleNew:!1,newColumns:[{title:"UID",dataIndex:"labelName"},{title:"Name",dataIndex:"labelName"},{title:"Country",dataIndex:"labelName"},{title:"Status",dataIndex:"labelName"}]}},created:function(){this.init(),this.getList()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{goRouter:function(t){this.$router.push({name:"RecordDetail",query:{customerId:t.id,name:t.displayName,endTime:this.searchData.time[1].format("YYYY-MM-DD HH:mm:ss"),startTime:this.searchData.time[0].format("YYYY-MM-DD HH:mm:ss")}})},getList:function(){var t=this,e=Object(s["a"])(Object(s["a"])({currentPage:this.pagination.current,pageSize:this.pagination.pageSize},this.searchData),{},{endTime:this.searchData.time[1].format("YYYY-MM-DD HH:mm:ss"),startTime:this.searchData.time[0].format("YYYY-MM-DD HH:mm:ss")});delete e.time,this.loading=!0,Object(r["b"])(e).then((function(e){t.dataList=e.data.records,t.pagination.total=e.data.total,t.loading=!1})).catch((function(e){t.$message.error(e)})).finally((function(){t.loading=!1}))},handleSearch:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){e.searchList()}))},handleReset:function(){this.form.resetFields(),this.searchData={},this.searchList()},submitKeyword:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return!1;var a=t.modalForm;t.confirmLoading=!0,t.editData.id?t.editKeywordFn(a):t.addKeywordFn(a)}))},addKeywordFn:function(t){var e=this;Object(r["pageCreate"])(t).then((function(t){e.visibleSearch=!1,e.searchList()})).catch((function(t){e.$message.error(t)})).finally((function(){e.confirmLoading=!1}))},editKeywordFn:function(t){var e=this;t.id=this.editData.id,Object(r["f"])(t).then((function(t){e.visibleSearch=!1,e.searchList()})).catch((function(t){e.$message.error(t)})).finally((function(){e.confirmLoading=!1}))},getRoleText:function(t){var e=this.userListStatus.find((function(e){return e.value==t}));return e.text},editPage:function(t){this.title="Edit Group messaging",this.visibleSearch=!0,this.editData=t,this.modalForm={labelName:t.labelName,groupId:t.groupId,remark:t.remark}},addAgent:function(){this.title="Group messaging",this.visibleSearch=!0,this.editData={},this.modalForm={labelName:void 0,groupId:void 0,remark:void 0}},serviceOk:function(){this.pagination.current=1,this.visibleSearch=!1,this.$message.success("success"),this.$emit("editSuccess")},deletePage:function(t){var e=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"delete",content:"Please check if you want to delete the tags, all the tags that have been tagged will be deleted after deletionã€‚",onOk:function(){e.contactsDeleteFun(t.id)}})},contactsDeleteFun:function(t){var e=this,a={id:t};Object(r["pageDetele"])(a).then((function(t){e.$message.success("delete success"),e.getList()})).catch((function(t){e.$message.error(t)}))},baseTrendGoodsFun:function(t){this.searchData.time=t},changeTab:function(t){var e=t.current;this.pagination.current=e,this.getList()},searchList:function(){this.pagination.current=1,this.getList()},init:function(){var t=this,e={currentPage:1,pageSize:1e3};Object(o["f"])(e).then((function(e){var a;t.userList=null===(a=e.data.records)||void 0===a?void 0:a.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{isActivatedtext:t.isActivated?"effective":"invalid",Actions:"",authorization:""})}))})).catch((function(e){t.$message.error(e)})),Object(u["d"])().then((function(e){t.groupList=e.data})).catch((function(e){t.$message.error(e)}))},lookDetail:function(t){this.visibleNew=!0,this.dataDetail=t}}},d=c,m=(a("01c1"),a("2877")),h=Object(m["a"])(d,n,i,!1,null,"45b79431",null);e["default"]=h.exports},a064:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"date-range"},[e("div",{staticClass:"radio-group"},[t.hasToday?e("label",{class:["0"==t.dayType?"active":"","el-radio-button el-l"],on:{click:function(e){return t.dayBtn("0")}}},[t._v("Today")]):t._e(),e("label",{class:["1"==t.dayType?"active":"","el-radio-button el-l"],on:{click:function(e){return t.dayBtn("1")}}},[t._v("yesterday")]),e("label",{class:["7"==t.dayType?"active":"","el-radio-button"],on:{click:function(e){return t.dayBtn("7")}}},[t._v("current week")]),e("label",{class:["30"==t.dayType?"active":"","el-radio-button el-l"],on:{click:function(e){return t.dayBtn("30")}}},[t._v("current month")])]),e("a-range-picker",{staticStyle:{width:"260px","margin-left":"20px"},attrs:{disabledDate:t.disabledDate},on:{change:t.changeDate},model:{value:t.startAndEndTime,callback:function(e){t.startAndEndTime=e},expression:"startAndEndTime"}})],1)},i=[],s={name:"ChooseTime",components:{},props:{videoDataTime:{type:Array,default:function(){return[]}},hasToday:{type:Boolean,default:!1}},data:function(){return{analysisDate:[],dayType:"1",startAndEndTime:void 0}},created:function(){this.startAndEndTime=this.videoDataTime},methods:{dayBtn:function(t){this.dayType=t,"30"==t&&(this.startAndEndTime=[this.$moment().startOf("month"),this.$moment().subtract(1,"days")]),"7"==t&&(this.startAndEndTime=[this.$moment().subtract(this.$moment().weekday(),"days"),this.$moment().subtract(1,"days")]),0==t&&(this.startAndEndTime=[this.$moment().subtract(t,"days"),this.$moment().subtract(0,"days")]),"1"==t&&(this.startAndEndTime=[this.$moment().subtract(t,"days"),this.$moment().subtract(1,"days")]),this.$emit("changeTime",this.startAndEndTime)},disabledDate:function(t){return t&&t>this.$moment()},changeDate:function(t){this.dayType="",this.startAndEndTime=t,this.$emit("changeTime",this.startAndEndTime)}}},r=s,o=(a("f5a7"),a("2877")),u=Object(o["a"])(r,n,i,!1,null,"89977580",null);e["a"]=u.exports},c32e:function(t,e,a){},d2e5:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return u}));var n=a("b775"),i={getCustomerMsg:"/chatCollect/getCustomerMsg",getCustomerFollows:"/chatCollect/getCustomerFollows",getFollowChatPage:"/sessionInfo/getFollowChatPage",pageUpdate:"/label/update",labelGroupPage:"/labelGroup/page",labelGroupListAll:"/labelGroup/listAll",labelGroupDelete:"/labelGroup/delete",labelGroupCreate:"/labelGroup/create",labelGroupUpdate:"/labelGroup/update"};function s(t){return Object(n["b"])({url:i.getCustomerMsg,method:"post",data:t})}function r(t){return Object(n["b"])({url:i.getCustomerFollows,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.getFollowChatPage,method:"post",data:t})}function u(t){return Object(n["b"])({url:i.pageUpdate,method:"post",data:t})}},f5a7:function(t,e,a){"use strict";a("8177")}}]);