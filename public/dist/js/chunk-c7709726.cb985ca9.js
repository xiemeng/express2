(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c7709726"],{"0070":function(t,e,a){"use strict";a("60443")},"007d":function(t,e,a){"use strict";a.r(e);var n=a("22b4"),i=a("2da7");Object(n["a"])(i["a"])},"0fa8":function(t,e,a){},1119:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[t._l(t.form.tagList,(function(a,n){return e("a-form-model-item",t._b({key:a.key,attrs:{prop:"tagList",label:0===n?"标签名称":""}},"a-form-model-item",0===n?t.formItemLayout:t.formItemLayoutWithOutLabel,!1),[e("a-input",{staticStyle:{width:"60%","margin-right":"8px"},attrs:{placeholder:"请输入标签名称",maxLength:10},model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"domain.value"}}),t.form.tagList.length>1?e("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===t.form.tagList.length},on:{click:function(e){return t.removeDomain(a)}}}):t._e(),a.tagCount||0===a.tagCount?e("a-space",{staticClass:"using"},[a.tagCount>0?e("a-tag",{attrs:{color:"green"}},[t._v("使用中")]):e("a-tag",{attrs:{color:"orange"}},[t._v("未使用")])],1):t._e()],1)})),e("a-form-model-item",{attrs:{"wrapper-col":{offset:4}}},[e("a-button",{attrs:{type:"link"},on:{click:t.addDomain}},[e("a-icon",{attrs:{type:"plus-circle"}}),t._v(" 添加标签 ")],1)],1)],2)},i=[],r=(a("a434"),{name:"FormlabelAdd",props:{form:{type:[Object],default:function(){return{}}}},mounted:function(){},data:function(){return{formItemLayout:{labelCol:{sm:{span:5}},wrapperCol:{sm:{span:19}}},formItemLayoutWithOutLabel:{wrapperCol:{sm:{span:19,offset:5}}}}},methods:{removeDomain:function(t){var e=this.form.tagList.indexOf(t);-1!==e&&this.form.tagList.splice(e,1)},addDomain:function(){this.form.tagList.push({value:"",key:Date.now()})}}}),o=r,s=(a("74de"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,"bb9da28a",null);e["a"]=c.exports},1531:function(t,e,a){"use strict";a("b1f6")},"1da1":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("d3b7");function n(t,e,a,n,i,r,o){try{var s=t[r](o),c=s.value}catch(u){return void a(u)}s.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,a=arguments;return new Promise((function(i,r){var o=t.apply(e,a);function s(t){n(o,i,r,s,c,"next",t)}function c(t){n(o,i,r,s,c,"throw",t)}s(void 0)}))}}},2887:function(t,e,a){},"3eba":function(t,e,a){"use strict";a.r(e);var n=a("aa74");a.d(e,"version",(function(){return n["cb"]})),a.d(e,"dependencies",(function(){return n["l"]})),a.d(e,"PRIORITY",(function(){return n["g"]})),a.d(e,"init",(function(){return n["B"]})),a.d(e,"connect",(function(){return n["j"]})),a.d(e,"disConnect",(function(){return n["m"]})),a.d(e,"disconnect",(function(){return n["n"]})),a.d(e,"dispose",(function(){return n["o"]})),a.d(e,"getInstanceByDom",(function(){return n["w"]})),a.d(e,"getInstanceById",(function(){return n["x"]})),a.d(e,"registerTheme",(function(){return n["R"]})),a.d(e,"registerPreprocessor",(function(){return n["P"]})),a.d(e,"registerProcessor",(function(){return n["Q"]})),a.d(e,"registerPostInit",(function(){return n["N"]})),a.d(e,"registerPostUpdate",(function(){return n["O"]})),a.d(e,"registerUpdateLifecycle",(function(){return n["T"]})),a.d(e,"registerAction",(function(){return n["H"]})),a.d(e,"registerCoordinateSystem",(function(){return n["I"]})),a.d(e,"getCoordinateSystemDimensions",(function(){return n["v"]})),a.d(e,"registerLocale",(function(){return n["L"]})),a.d(e,"registerLayout",(function(){return n["J"]})),a.d(e,"registerVisual",(function(){return n["U"]})),a.d(e,"registerLoading",(function(){return n["K"]})),a.d(e,"setCanvasCreator",(function(){return n["V"]})),a.d(e,"registerMap",(function(){return n["M"]})),a.d(e,"getMap",(function(){return n["y"]})),a.d(e,"registerTransform",(function(){return n["S"]})),a.d(e,"dataTool",(function(){return n["k"]})),a.d(e,"zrender",(function(){return n["eb"]})),a.d(e,"matrix",(function(){return n["D"]})),a.d(e,"vector",(function(){return n["bb"]})),a.d(e,"zrUtil",(function(){return n["db"]})),a.d(e,"color",(function(){return n["i"]})),a.d(e,"throttle",(function(){return n["X"]})),a.d(e,"helper",(function(){return n["A"]})),a.d(e,"use",(function(){return n["Z"]})),a.d(e,"setPlatformAPI",(function(){return n["W"]})),a.d(e,"parseGeoJSON",(function(){return n["F"]})),a.d(e,"parseGeoJson",(function(){return n["G"]})),a.d(e,"number",(function(){return n["E"]})),a.d(e,"time",(function(){return n["Y"]})),a.d(e,"graphic",(function(){return n["z"]})),a.d(e,"format",(function(){return n["u"]})),a.d(e,"util",(function(){return n["ab"]})),a.d(e,"env",(function(){return n["p"]})),a.d(e,"List",(function(){return n["e"]})),a.d(e,"Model",(function(){return n["f"]})),a.d(e,"Axis",(function(){return n["a"]})),a.d(e,"ComponentModel",(function(){return n["c"]})),a.d(e,"ComponentView",(function(){return n["d"]})),a.d(e,"SeriesModel",(function(){return n["h"]})),a.d(e,"ChartView",(function(){return n["b"]})),a.d(e,"innerDrawElementOnCanvas",(function(){return n["C"]})),a.d(e,"extendComponentModel",(function(){return n["r"]})),a.d(e,"extendComponentView",(function(){return n["s"]})),a.d(e,"extendSeriesModel",(function(){return n["t"]})),a.d(e,"extendChartView",(function(){return n["q"]}));var i=a("22b4"),r=a("1be7"),o=a("f95e"),s=a("5e81"),c=a("ee29");Object(i["a"])([o["a"],s["a"]]),e["default"]={init:function(){return r["l"].apply(null,arguments)}},Object(i["a"])(c["a"])},4990:function(t,e,a){"use strict";a("bbda")},60443:function(t,e,a){},6290:function(t,e,a){"use strict";a("caad"),a("2532"),a("fb6a");var n=function(){var t=this,e=t._self._c;return e("div",[t.isEdit?e("a-button",{staticClass:"add-tag-button",attrs:{size:"small"},on:{click:t.showInput}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 添加 ")],1):t._e(),t.inputVisible?e("a-input",{ref:"input",style:{width:"120px"},attrs:{type:"text",size:"small",inputVisible:"false",maxLength:10,value:t.inputValue},on:{change:t.handleInputChange,blur:t.handleInputConfirm,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.handleInputConfirm.apply(null,arguments))}}}):t._e(),t._l(t.tagslist.tags,(function(a,n){return[a.tagName.length>20?e("a-tooltip",{key:n},[e("a-tag",{key:a.tagId,attrs:{closable:t.closable,color:t.tagIdList.includes(a.tagId)?"blue":""},on:{close:function(e){return t.closeTag(a)},click:function(e){return t.checkedTag(a)}}},[t._v(" "+t._s("".concat(a.tagName.slice(0,20),"..."))+" ")])],1):e("a-tag",{key:a.tagId,attrs:{closable:t.closable,color:t.tagIdList.includes(a.tagId)?"blue":""},on:{close:function(e){return t.closeTag(a)},click:function(e){return t.checkedTag(a)}}},[t._v(" "+t._s(a.tagName)+" ")])]}))],2)},i=[],r=a("2909"),o=(a("d81d"),a("c740"),a("a434"),a("498a"),a("99af"),{name:"TagComponents",props:{selectTagList:{type:[Array],default:function(){return[]}},tagslist:{type:[Object],default:function(){return{}}},closable:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isSelect:{type:Boolean,default:!0}},data:function(){return{inputVisible:!1,inputValue:"",index:"",selectTags:[]}},computed:{tagIdList:function(){var t;return(null===(t=this.selectTagList)||void 0===t?void 0:t.map((function(t){return t.tagId})))||[]}},methods:{closeTag:function(t){var e=this.tagslist.tags.findIndex((function(e){return e.tagName===t.tagName}));this.tagslist.tags.splice(e,1),this.$emit("closeTag",t)},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},checkedTag:function(t){if(this.isSelect){var e=this.selectTagList.findIndex((function(e){if(e.tagId===t.tagId)return e}));e>=0?this.selectTagList.splice(e,1):this.selectTagList.push(t)}},handleInputChange:function(t){var e;this.inputValue=null===(e=t.target.value)||void 0===e?void 0:e.trim()},clean:function(){this.inputValue="",this.inputVisible=!1},handleInputConfirm:function(){var t,e=this.inputValue;if(e){var a=this.tagslist.tags||[],n={tagName:e},i=null===(t=a)||void 0===t?void 0:t.map((function(t){return t.tagName}));null!==i&&void 0!==i&&i.includes(n.tagName)?this.$message.warning("存在重复标签"):(e&&(a=[].concat(Object(r["a"])(a),[n])),this.tagslist.tags=a,this.$emit("addTag",{value:e,tagItem:this.tagslist,callBack:this.clean}))}else this.clean()}}}),s=o,c=(a("0070"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"22a32bc5",null);e["a"]=u.exports},"654c":function(t,e,a){},"67be":function(t,e,a){},"6d58":function(t,e,a){"use strict";a("2887")},7183:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return c}));var n=a("b775"),i={getTagGroup:"/client_manager/CustomerTag/getTagGroup",syncTagGroup:"/client_manager/CustomerTag/syncTagGroup",addOrEditTagGroup:"/client_manager/CustomerTag/addOrEditTagGroup",delTagGroup:"/client_manager/CustomerTag/delTagGroup"};function r(t){return Object(n["b"])({url:i.getTagGroup,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.syncTagGroup,method:"post",data:t})}function s(t){return Object(n["b"])({url:i.addOrEditTagGroup,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.delTagGroup,method:"post",data:t})}},"74de":function(t,e,a){"use strict";a("9ee2")},"7a1a":function(t,e,a){"use strict";a("e97f")},"8b58":function(t,e,a){},"8df2":function(t,e,a){"use strict";a("654c")},"8f19":function(t,e,a){"use strict";a.d(e,"n",(function(){return r})),a.d(e,"q",(function(){return o})),a.d(e,"a",(function(){return s})),a.d(e,"j",(function(){return c})),a.d(e,"h",(function(){return u})),a.d(e,"f",(function(){return l})),a.d(e,"l",(function(){return d})),a.d(e,"d",(function(){return f})),a.d(e,"e",(function(){return m})),a.d(e,"i",(function(){return p})),a.d(e,"g",(function(){return v})),a.d(e,"b",(function(){return g})),a.d(e,"k",(function(){return h})),a.d(e,"m",(function(){return b})),a.d(e,"c",(function(){return y})),a.d(e,"p",(function(){return _})),a.d(e,"o",(function(){return C}));var n=a("b775"),i={customerFormSave:"/client_transformation/customerForm/save",dateInfoList:"/client_transformation/customerFormData/dateInfoList",customerFormList:"/client_transformation/customerForm/list",customerFormInfo:"/client_transformation/customerForm/info",customerFormUpdate:"/client_transformation/customerForm/update",customerFormPublish:"/client_transformation/customerForm/publish",customerFormDelete:"/client_transformation/customerForm/delete",dataInfo:"/client_transformation/customerFormData/dataInfo",analysis:"/client_transformation/customerFormData/analysis",staffList:"/client_transformation/customerFormData/staffList",infoList:"/client_transformation/customerFormData/infoList",analysisExport:"/client_transformation/customerFormData/analysisExport",dataInfoExport:"/client_transformation/customerFormData/dataInfoExport",infoCityList:"/client_transformation/customerFormData/infoCityList",batchTags:"/client_transformation/customerFormData/batchTags",selectList:"/client_transformation/customerForm/userData/selectList",queryDataList:"/client_transformation/customerFormData/queryDataList"};function r(t){return Object(n["b"])({url:i.infoList,method:"post",data:t})}function o(t){return Object(n["b"])({url:i.staffList,method:"get",params:t})}function s(t){return Object(n["b"])({url:i.analysis,method:"get",params:t})}function c(t){return Object(n["b"])({url:i.dataInfo,method:"get",params:t})}function u(t){return Object(n["b"])({url:i.customerFormSave,method:"post",data:t})}function l(t){return Object(n["b"])({url:i.customerFormList,method:"get",params:t})}function d(t){return Object(n["b"])({url:i.dateInfoList,method:"get",params:t})}function f(t){return Object(n["b"])({url:i.customerFormDelete,method:"post",data:t})}function m(t){return Object(n["b"])({url:i.customerFormInfo,method:"get",params:t})}function p(t){return Object(n["b"])({url:i.customerFormUpdate,method:"post",data:t})}function v(t){return Object(n["b"])({url:i.customerFormPublish,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.analysisExport,method:"get",params:t,responseType:"blob"})}function h(t){return Object(n["b"])({url:i.dataInfoExport,method:"get",params:t,responseType:"blob"})}function b(t){return Object(n["b"])({url:i.infoCityList,method:"get",params:t})}function y(t){return Object(n["b"])({url:i.batchTags,method:"post",data:t})}function _(t){return Object(n["b"])({url:i.selectList,method:"get",params:t})}function C(t){return Object(n["b"])({url:i.queryDataList,method:"post",data:t})}},"90a8":function(t,e,a){"use strict";a.d(e,"q",(function(){return r})),a.d(e,"p",(function(){return o})),a.d(e,"x",(function(){return s})),a.d(e,"e",(function(){return c})),a.d(e,"j",(function(){return u})),a.d(e,"A",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"b",(function(){return f})),a.d(e,"v",(function(){return m})),a.d(e,"w",(function(){return p})),a.d(e,"z",(function(){return v})),a.d(e,"h",(function(){return g})),a.d(e,"i",(function(){return h})),a.d(e,"o",(function(){return b})),a.d(e,"u",(function(){return y})),a.d(e,"m",(function(){return _})),a.d(e,"f",(function(){return C})),a.d(e,"k",(function(){return x})),a.d(e,"l",(function(){return I})),a.d(e,"y",(function(){return w})),a.d(e,"g",(function(){return L})),a.d(e,"d",(function(){return k})),a.d(e,"c",(function(){return T})),a.d(e,"s",(function(){return O})),a.d(e,"r",(function(){return S})),a.d(e,"t",(function(){return F})),a.d(e,"n",(function(){return j}));var n=a("b775"),i={customerList:"/client_manager/client/getCustomerList",dictionaryByCode:"/client_manager/client/getDictionaryByCode",distinctNum:"/client_manager/client/getDistinctNum",syncCustomerData:"/client_manager/client/syncCustomerData",tagGroup:"/client_manager/CustomerTag/getTagGroup ",customerLoss:"/client_manager/customerLoss/page",batchTagging:"/client_manager/CustomerTag/batchTagging",batchTaggingFront:"/client_manager/CustomerTag/batchTaggingFront",batchDelTagFront:"/client_manager/CustomerTag/batchDelTagFront",findByCustomerGroup:"/client_manager/client/findByCustomerGroup",findByCustomerEvent:"/client_manager/client/findByCustomerEvent",findEventByCustomerWxid:"/client_manager/client/findEventByCustomerWxid",findByCustomField:"/client_manager/client/findByCustomField",exportDown:"/client_manager/customerLoss/export",getCustomerListExport:"/client_manager/client/getCustomerListExport",findByCustomFieldExport:"/client_manager/client/findByCustomFieldExport",customerScoreExport:"/client_manager/customerScore/customerScoreExport",customerScore:"/client_manager/customerScore/customerScore",updateScore:"/client_manager/customerScore/updateScore",historyList:"/client_manager/customerScore/list",getTemplateList:"/client_manager/customerEvent/getTemplateList",addTemplateEvent:"/client_manager/customerEvent/addTemplateEvent",addTemplate:"/client_manager/customerEvent/addTemplate",updateTemplate:"/client_manager/customerEvent/updateTemplate",delTemplate:"/client_manager/customerEvent/delTemplate",findByCustomIntegral:"/client_manager/customerIntegral/findByCustomIntegral",findByCustomIntegralExport:"/client_manager/customerIntegral/findByCustomIntegralExport",channelList:"/client_manager/customerIntegral/channelList",integralList:"/client_manager/customerIntegral/integralList"};function r(t){return Object(n["b"])({url:i.findByCustomIntegralExport,method:"post",data:t,responseType:"blob"})}function o(t){return Object(n["b"])({url:i.findByCustomIntegral,method:"post",data:t})}function s(t){return Object(n["b"])({url:i.integralList,method:"post",data:t})}function c(t){return Object(n["b"])({url:i.channelList,method:"get",params:t})}function u(t){return Object(n["b"])({url:i.delTemplate,method:"get",params:t})}function l(t){return Object(n["b"])({url:i.updateTemplate,method:"get",params:t})}function d(t){return Object(n["b"])({url:i.addTemplate,method:"get",params:t})}function f(t){return Object(n["b"])({url:i.addTemplateEvent,method:"get",params:t})}function m(t){return Object(n["b"])({url:i.getTemplateList,method:"get",params:t})}function p(t){return Object(n["b"])({url:i.historyList,method:"get",params:t})}function v(t){return Object(n["b"])({url:i.updateScore,method:"post",data:t})}function g(t){return Object(n["b"])({url:i.customerScore,method:"post",data:t})}function h(t){return Object(n["b"])({url:i.customerScoreExport,method:"post",data:t,responseType:"blob"})}function b(t){return Object(n["b"])({url:i.findByCustomFieldExport,method:"post",data:t,responseType:"blob"})}function y(t){return Object(n["b"])({url:i.getCustomerListExport,method:"get",params:t,responseType:"blob"})}function _(t){return Object(n["b"])({url:i.exportDown,method:"post",data:t,responseType:"blob"})}function C(t){return Object(n["b"])({url:i.customerList,method:"get",params:t})}function x(t){return Object(n["b"])({url:i.dictionaryByCode,method:"get",params:t})}function I(t){return Object(n["b"])({url:i.distinctNum,method:"get",params:t})}function w(){return Object(n["b"])({url:i.tagGroup,method:"post",data:{}})}function L(t){return Object(n["b"])({url:i.customerLoss,method:"post",data:t})}function k(t){return Object(n["b"])({url:i.batchTaggingFront,method:"post",data:t})}function T(t){return Object(n["b"])({url:i.batchDelTagFront,method:"post",data:t})}function O(t){return Object(n["b"])({url:i.findByCustomerGroup,method:"post",data:t})}function S(t){return Object(n["b"])({url:i.findByCustomerEvent,method:"post",data:t})}function F(t){return Object(n["b"])({url:i.findEventByCustomerWxid,method:"post",data:t})}function j(t){return Object(n["b"])({url:i.findByCustomField,method:"post",data:t})}},"9ee2":function(t,e,a){},ac43:function(t,e,a){"use strict";a("0fa8")},b1f6:function(t,e,a){},b321:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"dialog-title"},[t._v("批量"+t._s("add"===t.status?"打":"移除")+"标签")]),e("div",{staticClass:"tips"},[t._v(" 为选中的"+t._s(t.selectedRows.length)+"个客户批量"+t._s("add"===t.status?"打":"移除")+"标签，请选择标签 ")]),e("section",{staticClass:"main"},[e("ul",t._l(t.DataGroupList,(function(a){return e("li",{key:a.grpTagId},[e("div",{staticClass:"tag-group-name"},[t._v(t._s(a.groupName)+"：")]),e("TagComponents",{attrs:{tagslist:a,selectTagList:a.selectTagList,isEdit:!0},on:{addTag:t.addTag}})],1)})),0)]),e("div",{staticClass:"foot-button"},[e("a-button",{attrs:{type:"link"},on:{click:function(e){t.visible=!0}}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 新建标签组 ")],1),e("a-space",{attrs:{size:12}},[e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary",loading:t.spinning},on:{click:function(e){return t.submitForm()}}},[t._v("确定")])],1)],1),e("a-modal",{attrs:{footer:null,width:"599px",centered:"",destroyOnClose:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("NewLabelgroup",{attrs:{tagDetail:t.tagDetail},on:{cancle:function(e){t.visible=!1},serviceOk:t.serviceOk}})],1)],1)},i=[],r=a("5530"),o=(a("0481"),a("4069"),a("d81d"),a("4de4"),a("d3b7"),a("c758")),s=a("6290"),c=a("90a8"),u=a("7183"),l={name:"MakeTags",data:function(){return{visible:!1,tagDetail:"",DataGroupList:[]}},components:{NewLabelgroup:o["a"],TagComponents:s["a"]},props:{selectedRows:{type:Array,default:function(){return[]}},status:{type:String,default:""},spinning:{type:Boolean,default:!1}},created:function(){this.getGroupList()},computed:{getSelectTag:function(){return this.DataGroupList.filter((function(t){return t.selectTagList.length>0})).map((function(t){return t.selectTagList})).flat()}},methods:{addTag:function(t){var e=this,a=t.value,n=t.tagItem,i=t.callBack,r=this.getAddParams(a,n);Object(u["a"])(r).then((function(){e.$message.success("添加标签成功"),i()}))},getAddParams:function(t,e){var a={wxGroupId:e.wxGroupId,tagGroupName:e.groupName,scope:e.depScope?1:0,addOrEditTags:[{tagName:t}],departments:[]};return a},serviceOk:function(){this.visible=!1,this.getGroupList()},getGroupList:function(){var t=this,e={grpName:""};return Object(c["y"])(e).then((function(e){var a,n;t.DataGroupList=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(n=a.tagGroup)||void 0===n?void 0:n.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{selectTagList:[]})}))})).catch((function(e){t.$message.error(e)}))},submitForm:function(){this.getSelectTag.length<1?this.$message.warning("请选择标签"):this.$emit("serviceOk",this.getSelectTag)}}},d=l,f=(a("d302"),a("2877")),m=Object(f["a"])(d,n,i,!1,null,"4cb314d1",null);e["a"]=m.exports},bbda:function(t,e,a){},c037:function(t,e,a){"use strict";a.r(e);var n=a("22b4"),i=a("49bb");Object(n["a"])(i["a"])},c758:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"add-tags"},[e("section",{attrs:{id:"operator-tag-group-dialog"}},[e("p",{staticClass:"dialog-title dialog-tag-title"},[t._v(t._s(t.statusText)+"标签组")]),e("a-form-model",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-col":t.labelCol,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{label:"标签组名称",prop:"tagGroupName"}},[e("a-input",{staticClass:"tags-name",attrs:{placeholder:"请输入标签组名称",maxLength:15},model:{value:t.form.tagGroupName,callback:function(e){t.$set(t.form,"tagGroupName",e)},expression:"form.tagGroupName"}})],1),e("a-form-model-item",{attrs:{label:"可见范围",prop:"scope"}},[e("a-radio-group",{model:{value:t.form.scope,callback:function(e){t.$set(t.form,"scope",e)},expression:"form.scope"}},[e("a-radio",{attrs:{value:0}},[t._v(" 全部员工 ")]),e("a-radio",{attrs:{value:1}},[t._v(" 部门可用 ")])],1)],1),1===t.form.scope?e("a-form-model-item",{attrs:{label:"选择可用部门"}},[e("AddContent",{attrs:{title:"请选择部门",type:"wxDepartmentId",tip:"",dataList:t.selectList},on:{selectPerson:t.selectPerson}})],1):t._e(),e("FormlabelAdd",{attrs:{form:t.form}})],1)],1),e("div",{staticClass:"foot-button"},[e("a-space",{attrs:{size:12}},[e("a-button",{on:{click:function(e){return t.$emit("cancle")}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确定")])],1)],1)])},i=[],r=a("5530"),o=(a("d81d"),a("d3b7"),a("99af"),a("159b"),a("c740"),a("a434"),a("e1ae")),s=a("1119"),c=a("7183"),u={props:{tagDetail:{type:[Object],default:function(){return{}}}},computed:{statusText:function(){return this.tagDetail.groupId?"修改":"新增"}},data:function(){return{formLayout:"horizontal",labelCol:{span:5},wrapperCol:{span:14},selectList:[],form:{tagGroupName:"",scope:0,value:"",tagList:[{value:"",key:Date.now()}]},rules:{tagGroupName:[{required:!0,message:"标签组名称不能为空"}],tagList:[{required:!0,message:"标签名称不能为空"}]}}},created:function(){var t;if(null!==(t=this.tagDetail)&&void 0!==t&&t.groupId&&(this.form={tagGroupName:this.tagDetail.groupName,scope:this.tagDetail.depScope?1:0,tagList:this.tagDetail.tags.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{value:t.tagName,key:t.tagId,tagId:t.tagId,wxTagId:t.wxTagId})}))},this.tagDetail.depNames&&this.tagDetail.depScope)){var e=this.tagDetail.depNames.split(","),a=this.tagDetail.depScope.split(",");this.selectList=e.map((function(t,e){return{icon:"file",key:a[e],source:{departmentId:a[e],wxDepartmentId:a[e],name:t},title:t}}))}},components:{AddContent:o["a"],FormlabelAdd:s["a"]},methods:{selectPerson:function(t){this.selectList=t},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.validate().then((function(){e.addOrEditTagGroup()})).catch((function(t){e.$message.warning(t.message||t)}))}))},validate:function(){var t=this;return new Promise((function(e,a){1===t.form.scope&&t.selectList.length<1&&a("请选择部门");for(var n=t.form.tagList,i=0;i<n.length;i++){var r=n[i];r.value||a("请填写标签名称");for(var o=i+1;o<n.length;o++)r.value===n[o].value&&a("第".concat(i+1,"个和第").concat(o+1,"个标签名重复"))}e()}))},getAddParams:function(){var t,e,a={tagGroupName:this.form.tagGroupName,scope:this.form.scope,addOrEditTags:null===(t=this.form.tagList)||void 0===t?void 0:t.map((function(t){return{tagName:t.value}})),departments:null===(e=this.selectList)||void 0===e?void 0:e.map((function(t){return{wxDepartmentId:t.source.wxDepartmentId}}))};return a},getEditParams:function(){var t,e,a=this,n=[],i=[];this.tagDetail.tags.forEach((function(t){var e=a.form.tagList.findIndex((function(e){if(t.wxTagId===e.wxTagId)return e}));e<0&&n.push({tagName:t.tagName,wxTagId:t.wxTagId})})),this.form.tagList.forEach((function(t){t.wxTagId?a.tagDetail.tags.forEach((function(e){e.wxTagId===t.wxTagId&&e.tagName!==t.value&&i.push({tagName:t.value,wxTagId:e.wxTagId})})):i.push({tagName:t.value})})),null===(t=this.form.tagList)||void 0===t||t.map((function(t){return{tagName:t.value,wxTagId:t.wxTagId}}));var r={wxGroupId:this.tagDetail.wxGroupId,tagGroupName:this.form.tagGroupName,scope:this.form.scope,delTags:n,addOrEditTags:i,departments:null===(e=this.selectList)||void 0===e?void 0:e.map((function(t){return{wxDepartmentId:t.source.wxDepartmentId}}))};return 0===this.form.scope&&delete r.departments,r},addOrEditTagGroup:function(){var t,e=this,a=null!==(t=this.tagDetail)&&void 0!==t&&t.groupId?this.getEditParams():this.getAddParams();Object(c["a"])(a).then((function(){e.$message.success("".concat(e.statusText,"标签成功")),e.$emit("serviceOk")})).catch((function(t){e.$message.error(t||t.message)}))},removeDomain:function(t){var e=this.form.tagList.indexOf(t);-1!==e&&this.form.tagList.splice(e,1)}}},l=u,d=(a("ac43"),a("2877")),f=Object(d["a"])(l,n,i,!1,null,"95b22908",null);e["a"]=f.exports},c7eb:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("b636"),a("944a"),a("0c47"),a("23dc"),a("3410"),a("159b"),a("b0c0"),a("131a"),a("fb6a");var n=a("53ca");function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,r=Object.defineProperty||function(t,e,a){t[e]=a.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(F){l=function(t,e,a){return t[e]=a}}function d(t,e,a,n){var i=e&&e.prototype instanceof p?e:p,o=Object.create(i.prototype),s=new T(n||[]);return r(o,"_invoke",{value:I(t,a,s)}),o}function f(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(F){return{type:"throw",arg:F}}}t.wrap=d;var m={};function p(){}function v(){}function g(){}var h={};l(h,s,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(O([])));y&&y!==e&&a.call(y,s)&&(h=y);var _=g.prototype=p.prototype=Object.create(h);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(r,o,s,c){var u=f(t[r],t,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==Object(n["a"])(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,s,c)}),(function(t){i("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return i("throw",t,s,c)}))}c(u.arg)}var o;r(this,"_invoke",{value:function(t,a){function n(){return new e((function(e,n){i(t,a,e,n)}))}return o=o?o.then(n,n):n()}})}function I(t,e,a){var n="suspendedStart";return function(i,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw r;return S()}for(a.method=i,a.arg=r;;){var o=a.delegate;if(o){var s=w(o,a);if(s){if(s===m)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var c=f(t,e,a);if("normal"===c.type){if(n=a.done?"completed":"suspendedYield",c.arg===m)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(n="completed",a.method="throw",a.arg=c.arg)}}}function w(t,e){var a=e.method,n=t.iterator[a];if(void 0===n)return e.delegate=null,"throw"===a&&t.iterator["return"]&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method)||"return"!==a&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+a+"' method")),m;var i=f(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,m):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function O(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=g,r(_,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},C(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,a,n,i,r){void 0===r&&(r=Promise);var o=new x(d(e,a,n,i),r);return t.isGeneratorFunction(a)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(_),l(_,u,"Generator"),l(_,s,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),a=[];for(var n in e)a.push(n);return a.reverse(),function t(){for(;a.length;){var n=a.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(a,n){return o.type="throw",o.arg=t,e.next=a,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),c=a.call(r,"finallyLoc");if(s&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),k(a),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var i=n.arg;k(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:O(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},t}},c7f6:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAOCAYAAAAbvf3sAAAB0ElEQVQoU12SPUxUQRDHf/vezu7b3cdxiIAmaq6QGAouqDGKUpzYSjQm9nTERCtptCE2NBQ2fkAkgoXaKrHVWCkVBaUatTJ8+hmNJoY1707xYJPJzOz8//+Z2awC6JmKu3NhWBJO2ZRKJnRlKVjNshfeZcLTYJidOKmWVN90PK8TZrKUkGmoA6Xh6/k/S/keDMPq6GxcswntRcHpumoDtJ3QuF9Xg/fjnE0Y2qK2VXmzi9HMqdpMzHaUuBo0I1bTuV3ZpuCEFZ0wua+FcdV9Kz4MhhvdJeZ35VStpeKELptAJiw5xfuVIyyW5+k3mkuqeid+8kJrEJ6XhCdBWHApq7mBYOnIDIdcymkn1Jzmi+q/G0e9ZSII+MI0BPM3FggafJEXexkuq8r1WO7dw0AuXAmaY15I6sQCXHjDhk95mQnjH37xQh2YjG+DcFv95ubxvQSXUQ1CZ9ElaJZbcxZffeNHW+SiTbmgDk7H117YHwwfc8OzoFlwltUWqb9Oh0s57DWDTmjzwht14l4cCMKjILRvjtE80v94TYSzqvhLQw/izpJnJBjO5EKv02TFokH46YVFp3kcNFPnetR6ndB8xsZiQo1SuQyf+/h6TamN5voftF9gq3ijE5IAAAAASUVORK5CYII="},ca11:function(t,e,a){"use strict";a("8b58")},d2b2:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"header"},[e("h2",[e("router-link",{attrs:{to:{name:"FormTable",params:{type:"dateDetail"}}}},[e("span",{staticClass:"title_link flex_start"},[e("span",{staticClass:"flex_start"},[e("a-icon",{attrs:{type:"left"}})],1),t._v(" 表单详情 ")])])],1)]),e("div",{staticClass:"formDate_detail"},[e("a-card",{staticClass:"mb_16",attrs:{title:"表单信息"}},[e("div",{staticClass:"data_content flex_between"},[e("div",{staticClass:"left"},[e("p",{staticClass:"row"},[e("span",{staticClass:"row_name"},[t._v("预览：")]),e("span",[t._v(t._s(t.customerFormInfoVo.name))])]),e("div",{staticClass:"left form-info"},[e("p",{staticClass:"form-title"},[t._v(t._s(t.customerFormInfoVo.name))]),e("p",{staticClass:"flex_start link-cover"},[e("span",{staticClass:"link"},[t._v(t._s(t.customerFormInfoVo.describe))]),e("img",{staticClass:"cover",attrs:{src:t.customerFormInfoVo.cover,alt:""}})])])]),e("div",{staticClass:"center"},[e("div",{staticClass:"row flex_start"},[e("span",{staticClass:"row_name"},[t._v("表单名称：")]),e("span",[t._v(t._s(t.customerFormInfoVo.name))]),e("div",{staticClass:"form-status-box published"},[t._v(t._s(t.statusTxt(t.customerFormInfoVo.status)))])]),e("div",{staticClass:"row flex-row"},[e("span",{staticClass:"row_name"},[t._v("创建人：")]),e("div",{staticClass:"table-users"},[e("span",{staticClass:"ant-tag"},[e("span",{staticClass:"icon-wrap"},[e("a-icon",{staticClass:"people-color",attrs:{type:"user"}})],1),t._v(" "+t._s(t.customerFormInfoVo.creatorName)+" ")])])]),e("p",{staticClass:"row flex-row"},[e("span",{staticClass:"row_name"},[t._v("创建时间：")]),e("span",[t._v(t._s(t.customerFormInfoVo.createTime))])]),e("p",{staticClass:"row flex-row"},[e("span",{staticClass:"row_name"},[t._v("截止时间：")]),t.customerFormInfoVo.isForeverEffect?e("span",[t._v("永久有效")]):e("span",[t._v(t._s(t.customerFormInfoVo.endTime))])]),e("p",{staticClass:"row flex-row"},[e("span",{staticClass:"row_name"},[t._v("提交次数限制：")]),e("span",[t._v(t._s("1"==t.customerFormInfoVo.submitCountLimit?"仅限提交一次":"不限次数"))])])]),e("div",{staticClass:"right"},[e("div",{staticClass:"row"},[e("span",{staticClass:"row_name"},[t._v("客户标签：")])]),t.customerFormActionList.length>0?e("div",{staticClass:"tag-box"},t._l(t.customerFormActionList,(function(a,n){return e("div",{key:n},[e("p",{staticClass:"rule-idx"},[t._v("规则"+t._s(n+1)+"：")]),e("div",{staticClass:"rule-item"},[e("span",[t._v("为")]),e("span",{staticClass:"bold preview-event"},[t._v(t._s(a.actionTxt))]),e("span",[t._v("的客户，打上")]),t._l(a.tagNamesList,(function(a,n){return e("span",{key:n,staticClass:"tag-li"},[t._v(t._s(a))])})),e("span",[t._v("标签")]),t._v(" "),e("br"),a.scores?e("span",[t._v(" 并添加"),e("strong",[t._v(t._s(a.scores))]),t._v(" 分 ")]):t._e()],2)])})),0):e("div",{staticClass:"tag-box"},[e("a-empty")],1)])])]),e("a-card",{staticClass:"mb_16",attrs:{title:"数据总览"}},[e("div",{staticClass:"flex-row data_content"},[e("div",{staticClass:"left flex1"},[e("div",{staticClass:"flex-row bg-box mb_16"},[e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.todaySubmitCount))]),e("span",[t._v("今日提交次数")])]),e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"18px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})]),e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.todayClickPeopleCount))]),e("span",[t._v("今日点击人数")])]),e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"18px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})]),e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.todayWritePeopleCount))]),e("span",[t._v(" 今日填写人数 "),e("a-popover",{attrs:{placement:"top"}},[e("template",{slot:"content"},[e("p",[t._v("今日填写表单的人数，包括未提交的人数")]),e("p",[t._v("(当表单内容全为非必填项时，会出现未填")]),e("p",[t._v("写已提交的情况)")])]),e("a-icon",{attrs:{type:"question-circle"}})],2)],1)]),e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"18px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})]),e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.todaySubmitPeopleCount))]),e("span",[t._v("今日提交人数")])])]),e("div",{staticClass:"flex-row bg-box"},[e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.totalSubmitCount))]),e("span",[t._v("总提交次数")])]),e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"18px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})]),e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.totalClickPeopleCount))]),e("span",[t._v("总点击人数")])]),e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"18px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})]),e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.totalWritePeopleCount))]),e("span",[t._v("总填写人数")])]),e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"18px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})]),e("div",{staticClass:"w33 flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.customerFormInfoVo.totalSubmitPeopleCount))]),e("span",[t._v("总提交人数")])])])]),e("div",{staticClass:"right bg-box"},[e("div",{staticClass:"flex-col align-center mb_16"},[e("span",{staticClass:"data"},[t._v(t._s(t.getNums(t.customerFormInfoVo.writeRate))+"%")]),e("p",[e("span",[t._v(" 总填写率 "),e("a-popover",{attrs:{placement:"topRight"}},[e("template",{slot:"content"},[e("span",[t._v("总填写人数/总点击表单人数")])]),e("a-icon",{attrs:{type:"question-circle"}})],2)],1)])]),e("div",{staticClass:"flex-col align-center"},[e("span",{staticClass:"data"},[t._v(t._s(t.getNums(t.customerFormInfoVo.submitRate))+"%")]),e("p",[e("span",[t._v(" 总提交率 "),e("a-popover",{attrs:{placement:"topRight"}},[e("template",{slot:"content"},[e("span",[t._v("总提交人数/总点击表单人数")])]),e("a-icon",{attrs:{type:"question-circle"}})],2)],1)])])])])]),e("a-card",{staticClass:"mb_16"},[e("a-tabs",{attrs:{"default-active-key":"1"}},[e("a-tab-pane",{key:"1",attrs:{tab:"表单内容分析"}},[e("FormContentAnalysis",{attrs:{formId:t.formId}})],1),e("a-tab-pane",{key:"2",attrs:{tab:"客户数据详情"}},[e("CustomerDataDetails",{attrs:{formId:t.formId}})],1),e("a-tab-pane",{key:"3",attrs:{tab:"员工发送数据"}},[e("EmployeeSendingData",{attrs:{formId:t.formId}})],1)],1)],1)],1)])},i=[],r=(a("d3b7"),a("d81d"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"form_contentAnalysis"},[e("div",{staticClass:"no-submit-limit-info"},[e("span",{staticClass:"icon-wrap"},[e("a-icon",{attrs:{type:"bell"}})],1),e("span",{staticClass:"text"},[t._v(" 由于此表单不限提交次数，所以「表单内容分析」统计的是所有提交次数的分析哦～ ")])]),e("div",{staticClass:"title-info"},[t._v("表单详细信息")]),e("span",{staticClass:"label font-size-13 font-color-black-65"},[t._v("表单名称：")]),e("span",{staticClass:"bold-bold font-size-13 font-color-black-85"},[t._v(t._s(t.formInfo.name))]),e("div",{staticClass:"form-top-info"},[e("div",{staticClass:"bottom flex-row align-side"},[e("div",{staticClass:"info-box",staticStyle:{"margin-left":"60px"}},[e("div",{staticClass:"bold-bold",staticStyle:{"font-size":"24px"}},[t._v(t._s(t.getComponentVoList.length))]),e("div",{staticClass:"label"},[t._v("表单题数")])]),e("div",{staticClass:"divider"}),e("div",{staticClass:"info-box",staticStyle:{"margin-left":"60px"}},[e("div",{staticClass:"bold-bold",staticStyle:{"font-size":"24px"}},[t._v(t._s(t.inputNum))]),e("div",{staticClass:"label"},[t._v("填空题")])]),e("div",{staticClass:"divider"}),e("div",{staticClass:"info-box",staticStyle:{"margin-right":"50px"}},[e("div",{staticClass:"bold-bold",staticStyle:{"font-size":"24px"}},[t._v(t._s(t.selectNum))]),e("div",{staticClass:"label"},[t._v("选择题")])])])]),e("ul",[e("div",{staticClass:"flex_between title-info",staticStyle:{"margin-bottom":"0"}},[t._m(0),e("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.download}},[t._v("导出Excel")])],1),t._l(t.getComponentVoList,(function(a,n){return e("li",{key:n},[e("div",{staticClass:"form-content-analysis-box"},[e("div",{staticClass:"question-name-box flex-row align-left",staticStyle:{position:"relative"}},[t._v(" "+t._s(n+1)+"、"+t._s(a.customerFormComponent.title)+" "),e("div",{staticClass:"type flex-row"},[t._v(" "+t._s(t.getTypeText(a))+" "),t._m(1,!0),t._v(" "+t._s(1===a.customerFormComponent.isRequired?"必填项":"选填项")+" ")]),t.allCount(a)?e("span",{staticClass:"font-size-13 font-color-black-85",staticStyle:{position:"absolute",right:"23px"}},[t._v(" 共"+t._s(t.allCount(a))+"条数据 ")]):t._e()]),"select"===a.customerFormComponent.countType&&a.customerFormConfig.dataList&&a.customerFormConfig.dataList.length>0?e("div",{staticClass:"analysis-table"},[e("div",{staticClass:"left"},[t._m(2,!0),e("div",{staticClass:"table-body"},t._l(a.customerFormConfig.dataList,(function(n,i){return e("div",{key:i,staticClass:"options-box"},[e("div",{staticClass:"options"},[t._v(t._s(n.optionValue))]),e("section",{staticClass:"follow-up-event-fold-wrap text"},[e("div",{staticClass:"show-wrap",class:{open_active:t.isOpen}},[e("div",{staticClass:"follow-event"},[n.tagNames.split(",").length>1?e("div",{staticClass:"labels"},t._l(n.tagNames.split(","),(function(a,n){return e("div",{key:n,staticClass:"label-box"},[t._v(" "+t._s(a)+" ")])})),0):e("div",{staticStyle:{"margin-left":"30px"}},[t._v("-")])]),n.tagNames.split(",").length>1?e("span",{staticClass:"aks-tips event_expaned",on:{click:function(e){t.isOpen=!t.isOpen}}},[e("a-icon",{attrs:{type:t.isOpen?"down":"up"}})],1):t._e()])]),e("div",{staticClass:"count b-d-1"},[t._v(t._s(n.dataCount))]),e("div",{staticClass:"rate b-d-1"},[e("a-progress",{attrs:{percent:t.getPercent(a.customerFormConfig.dataList,n),status:"active"}})],1)])})),0)]),a.customerFormConfig.dataList&&a.customerFormConfig.dataList.length>0?e("div",{staticClass:"right-chart-box b-d-1"},[e("div",{staticClass:"chart-inner"},[t._m(3,!0),e("PieChart",{attrs:{chartId:"chartId".concat(n),dataList:a.customerFormConfig.dataList}})],1)]):t._e()]):t._e()])])}))],2)])}),o=[function(){var t=this,e=t._self._c;return e("div",[t._v(" 表单内容分析 "),e("span",{staticClass:"info font-size-13 font-color-black-65"},[t._v(" 1.比例数据全部相较于总提交人数 2.只展示选项，下拉框内容的分析 ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"divider",staticStyle:{"padding-top":"0px","padding-bottom":"0px",height:"18px"}},[e("span",{staticClass:"ant-divider ant-divider-vertical"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-header flex-row"},[e("div",{staticClass:"options"},[t._v("选项")]),e("div",{staticClass:"label"},[t._v("标签")]),e("div",{staticClass:"count"},[t._v("数据")]),e("div",{staticClass:"rate"},[t._v("比例")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-title flex-row align-left"},[e("span",{staticClass:"title-text"},[t._v("饼状图")])])}],s=(a("4de4"),a("8f19")),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"PieChart"},[e("div",{staticStyle:{height:"135px"},attrs:{id:t.chartId}})])},u=[],l=a("3eba");a("c037"),a("007d");var d={name:"PieChart",props:{chartId:{type:String,default:"oneId"},dataList:{type:Array,default:[]}},components:{},data:function(){return{option:{tooltip:{trigger:"item"},series:[{type:"pie",radius:["40%","70%"],label:{normal:{show:!0,formatter:"{d}% ",textStyle:{color:"#000"}}},labelLine:{show:!0},data:[]}]}}},mounted:function(){this.chartInit()},methods:{chartInit:function(){var t;null!=t&&""!=t&&void 0!=t&&t.dispose(),t=l.init(document.getElementById(this.chartId)),this.option.series[0].data=this.dataList.map((function(t){return{name:t.optionValue,value:t.percent}})),t.setOption(this.option,!0)}}},f=d,m=a("2877"),p=Object(m["a"])(f,c,u,!1,null,"43e8f654",null),v=p.exports,g=a("ca00"),h={name:"FormContentAnalysis",components:{PieChart:v},props:{formId:{type:String,default:""}},data:function(){return{isOpen:!0,dataObj:{componentVoList:[]},typeText:[{text:"填空题",id:"input"},{text:"下拉框",id:"select"},{text:"单选题",id:"select"},{text:"多选题",id:"select"}],asideLeftData:[],formInfo:{}}},computed:{selectNum:function(){var t;return null===(t=this.getComponentVoList)||void 0===t?void 0:t.filter((function(t){return"select"===t.customerFormComponent.countType})).length},inputNum:function(){return this.getComponentVoList.length-this.selectNum},getComponentVoList:function(){var t,e=this;return null===(t=this.dataObj.componentVoList)||void 0===t?void 0:t.filter((function(t,a){var n,i;return!(null!==(n=e.asideLeftData)&&void 0!==n&&null!==(i=n[a])&&void 0!==i&&i.exhibition)}))}},created:function(){this.getAnalysis()},activated:function(){this.getAnalysis()},methods:{getTypeText:function(t){return"input"===t.customerFormComponent.countType?this.typeText[0].text:"multiSelect"===t.customerFormComponent.componentId?this.typeText[3].text:"single"===t.customerFormComponent.componentId?this.typeText[2].text:"select"===t.customerFormComponent.countType?this.typeText[1].text:"填空题"},getAnalysis:function(){var t=this,e=this.formId;this.loading=!0,Object(s["a"])({formId:e}).then((function(e){null!==e&&void 0!==e&&e.data&&(t.asideLeftData=JSON.parse(e.data.form.asideLeftData).componentVoList,t.formInfo=e.data.form||{},t.dataObj=e.data)})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))},allCount:function(t){var e=0;return t.customerFormConfig.dataList&&(e=t.customerFormConfig.dataList.reduce((function(t,e){return t+e.dataCount}),0)),e},download:function(){var t=this;Object(s["b"])({formId:this.formId}).then((function(t){Object(g["e"])(t,".xlsx","自定义表单内容分析")})).catch((function(e){t.$message.error(e)}))},getPercent:function(t,e){if(t.length>0&&e){var a=t.reduce((function(t,e){return t+e.dataCount}),0),n=e.dataCount/a*100;return e.percent=n,n}}}},b=h,y=(a("ff7c"),Object(m["a"])(b,r,o,!1,null,"a3a77caa",null)),_=y.exports,C=(a("b680"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"customerDataDetails"},[e("div",{staticClass:"flex_between"},[e("a-space",[e("a-button",{attrs:{type:2===t.active?"primary":""},on:{click:function(e){return t.onChange(2)}}},[t._v("已提交")]),e("a-button",{attrs:{type:1===t.active?"primary":""},on:{click:function(e){return t.onChange(1)}}},[t._v("已填写未提交")]),e("a-button",{attrs:{type:0===t.active?"primary":""},on:{click:function(e){return t.onChange(0)}}},[t._v("已进入未填写")])],1),e("div",[e("a-button",{attrs:{type:"primary",ghost:""},on:{click:function(e){return t.makeTag("add")}}},[t._v("批量打标签")]),e("a-dropdown",[e("a-button",{staticClass:"ml-10",attrs:{type:"primary",ghost:""}},[t._v("导出Excel")]),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.download("all")}}},[t._v("全部")])],1),e("a-menu-item",[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.download("customerData")}}},[t._v("客户数据")])],1),e("a-menu-item",[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.download("formData")}}},[t._v("表单内容")])],1)],1)],1)],1)],1),e("div",{staticClass:"filter-panel flex_around"},[e("div",{staticClass:"search-customer-wrap panel"},[e("span",{staticClass:"filter-title"},[t._v("搜索客户：")]),e("div",{staticClass:"search-box"},[e("a-input-search",{attrs:{placeholder:"请输入要搜索的客户"},on:{search:t.onSearchName},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)]),e("div",{staticClass:"search-customer-wrap panel"},[e("span",{staticClass:"filter-title"},[t._v("表单内容：")]),e("div",{staticClass:"search-box"},[e("a-cascader",{attrs:{options:t.options,placeholder:"请选择表单内容后进行筛选"},on:{change:t.changeContant},model:{value:t.selectedOptions,callback:function(e){t.selectedOptions=e},expression:"selectedOptions"}})],1)]),e("div",{staticClass:"search-customer-wrap panel"},[e("span",{staticClass:"filter-title"},[t._v("地区筛选：")]),e("div",{staticClass:"search-box"},[e("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择表单选项内容进行筛选",allowClear:""},on:{change:t.changeCity},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,(function(a){return e("a-select-option",{key:a,attrs:{value:a}},[t._v(" "+t._s(a)+" ")])})),1)],1)]),e("div",{staticClass:"search-customer-wrap panel"},[e("span",{staticClass:"filter-title"},[t._v("时间筛选：")]),e("div",{staticClass:"search-box"},[e("a-range-picker",{on:{change:t.changeDate},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}})],1)]),e("div",{staticClass:"panel_btn"},[e("a-button",{on:{click:t.Reset}},[t._v("重置")])],1)]),e("a-table",{attrs:{columns:t.columns,pagination:t.pagination,"data-source":t.data,"row-selection":t.rowSelection},on:{change:t.change},scopedSlots:t._u([{key:"avatar",fn:function(a){return e("span",{},[e("a-avatar",{attrs:{size:28,shape:"square",src:a.thumbAvatar}}),t._v(" "+t._s(a.name)+" ")],1)}},{key:"staffObj",fn:function(a){return e("div",{},[e("div",[e("a-tag",[e("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(a.staffName)+" ")],1),"0"==a.customerStatus?e("a-popover",{attrs:{placement:"top"}},[e("template",{slot:"content"},[e("span",[t._v("["+t._s(a.customer)+"]未添加企业员工为好友，还不是企业客户")])]),e("a-icon",{attrs:{type:"question-circle"}})],2):t._e(),"1"==a.customerStatus?e("a-popover",{attrs:{placement:"top"}},[e("template",{slot:"content"},[e("span",[t._v(t._s(a.customerDesc))]),e("a",{on:{click:function(e){return t.lookDetail(a)}}},[t._v("查看详情")])]),e("a-icon",{attrs:{type:"question-circle"}})],2):t._e()],1)])}},{key:"tags",fn:function(a){return e("div",{},[a.length>0?e("div",[t._l(a,(function(a,n){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen||n<2,expression:"isOpen || index < 2"}],key:a,staticClass:"mb-5"},[e("a-tag",[t._v(t._s(a))])],1)})),a.length>2?e("div",[e("a-space",{attrs:{size:12}},[a.length>2?e("span",{staticClass:"aks-tips pointer",on:{click:function(e){t.isOpen=!t.isOpen}}},[t._v(" "+t._s(t.isOpen?"收起":"展开")+" "),e("a-icon",{attrs:{type:t.isOpen?"up":"down"}})],1):t._e()])],1):t._e()],2):e("div",[t._v("-")])])}},{key:"lastWriteSeconds",fn:function(a){return e("div",{},[t._v(t._s((a/1e3).toFixed(0)||1)+"s")])}},{key:"score",fn:function(n){return e("div",{},[e("a-tag",{attrs:{color:"blue"}},[e("img",{attrs:{src:a("c7f6"),alt:""}}),t._v(" "+t._s(n)+" ")])],1)}},{key:"operation",fn:function(a){return e("div",{},[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookContant(a)}}},[t._v("查看表单内容")])],1)}}])}),e("a-modal",{attrs:{footer:null,width:"599px",centered:"",destroyOnClose:""},model:{value:t.visibleMakeTag,callback:function(e){t.visibleMakeTag=e},expression:"visibleMakeTag"}},[e("MakeTags",{attrs:{status:t.status,spinning:t.spinning,selectedRows:t.selectedRowKeys},on:{cancle:function(e){t.visibleMakeTag=!1},serviceOk:t.serviceOk}})],1),e("a-modal",{attrs:{footer:null,centered:"",destroyOnClose:""},model:{value:t.visibleForm,callback:function(e){t.visibleForm=e},expression:"visibleForm"}},[e("FormContant",{attrs:{formId:t.formId,operation:t.operation}})],1)],1)}),x=[],I=a("5530"),w=a("2f62"),L=a("b321"),k=function(){var t=this,e=t._self._c;return e("div",[e("h2",{staticClass:"dialog-title"},[t._v("查看表单内容")]),e("ul",t._l(t.dataList,(function(a,n){return e("li",{key:a.dataId,staticClass:"list"},[e("p",{staticClass:"time"},[t._v(t._s(a.createTime))]),e("div",{staticClass:"list-contant"},[e("span",{staticClass:"title"},[t._v("第"+t._s(n+1)+"次提交表单")]),e("span",[t._v("填写所用时间: "+t._s(t._f("getTime")(a.writeSeconds))+"s")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.lookForm(a)}}},[t._v("查看")])],1)])})),0),t.isShowPhone?e("PhonePreviewData",{attrs:{customerForm:t.customerForm},on:{cancle:function(e){t.isShowPhone=!1}}}):t._e()],1)},T=[],O=(a("7db0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"phone-wrap"},[e("div",{staticClass:"contant-wrap"},[e("p",{staticStyle:{"text-align":"right"}},[e("a-icon",{staticClass:"close-circle",attrs:{type:"close-circle"},on:{click:function(e){return t.$emit("cancle")}}})],1),e("img",{staticClass:"bg",attrs:{src:"/imgs/chatBg.png"}}),e("WebHtmlData",{staticClass:"box-contant",attrs:{customerForm:t.customerForm}})],1)])}),S=[],F=function(){var t=this,e=t._self._c;return e("div",{ref:"formWrap",staticClass:"form-wrap"},[0===t.activeIndex?[t.getFormSet.children[0].isChecked?e("div",{staticClass:"form-img"},[e("img",{attrs:{src:t.getFormSet.children[0].value.compress},on:{error:t.errorImg}})]):t._e(),e("div",{staticClass:"form-name"},[e("a-input",{attrs:{placeholder:"请输入表单名称",size:"large"},model:{value:t.getFormSet.children[1].value,callback:function(e){t.$set(t.getFormSet.children[1],"value",e)},expression:"getFormSet.children[1].value"}})],1),t.getFormSet.children[2].isChecked?e("div",{staticClass:"form-describe"},[e("a-textarea",{attrs:{placeholder:"请输入表单说明",autoSize:{minRows:4,maxRows:4}},model:{value:t.getFormSet.children[2].value,callback:function(e){t.$set(t.getFormSet.children[2],"value",e)},expression:"getFormSet.children[2].value"}})],1):t._e()]:t._e(),e("ul",{staticClass:"background-white"},[t._l(t.getComponentVoList,(function(a,n){return e("li",{key:"".concat(a.id+n),staticClass:"list-data",class:t.isShowBorder(a,"cross",n)},[e("div",{staticClass:"list-data-contant",class:t.isShowBorder(a,"cross",n)},[e("div",[a.hideTitle?t._e():e("p",{staticClass:"title"},[t.isRequire(a,"verify")?e("span",{staticClass:"require"},[t._v("*")]):t._e(),t._v(" "+t._s("".concat(a.index+1))+" "+t._s(t.getTitle(a,"title"))+" ")]),"input"===a.type?e("div",[a.exhibition?e("p",{staticStyle:{"text-align":"center"}},[t._v(t._s(a.children[0].value))]):e("a-input",{attrs:{placeholder:a.children[0].value},model:{value:a.data.value,callback:function(e){t.$set(a.data,"value",e)},expression:"item.data.value"}})],1):t._e(),"paging"===a.type?e("div",{staticClass:"paging"},[e("p",[t._v("第"+t._s(a.index+1)+"页/共"+t._s(t.customerForm.pageSize)+"页")])]):t._e(),"image-text"===a.type?e("div",{staticClass:"exhibition"},[e("a-input",{attrs:{placeholder:a.children[0].value}}),e("div",{staticClass:"form-img"},[e("img",{attrs:{src:a.children[1].value.compress},on:{error:t.errorImg}})])],1):t._e(),"slideshow"===a.type?e("div",[a.children[1].value.length>0?e("a-carousel",{attrs:{autoplay:"",autoplaySpeed:a.children[0].value}},t._l(a.children[1].value,(function(a,n){return e("div",{key:n},[e("img",{attrs:{src:a.thumbUrl},on:{error:t.errorImg}})])})),0):e("div",{staticClass:"form-img"},[e("img",{attrs:{src:""},on:{error:t.errorImg}})])],1):t._e(),"one_picture"===a.type?e("div",["1"===a.children[0].value?e("div",{staticClass:"form-img"},[e("img",{attrs:{src:a.children[1].value.compress},on:{error:t.errorImg}})]):t._e(),"2"===a.children[0].value?e("div",[e("UploadImg",{attrs:{text:a.children[2].value,formInfo:a}})],1):t._e()]):t._e(),"textarea"===a.type?e("div",[e("a-textarea",{attrs:{placeholder:a.children[1].tips,autoSize:{minRows:4,maxRows:4}},model:{value:a.data.value,callback:function(e){t.$set(a.data,"value",e)},expression:"item.data.value"}})],1):t._e(),"select"===a.type?e("div",[e("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:a.children[1].value},model:{value:a.data.value,callback:function(e){t.$set(a.data,"value",e)},expression:"item.data.value"}},t._l(t.getSelect(a,"option"),(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.value}},[t._v(" "+t._s(a.value)+" ")])})),1)],1):t._e(),"cascade3"===a.type?e("div",["birthday"===a.id?e("div",{on:{click:function(e){t.showDate=!0}}},[e("div",{staticClass:"solid-bar exhibition"},t._l(t.getAddress(a.children),(function(a,n){return e("a-select",{key:n,staticClass:"solid-children",attrs:{placeholder:"address.title"},model:{value:a.value,callback:function(e){t.$set(a,"value",e)},expression:"address.value"}},[e("a-select-option",{key:a.title,attrs:{value:a.title}},[t._v(" "+t._s(a.title)+" ")])],1)})),1)]):e("div",{staticClass:"solid-bar"},t._l(t.getAddress(a.children),(function(n,i){return e("a-select",{key:i,staticClass:"solid-children",attrs:{placeholder:n.title},on:{select:t.select,focus:function(e){return t.focusAddress(i)},change:function(e){t.changeAddress(n,i,t.getAddress(a.children))}},model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"address.value"}},t._l(t.addressList[i],(function(a){return e("a-select-option",{key:a.name,attrs:{value:a.code}},[t._v(" "+t._s(a.name)+" ")])})),1)})),1),"address"===a.id?e("a-textarea",{staticClass:"address-textarea",attrs:{placeholder:a.children[3].value,autoSize:{minRows:4,maxRows:4}},model:{value:a.data.street,callback:function(e){t.$set(a.data,"street",e)},expression:"item.data.street"}}):t._e()],1):t._e(),"sex"===a.id?e("div",[e("div",{staticClass:"solid-bar"},[e("a-radio-group",{model:{value:a.data.value,callback:function(e){t.$set(a.data,"value",e)},expression:"item.data.value"}},t._l(a.option,(function(n){return e("a-radio",{key:n.id,style:t.getRadioStyle(a,"arrangement"),attrs:{value:n.text}},[t._v(" "+t._s(n.text)+" ")])})),1)],1)]):t._e(),"radio"===a.type?e("div",[e("div",{staticClass:"solid-bar"},[e("a-radio-group",{model:{value:a.data.value,callback:function(e){t.$set(a.data,"value",e)},expression:"item.data.value"}},t._l(a.children[1].list,(function(n){return e("a-radio",{key:n.id,style:t.getRadioStyle(a,"arrangement"),attrs:{value:n.value}},[n.baseImg.compress?e("a-avatar",{attrs:{src:n.baseImg.compress,size:22,shape:"square"}}):t._e(),t._v(" "+t._s(n.value)+" ")],1)})),1)],1)]):t._e(),"checkbox"===a.type?e("div",[e("div",{staticClass:"solid-bar"},[e("a-checkbox-group",{model:{value:a.data.value,callback:function(e){t.$set(a.data,"value",e)},expression:"item.data.value"}},t._l(a.children[1].list,(function(a){return e("div",{key:a.id,staticStyle:{"line-height":"30px"}},[e("a-checkbox",{key:a.id,attrs:{value:a.value}},[a.baseImg.compress?e("a-avatar",{attrs:{src:a.baseImg.compress,size:22,shape:"square"}}):t._e(),t._v(" "+t._s(a.value)+" ")],1),e("br")],1)})),0)],1)]):t._e()])])])})),e("a-button",{staticClass:"foot-bottom",attrs:{type:"primary",block:"",size:"large"}},[t._v(t._s(t.getFormSet.children[3].value))])],2)],2)},j=[],D=a("2909"),E=(a("99af"),a("c740"),a("fb6a"),function(){var t=this,e=t._self._c;return e("a-upload",{attrs:{"list-type":"picture-card","file-list":t.formInfo.data.value,accept:t.accept,customRequest:t.customRequest},on:{preview:t.handlePreview,change:t.handleChange}},[e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.text))])],1),e("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:function(e){t.previewVisible=!1}}},[e("img",{staticStyle:{width:"100%"},attrs:{src:t.previewImage}})])],1)}),N=[],A=a("c7eb"),V=a("1da1"),P={name:"UploadImg",components:{},props:{formInfo:{type:Object,default:function(){return{}}},text:{type:String,default:""}},data:function(){return{accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",previewImage:"",previewVisible:!1}},methods:{customRequest:function(t){t.onSuccess()},handlePreview:function(t){var e=this;return Object(V["a"])(Object(A["a"])().mark((function a(){return Object(A["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.url||t.preview){a.next=4;break}return a.next=3,e.getBase64(t.originFileObj);case 3:t.preview=a.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleChange:function(t){var e=this,a=t.fileList,n=a.slice(-this.formInfo.maxLength);setTimeout((function(){e.formInfo.data.value=n.map((function(t){return Object(I["a"])(Object(I["a"])({},t),{},{status:"done"})}))}),0)},getBase64:function(t){return new Promise((function(e,a){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return a(t)}}))}}},R=P,G=Object(m["a"])(R,E,N,!1,null,"12fbecc4",null),$=G.exports,B=a("c1df"),z=a.n(B),q={name:"WebHtml",components:{UploadImg:$},props:{customerForm:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:function(){return!1}}},computed:{getFormSet:function(){var t,e;return null===(t=this.customerForm)||void 0===t||null===(e=t.asideRightData)||void 0===e?void 0:e.find((function(t){return"formSet"===t.id}))},getComponentVoList:function(){return this.customerForm.componentVoList},getBirthday:function(){return this.customerForm.componentVoList.find((function(t){return"birthday"===t.id}))}},watch:{customerForm:{handler:function(){this.$emit("changeEdit"),this.$forceUpdate()},deep:!0}},data:function(){return{minDate:new Date(1990,1,1),maxDate:new Date,accept:".bmp,.jpg,.jpeg,.png,.tif,.gif,.pcx,.tga,.exif,.fpx,.svg,.psd,.cdr,.pcd,.dxf,.ufo,.eps,.ai,.raw,.WMF,.webp",activite:"",activeIndex:0,provinceCode:"",cityCode:"",currentDate:new Date,addressList:[[],[],[]],showDate:!1,index:-1}},methods:{changeDate:function(t){this.showDate=!1,this.getBirthday.children[0].value=z()(t).format("YYYY")+"年",this.getBirthday.children[1].value=z()(t).format("MM")+"月",this.getBirthday.children[2].value=z()(t).format("DD")+"日",this.getBirthday.data.value=z()(t).format("YYYY-MM-DD")},select:function(t,e){var a=this.customerForm.componentVoList.find((function(t){return"address"===t.id}));a.children[this.index].name=e.data.key},changeAddress:function(t,e,a){0===e&&(this.provinceCode=t.value,this.cityCode="",a[1].value=void 0,a[2].value=void 0),1===e&&(this.cityCode=t.value,a[2].value=void 0),this.index=e},focusAddress:function(t){var e;0!==t&&(1!==t||this.provinceCode?2!==t||this.cityCode?(null===(e=this.addressList[t])||void 0===e?void 0:e.length)<1&&this.getAreaInfo():this.$message.warning("请先选择城市"):this.$message.warning("请先选择省份"))},getAreaInfo:function(){var t=this,e={provinceCode:this.provinceCode,cityCode:this.cityCode};customerFormAreaInfo(e).then((function(e){t.provinceCode||(t.addressList[0]=e.data),t.provinceCode&&!t.cityCode&&(t.addressList[1]=e.data),t.provinceCode&&t.cityCode&&(t.addressList[2]=e.data),t.$forceUpdate()})).catch((function(e){t.$message.error(e)}))},submit:function(){var t=this;this.verify(this.getComponentVoList).then((function(e){t.$emit("submit","submit")})).catch((function(e){t.$message.warning(e)}))},verify:function(t){return new Promise((function(e,a){for(var n=0;n<t.length;n++){var i=t[n];i.exhibition||("address"===i.id?(i.data.street||a("详细地址没有填写"),i.children[2].value||a("没有选择地址"),i.data.value="".concat(i.children[0].name,"-").concat(i.children[1].name,"-").concat(i.children[2].name,"-").concat(i.data.street)):i.data.value||0===i.data.value||a("".concat(i.title,"没有填写")))}e()}))},disposeList:function(t){var e=t.findIndex((function(t){return"paging"===t.type})),a=[];if(e>=0){a.push(t.slice(0,e+1));var n=t.slice(e+1).findIndex((function(t){return"paging"===t.type}));n>=0?a.push.apply(a,Object(D["a"])(this.disposeList(t.slice(e+1)))):a.push(t.slice(e+1))}else a.push(t);return a},turningPage:function(t){var e=this;"prev"===t?(this.activeIndex--,this.$refs.formWrap.scrollTop=0):this.verify(this.getComponentVoList).then((function(t){e.activeIndex++,e.$refs.formWrap.scrollTop=0})).catch((function(t){e.$message.warning(t)}))},isShowBorder:function(t,e,a){var n,i,r=null===(n=t.children)||void 0===n?void 0:n.find((function(t){return t.id===e})),o=[];null!==r&&void 0!==r&&r.list[0].isChecked&&o.push(null===r||void 0===r||null===(i=r.list[0])||void 0===i?void 0:i.value);return a===this.activite&&o.push("active"),o},isRequire:function(t,e){var a,n,i=null===(a=t.children)||void 0===a?void 0:a.find((function(t){return t.id===e}));return!(null!==i&&void 0!==i&&null!==(n=i.list[0])&&void 0!==n&&n.isChecked)},getAddress:function(t){return t.filter((function(t){return"input"===t.type}))},getRadioStyle:function(t,e){var a,n=null===(a=t.children)||void 0===a?void 0:a.find((function(t){return t.id===e})),i={marginRight:0,height:"30px",lineHeight:"30px"};return i.width="".concat(100/n.value,"%"),i},getSelect:function(t,e){var a,n=null===(a=t.children)||void 0===a?void 0:a.find((function(t){return t.id===e}));return null===n||void 0===n?void 0:n.list},getTitle:function(t,e){var a,n=null===(a=t.children)||void 0===a?void 0:a.find((function(t){return t.id===e}));return(null===n||void 0===n?void 0:n.value)||t.title},errorImg:function(t){t.target.src="/imgs/formTable/empty-img.png"}}},M=q,W=(a("4990"),Object(m["a"])(M,F,j,!1,null,"6911625b",null)),U=W.exports,J=a("658f5"),Y=a.n(J),K={name:"PhonePreviewData",components:{WebHtmlData:U,vueQr:Y.a},props:{customerForm:{type:Object,default:function(){return{}}},qrCode:{type:String,default:""}},data:function(){return{}},methods:{}},H=K,Q=(a("7a1a"),Object(m["a"])(H,O,S,!1,null,"06e00567",null)),Z=Q.exports,X={name:"FormContant",components:{PhonePreviewData:Z},props:{operation:{type:Object,default:function(){return{}}},formId:{type:String,default:""}},filters:{getTime:function(t){return(t/1e3).toFixed(0)}},data:function(){return{dataList:[],customerForm:{},isShowPhone:!1}},created:function(){this.init()},methods:{init:function(){var t=this,e={formId:this.formId,status:this.operation.status,openId:this.operation.openId,staffExtId:this.operation.staffExtId};Object(s["o"])(e).then((function(e){t.dataList=e.data})).catch((function(e){t.$message.error(e)}))},lookForm:function(t){if(t.asideLeftData){this.customerForm=JSON.parse(t.asideLeftData);var e=this.customerForm.componentVoList.find((function(t){return"address"===t.id}));if(e){var a=e.data.value.split("-");e.children[0].value=a[0],e.children[1].value=a[1],e.children[2].value=a[2]}this.isShowPhone=!0}else this.$message.error("这个数据没有表单")}}},tt=X,et=(a("8df2"),Object(m["a"])(tt,k,T,!1,null,"3162b24e",null)),at=et.exports,nt={name:"CustomerDataDetails",props:{formId:{type:String,default:""}},components:{MakeTags:L["a"],FormContant:at},data:function(){return{options:[],visibleForm:!1,componentVoList:[],selectedRowKeys:[],selectedRows:[],cityList:[],selectedOptions:void 0,spinning:!1,visibleMakeTag:!1,active:2,startOrEndTime:[],pagination:{current:1,pageSize:10,total:0},columns:[],columns1:[{title:"全部客户",key:"avatar",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"客户类型",dataIndex:"customerTxt",key:"customerTxt"},{title:"提交时间",dataIndex:"submitTime",key:"submitTime"},{title:"来源",dataIndex:"source",key:"source"},{title:"城市",dataIndex:"userCity",key:"userCity"},{title:"所属员工",dataIndex:"staffObj",key:"staffObj",scopedSlots:{customRender:"staffObj"}},{title:"标签",dataIndex:"tags",key:"tags",scopedSlots:{customRender:"tags"}},{title:"客户评分",dataIndex:"customerScores",key:"customerScores",scopedSlots:{customRender:"customerScores"}},{title:"用户行为",dataIndex:"behavior",key:"behavior"},{title:"最近填写时长",dataIndex:"lastWriteSeconds",key:"lastWriteSeconds",scopedSlots:{customRender:"lastWriteSeconds"}},{title:"提交次数",key:"totalSubmitCount",dataIndex:"totalSubmitCount"},{title:"操作",key:"operation",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],columns2:[{title:"全部客户",key:"avatar",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"客户类型",dataIndex:"customerTxt",key:"customerTxt"},{title:"提交时间",dataIndex:"submitTime",key:"submitTime"},{title:"来源",dataIndex:"source",key:"source"},{title:"城市",dataIndex:"userCity",key:"userCity"},{title:"所属员工",dataIndex:"staffObj",key:"staffObj",scopedSlots:{customRender:"staffObj"}},{title:"标签",dataIndex:"tags",key:"tags",scopedSlots:{customRender:"tags"}},{title:"客户评分",dataIndex:"customerScores",key:"customerScores",scopedSlots:{customRender:"customerScores"}},{title:"用户行为",dataIndex:"behavior",key:"behavior"},{title:"最近填写时长",dataIndex:"lastWriteSeconds",key:"lastWriteSeconds",scopedSlots:{customRender:"lastWriteSeconds"}},{title:"提交次数",key:"totalSubmitCount",dataIndex:"totalSubmitCount"}],operation:{},data:[],isOpen:!1,startTime:void 0,endTime:void 0,city:void 0,keyword:void 0,status:2}},activated:function(){this.getInfoList(),this.columns=this.columns1,this.getInfoCityList()},created:function(){this.getInfoCityList(),this.columns=this.columns1,this.getInfoList()},computed:Object(w["c"])({rowSelection:function(){var t=this;return{onChange:function(e,a){t.selectedRows=a,t.selectedRowKeys=e}}}}),mounted:function(){},methods:{lookContant:function(t){this.operation=t,this.visibleForm=!0},changeContant:function(t,e){this.selectedOptions=t,this.getInfoList()},changeCity:function(){this.getInfoList()},batchTaggingFront:function(){return s["c"]},serviceOk:function(t){var e=this,a={formId:this.formId,tagsReqList:this.selectedRows.map((function(t){return{openId:t.openId,customerId:t.externalUserExtId}})),tagIds:t.map((function(t){return t.tagId}))};this.spinning=!0;var n="add"===this.status?this.batchTaggingFront():this.batchDelTagFront();n(a).then((function(t){e.getInfoList(),e.$message.success("批量".concat("add"===e.status?"打":"移除","标签成功")),e.visibleMakeTag=!1})).catch((function(t){e.$message.error(t)})).finally((function(){e.spinning=!1}))},makeTag:function(t){this.selectedRows.length>0?(this.status=t,this.visibleMakeTag=!0):this.$message.error("请选择客户")},getInfoCityList:function(){var t=this;Object(s["m"])({formId:this.formId}).then((function(e){t.cityList=e.data})).catch((function(e){t.$message.error(e)})),Object(s["p"])({formId:this.formId}).then((function(e){t.componentVoList=e.data.componentVoList,t.options=e.data.componentVoList.map((function(t){var e,a,n;return null!==(e=t.customerFormConfig)&&void 0!==e&&e.option&&(t.customerFormConfig.option=JSON.parse(t.customerFormConfig.option)),{value:t.customerFormConfig.configId,label:t.customerFormComponent.title,children:null===(a=t.customerFormConfig)||void 0===a||null===(n=a.option)||void 0===n?void 0:n.map((function(t){return{value:t.value,label:t.value}}))}}))})).catch((function(e){t.$message.error(e)}))},download:function(t){var e=this;Object(s["k"])({formId:this.formId,type:t,status:this.status}).then((function(t){Object(g["e"])(t,".xlsx","自定义表单内容分析")})).catch((function(t){e.$message.error(t)}))},Reset:function(){this.keyword=void 0,this.startTime=void 0,this.endTime=void 0,this.city=void 0,this.selectedOptions=void 0,this.startOrEndTime=[],this.pagination.current=1,this.getInfoList()},onSearchName:function(){this.pagination.current=1,this.getInfoList()},lookDetail:function(t){this.$router.push({name:"CustomerDetail",query:{customerId:t.customerId,staffId:t.staffId}})},getInfoList:function(){var t,e,a=this,n={startTime:this.startTime,endTime:this.endTime,optionValue:null===(t=this.selectedOptions)||void 0===t?void 0:t[1],configId:null===(e=this.selectedOptions)||void 0===e?void 0:e[0],status:this.status,city:this.city,keyword:this.keyword,formId:this.formId,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};1===this.pagination.current&&(this.data=[]),Object(s["n"])(n).then((function(t){var e;null!==t&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.list&&a.disposeClientList(null===t||void 0===t?void 0:t.data.list),a.pagination.total=t.data.total})).catch((function(t){a.$message.error(t)})).finally((function(){return a.loading=!1}))},disposeClientList:function(t){this.data=t.map((function(t,e){return t.avatar={name:t.wxNickName,thumbAvatar:t.wxAvatar},"0"==t.customerStatus?t.customerTxt="未添加企业员工":t.customerTxt="企业客户",t.tagNames?t.tags=t.tagNames.split("、"):t.tags=[],"0"==t.status?t.behavior="进入表单页面":"1"==t.status?t.behavior="填写表单":"2"==t.status&&(t.behavior="提交表单"),t.staffObj=Object(I["a"])(Object(I["a"])({},t),{},{customer:t.wxNickName,staffName:t.staffName,customerId:t.externalUserExtId,staffId:t.staffExtId,customerStatus:t.customerStatus}),t.key=t.openId,Object.assign({operation:t},t)}))},change:function(t){var e=t.current;this.pagination.current=e,this.getInfoList()},onChange:function(t){this.columns=2===t?this.columns1:this.columns2,this.active=t,this.pagination.current=1,this.status=t,this.getInfoList()},changeDate:function(t,e){this.startTime=t[0],this.endTime=t[1],this.pagination.current=1,this.getInfoList()}}},it=nt,rt=(a("ca11"),Object(m["a"])(it,C,x,!1,null,"5760e73e",null)),ot=rt.exports,st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"employeeSendingData"},[e("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:t.pagination},on:{change:t.change},scopedSlots:t._u([{key:"avatar",fn:function(a){return e("div",{},[e("a-avatar",{attrs:{size:28,shape:"square",src:a.thumbAvatar}}),t._v(" "+t._s(a.name)+" ")],1)}}])})],1)},ct=[],ut={name:"EmployeeSendingData",components:{},props:{formId:{type:String,default:""}},data:function(){return{columns:[{title:"已发送员工",key:"avatar",dataIndex:"avatar",scopedSlots:{customRender:"avatar"}},{title:"点击人数",dataIndex:"totalClickPeopleCount",key:"totalClickPeopleCount"},{title:"总填写人数",dataIndex:"totalWritePeopleCount",key:"totalWritePeopleCount"},{title:"总提交人数",key:"totalSubmitCount",dataIndex:"totalSubmitCount"}],data:[],pagination:{current:1,pageSize:10,total:0}}},activated:function(){this.getStaffList()},created:function(){this.getStaffList()},mounted:function(){},methods:{getStaffList:function(){var t=this,e={formId:this.formId,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};Object(s["q"])(e).then((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.list&&(t.data=e.data.list.map((function(t,e){return t.key=e,t.avatar={name:t.staffName,thumbAvatar:t.staffPic},t})))})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))},change:function(t){var e=t.current;this.pagination.current=e,this.getStaffList()}}},lt=ut,dt=Object(m["a"])(lt,st,ct,!1,null,"41327637",null),ft=dt.exports,mt=a("da92"),pt={name:"FormDateDetail",components:{FormContentAnalysis:_,CustomerDataDetails:ot,EmployeeSendingData:ft},data:function(){return{loading:!1,customerFormActionList:[],customerFormInfoVo:{}}},computed:{formId:function(){return this.$route.query.formId}},activated:function(){this.getDataInfo()},methods:{getNums:function(t){if(void 0!==t)return mt["a"].times(t,100)},statusTxt:function(t){return"0"==t?"未发布":"1"==t?"已发布":"2"==t?"已截止":void 0},getDataInfo:function(){var t=this;this.loading=!0,Object(s["j"])({formId:this.formId}).then((function(e){if(null!==e&&void 0!==e&&e.data){t.customerFormInfoVo=e.data.customerFormInfoVo||{};var a=e.data.customerFormActionList||[];t.customerFormActionList=a.map((function(t){return"0"==t.action?t.actionTxt="进入表单页面":"1"==t.action?t.actionTxt="填写表单":t.actionTxt="提交表单",t.tagNames?t.tagNamesList=t.tagNames.split(","):t.tagNamesList=[],t}))}})).catch((function(e){t.$message.error(e)})).finally((function(){return t.loading=!1}))}}},vt=pt,gt=(a("6d58"),Object(m["a"])(vt,n,i,!1,null,"5e011e0c",null));e["default"]=gt.exports},d302:function(t,e,a){"use strict";a("67be")},da92:function(t,e,a){"use strict";function n(t,e){return void 0===e&&(e=15),+parseFloat(Number(t).toPrecision(e))}function i(t){var e=t.toString().split(/[eE]/),a=(e[0].split(".")[1]||"").length-+(e[1]||0);return a>0?a:0}function r(t){if(-1===t.toString().indexOf("e"))return Number(t.toString().replace(".",""));var e=i(t);return e>0?n(Number(t)*Math.pow(10,e)):Number(t)}function o(t){m&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function s(t){return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var n=e[0],i=e.slice(1);return i.reduce((function(e,a){return t(e,a)}),n)}}var c=s((function(t,e){var a=r(t),n=r(e),s=i(t)+i(e),c=a*n;return o(c),c/Math.pow(10,s)})),u=s((function(t,e){var a=Math.pow(10,Math.max(i(t),i(e)));return(c(t,a)+c(e,a))/a})),l=s((function(t,e){var a=Math.pow(10,Math.max(i(t),i(e)));return(c(t,a)-c(e,a))/a})),d=s((function(t,e){var a=r(t),s=r(e);return o(a),o(s),c(a/s,n(Math.pow(10,i(e)-i(t))))}));function f(t,e){var a=Math.pow(10,e),n=d(Math.round(Math.abs(c(t,a))),a);return t<0&&0!==n&&(n=c(n,-1)),n}var m=!0;function p(t){void 0===t&&(t=!0),m=t}var v={strip:n,plus:u,minus:l,times:c,divide:d,round:f,digitLength:i,float2Fixed:r,enableBoundaryChecking:p};e["a"]=v},e1ae:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",["look"!==t.state?e("header",[e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.visibleTree=!0}}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" "+t._s(t.title)+" ")],1),t.tip?e("span",{staticClass:"font-color-black-25 tips"},[t._v(t._s(t.tip))]):t._e()],1):t._e(),e("ul",t._l(t.selectList,(function(a,n){return e("a-tag",{key:a.key,attrs:{closable:"look"!==t.state},on:{close:function(e){return t.closeTag(n)}}},[a.source.thumbAvatar?e("a-avatar",{attrs:{size:26,src:a.source.thumbAvatar,shape:"square"}}):e("a-avatar",{attrs:{size:26,icon:a.icon,shape:"square"}}),t._v(" "+t._s(a.title)+" ")],1)})),1),e("a-modal",{attrs:{footer:null,centered:"",width:"680px",destroyOnClose:""},model:{value:t.visibleTree,callback:function(e){t.visibleTree=e},expression:"visibleTree"}},[e("AddTransfer",{attrs:{selectRoleIdList:t.selectRoleIdList,title:t.title,type:t.type,selectList:t.selectList},on:{serviceOk:t.serviceOk,cancle:function(e){t.visibleTree=!1}}})],1)],1)},i=[],r=(a("d81d"),a("a434"),a("1eb1")),o={name:"AddContent",props:{value:{type:[Array],default:function(){return[]}},state:{type:[String],default:""},selectRoleIdList:{type:[Array,String],default:function(){return""}},type:{type:[String],default:"wxDepartmentId"},title:{type:[String],default:"添加成员"},tip:{type:[String],default:""},dataList:{type:[Array],default:function(){return[]}}},components:{AddTransfer:r["a"]},data:function(){return{visibleTree:!1,selectList:[]}},watch:{selectList:function(){this.$emit("selectPerson",this.selectList),this.$emit("input",this.selectList)},dataList:{handler:function(){this.selectList=this.dataList},immediate:!0}},methods:{serviceOk:function(t){var e=t.map((function(t){return t.value=100,t}));this.selectList=e,this.visibleTree=!1},closeTag:function(t){this.selectList.splice(t,1)}}},s=o,c=(a("1531"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"53952032",null);e["a"]=u.exports},e97f:function(t,e,a){},fad4:function(t,e,a){},ff7c:function(t,e,a){"use strict";a("fad4")}}]);