(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a4f90b0","chunk-7239b5fa"],{"157e":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("07ac"),core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_values_js__WEBPACK_IMPORTED_MODULE_3__),_api_missionTreasure__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("da00"),clipboard__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b311"),clipboard__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(clipboard__WEBPACK_IMPORTED_MODULE_5__),_utils_dateformat__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1bee"),_utils_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ca00");__webpack_exports__["a"]={data:function(){return{qrDict:{},qrCodeUrl:"/imgs/qrCode.png",delectIds:"",delText:"",delvisible:!1,SearchData:"",pagination:{current:1,pageSize:10,total:0},columns:[{title:"活动名称",dataIndex:"activeName",key:"activeName",width:200},{title:"使用成员",dataIndex:"staffName",key:"staffName",scopedSlots:{customRender:"staffName"},width:200},{title:"活动客户标签",dataIndex:"tags",key:"tags",scopedSlots:{customRender:"tags"},width:220},{title:"任务达成标签",dataIndex:"task",key:"task",scopedSlots:{customRender:"task"}},{title:"扫码添加人数",dataIndex:"addPeople",key:"addPeople",width:190},{title:"创建时间",dataIndex:"address",key:"address",width:220},{title:"活动状态",dataIndex:"activeState",key:"activeState",width:220,scopedSlots:{customRender:"activeState"}},{title:"操作",dataIndex:"operation",key:"operation",align:"right",width:220,scopedSlots:{customRender:"operation"}}],ListData:[],visible:!1}},computed:{usingList:function(){return function(t){var e,n=null===t||void 0===t||null===(e=t.split("。/。"))||void 0===e?void 0:e.filter((function(t){if(t)return t}));return n}}},props:{onSearchData:{type:String,default:""}},watch:{onSearchData:function(){this.SearchData=this.onSearchData,this.init()}},created:function(){this.init()},methods:{changeTab:function(t){this.$emit("changeTabData",t)},openMore:function(t){var e=t.currentTarget.previousElementSibling;e.className.indexOf("mheight")>-1?(t.currentTarget.firstElementChild.innerText="收起",e.classList.remove("mheight")):(t.currentTarget.firstElementChild.innerText="展开",e.classList.add("mheight"))},init:function init(){var _this2=this,param={page:this.pagination.current,limit:this.pagination.pageSize,searchCtx:this.SearchData};Object(_api_missionTreasure__WEBPACK_IMPORTED_MODULE_4__["c"])(param).then((function(res){var _res$data,_res$data$list,_res$data2;_this2.ListData=null===res||void 0===res||null===(_res$data=res.data)||void 0===_res$data||null===(_res$data$list=_res$data.list)||void 0===_res$data$list?void 0:_res$data$list.map((function(item){var timestamp=Date.parse(new Date),nowData=Object(_utils_dateformat__WEBPACK_IMPORTED_MODULE_6__["a"])(timestamp);item.endTime>nowData?item.activeState=!0:item.activeState=!1,item.address=item.createTime,item.addPeople=item.scanCodeNum,item.key=item.id;var tagsList=[];if(null!==item&&void 0!==item&&item.customerLabel){var jsonData=JSON.parse(null===item||void 0===item?void 0:item.customerLabel),ListObj=Object.values(jsonData);tagsList.push.apply(tagsList,ListObj)}item.tags=tagsList;var taskConfList=[];if(null!==item&&void 0!==item&&item.taskConf){var jsonDataList=eval((null===item||void 0===item?void 0:item.taskConf)||"[]");null===jsonDataList||void 0===jsonDataList||jsonDataList.map((function(t){var e;return null===t||void 0===t||null===(e=t.label)||void 0===e||e.map((function(t){return taskConfList.push(null===t||void 0===t?void 0:t.value),t})),t}))}return item.tags=tagsList,item.task=taskConfList,item})),_this2.pagination.total=null===res||void 0===res||null===(_res$data2=res.data)||void 0===_res$data2?void 0:_res$data2.totalCount})).catch((function(t){_this2.$message.warning(t)})).finally((function(){_this2.activityLoading=!1}))},download:function(t){var e=this;Object(_utils_util__WEBPACK_IMPORTED_MODULE_7__["d"])(t).catch((function(t){e.$message.error(t)}))},detailsData:function(t){var e=this;this.visible=!0,Object(_api_missionTreasure__WEBPACK_IMPORTED_MODULE_4__["b"])(null===t||void 0===t?void 0:t.id).then((function(t){var n,a,i,r,s=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data,o=[];if(null!==s&&void 0!==s&&s.customerLabel){var c=JSON.parse(null===s||void 0===s?void 0:s.customerLabel),l=Object.values(c);o.push.apply(o,l)}var u=Date.parse(new Date),d=Object(_utils_dateformat__WEBPACK_IMPORTED_MODULE_6__["a"])(u);s.endTime>d?s.activeState=!0:s.activeState=!1,s.tags=o,s.userList=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.userList,s.serviceStaffList=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.serviceStaffList,e.qrCodeUrl=null===(r=JSON.parse((null===s||void 0===s?void 0:s.qrCode)||"{}"))||void 0===r?void 0:r.qr_code,e.qrDict=s})).catch((function(t){e.$message.warning(t)})).finally((function(){}))},handleTableChange:function(t){this.pagination.current=null===t||void 0===t?void 0:t.current,this.init()},handleOk:function(){this.visible=!1},handleCancel:function(){this.visible=!1},delectIdsData:function(t){this.delectIds=t.id,this.delText=t.activeName,this.delvisible=!0},delhandleOk:function(){var t=this;this.delvisible=!1;var e={ids:this.delectIds};Object(_api_missionTreasure__WEBPACK_IMPORTED_MODULE_4__["a"])(e).then((function(e){t.$message.success("删除成功"),t.init()})).catch((function(e){t.$message.warning(e)})).finally((function(){}))},copy:function(){var t=this,e=new clipboard__WEBPACK_IMPORTED_MODULE_5___default.a("#copy1");e.on("success",(function(n){t.$message.success("复制成功"),e.destroy()})),e.on("error",(function(n){t.$message.error("该浏览器不支持自动复制"),e.destroy()}))}}}},"1bee":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return r}));n("a9e3"),n("ac1f"),n("5319"),n("4d63"),n("25f0");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD hh:mm:ss",n=e,a=new Date(Number(t)),i={"M+":a.getMonth()+1,"D+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),"S+":a.getMilliseconds()};for(var r in/(y+)/i.test(n)&&(n=n.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return n}function i(t){var e=parseInt(t/3600)<10?"0"+parseInt(t/3600):parseInt(t/3600),n=parseInt(t%3600/60)<10?"0"+parseInt(t%3600/60):parseInt(t%3600/60);return e+":"+n}function r(t,e){var n=Date.parse(new Date),a=s(n,t),i=new Date(a),r=i.getTime(),o=s(n,e),c=new Date(o),l=c.getTime();return"start"?r>=l:l<=r}function s(t,e){var n=new Date(t),a=n.getFullYear()+"-",i=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",r=n.getDate()+" ";n.getHours(),n.getMinutes(),n.getSeconds();return a+i+r+e+":00"}},"1c9c":function(t,e,n){"use strict";n.d(e,"s",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"t",(function(){return o})),n.d(e,"j",(function(){return c})),n.d(e,"n",(function(){return l})),n.d(e,"y",(function(){return u})),n.d(e,"w",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"B",(function(){return p})),n.d(e,"c",(function(){return h})),n.d(e,"h",(function(){return m})),n.d(e,"a",(function(){return v})),n.d(e,"q",(function(){return g})),n.d(e,"i",(function(){return _})),n.d(e,"v",(function(){return y})),n.d(e,"p",(function(){return b})),n.d(e,"b",(function(){return w})),n.d(e,"l",(function(){return x})),n.d(e,"m",(function(){return O})),n.d(e,"z",(function(){return k})),n.d(e,"C",(function(){return S})),n.d(e,"k",(function(){return C})),n.d(e,"A",(function(){return D})),n.d(e,"x",(function(){return L})),n.d(e,"r",(function(){return I})),n.d(e,"o",(function(){return j})),n.d(e,"d",(function(){return E})),n.d(e,"f",(function(){return T})),n.d(e,"u",(function(){return A}));var a=n("b775"),i={staff:"/enterprise/role/staff",roleList:"/enterprise/role",roleResource:"/enterprise/role/getRoleResource",syncAll:"/enterprise/staff/syncAll",getCustGrpList:"/client_group/customerGroup/getCustGrpList",changeRole:"/enterprise/role/change",departmentStaff:"/enterprise/department/staff",addStaffRole:"/enterprise/role/addStaffRole",getQuitStaff:"/client_manager/transfer/getQuitStaff",getStaff:"/enterprise/staff/get",department:"/enterprise/department",getDepartmentStaff:"/enterprise/department/getStaff",loginAdmin:"/enterprise/staff/loginAdmin",getRoleRes:"/enterprise/role/getRoleRes",changeRes:"/enterprise/role/change/res",getPermissionLog:"/enterprise/permissionLog/query",staffInfo:"/enterprise/staff/statistics/get/staffInfo",yesterdayData:"/enterprise/staff/statistics/get/yesterdayData",getDate:"/enterprise/staff/statistics/get/date",editDelConfig:"/client_manager/customerdelremind/editDelConfig",queryDelConfig:"/client_manager/customerdelremind/queryDelConfig",customStage:"/enterprise/staff/statistics/get/stage",idOrUserIdGet:"/enterprise/staff/idOrUserIdGet",staffOKR:"/enterprise/staffOKR/staffOKR",saveOKR:"/enterprise/staffOKR/save",getStaffOKRList:"/enterprise/staffOKR/getStaffOKRList",getRepeatList:"/enterprise/staffOKR/getRepeatList",checkTime:"enterprise/staffOKR/checkTime",delOkr:"/enterprise/staffOKR/del",modify:"/enterprise/staffOKR/modify"};function r(t){return Object(a["b"])({url:i.idOrUserIdGet,method:"get",params:t})}function s(t){return Object(a["b"])({url:i.customStage,method:"get",params:t})}function o(t){return Object(a["b"])({url:i.loginAdmin,method:"get",params:t})}function c(t){return Object(a["b"])({url:i.getCustGrpList,method:"post",data:t})}function l(t){return Object(a["b"])({url:i.getQuitStaff,method:"get",params:t})}function u(t){return Object(a["b"])({url:i.staff,method:"get",params:t})}function d(){return Object(a["b"])({url:i.roleList,method:"get"})}function f(){return Object(a["b"])({url:i.department,method:"get"})}function p(){return Object(a["b"])({url:i.syncAll,method:"get"})}function h(t){return Object(a["b"])({url:i.changeRole,method:"get",params:t})}function m(){return Object(a["b"])({url:i.departmentStaff,method:"get"})}function v(t){return Object(a["b"])({url:i.addStaffRole,method:"post",data:t})}function g(t){return Object(a["b"])({url:i.getStaff,method:"get",params:t})}function _(t){return Object(a["b"])({url:i.editDelConfig,method:"post",data:t})}function y(t){return Object(a["b"])({url:i.queryDelConfig,method:"post",data:t})}function b(t){return Object(a["b"])({url:i.getRoleRes,method:"get",params:t})}function w(t){return Object(a["b"])({url:i.changeRes,method:"post",data:t})}function x(t){return Object(a["b"])({url:i.getDepartmentStaff,method:"get",params:t})}function O(t){return Object(a["b"])({url:i.getPermissionLog,method:"post",data:t})}function k(t){return Object(a["b"])({url:i.staffInfo,method:"get",params:t})}function S(t){return Object(a["b"])({url:i.yesterdayData,method:"get",params:t})}function C(t){return Object(a["b"])({url:i.getDate,method:"get",params:t})}function D(t){return Object(a["b"])({url:i.staffOKR,method:"get",params:t})}function L(t){return Object(a["b"])({url:i.saveOKR,method:"post",data:t})}function I(t){return Object(a["b"])({url:i.getStaffOKRList,method:"get",params:t})}function j(t){return Object(a["b"])({url:i.getRepeatList,method:"get",params:t})}function E(t){return Object(a["b"])({url:i.checkTime,method:"get",params:t})}function T(t){return Object(a["b"])({url:i.delOkr,method:"post",data:t})}function A(t){return Object(a["b"])({url:i.modify,method:"post",data:t})}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7");function a(t,e,n,a,i,r,s){try{var o=t[r](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){a(s,i,r,o,c,"next",t)}function c(t){a(s,i,r,o,c,"throw",t)}o(void 0)}))}}},"22b7":function(t,e,n){},"27d16":function(t,e,n){"use strict";n("2f49")},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n("6b75");function i(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=n("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||r(t)||Object(s["a"])(t)||o()}},"2d2b":function(t,e,n){"use strict";n("22b7")},"2f49":function(t,e,n){},"443d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("a-tabs",{attrs:{"active-key":t.$route.meta.seletedTab},on:{change:t.changeTab}},t._l(t.tabsList,(function(n){return e("a-tab-pane",{key:n.id,attrs:{tab:n.text}},[e(n.component,{tag:"component",on:{changeTabData:t.changeTabData}})],1)})),1)],1)},i=[],r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{padding:"0 15px"}},[e("a-row",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"flex",justify:"space-between"}},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){t.visible=!0}}},[t._v("新建活动")]),e("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"搜索活动名称",allowClear:""},model:{value:t.onSearchData,callback:function(e){t.onSearchData=e},expression:"onSearchData"}})],1),e("div",{staticStyle:{"background-color":"#fff",padding:"16px 16px 10px"}},[e("a-button",{attrs:{type:1===t.clickModel?"primary":""},on:{click:function(e){t.clickModel=1}}},[t._v("企微裂变")]),e("a-button",{attrs:{type:2===t.clickModel?"primary":"",disabled:""},on:{click:function(e){t.clickModel=2}}},[t._v("企微+公众号裂变")])],1),e("span",{directives:[{name:"show",rawName:"v-show",value:1===t.clickModel,expression:"clickModel === 1"}]},[e("TableData",{attrs:{onSearchData:t.onSearchData},on:{changeTabData:t.changeTab}})],1),e("a-modal",{attrs:{visible:t.visible,footer:null,width:"800px",destroyOnClose:""},on:{cancel:function(e){t.visible=!1}}},[e("h2",{staticStyle:{"align-items":"center","justify-content":"center",display:"flex","font-size":"17px","font-weight":"600"}},[t._v(" 新建活动 ")]),e("div",{staticStyle:{"background-color":"#f7fcff","font-size":"14px",color:"#000"}},[e("a-icon",{staticStyle:{color:"#1890ff","margin-right":"6px"},attrs:{type:"bell"}}),e("span",[t._v("请选择一种裂变方式创建活动")])],1),e("section",{staticStyle:{"max-height":"510px",overflow:"auto"}},[e("img",{class:[1===t.tabsKey?"active":"tagkeyword"],staticStyle:{cursor:"pointer",margin:"11px 0px"},attrs:{src:"/imgs/qw.png"},on:{click:t.qw}}),e("a-divider",{staticStyle:{height:"270px",margin:"0 20px"},attrs:{type:"vertical"}}),e("img",{class:[2===t.tabsKey?"active":"tagkeyword"],staticStyle:{cursor:"pointer",margin:"11px 0px"},attrs:{src:"/imgs/gzh.png"},on:{click:t.gzh}}),e("a-button",{staticStyle:{width:"368px","margin-right":"10px"},attrs:{type:1===t.tabsKey?"primary":""},on:{click:t.qw}},[t._v("企业微信裂变")]),e("a-button",{staticStyle:{width:"368px"},attrs:{type:2===t.tabsKey?"primary":""},on:{click:t.gzh}},[t._v("企业微信+公众号同时裂变")]),e("img",{directives:[{name:"show",rawName:"v-show",value:1===t.tabsKey,expression:"tabsKey === 1"}],staticStyle:{width:"100%"},attrs:{src:"/imgs/qwXQ.png"}}),e("img",{directives:[{name:"show",rawName:"v-show",value:2===t.tabsKey,expression:"tabsKey === 2"}],staticStyle:{width:"100%"},attrs:{src:"/imgs/gzhXQ.png"}})],1),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"24px"}},[e("a-button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary",disabled:2===t.tabsKey},on:{click:function(e){return t.$router.push({name:"newActivity",query:{state:"added"}})}}},[t._v("确定")])],1)])],1)},s=[],o=(n("b0c0"),function(){var t=this,e=t._self._c;return e("div",[e("a-table",{staticStyle:{"background-color":"#fff"},attrs:{columns:t.columns,"data-source":t.ListData,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"staffName",fn:function(n,a){return e("span",{},t._l(t.usingList(a.staffName),(function(n,a){return e("a-tag",{key:a,staticStyle:{"font-size":"13px","margin-right":"5px","margin-bottom":"5px"}},[e("span",{staticStyle:{color:"#7da3d1"}},[e("a-icon",{attrs:{type:"user"}})],1),t._v(" "+t._s(n)+" ")])})),1)}},{key:"tags",fn:function(n,a){return e("span",{},[a.tags.length>0&&Array.isArray(a.tags)?e("div",{class:[{mheight:a.tags.length>=4}]},t._l(a.tags,(function(n,a){return e("a-tag",{key:a,staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(n)+" ")])})),1):e("div",[t._v("-")]),a.tags.length>=4&&Array.isArray(a.tags)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"task",fn:function(n,a){return e("span",{},[a.task.length>0&&Array.isArray(a.task)?e("div",{class:[{mheight:a.task.length>=4}]},t._l(a.task,(function(n,a){return e("a-tag",{key:a,staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(n)+" ")])})),1):e("div",[t._v("-")]),a.task.length>=4&&Array.isArray(a.task)?e("div",{staticClass:"clickable",on:{click:function(e){return t.openMore(e)}}},[e("span",[t._v("展开")])]):t._e()])}},{key:"activeState",fn:function(n,a){return e("span",{},[a.activeState?e("span",[t._v("进行中")]):e("span",[t._v("已结束")])])}},{key:"operation",fn:function(n,a){return e("span",{},[e("a",{attrs:{disabled:!a.activeState},on:{click:function(e){return t.$router.push({name:"newActivity",query:{state:"invitation",sopId:a.id}})}}},[t._v("邀请")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(e){return t.detailsData(a)}}},[t._v("详情")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(e){return t.changeTab(a.id)}}},[t._v("数据")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-dropdown",{attrs:{trigger:["click"]}},[e("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[t._v("编辑"),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",{key:"0",attrs:{disabled:!a.activeState}},[e("a",{attrs:{disabled:!a.activeState},on:{click:function(e){return t.$router.push({name:"newActivity",query:{state:"edit",sopId:a.id}})}}},[t._v("修改")])]),e("a-menu-item",{key:"1"},[e("a",{on:{click:function(e){return t.delectIdsData(a)}}},[t._v("删除")])])],1)],1)],1)}}])}),e("a-modal",{staticStyle:{padding:"32px"},attrs:{visible:t.visible,footer:null,width:"688px",destroyOnClose:""},on:{ok:t.handleOk,cancel:function(e){t.visible=!1}}},[e("h2",{staticStyle:{"align-items":"center","justify-content":"center",display:"flex","font-size":"17px","font-weight":"600"}},[t._v(" 活动详情 ")]),e("section",[e("a-row",{attrs:{type:"flex"}},[e("a-col",{staticClass:"detail-left"},[e("img",{staticStyle:{width:"133px",height:"133px","margin-bottom":"16px"},attrs:{src:t.qrCodeUrl}}),e("p",[t._v(t._s(t.qrDict.activeName))]),e("a-button",{staticStyle:{width:"100%","margin-bottom":"12px"},attrs:{type:"primary"},on:{click:function(e){return t.download(t.qrCodeUrl)}}},[t._v("下载活码")]),e("a-button",{staticStyle:{width:"100%"},attrs:{disabled:!t.qrDict.activeState},on:{click:function(e){return t.$router.push({name:"newActivity",query:{state:"edit",sopId:t.qrDict.id}})}}},[t._v("修改")])],1),e("a-col",{staticClass:"detail-right",staticStyle:{"max-height":"400px",overflow:"auto"}},[e("a-form",{attrs:{"label-col":{span:5}}},[e("a-form-item",{attrs:{label:"邀请链接"}},[e("p",{staticClass:"link-box"},[e("span",{staticClass:"col-1",attrs:{id:"copy_text"}},[t._v(t._s(t.qrCodeUrl))]),e("a-button",{attrs:{type:"link","data-clipboard-target":"#copy_text",id:"copy1"},on:{click:function(e){return t.copy()}}},[t._v(" 复制 ")])],1),e("div",{staticClass:"tip"},[t._v("提示：因企业微信限制，如果客户修改了微信昵称，可能无法通过邀请链接参与活动")])]),e("a-form-item",{attrs:{label:"活动时间"}},[e("span",{staticClass:"date"},[t._v(t._s(t.qrDict.createTime)+" - "+t._s(t.qrDict.endTime))])]),e("a-form-item",{attrs:{label:"匹配客户方式"}},[e("div",{staticClass:"col-1"},[t._v("客户昵称匹配")])]),e("a-form-item",{attrs:{label:"领奖方式"}},[e("div",{staticClass:"col-1"},[t._v("领奖客服")])]),e("a-form-item",{attrs:{label:"领奖客服"}},[e("ul",{staticClass:"owner-list"},t._l(t.qrDict.serviceStaffList,(function(n,a){return e("li",{key:a,staticClass:"owner"},[e("a-avatar",{attrs:{src:n.avatar,size:25,shape:"square"}}),t._v(" "+t._s(n.name)+" ")],1)})),0)]),e("a-form-item",{attrs:{label:"使用成员"}},[e("ul",{staticClass:"owner-list"},t._l(t.qrDict.userList,(function(n,a){return e("li",{key:a,staticClass:"owner"},[e("a-avatar",{attrs:{src:n.avatar,size:25,shape:"square"}}),t._v(" "+t._s(n.name)+" ")],1)})),0)]),void 0!==t.qrDict.tags&&t.qrDict.tags.length>0?e("a-form-item",{attrs:{label:"客户标签"}},t._l(t.qrDict.tags,(function(n,a){return e("a-tag",{key:a,staticStyle:{"margin-bottom":"5px"}},[t._v(" "+t._s(n)+" ")])})),1):e("a-form-item",{attrs:{label:"客户标签"}},[t._v("-")]),e("a-form-item",{attrs:{label:"欢迎语1"}},[e("span",[t._v(t._s(t.qrDict.wecome))])]),e("a-form-item",{attrs:{label:"欢迎语链接"}},[e("div",{staticClass:"welcome-link"},[e("p",{staticClass:"bold title"},[t._v(t._s(t.qrDict.urlTitle))]),e("div",{staticClass:"flex-row"},[e("span",{staticClass:"col-1"},[t._v(t._s(t.qrDict.urlText))]),e("img",{attrs:{src:t.qrDict.urlPath}})])])])],1)],1)],1)],1)]),e("a-modal",{attrs:{visible:t.delvisible,footer:null,width:"416px",destroyOnClose:""},on:{ok:t.handleOk,cancel:function(e){t.delvisible=!1}}},[e("h2",{staticStyle:{"font-size":"17px","font-weight":"600"}},[t._v("提示")]),e("section",{staticStyle:{"max-height":"510px",overflow:"auto"}},[e("div",[t._v("确定删除 "+t._s(t.delText)+" 吗？删除后不可恢复")])]),e("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"24px"}},[e("a-button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){t.delvisible=!1}}},[t._v("取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.delhandleOk}},[t._v("确定")])],1)])],1)}),c=[],l=n("157e"),u=l["a"],d=(n("27d16"),n("2877")),f=Object(d["a"])(u,o,c,!1,null,"1fa2051c",null),p=f.exports,h={name:"TaskList",data:function(){return{visible:!1,tabsKey:1,clickModel:1,onSearchData:""}},methods:{qw:function(){this.tabsKey=1},gzh:function(){this.tabsKey=2},changeTab:function(t){this.$emit("changeTabData",t)}},components:{TableData:p}},m=h,v=(n("c487"),Object(d["a"])(m,r,s,!1,null,"6bca8f08",null)),g=v.exports,_=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{padding:"0 15px"}},[e("div",[e("a-row",{attrs:{type:"flex",justify:"space-between"}},[e("span",{staticClass:"tab"},[t._v("企微裂变")]),e("span",{staticStyle:{display:"flex","align-items":"center"}},[t._v(" 当前活动："),e("DataSelect",{attrs:{defaultSelectList:t.defaultSelectList},on:{selectCustom:t.changeActiveList}}),e("span",{class:null==t.isActive?"hidden":t.isActive?"pending":"close"},[t._v(" "+t._s(t.isActive?"活动进行中":"活动已结束")+" ")])],1)]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"box-title"},[t._v("活动实时数据")]),e("div",{staticClass:"dashboard"},[e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.customerTotal||0))]),e("p",[t._v(" 参与客户总数 "),e("a-tooltip",{attrs:{title:"添加企业微信客服和点击链接生成专属海报的客户总和数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.loseCustomer||0))]),e("p",[t._v(" 流失客户总数 "),e("a-tooltip",{attrs:{title:"参加的活动的客户中，流失掉的全部客户数（包括新老客户）"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.customer||0))]),e("p",[t._v(" 净增客户总数 "),e("a-tooltip",{attrs:{title:"参与客户总数-流失客户数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.todayAddCustomer||0))]),e("p",[t._v(" 今日新增客户数 "),e("a-tooltip",{attrs:{title:"今日参加活动的客户数，是指全部客户数，不单指新客户数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])]),e("div",{staticClass:"dashboard-box"},[e("div",{staticClass:"dashboard"},[e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.newCustomer||0))]),e("p",[t._v(" 参与新客户数 "),e("a-tooltip",{attrs:{title:" 扫码的新客户，是指客户新添加任何一个员工，这样算是新客户"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.newCustomerLose||0))]),e("p",[t._v(" 新增客户流失数 "),e("a-tooltip",{attrs:{title:"扫码的新客户数中，流失的新客户数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.addCustomer||0))]),e("p",[t._v(" 净增新客户数 "),e("a-tooltip",{attrs:{title:"参与新客户数-新增客户流失数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])]),e("div",{staticClass:"dashboard"},[e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.fissionRatio||"0.00")+"%")]),e("p",[t._v(" 裂变率 "),e("a-tooltip",{attrs:{title:"裂变率=（参与客户总数-一级客户）/参数客户总数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"item"},[e("span",[t._v(t._s(t.justInTimeData.saveRatio||"0.00")+"%")]),e("p",[t._v(" 留存率 "),e("a-tooltip",{attrs:{title:"留存率=（参与客户总数-流失客户总数）/参与客户总数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)])])]),e("a-divider",{staticClass:"bottom-line"}),e("div",{staticClass:"box-title"},[t._v("活动阶梯数据")]),e("div",{staticStyle:{"max-height":"550px","overflow-y":"auto"}},t._l(t.ladderData,(function(n,a){return e("div",{key:a,staticStyle:{"margin-top":"18px"}},[e("a-table",{attrs:{columns:t.columns,"data-source":n,bordered:"",pagination:!1},scopedSlots:t._u([{key:"name",fn:function(n){return[e("a",[t._v(t._s(n))])]}}],null,!0)})],1)})),0),e("a-divider",{staticClass:"bottom-line"}),e("div",{staticClass:"box-title"},[t._v("客户裂变数据")]),e("div",{staticStyle:{"margin-top":"18px",display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{staticStyle:{width:"40%","margin-right":"90px","margin-bottom":"0"}},[e("a-table",{attrs:{columns:t.columnsFission,"data-source":t.fissionData,bordered:"",pagination:!1},scopedSlots:t._u([{key:"name",fn:function(n){return[e("a",[t._v(t._s(n))])]}}])})],1),e("div",{style:{height:"248px",position:"relative",userSelect:"none",width:"calc(60% - 90px)"},attrs:{id:"myFissionChart"}})]),e("a-divider",{staticClass:"bottom-line"}),e("div",{staticClass:"box-title"},[t._v("客户数据")]),e("div",{staticStyle:{"margin-top":"20px"}},[e("span",{staticStyle:{"font-size":"14px"}},[t._v("共"+t._s(t.customerNum)+"个客户")]),e("a-divider",{attrs:{type:"vertical"}}),e("span",{staticStyle:{cursor:"pointer"},on:{click:t.searchCustomInfo}},[e("a-icon",{attrs:{type:"sync"}}),t._v(" 更新数据 ")],1)],1),e("div",{staticStyle:{"margin-top":"16px",display:"flex","justify-content":"space-between"}},[e("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[e("span",{staticClass:"input-box"},[t._v(" 搜索客户："),e("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"搜索客户名称"},on:{pressEnter:t.searchCustomInfo},model:{value:t.customerSearchVal,callback:function(e){t.customerSearchVal=e},expression:"customerSearchVal"}})],1),e("span",{staticClass:"input-box",staticStyle:{display:"flex",height:"32px","align-items":"center"}},[t._v(" 所属成员："),e("SelectMultiple",{ref:"mychild",attrs:{reactflag:t.reactflag},on:{selectCustom:t.selectCustom}})],1),e("span",{staticClass:"input-box"},[t._v(" 添加时间："),e("a-range-picker",{staticStyle:{width:"220px"},on:{change:t.searchCustomInfo},model:{value:t.startOrEndTime,callback:function(e){t.startOrEndTime=e},expression:"startOrEndTime"}},[e("a-icon",{attrs:{slot:"suffixIcon",type:"calendar"},slot:"suffixIcon"})],1)],1),e("span",{staticClass:"input-box"},[t._v(" 完成情况： "),e("a-select",{staticStyle:{width:"120px"},style:{width:"200px"},attrs:{"allow-clear":null!=t.customerFinish,placeholder:"请选择"},on:{change:t.handleFinishChange},model:{value:t.customerFinish,callback:function(e){t.customerFinish=e},expression:"customerFinish"}},[e("a-select-option",{attrs:{value:"1"}},[t._v(" 已完成 ")]),e("a-select-option",{attrs:{value:"0"}},[t._v(" 未完成 ")])],1)],1),e("span",{staticClass:"input-box"},[t._v(" 流失状态："),e("a-select",{staticStyle:{width:"120px"},style:{width:"200px"},attrs:{"allow-clear":null!=t.customerLoseState,placeholder:"请选择流失状态"},on:{change:t.handleLoseChange},model:{value:t.customerLoseState,callback:function(e){t.customerLoseState=e},expression:"customerLoseState"}},[e("a-select-option",{attrs:{value:"1"}},[t._v(" 已流失 ")]),e("a-select-option",{attrs:{value:"0"}},[t._v(" 未流失 ")])],1)],1)]),e("a-button",{attrs:{type:t.isReset?"primary":""},on:{click:t.resetCustomerSearch}},[t._v("重置")])],1),e("div",{staticStyle:{"margin-top":"18px"}},[e("a-table",{attrs:{columns:t.columnsCustomer,"data-source":t.customerData,pagination:!1},scopedSlots:t._u([{key:"userName",fn:function(n,a){return e("span",{},[e("a-avatar",{attrs:{size:32,shape:"square",src:a.avatar}}),t._v(" "+t._s(n)+" ")],1)}},{key:"staffName",fn:function(n,a){return e("span",{},t._l(t.usingList(a.staffName),(function(n,a){return e("a-tag",{key:a,staticStyle:{"font-size":"13px","margin-right":"5px","margin-bottom":"5px"}},[e("span",{staticStyle:{color:"#7da3d1"}},[e("a-icon",{attrs:{type:"user"}})],1),t._v(" "+t._s(n)+" ")])})),1)}},{key:"source",fn:function(n,a){return e("span",{},[e("a-avatar",{attrs:{size:32,shape:"square",src:a.source?a.source.avatar:""}}),t._v(" "+t._s(a.source?a.source.userName:"")+" ")],1)}},{key:"loseStatus",fn:function(n){return e("span",{style:{color:n?"red":"green"}},[t._v(" "+t._s(n?"已流失":"未流失")+" ")])}},{key:"taskFinish",fn:function(n){return e("span",{},[t._v(" "+t._s(n?"已完成":"未完成")+" ")])}},{key:"operation",fn:function(n,a){return e("span",{},[e("a",{on:{click:function(e){return t.showCustomerDetail(a.userID,a.staffId)}}},[t._v("客户详情")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{on:{click:function(e){return t.showInvitationDetail(a.userID)}}},[t._v("邀请详情")])],1)}}])})],1),e("div",[e("a-modal",{attrs:{footer:"",width:"653px"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("h2",{staticClass:"dialog-title"},[t._v(" 邀请详情 ")]),e("div",{staticClass:"dialog-dashboard"},[e("div",{staticClass:"item"},[e("h2",[t._v(t._s(t.invitationTotal))]),t._v(" "),e("p",[t._v("邀请总客户数")])]),e("div",{staticClass:"item"},[e("h2",[t._v(t._s(t.addInvitation))]),e("p",[t._v("邀请新客户数 "),e("a-tooltip",{attrs:{title:"新客户数为邀请好友中所有未添加企业任意员工的人数"}},[e("a-icon",{staticStyle:{"margin-left":"4px"},attrs:{type:"question-circle"}})],1)],1)]),e("div",{staticClass:"item"},[e("h2",[t._v(t._s(t.loseInvitation))]),t._v(" "),e("p",[t._v("流失客户数")])]),e("div",{staticClass:"item"},[e("h2",[t._v(t._s(t.newAddInvitation))]),t._v(" "),e("p",[t._v("净增客户总数")])])]),e("div",{staticStyle:{"margin-top":"18px"}},[e("a-table",{attrs:{columns:t.columnsInvitation,"data-source":t.invitationData,pagination:!1},scopedSlots:t._u([{key:"userName",fn:function(n,a){return e("span",{},[e("a-avatar",{attrs:{size:32,shape:"square",src:a.avatar}}),t._v(" "+t._s(n)+" ")],1)}},{key:"status",fn:function(n,a){return e("span",{style:{color:"已流失"===a.status?"red":"green"}},[t._v(" "+t._s(a.status)+" ")])}}])})],1)])],1)],1)],1)])},y=[],b=n("c7eb"),w=n("1da1"),x=(n("a15b"),n("d81d"),n("d3b7"),n("159b"),n("caad"),n("2532"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("div",{staticClass:"button-name",on:{click:function(e){return e.stopPropagation(),t.selectFocusIsOpen.apply(null,arguments)},mouseenter:t.enter,mouseleave:t.leave}},[t.selectList.length<=0?e("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"rgba(0, 0, 0, 0.25)"}},[t._v(" 当前没有活动 ")]):e("a-tooltip",{attrs:{title:t.selectedActiveName}},[e("span",{staticClass:"active-name"},[t._v(" "+t._s(t.selectedActiveName)+" ")])]),e("span",{staticStyle:{color:"rgba(0, 0, 0, 0.25)"}},[e("a-icon",{attrs:{type:"down"}})],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"},{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],staticClass:"selectBox_list"},[e("div",{staticClass:"group-owner"},[e("header",{staticClass:"header"},[t._v("全部活动 ("+t._s(t.total)+")")]),e("div",{staticClass:"search-name"},[e("a-input-search",{attrs:{placeholder:"搜索活动名称"},on:{search:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),e("ul",{staticClass:"list-wrap"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getDictionaryByCode,expression:"getDictionaryByCode"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},t._l(t.groupOwners,(function(n){return e("li",{key:n.id,staticClass:"title-wrap",on:{click:function(e){return e.stopPropagation(),t.selectGroupOwner(n)}}},[e("div",{staticClass:"col-1"},[e("div",[t._v(t._s(n.activeName))]),e("div",[t._v("创建时间:"+t._s(n.createTime))])]),e("div",[e("span",{class:0==n.isDel?"active":"close"},[t._v(t._s(0==n.isDel?"进行中":"已结束"))])]),e("div",{staticStyle:{"margin-left":"16px"}},[t.defalytStaffIndex.includes(n.id)?e("a-icon",{class:1==t.selectList.length?"check-circle-disable":"check-circle",attrs:{type:"check-circle"}}):e("div",{staticClass:"circle"})],1)])})),0)])])])])}),O=[],k=n("2909"),S=(n("c740"),n("a434"),n("99af"),n("487a")),C=n.n(S),D=n("b775"),L={getActivityList:"/marketing/fissiontask/list",getActiveAndFissionData:"/marketing/dataAnalysis/analysis",getCustomerData:"/marketing/dataAnalysis/customerDetail",getInvitationData:"/marketing/dataAnalysis/invitationDetail",getActiveInfo:"/marketing/fissiontask/info/"};function I(t){return Object(D["b"])({url:L.getActiveInfo+t,method:"get"})}function j(t){return Object(D["b"])({url:L.getActivityList,method:"post",data:t})}function E(t){return Object(D["b"])({url:L.getActiveAndFissionData,method:"post",params:t})}function T(t){return Object(D["b"])({url:L.getCustomerData,method:"post",data:t})}function A(t){return Object(D["b"])({url:L.getInvitationData,method:"post",params:t})}var N=n("1bee"),R={bind:function(t,e){function n(n){if(t.contains(n.target))return!1;e.expression&&e.value(n)}t.__vueClickOutside__=n,document.addEventListener("click",n)},update:function(){},unbind:function(t){document.removeEventListener("click",t.__vueClickOutside__),delete t.__vueClickOutside__}},M={name:"DataSelect",directives:{clickoutside:R,infiniteScroll:C.a},props:{defaultSelectList:{type:Array,default:function(){return[]}}},computed:{selectedActiveName:function(){return this.selectList.map((function(t){return t.activeName})).join(",")}},data:function(){return{selectList:[],thumbAvatar:"",defalytStaffIndex:[],busy:!0,pagination:{current:1,pageSize:10,total:0},total:0,groupOwners:[],page:1,limit:10,searchName:"",styleButton:1,isOpen:!1,loading:!1,buttonLoding:!1}},mounted:function(){},created:function(){},methods:{enter:function(){this.styleButton=2},leave:function(){this.styleButton=1},selectGroupOwner:function(t){if(1!==this.selectList.length||t.id!==this.selectList[0].id){var e=this.selectList.findIndex((function(e){if(e.id===t.id)return e}));e>=0?this.selectList.splice(e,1):this.selectList.push(t),this.defalytStaffIndex=this.selectList.map((function(t){return t.id})),this.$emit("selectCustom",this.selectList)}},handleClose:function(){this.isOpen=!1},selectFocusIsOpen:function(){this.isOpen=!this.isOpen},handleInfiniteOnLoad:function(){this.pagination.current++,this.loading&&this.getDictionaryByCode()},getDictionaryByCode:function(){var t={page:this.page,limit:this.limit,searchCtx:this.searchName||""};this.buttonLoding||(this.buttonLoding=!0,this.loading=!0,"0"!=this.total&&this.groupOwners.length>=this.total?this.busy=!0:this.getActiveInfo(t))},getActiveInfo:function(t){var e=this;j(t).then((function(t){var n,a,i=(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.list)||void 0===a?void 0:a.map((function(t){var e=Date.parse(new Date),n=Object(N["a"])(e);return t.endTime>n?t.isDel=0:t.isDel=1,t})))||[];e.total=t.data.totalCount,e.page>1?e.groupOwners=[].concat(Object(k["a"])(e.groupOwners),Object(k["a"])(i)):e.groupOwners=Object(k["a"])(i),e.groupOwners.length>=e.total?e.busy=!0:(e.page=e.page+1,e.loading=!1)})).catch((function(t){e.$message.error(t||t.message)})).finally((function(){e.buttonLoding=!1}))},onSearchName:function(){this.groupOwners=[],this.page=1,this.getDictionaryByCode()}},watch:{defaultSelectList:{handler:function(t){this.selectList=JSON.parse(JSON.stringify(t)),this.selectList.length>0?this.defalytStaffIndex=this.selectList.map((function(t){return t.id})):this.defalytStaffIndex=[]}}}},P=M,q=(n("ed57"),Object(d["a"])(P,x,O,!1,null,"426480e9",null)),$=q.exports,B=n("313e"),K=n("eb82"),U={name:"DataAnalysis",data:function(){return{visible:!1,activeId:null,isActive:null,defaultSelectList:[],activeList:[],justInTimeData:{},ladderData:[],fissionData:[],customerData:[],invitationData:[],customerSearchVal:"",staffUserid:null,reactflag:!1,customerFinish:null,startOrEndTime:null,customerLoseState:null,invitationTotal:0,addInvitation:0,loseInvitation:0,newAddInvitation:0,columns:[{title:"活动名称",dataIndex:"activeName",align:"center",customRender:function(t,e,n){return 0===n?{children:t,attrs:{rowSpan:9999,colSpan:1}}:{children:t,attrs:{colSpan:0}}}},{title:"任务阶梯",dataIndex:"ladder",align:"center"},{title:"任务目标人数",dataIndex:"targetNum",align:"center"},{title:"完成任务人数",dataIndex:"finishNum",align:"center"},{title:"助力人数",dataIndex:"helpNum",align:"center",customRender:function(t,e,n){return 0===n?{children:t,attrs:{rowSpan:9999,colSpan:1}}:{children:t,attrs:{colSpan:0}}}}],columnsFission:[{title:"裂变等级",dataIndex:"level",align:"center"},{title:"裂变客户数",dataIndex:"CustomerNumber",align:"center"}],columnsInvitation:[{title:"客户",dataIndex:"userName",scopedSlots:{customRender:"userName"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"助力状态",dataIndex:"helpStsus"},{title:"添加时间",dataIndex:"addTime"}],columnsCustomer:[{title:"客户",dataIndex:"userName",scopedSlots:{customRender:"userName"}},{title:"活动名称",dataIndex:"activeName"},{title:"所属成员",dataIndex:"staffName",scopedSlots:{customRender:"staffName"}},{title:"添加时间",dataIndex:"addTime"},{title:"邀请来源",dataIndex:"source",scopedSlots:{customRender:"source"}},{title:"流失状态",dataIndex:"loseStatus",scopedSlots:{customRender:"loseStatus"}},{title:"达成阶梯等级",dataIndex:"level"},{title:"完成情况",dataIndex:"taskFinish",scopedSlots:{customRender:"taskFinish"}},{title:"邀请好友数",dataIndex:"invitationCustomerNum"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center"}]}},created:function(){var t=this;return Object(w["a"])(Object(b["a"])().mark((function e(){return Object(b["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:t.searchCustomInfo();case 3:case"end":return e.stop()}}),e)})))()},watch:{fissionData:{handler:function(){var t=this;this.$nextTick((function(){t.drawLine()}))}},$route:{handler:function(){var t=this;return Object(w["a"])(Object(b["a"])().mark((function e(){return Object(b["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:t.searchCustomInfo();case 3:case"end":return e.stop()}}),e)})))()},deep:!0},visible:{handler:function(t){t||(this.invitationData=[])}}},mounted:function(){},computed:{usingList:function(){return function(t){return t.split(",")}},customerNum:function(){return this.customerData.length},isReset:function(){return!!(""!=this.customerSearchVal&&this.customerSearchVal||this.staffUserid||null!=this.customerFinish||null!=this.startOrEndTime&&this.startOrEndTime.length>0||null!=this.customerLoseState)}},methods:{changeActiveList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.activeId=t.map((function(t){return t.id})).join(","),1==t.length?this.isActive=0==t[0].isDel:this.isActive=null,this.searchCustomInfo(),this.searchActiveAndFissionData()},showCustomerDetail:function(t,e){this.$router.push({name:"CustomerDetail",query:{customerId:t,staffId:e}})},showInvitationDetail:function(t){var e=this;return Object(w["a"])(Object(b["a"])().mark((function n(){var a,i;return Object(b["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.visible=!0,n.prev=1,n.next=4,A({userId:t,activeId:e.activeId});case 4:if(n.t2=a=n.sent,n.t1=null===n.t2,n.t1){n.next=8;break}n.t1=void 0===a;case 8:if(!n.t1){n.next=12;break}n.t3=void 0,n.next=13;break;case 12:n.t3=a.data;case 13:if(n.t0=n.t3,n.t0){n.next=16;break}n.t0={};case 16:i=n.t0,e.invitationTotal=i.invitationTotal||0,e.addInvitation=i.addInvitation||0,e.loseInvitation=i.loseInvitation||0,e.newAddInvitation=i.newAddInvitation||0,e.invitationData=(null===i||void 0===i?void 0:i.list)||[],n.next=27;break;case 24:n.prev=24,n.t4=n["catch"](1),e.$message.error(n.t4);case 27:case"end":return n.stop()}}),n,null,[[1,24]])})))()},resetCustomerSearch:function(){if(!this.isReset)return!1;this.customerSearchVal="",this.staffUserid=null,this.reactflag=!0,this.customerFinish=null,this.startOrEndTime=null,this.customerLoseState=null,this.searchCustomInfo()},searchCustomInfo:function(){var t=this;return Object(w["a"])(Object(b["a"])().mark((function e(){var n,a,i;return Object(b["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.activeId){e.next=2;break}return e.abrupt("return");case 2:return n={activeId:t.activeId},""!=t.customerSearchVal&&(n.customerName=t.customerSearchVal),null!=t.staffUserid&&""!=t.staffUserid&&(n.staffId=t.staffUserid),null!=t.startOrEndTime&&0!=t.startOrEndTime.length&&(n.startTime=t.startOrEndTime[0].format("YYYY-MM-DD"),n.endTime=t.startOrEndTime[1].format("YYYY-MM-DD")),null!=t.customerFinish&&(n.status="1"==t.customerFinish),null!=t.customerLoseState&&(n.loseStatus="1"==t.customerLoseState),e.prev=8,e.next=11,T(n);case 11:if(e.t2=a=e.sent,e.t1=null===e.t2,e.t1){e.next=15;break}e.t1=void 0===a;case 15:if(!e.t1){e.next=19;break}e.t3=void 0,e.next=20;break;case 19:e.t3=null===(i=a.data)||void 0===i?void 0:i.map((function(t){return null!==t&&void 0!==t&&t.source&&(t.source=JSON.parse(null===t||void 0===t?void 0:t.source)),t}));case 20:if(e.t0=e.t3,e.t0){e.next=23;break}e.t0=[];case 23:t.customerData=e.t0,e.next=29;break;case 26:e.prev=26,e.t4=e["catch"](8),t.$message.error(e.t4);case 29:case"end":return e.stop()}}),e,null,[[8,26]])})))()},selectCustom:function(t){"1"==t.empty?this.staffUserid=void 0:(this.reactflag=!1,this.staffUserid=t.userid),this.searchCustomInfo()},init:function(){var t=this;return Object(w["a"])(Object(b["a"])().mark((function e(){var n,a,i,r,s,o,c,l,u,d;return Object(b["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.activeId=t.$route.query.activeId,null!=t.activeId){e.next=19;break}return e.next=5,j({page:1,limit:1});case 5:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=9;break}e.t0=void 0===n;case 9:if(!e.t0){e.next=13;break}e.t2=void 0,e.next=14;break;case 13:e.t2=null===(a=n.data)||void 0===a?void 0:a.list;case 14:r=e.t2,r.length&&(t.defaultSelectList=r,t.isActive=0==r[0].isDel),t.activeId=r&&(null===(i=r[0])||void 0===i?void 0:i.id),e.next=37;break;case 19:return e.next=21,I(t.activeId);case 21:if(e.t4=s=e.sent,e.t3=null===e.t4,e.t3){e.next=25;break}e.t3=void 0===s;case 25:if(!e.t3){e.next=29;break}e.t5=void 0,e.next=30;break;case 29:e.t5=null===(o=s.data)||void 0===o?void 0:o.data;case 30:c=e.t5,l=null===c||void 0===c?void 0:c.endTime,u=Date.parse(new Date),d=Object(N["a"])(u),c.isDel=l>d?0:1,t.defaultSelectList=[c],t.isActive=0==c.isDel;case 37:if(t.activeId){e.next=39;break}return e.abrupt("return");case 39:t.searchActiveAndFissionData(),e.next=45;break;case 42:e.prev=42,e.t6=e["catch"](0),t.$message.error(e.t6);case 45:case"end":return e.stop()}}),e,null,[[0,42]])})))()},searchActiveAndFissionData:function(){var t=this;return Object(w["a"])(Object(b["a"])().mark((function e(){var n,a;return Object(b["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E({activeIds:t.activeId});case 3:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=7;break}e.t1=void 0===n;case 7:if(!e.t1){e.next=11;break}e.t3=void 0,e.next=12;break;case 11:e.t3=n.data;case 12:if(e.t0=e.t3,e.t0){e.next=15;break}e.t0={};case 15:a=e.t0,t.setActiveAndFissionData(a),e.next=22;break;case 19:e.prev=19,e.t4=e["catch"](0),t.$message.error(e.t4);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))()},setActiveAndFissionData:function(t){var e;this.justInTimeData=t.justInTimeData||{};var n=this.justInTimeData.acvtieData.map((function(t){var e=t.activeName,n=t.taskList.map((function(t){var n={activeName:e},a=Object.assign(t,n);return a}));return n}));this.ladderData=n||[],this.fissionData=(null===(e=t.justInTimeData)||void 0===e?void 0:e.levelData)||[]},handleFinishChange:function(t){this.searchCustomInfo()},handleLoseChange:function(t){this.searchCustomInfo()},drawLine:function(){var t=B["a"](document.getElementById("myFissionChart")),e=[],n=[];this.fissionData.forEach((function(t){e.push(t.level),n.push(t.CustomerNumber)}));var a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"8%",bottom:"3%",containLabel:!0},xAxis:{name:"客户数",type:"value",boundaryGap:[0,1]},yAxis:{name:"裂变等级",type:"category",data:e},series:[{type:"bar",data:n}]};a&&t.setOption(a)}},components:{DataSelect:$,SelectMultiple:K["a"]}},F=U,z=(n("5a56"),Object(d["a"])(F,_,y,!1,null,"b4f3bd4c",null)),W=z.exports,Y={name:"TaskTreasure",components:{TaskList:g,DataAnalysis:W},data:function(){return{tabsList:[{text:"任务列表",id:1,component:g},{text:"数据分析",id:2,component:W}]}},methods:{changeTabData:function(t){this.$route.meta.seletedTab=2,this.$router.push({name:"TaskTreasure",query:{activeId:t}})},changeTab:function(t){this.$route.meta.seletedTab=t}}},G=Y,H=(n("2d2b"),Object(d["a"])(G,a,i,!1,null,"bcaae778",null));e["default"]=H.exports},"487a":function(t,e,n){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var n,a,i,r,s,o=function(){t.apply(r,s),a=n};return function(){if(r=this,s=arguments,n=Date.now(),i&&(clearTimeout(i),i=null),a){var t=e-(n-a);t<0?o():i=setTimeout((function(){o()}),t)}else o()}},n=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},a=document.defaultView.getComputedStyle,i=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var n=a(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window},r=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},s=function(t){return t===window?n(window):t.getBoundingClientRect().top+n(window)},o=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,n=t.el,a=n.getAttribute("infinite-scroll-throttle-delay"),r=200;a&&(r=Number(t.vm[a]||a),(isNaN(r)||r<0)&&(r=200)),t.throttleDelay=r,t.scrollEventTarget=i(n),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var s=n.getAttribute("infinite-scroll-disabled"),o=!1;s&&(this.vm.$watch(s,(function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)})),o=Boolean(t.vm[s])),t.disabled=o;var c=n.getAttribute("infinite-scroll-distance"),u=0;c&&(u=Number(t.vm[c]||c),isNaN(u)&&(u=0)),t.distance=u;var d=n.getAttribute("infinite-scroll-immediate-check"),f=!0;d&&(f=Boolean(t.vm[d])),t.immediateCheck=f,f&&l.call(t);var p=n.getAttribute("infinite-scroll-listen-for-event");p&&t.vm.$on(p,(function(){l.call(t)}))}},l=function(t){var e=this.scrollEventTarget,a=this.el,i=this.distance;if(!0===t||!this.disabled){var o=n(e),c=o+r(e),l=!1;if(e===a)l=e.scrollHeight-c<=i;else{var u=s(a)-s(e)+a.offsetHeight+o;l=c+i>=u}l&&this.expression&&this.expression()}},u={bind:function(e,n,a){e[t]={el:e,vm:a.context,expression:n.value};var i=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){o(e)&&c.call(e[t],i),e[t].bindTryCount=0;var n=function n(){e[t].bindTryCount>10||(e[t].bindTryCount++,o(e)?c.call(e[t],i):setTimeout(n,50))};n()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},d=function(t){t.directive("InfiniteScroll",u)};return window.Vue&&(window.infiniteScroll=u,Vue.use(d)),u.install=d,u}))},"5a56":function(t,e,n){"use strict";n("f669")},"5fc5":function(t,e,n){},"65b6":function(t,e,n){},9994:function(t,e,n){"use strict";n("65b6")},b311:function(t,e,n){
/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */
(function(e,n){t.exports=n()})(0,(function(){return function(){var t={686:function(t,e,n){"use strict";n.d(e,{default:function(){return T}});var a=n(279),i=n.n(a),r=n(370),s=n.n(r),o=n(817),c=n.n(o);function l(t){try{return document.execCommand(t)}catch(e){return!1}}var u=function(t){var e=c()(t);return l("cut"),e},d=u;function f(t){var e="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[e?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(a,"px"),n.setAttribute("readonly",""),n.value=t,n}var p=function(t,e){var n=f(t);e.container.appendChild(n);var a=c()(n);return l("copy"),n.remove(),a},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"===typeof t?n=p(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null===t||void 0===t?void 0:t.type)?n=p(t.value,e):(n=c()(t),l("copy")),n},m=h;function v(t){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}var g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,a=t.container,i=t.target,r=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==i){if(!i||"object"!==v(i)||1!==i.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&i.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(i.hasAttribute("readonly")||i.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return r?m(r,{container:a}):i?"cut"===n?d(i):m(i,{container:a}):void 0},_=g;function y(t){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function x(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}function O(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}function k(t,e){return k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},k(t,e)}function S(t){var e=L();return function(){var n,a=I(t);if(e){var i=I(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return C(this,n)}}function C(t,e){return!e||"object"!==y(e)&&"function"!==typeof e?D(t):e}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function j(t,e){var n="data-clipboard-".concat(t);if(e.hasAttribute(n))return e.getAttribute(n)}var E=function(t){O(n,t);var e=S(n);function n(t,a){var i;return b(this,n),i=e.call(this),i.resolveOptions(a),i.listenClick(t),i}return x(n,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof t.action?t.action:this.defaultAction,this.target="function"===typeof t.target?t.target:this.defaultTarget,this.text="function"===typeof t.text?t.text:this.defaultText,this.container="object"===y(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=s()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",a=_({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(a?"success":"error",{action:n,text:a,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return j("action",t)}},{key:"defaultTarget",value:function(t){var e=j("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return j("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return m(t,e)}},{key:"cut",value:function(t){return d(t)}},{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"===typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}]),n}(i()),T=E},828:function(t){var e=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function a(t,n){while(t&&t.nodeType!==e){if("function"===typeof t.matches&&t.matches(n))return t;t=t.parentNode}}t.exports=a},438:function(t,e,n){var a=n(828);function i(t,e,n,a,i){var r=s.apply(this,arguments);return t.addEventListener(n,r,i),{destroy:function(){t.removeEventListener(n,r,i)}}}function r(t,e,n,a,r){return"function"===typeof t.addEventListener?i.apply(null,arguments):"function"===typeof n?i.bind(null,document).apply(null,arguments):("string"===typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return i(t,e,n,a,r)})))}function s(t,e,n,i){return function(n){n.delegateTarget=a(n.target,e),n.delegateTarget&&i.call(t,n)}}t.exports=r},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"===typeof t||t instanceof String},e.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},370:function(t,e,n){var a=n(879),i=n(438);function r(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(t))return s(t,e,n);if(a.nodeList(t))return o(t,e,n);if(a.string(t))return c(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function s(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function o(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}function c(t,e,n){return i(document.body,t,e,n)}t.exports=r},817:function(t){function e(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var a=window.getSelection(),i=document.createRange();i.selectNodeContents(t),a.removeAllRanges(),a.addRange(i),e=a.toString()}return e}t.exports=e},279:function(t){function e(){}e.prototype={on:function(t,e,n){var a=this.e||(this.e={});return(a[t]||(a[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var a=this;function i(){a.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),a=0,i=n.length;for(a;a<i;a++)n[a].fn.apply(n[a].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),a=n[t],i=[];if(a&&e)for(var r=0,s=a.length;r<s;r++)a[r].fn!==e&&a[r].fn._!==e&&i.push(a[r]);return i.length?n[t]=i:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={exports:{}};return t[a](i,i.exports,n),i.exports}return function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),n(686)}().default}))},c487:function(t,e,n){"use strict";n("5fc5")},c7eb:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("b636"),n("944a"),n("0c47"),n("23dc"),n("3410"),n("159b"),n("b0c0"),n("131a"),n("fb6a");var a=n("53ca");function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(j){u=function(t,e,n){return t[e]=n}}function d(t,e,n,a){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),o=new D(a||[]);return r(s,"_invoke",{value:O(t,n,o)}),s}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(j){return{type:"throw",arg:j}}}t.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};u(g,o,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(L([])));y&&y!==e&&n.call(y,o)&&(g=y);var b=v.prototype=h.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(r,s,o,c){var l=f(t[r],t,s);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==Object(a["a"])(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,o,c)}),(function(t){i("throw",t,o,c)})):e.resolve(d).then((function(t){u.value=t,o(u)}),(function(t){return i("throw",t,o,c)}))}c(l.arg)}var s;r(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){i(t,n,e,a)}))}return s=s?s.then(a,a):a()}})}function O(t,e,n){var a="suspendedStart";return function(i,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===i)throw r;return I()}for(n.method=i,n.arg=r;;){var s=n.delegate;if(s){var o=k(s,n);if(o){if(o===p)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=f(t,e,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}function k(t,e){var n=e.method,a=t.iterator[n];if(void 0===a)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(a,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new x(d(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(b),u(b,l,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var a in e)n.push(a);return n.reverse(),function t(){for(;n.length;){var a=n.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},t.values=L,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return s.type="throw",s.arg=t,e.next=n,a&&(e.method="next",e.arg=void 0),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],s=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var o=n.call(r,"catchLoc"),c=n.call(r,"finallyLoc");if(o&&c){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}},d993:function(t,e,n){},da00:function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return u}));var a=n("b775"),i={save:"/marketing/fissiontask/save",invitationCustomer:"/marketing/fissiontask/invitationCustomer",fissiontaskList:"/marketing/fissiontask/list",fissiontaskDelete:"/marketing/fissiontask/delete",fissiontaskInfo:"/marketing/fissiontask/info",fissiontaskUpdate:"marketing/fissiontask/update"};function r(t){return Object(a["b"])({url:i.save,method:"post",data:t})}function s(t){return Object(a["b"])({url:i.invitationCustomer,method:"post",data:t})}function o(t){return Object(a["b"])({url:i.fissiontaskList,method:"post",data:t})}function c(t){return Object(a["b"])({url:i.fissiontaskDelete,method:"post",params:t})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(a["b"])({url:i.fissiontaskInfo+"/"+t,method:"get"})}function u(t){return Object(a["b"])({url:i.fissiontaskUpdate,method:"post",data:t})}},eb82:function(t,e,n){"use strict";n("498a"),n("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrap"},[e("div",{staticClass:"button-name",on:{click:function(e){return e.stopPropagation(),t.selectFocusIsOpen.apply(null,arguments)},mouseenter:t.enter,mouseleave:t.leave}},[t.employeeName?e("span",{staticClass:"hidden"},[e("a-avatar",{attrs:{size:28,shape:"square",src:t.thumbAvatar}}),t._v(" "+t._s(t.employeeName)+" ")],1):e("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"rgba(0, 0, 0, 0.25)"}},[t._v(" "+t._s(t.placeholderStr)+" ")]),t.closeCircle?e("span",{staticStyle:{color:"rgba(0, 0, 0, 0.25)"}},[t.employeeName&&1!=t.styleButton?e("a-icon",{attrs:{type:"close-circle",theme:"filled"},on:{click:function(e){return e.stopPropagation(),t.iconClear.apply(null,arguments)}}}):e("a-icon",{attrs:{type:"down"}})],1):t._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"},{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],staticClass:"selectBox_list"},[e("div",{staticClass:"group-owner"},[e("header",{staticClass:"header"},[t._v("全部员工 ("+t._s(t.total)+")")]),e("div",{staticClass:"search-name"},[e("a-input-search",{attrs:{placeholder:"请输入员工后回车"},on:{search:t.onSearchName},model:{value:t.searchName,callback:function(e){t.searchName="string"===typeof e?e.trim():e},expression:"searchName"}})],1),e("ul",{staticClass:"list-wrap"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getDictionaryByCode,expression:"getDictionaryByCode"}],staticClass:"demo-infinite-container",attrs:{"infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10}},t._l(t.groupOwners,(function(n){return e("li",{key:n.staffId,staticClass:"title-wrap",on:{click:function(e){return t.selectGroupOwner(n)}}},[e("a-space",{attrs:{size:12}},[e("a-avatar",{attrs:{size:30,src:n.thumbAvatar,shape:"square"}}),e("span",[t._v(t._s(n.name))])],1),t.checkShow?e("div",[t.userId==n.userid?e("a-icon",{staticClass:"check-circle",attrs:{type:"check-circle"}}):e("div",{staticClass:"circle"})],1):t._e()],1)})),0)])])])])},i=[],r=n("2909"),s=(n("d81d"),n("4de4"),n("d3b7"),n("25f0"),n("159b"),n("caad"),n("2532"),n("99af"),n("487a")),o=n.n(s),c=n("1c9c"),l={bind:function(t,e){function n(n){if(t.contains(n.target))return!1;e.expression&&e.value(n)}t.__vueClickOutside__=n,document.addEventListener("click",n)},update:function(){},unbind:function(t){document.removeEventListener("click",t.__vueClickOutside__),delete t.__vueClickOutside__}},u={name:"SearchForm",directives:{clickoutside:l,infiniteScroll:o.a},props:{checkShow:{type:Boolean,default:!1},userName:{type:String,default:""},userId:{type:String,default:""},userThumbAvatar:{type:String,default:""},reactflag:{type:Boolean,default:!1},placeholderStr:{type:String,default:"请选择企业员工"},closeCircle:{type:Boolean,default:!0}},data:function(){return{defalytStaffIndex:[],thumbAvatar:"",busy:!0,pagination:{current:1,pageSize:10,total:0},total:0,totalNum:0,selectRoleId:"3",employeeName:"",groupOwners:[],page:1,limit:10,value:[],searchName:"",styleButton:1,owners:[],isOpen:!1,loading:!1,buttonLoding:!1,ownersID:{data:[]}}},created:function(){},methods:{enter:function(){this.styleButton=2},leave:function(){this.styleButton=1},selectGroupOwner:function(t){this.employeeName=t.name,this.thumbAvatar=t.thumbAvatar,this.isOpen=!1,this.$emit("selectCustom",t)},iconClear:function(){this.employeeName="",this.isOpen=!1;var t={empty:"1"};this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode(),this.$emit("selectCustom",t)},handleClose:function(){this.isOpen=!1},selectFocusIsOpen:function(){this.isOpen=!this.isOpen},ok:function(){var t=this.groupOwners.filter((function(t){if(t.defaultChecked)return t.userid})).map((function(t){return t.userid})),e=this.groupOwners.filter((function(t){if(t.defaultChecked)return t})).map((function(t){return{name:t.name,avatar:t.thumbAvatar}}));this.ownersID.data=e;var n=t.toString();this.isOpen=!this.isOpen,this.$store.commit("SET_STAFFIDS",n)},cancel:function(){var t=this;this.isOpen=!this.isOpen,this.groupOwners.forEach((function(e){var n=t.responseData.useridList.includes(e.userid);e.defaultChecked=!!n}));var e=this.groupOwners.filter((function(t){if(t.defaultChecked)return t})).map((function(t){return{name:t.name,avatar:t.thumbAvatar}}));this.ownersID.data=e},handleInfiniteOnLoad:function(){this.pagination.current++,this.loading&&this.getDictionaryByCode()},getDictionaryByCode:function(){var t=this,e={currentPage:this.page,pageSize:this.limit,name:this.searchName||""};this.buttonLoding||(this.buttonLoding=!0,this.loading=!0,"0"!=this.total&&this.groupOwners.length>=this.total?this.busy=!0:Object(c["q"])(e).then((function(e){var n=e.data.list;t.total=e.data.total,t.page>1?t.groupOwners=[].concat(Object(r["a"])(t.groupOwners),Object(r["a"])(n)):t.groupOwners=Object(r["a"])(n),t.groupOwners.length>=t.total?t.busy=!0:(t.page=t.page+1,t.loading=!1)})).catch((function(e){t.$message.error(e||e.message)})).finally((function(){t.buttonLoding=!1})))},onSearchName:function(){this.groupOwners=[],this.page=1,this.getDictionaryByCode()}},watch:{reactflag:{handler:function(t,e){!0===t&&(this.employeeName="",this.isOpen=!1,this.groupOwners=[],this.page=1,this.searchName="",this.getDictionaryByCode())}},userName:function(){this.employeeName=this.userName},userThumbAvatar:function(){this.thumbAvatar=this.userThumbAvatar}}},d=u,f=(n("9994"),n("2877")),p=Object(f["a"])(d,a,i,!1,null,"c2d4f660",null);e["a"]=p.exports},ed57:function(t,e,n){"use strict";n("d993")},f669:function(t,e,n){}}]);