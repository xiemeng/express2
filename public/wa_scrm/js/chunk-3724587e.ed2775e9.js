(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3724587e"],{1701:function(e,t,a){},"7a7a":function(e,t,a){"use strict";a.r(t);a("b0c0");var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"Attribute"},[t("section",{staticClass:"section"},[t("div",{staticClass:"total"},[t("a-form-model",{ref:"ruleForm",staticClass:"ant-advanced-search-form",attrs:{form:e.form,layout:"inline"}},[t("a-form-model-item",{attrs:{label:"Attribute Name",name:"AttributeName"}},[t("a-input",{attrs:{placeholder:"place input",size:"large",allowClear:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("a-form-model-item",{attrs:{label:"Display Name"}},[t("a-input",{attrs:{placeholder:"place input",size:"large",allowClear:""},model:{value:e.form.cname,callback:function(t){e.$set(e.form,"cname",t)},expression:"form.cname"}})],1),t("a-form-model-item",{attrs:{label:"Attribute value"}},[t("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"place slect",size:"large"},model:{value:e.form.dataType,callback:function(t){e.$set(e.form,"dataType",t)},expression:"form.dataType"}},e._l(e.tagList,(function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(" "+e._s(a)+" ")])})),1)],1),t("a-form-model-item",[t("a-button",{attrs:{type:"primary"},on:{click:e.searchList}},[e._v("Search")]),t("a-button",{style:{marginLeft:"8px"},on:{click:e.clearFn}},[e._v("Clear")])],1)],1),t("a-button",{staticClass:"btn",attrs:{type:"primary",size:"large",disabled:e.Actions},on:{click:e.addBtn}},[e._v("Add Attribute")])],1),t("div",[t("a-table",{staticClass:"table",attrs:{columns:e.columns,rowKey:"id",loading:e.loading,dataSource:e.clientList,pagination:e.pagination},on:{change:e.changeTab},scopedSlots:e._u([{key:"Edit",fn:function(a,o){return t("div",{},[0==o.status?t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.editPage(o)}}},[e._v("Edit")]):e._e(),e._v("  "),0==o.status?t("a-button",{attrs:{type:"link",disabled:e.Actions},on:{click:function(t){return e.deletePage(o)}}},[e._v("Forbidden")]):e._e(),e._v("  ")],1)}}])})],1)]),t("a-modal",{attrs:{confirmLoading:e.confirmLoading,width:"600px",centered:""},on:{cancel:function(t){e.AddBox=!1},ok:e.submitKeyword},model:{value:e.AddBox,callback:function(t){e.AddBox=t},expression:"AddBox"}},[t("div",{staticClass:"panel"},[t("h2",{staticClass:"dialog-title"},[e._v(e._s("add"===e.addType?"Add":"Edit")+" Attribute")]),t("a-form-model",e._b({ref:"ruleForm",attrs:{rules:e.rules,model:e.modalForm}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{label:"Attribute Name",prop:"name"}},[t("a-input",{attrs:{placeholder:"place input",maxLength:20},model:{value:e.modalForm.name,callback:function(t){e.$set(e.modalForm,"name",t)},expression:"modalForm.name"}})],1),t("a-form-model-item",{attrs:{label:"Display Name",prop:"cname"}},[t("a-input",{attrs:{placeholder:"place input",maxLength:20},model:{value:e.modalForm.cname,callback:function(t){e.$set(e.modalForm,"cname",t)},expression:"modalForm.cname"}})],1),t("a-form-model-item",{attrs:{label:"Type",prop:"dataType"}},[t("a-select",{attrs:{placeholder:"place slect",size:"large"},on:{change:e.changePerson},model:{value:e.modalForm.dataType,callback:function(t){e.$set(e.modalForm,"dataType",t)},expression:"modalForm.dataType"}},e._l(e.tagList,(function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(" "+e._s(a)+" ")])})),1)],1),"LIST"===e.modalForm.dataType?t("a-form-model-item",{attrs:{label:"Options",prop:"extendValue"}},[t("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags","token-separators":[","]},model:{value:e.modalForm.extendValue,callback:function(t){e.$set(e.modalForm,"extendValue",t)},expression:"modalForm.extendValue"}},e._l(e.modalForm.propertiesExtendVoList,(function(a){return t("a-select-option",{key:a.extendValue,attrs:{value:a.extendValue}},[e._v(" "+e._s(a.extendValue)+" ")])})),1)],1):e._e(),t("a-form-model-item",{attrs:{label:"Remark",prop:"remark"}},[t("a-textarea",{attrs:{placeholder:"place input",autoSize:{minRows:5,maxRows:5},maxLength:50},model:{value:e.modalForm.remark,callback:function(t){e.$set(e.modalForm,"remark",t)},expression:"modalForm.remark"}})],1)],1)],1)])],1)},n=[],i=a("5530"),r=(a("d3b7"),a("d81d"),a("7db0"),a("b775")),s={pageList:"/properties/list",pageAdd:"/properties/add",disableProperties:"/properties/disableProperties",modify:"/properties/modify"};function d(e){return Object(r["b"])({url:s.pageList,method:"post",data:e})}function l(e){return Object(r["b"])({url:s.pageAdd,method:"post",data:e})}function c(e){return Object(r["b"])({url:s.disableProperties,method:"get",params:e})}function m(e){return Object(r["b"])({url:s.modify,method:"post",data:e})}var u={name:"BaseAttribute",components:{},data:function(){return{AddBox:!1,loading:!1,addType:"add",pagination:{current:1,pageSize:10,total:0},addTxt:"",form:{name:void 0,cname:void 0,dataType:void 0},layout:{labelCol:{span:6},wrapperCol:{span:18}},clientList:[],columns:[{title:"Attribute Name",dataIndex:"name"},{title:"Display Name",dataIndex:"cname"},{title:"Attribute Type",dataIndex:"dataType"},{title:"status",dataIndex:"status",customRender:function(e){return 0==e?"Normal":"forbidden"}},{title:"Remark",dataIndex:"remark",width:"200px"},{title:"Create Time",dataIndex:"createTime"},{title:"Actions",dataIndex:"Edit",scopedSlots:{customRender:"Edit"}}],confirmLoading:!1,modalForm:{name:void 0,cname:void 0,dataType:void 0,remark:void 0,extendValue:[]},rules:{name:[{required:!0,message:"Please input"}],cname:[{required:!0,message:"Please input"}],dataType:[{required:!0,message:"Please select"}]},tagList:["STRING","NUMBER","DATETIME","LIST"]}},created:function(){this.getList()},computed:{Actions:function(){return!this.$route.meta.Actions}},methods:{clearFn:function(){this.form={contactName:void 0,propertiesValue:void 0},this.searchList()},getList:function(){var e=this,t=Object(i["a"])({currentPage:this.pagination.current,pageSize:this.pagination.pageSize},this.form);this.loading=!0,d(t).then((function(t){var a;e.clientList=null===(a=t.data.records)||void 0===a?void 0:a.map((function(t){var a;return Object(i["a"])(Object(i["a"])({},t),{},{extendValue:null===(a=t.propertiesExtendVoList)||void 0===a?void 0:a.map((function(e){return e.extendValue})),createTime:t.createTime?e.$moment(t.createTime).format("YYYY-MM-DD HH:mm:ss"):"-"})})),e.pagination.total=t.data.total})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))},searchList:function(){this.pagination.current=1,this.getList()},editPage:function(e){this.addType="edit",this.modalForm={name:e.name,cname:e.cname,dataType:e.dataType,remark:e.remark,id:e.id,extendValue:e.extendValue,propertiesExtendVoList:e.propertiesExtendVoList},this.AddBox=!0},deletePage:function(e){var t=this;this.$confirm({title:"tip",icon:"",cancelText:"cancel",okText:"forbidden",content:"It cannot be restored after being forbidden",onOk:function(){t.contactsDeleteFun(e.id)}})},contactsDeleteFun:function(e){var t=this,a={propertiesId:e};c(a).then((function(e){t.$message.success("delete success"),t.getList()})).catch((function(e){t.$message.error(e)}))},submitKeyword:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;var a=Object(i["a"])({},e.modalForm);e.confirmLoading=!0,e.modalForm.id?e.editKeywordFn(a):e.addKeywordFn(a)}))},addKeywordFn:function(e){var t=this;l(e).then((function(e){t.AddBox=!1,t.$message.success("success"),t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))},editKeywordFn:function(e){var t=this;e.id=this.modalForm.id,m(e).then((function(e){t.AddBox=!1,t.$message.success("success"),t.searchList()})).catch((function(e){t.$message.error(e)})).finally((function(){t.confirmLoading=!1}))},addBtn:function(){this.modalForm={contactId:void 0,propertiesValue:void 0,propertiesId:void 0,extendValue:[],id:void 0},this.addType="add",this.AddBox=!0},changeTab:function(e){var t=e.current;this.pagination.current=t,this.getList()},changePerson:function(e){var t=this.tagList.find((function(t){return t.id===e}));t&&(this.modalForm.propertiesValue=t.cname)}}},p=u,f=(a("aeb9"),a("2877")),b=Object(f["a"])(p,o,n,!1,null,"4740338c",null);t["default"]=b.exports},aeb9:function(e,t,a){"use strict";a("1701")}}]);