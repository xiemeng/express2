(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85a580da"],{4820:function(t,e,n){"use strict";n.d(e,"k",(function(){return i})),n.d(e,"j",(function(){return a})),n.d(e,"i",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"o",(function(){return p})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return f})),n.d(e,"n",(function(){return h})),n.d(e,"a",(function(){return g})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return v}));var r=n("b775"),o={groups:"/tbContactsGroup/page",groupDetail:"/tbContactsGroup/queryById",groupBuild:"/tbContactsGroup/create",groupDelete:"/yuntu/group",groupEdit:"/yuntu/group",countPerson:"/yuntu/group/count",downloadUser:"/yuntu/group/download/user",history:"/yuntu/group/download/history",updateUser:"/yuntu/group/update",usersList:"/yuntu/group/users",groupHistory:"/yuntu/group_history",propretySelect:"/yuntu/group/proprety/select",propretySet:"/yuntu/group/proprety/select",changeStatus:"/tbContactsGroup/changeStatus",getNewGroupResult:"/tbTagResult/getNewGroupResult",getGroupResult:"/tbTagResult/getGroupResult",getContactsByCGID:"/tbTagResult/getContactsByCGID"};function i(t){return Object(r["b"])({url:o.groups,method:"post",data:t})}function a(t){return Object(r["b"])({url:o.groupEdit,method:"put",data:t})}function s(t){return Object(r["b"])({url:o.groupDetail,method:"get",params:t})}function u(t){return Object(r["b"])({url:o.groupBuild,method:"post",data:t})}function c(t){return Object(r["b"])({url:o.groupDelete,method:"delete",params:t})}function l(t){return Object(r["b"])({url:o.countPerson,method:"post",data:t})}function d(t){return Object(r["b"])({url:o.downloadUser,method:"post",data:t,responseType:"blob"})}function p(t){return Object(r["b"])({url:o.updateUser,method:"post",data:t})}function m(t){return Object(r["b"])({url:o.history,method:"get",params:t,responseType:"blob"})}function f(t){return Object(r["b"])({url:o.propretySelect,method:"get",params:t})}function h(t){return Object(r["b"])({url:o.propretySet,method:"post",data:t})}function g(t){return Object(r["b"])({url:o.changeStatus,method:"post",data:t})}function b(t){return Object(r["b"])({url:o.getNewGroupResult,method:"get",params:t})}function y(t){return Object(r["b"])({url:o.getGroupResult,method:"post",data:t})}function v(t){return Object(r["b"])({url:o.getContactsByCGID,method:"post",data:t})}},b42d:function(t,e,n){},be6a:function(t,e,n){"use strict";n("b42d")},c4c6:function(t,e,n){},cb44:function(t,e,n){"use strict";n.r(e);var r,o=function(){var t=this,e=t._self._c;return e("div",[e("a-page-header",{staticClass:"page-header background-white",attrs:{title:"分群用户明细"},on:{back:function(e){return t.$router.go(-1)}}}),e("header",{staticClass:"header"},[e("div",{staticClass:"left"},[e("h1",[t._v(t._s(t.group_name))])]),e("div",{staticClass:"right"})]),e("a-table",{staticClass:"table",attrs:{columns:t.columns,scroll:{x:1300},"data-source":t.clientList,pagination:t.pagination,loading:t.tableLoading},on:{change:t.change},scopedSlots:t._u([{key:"extraInfoVoList",fn:function(n){return n?e("div",{},[e("a-tooltip",[e("ul",{attrs:{slot:"title"},slot:"title"},t._l(n,(function(n,r){return e("li",{key:r},[e("Span",[t._v(t._s(n.category)+" "+t._s(n.topic))])],1)})),0),e("a-button",{attrs:{type:"link"}},[t._v(t._s(n.length)+"+topics")])],1)],1):t._e()}}],null,!0)}),e("a-modal",{attrs:{footer:null,width:"799px",centered:"",destroyOnClose:""},model:{value:t.visibleTags,callback:function(e){t.visibleTags=e},expression:"visibleTags"}},[e("ColumnList",{attrs:{propretyList:t.propretyList},on:{cancle:function(e){t.visibleTags=!1},serviceOk:t.serviceOk}})],1)],1)},i=[],a=n("5530"),s=(n("d3b7"),n("d81d"),n("159b"),n("a9e3"),n("4820")),u=(n("b0c0"),function(){var t=this,e=t._self._c;return e("CommonModal",t._b({attrs:{loading:t.loading},on:{cancle:function(e){return t.$emit("cancle")},serviceOk:t.serviceOk}},"CommonModal",t.source,!1),[e("div",{staticClass:"user-wrap"},[e("div",{staticClass:"user-left"},[e("a-input-search",{attrs:{placeholder:"请输入搜索内容"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),e("ul",{staticClass:"list-wrap"},t._l(t.clientList,(function(n){return e("li",{key:n.param_name},[e("a-checkbox",{model:{value:n.select_status,callback:function(e){t.$set(n,"select_status",e)},expression:"item.select_status"}},[t._v(t._s(n.param_zh_name))])],1)})),0)],1),e("div",{staticClass:"user-right"},[e("p",{staticClass:"tips"},[t._v("按住行可以拖拽排序，前 3 列支持固定显示")]),e("ul",{staticClass:"list-wrap"},t._l(t.checkoutList,(function(n,r){return e("li",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:n,list:t.checkoutList},expression:"{item: item, list:checkoutList}"}],key:n.param_name,on:{mouseenter:function(e){return t.mouseenter(r)},mouseleave:function(e){return t.mouseleave(r)}}},[e("span",[t._v(" "+t._s(n.param_zh_name)+" ")]),r===t.hoverActive?e("a-icon",{attrs:{type:"close"},on:{click:function(e){return t.deleteType(n,r)}}}):t._e()],1)})),0)])])])}),c=[],l=n("ade3"),d=n("2909"),p=(n("4de4"),n("a434"),n("2a86")),m=(r={name:"ColumnList",components:{CommonModal:p["a"]},props:{propretyList:{type:Array}},computed:{},data:function(){return{source:{title:"列目显示"},form:{name:""},loading:!1,gragList:[],hoverActive:"",checkoutList:[]}},created:function(){},mounted:function(){var t=this;this.$dragging.$on("dragged",(function(e){t.checkoutList=e.value.list,t.checkoutList.forEach((function(t,e){t.select_index=e}))}))}},Object(l["a"])(r,"computed",{clientList:function(){var t=this,e=this.propretyList.filter((function(e){return e.param_zh_name.indexOf(t.form.name)>=0}));return e}}),Object(l["a"])(r,"watch",{propretyList:{handler:function(){var t,e=this,n=this.propretyList.filter((function(t){return t.select_status})),r=n.filter((function(t){return t.select_index||0===t.select_index})),o=n.filter((function(t){return""===t.select_index}));r.forEach((function(t){e.checkoutList[t.select_index]=t})),(t=this.checkoutList).push.apply(t,Object(d["a"])(o)),this.checkoutList.forEach((function(t,e){t.select_index=e}))},deep:!0,immediate:!0}}),Object(l["a"])(r,"methods",{serviceOk:function(){this.$emit("serviceOk",this.propretyList)},deleteType:function(t,e){t.select_status=!1,t.select_index="",this.checkoutList.splice(e,1),this.checkoutList.forEach((function(t,e){t.select_index=e}))},mouseenter:function(t){this.hoverActive=t},mouseleave:function(){this.hoverActive=""}}),r),f=m,h=(n("be6a"),n("2877")),g=Object(h["a"])(f,u,c,!1,null,"af78bcbe",null),b=g.exports,y=n("ca00"),v={name:"UserDetails",components:{ColumnList:b},data:function(){return{visibleTags:!1,clientList:[],columns:[{title:"UID",dataIndex:"uid",key:"uid",ellipsis:!0},{title:"Name",dataIndex:"displayName",key:"displayName",width:"150px",ellipsis:!0,scopedSlots:{customRender:"displayName"}},{title:"Phone",dataIndex:"phone",key:"phone",ellipsis:!0},{title:"Email",dataIndex:"email",key:"email",ellipsis:!0},{title:"Extra info",dataIndex:"extraInfoVoList",key:"extraInfoVoList",scopedSlots:{customRender:"extraInfoVoList"},ellipsis:!0},{title:"Agent",dataIndex:"username",key:"username",scopedSlots:{customRender:"username"}},{title:"groupName",dataIndex:"groupName",key:"groupName",scopedSlots:{customRender:"groupName"},ellipsis:!0},{title:"createTime",dataIndex:"createTime",key:"createTime",scopedSlots:{customRender:"createTime"},ellipsis:!0}],pagination:{current:1,pageSize:10,total:0},downLoading:!1,tableLoading:!1,group_name:void 0,propretyList:[],record_id:""}},created:function(){this.init()},computed:{id:function(){return this.$route.query.id},time:function(){return this.$route.query.time}},methods:{init:function(){var t=this;this.tableLoading=!0;var e={contactsGroupId:this.id,currentPage:this.pagination.current,pageSize:this.pagination.pageSize};Object(s["d"])(e).then((function(e){var n,r;t.group_name=e.data.group_name,t.record_id=e.data.record_id,t.clientList=null===(n=e.data)||void 0===n||null===(r=n.records)||void 0===r?void 0:r.map((function(t,e){return Object(a["a"])(Object(a["a"])({},t),{},{key:e,operation:t})})),t.pagination.total=e.data.total})).catch((function(e){t.$message.error(e)})).finally((function(){t.tableLoading=!1}))},propretySelectFun:function(){var t=this;Object(s["m"])().then((function(e){var n;t.propretyList=null===(n=e.data)||void 0===n?void 0:n.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{select_status:Boolean(t.select_status)})})),t.getColumns(),t.init()})).catch((function(e){t.$message.error(e)}))},getColumns:function(){var t=[];this.propretyList.forEach((function(e){1==e.select_status&&(t[e.select_index]={title:e.param_zh_name,dataIndex:e.param_name,align:"center",width:150,key:e.param_name})})),this.columns=t},change:function(t){var e=t.current;this.pagination.current=e,this.init()},serviceOk:function(t){var e=this,n=t.map((function(t){return Object(a["a"])(Object(a["a"])({},t),{},{select_status:Number(t.select_status)})}));Object(s["n"])({user_property_list_select:n}).then((function(t){e.visibleTags=!1,e.propretySelectFun()})).catch((function(t){e.$message.error(t)}))},downloadUserFun:function(){var t=this;this.downLoading=!0;var e={group_id:this.id,record_id:this.record_id};Object(s["c"])(e).then((function(t){Object(y["b"])(t,".csv","分群用户详情")})).catch((function(e){t.$message.error(e)})).finally((function(){t.downLoading=!1}))}}},_=v,k=(n("ed0f"),Object(h["a"])(_,o,i,!1,null,"427a9176",null));e["default"]=k.exports},ed0f:function(t,e,n){"use strict";n("c4c6")}}]);